{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/onlineUpgrade/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/onlineUpgrade/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgdXBncmFkZUxpc3RBcGksCiAgdXBncmFkZVByb2dyZXNzQXBpLAogIHVwZ3JhZGVBZ3JlZW1lbnRBcGksCiAgdXBncmFkZVN0YXR1c0FwaSwKICB1cGdyYWRlTG9nTGlzdEFwaSwKICB1cGdyYWRlYWJsZUxpc3RBcGksCiAgZG93bmxvYWRBcGksCn0gZnJvbSAnQC9hcGkvc3lzdGVtJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgQWNjb3VudExvZ291dCB9IGZyb20gJ0AvYXBpL2FjY291bnQnOwppbXBvcnQgeyBnZXRDb29raWVzLHJlbW92ZUNvb2tpZXN9IGZyb20gJ0AvbGlicy91dGlsJzsKCmltcG9ydCBTZXR0aW5nIGZyb20gJ0Avc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc3lzdGVtVXBncmFkZWNsaWVudCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIFBhbmVsOiAnMScsCiAgICAgIGN1cnJlbnRUYWI6ICcxJywKICAgICAgZGVjbGFyYXRpb246IGZhbHNlLAogICAgICB1cGRhdGVNb2RhbDogZmFsc2UsCiAgICAgIG1vZGFsX2xvYWRpbmc6IGZhbHNlLAogICAgICBwZXJjZW50OiAwLAogICAgICBwYXJhbXM6IFtdLAogICAgICBhcnI6IFtdLAogICAgICBkeW5hbWljOiBmYWxzZSwKICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgdmVyc2lvbjogJycsCiAgICAgIGZvcmNlVmVyc2lvbjogJycsCiAgICAgIGhlYWRlckxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+ezu+e7n+WNh+e6pycsCiAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5Y2H57qn6K6w5b2VJywKICAgICAgICAgIHZhbHVlOiAyLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHVwZ3JhZGVMaXN0OiBbXSwKICAgICAgdXBncmFkZUxvZ0xpc3Q6IFtdLAogICAgICB1cGdyYWRlYWJsZUxpc3Q6IFtdLAogICAgICB1cGdyYWRlUHJvZ3Jlc3M6IHsKICAgICAgICBzcGVlZDogMCwKICAgICAgfSwKICAgICAgdXBncmFkZUFncmVlbWVudDogW10sCiAgICAgIHVwZ3JhZGVTdGF0dXM6IHt9LAogICAgICBkb3dubG9hZFN0YXR1czogbnVsbCwKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDE1LAogICAgICAvLyDlrprml7blmagKICAgICAgdGltZXI6IG51bGwsCiAgICAgIHBhcmFtc19rZXk6IHVuZGVmaW5lZCwKICAgICAgbmV3S2V5OiBudWxsLAogICAgICBzZXJ2aW9uU3RhdHVzOiBmYWxzZSwKICAgICAgY291bnQ6MAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLmdldFVwZ3JhZGVMaXN0KCk7CiAgICAvLyB0aGlzLmdldFVwZ3JhZGVMb2dMaXN0KCk7CiAgICAvLyB0aGlzLmdldHVwZ3JhZGVhYmxlTGlzdCgpOwogICAgLy8gaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtcykgewogICAgLy8gICB0aGlzLmdldFVwZ3JhZGVBZ3JlZW1lbnQoKTsKICAgIC8vIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CgogICAgdGhpcy5nZXRVcGdyYWRlU3RhdHVzKCk7CiAgICBhd2FpdCB0aGlzLmdldFVwZ3JhZGVMaXN0KCk7CiAgICBhd2FpdCB0aGlzLmdldHVwZ3JhZGVhYmxlTGlzdCgpOwogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVwZ3JhZGUudG9nZ2xlU3RhdHVzKSB7CiAgICAgIHRoaXMuc2VydmlvblN0YXR1cyA9IHRydWU7CiAgICAgIHRoaXMuZ2V0VXBncmFkZUFncmVlbWVudCgpOwogICAgfQogICAgLy8gdGhpcy5jb21wYXJlKCk7CiAgfSwKICB3YXRjaDogewogICAgJ3VwZ3JhZGVQcm9ncmVzcy5zcGVlZCc6IHsKICAgICAgaGFuZGxlcihuZXdWYWwsIG9sZFZhbCkgewogICAgICAgIGlmIChuZXdWYWwgPT09ICcxMDAuMCcpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICAgIC8vICd0aGlzLmRvd25sb2FkU3RhdHVzJzogewogICAgLy8gICBoYW5kbGVyKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAvLyAgICAgaWYgKG5ld1ZhbCA9ICcyMDAnKSB7CiAgICAvLyAgICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAvLyAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUmVhY2hCb3R0b20oKXsKICAgICAgaWYodGhpcy5jb3VudCA9PT0gdGhpcy51cGdyYWRlTG9nTGlzdC5sZW5ndGgpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+aaguaXoOabtOWkmuWNh+e6p+iusOW9lScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRVcGdyYWRlTG9nTGlzdCgpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xpY2soKSB7CiAgICAgIHRoaXMucGFnZSA9IDEKICAgICAgaWYodGhpcy5jdXJyZW50VGFiID09IDEpewogICAgICAgIHRoaXMuZ2V0dXBncmFkZWFibGVMaXN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGdyYWRlTG9nTGlzdCA9IFtdCiAgICAgICAgdGhpcy5nZXRVcGdyYWRlTG9nTGlzdCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5Y2H57qn5YiX6KGoCiAgICBhc3luYyBnZXRVcGdyYWRlTGlzdCgpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICB9OwogICAgICBsZXQgcmVzID0gYXdhaXQgdXBncmFkZUxpc3RBcGkoZGF0YSk7CiAgICAgIHRoaXMudXBncmFkZUxpc3QgPSByZXMuZGF0YS5saXN0OwogICAgICB0aGlzLnVwZ3JhZGVMaXN0ID0gcmVzLmRhdGEubGlzdDsKICAgIH0sCiAgICAvLyDljYfnuqforrDlvZUKICAgIGdldFVwZ3JhZGVMb2dMaXN0KCkgewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IHRoaXMubGltaXQsCiAgICAgIH07CiAgICAgIHVwZ3JhZGVMb2dMaXN0QXBpKGRhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy51cGdyYWRlTG9nTGlzdCA9IFsuLi50aGlzLnVwZ3JhZGVMb2dMaXN0LC4uLnJlcy5kYXRhLmxpc3RdCiAgICAgICAgICB0aGlzLmNvdW50ID0gcmVzLmRhdGEuY291bnQKICAgICAgICAgIGlmKHRoaXMudXBncmFkZUxvZ0xpc3QubGVuZ3RoIDwgdGhpcy5jb3VudCl7CiAgICAgICAgICAgIHRoaXMucGFnZSsrCiAgICAgICAgICB9CiAgICAgICAgICBpZih0aGlzLmNvdW50ID09PSB0aGlzLnVwZ3JhZGVMb2dMaXN0Lmxlbmd0aCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pqC5peg5pu05aSa5Y2H57qn6K6w5b2VJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldFVwZ3JhZGVMb2dMaXN0KCk7CiAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlj6/ljYfnuqfliJfooagKICAgIGFzeW5jIGdldHVwZ3JhZGVhYmxlTGlzdCgpIHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IHVwZ3JhZGVhYmxlTGlzdEFwaSgpOwogICAgICB0aGlzLnVwZ3JhZGVhYmxlTGlzdCA9IHJlcy5kYXRhOwogICAgICBsZXQgZmlyc3RWZXIgPSByZXMuZGF0YVswXQogICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS51cGdyYWRlLnRvZ2dsZVN0YXR1cyB8fCB0aGlzLnVwZ3JhZGVTdGF0dXMuZm9yY2VfcmVtaW5kZXIpewogICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YS5maW5kKGl0ZW0gPT4gaXRlbS5mb3JjZV9yZW1pbmRlciA9PT0gMSkKICAgICAgICB0aGlzLm5ld0tleSA9IGRhdGEucGFja2FnZV9rZXk7CiAgICAgICAgdGhpcy5mb3JjZVZlcnNpb24gPSBkYXRhLmZpcnN0X3ZlcnNpb24gKyAnLicgKyBkYXRhLnNlY29uZF92ZXJzaW9uICsgJy4nICsgZGF0YS50aGlyZF92ZXJzaW9uICsgJy4nICsgZGF0YS5mb3VydGhfdmVyc2lvbgogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnBhcmFtc19rZXkgPSB0aGlzLnVwZ3JhZGVhYmxlTGlzdFswXS5wYWNrYWdlX2tleQogICAgICAgIHRoaXMuZm9yY2VWZXJzaW9uID0gZmlyc3RWZXIuZmlyc3RfdmVyc2lvbiArICcuJyArIGZpcnN0VmVyLnNlY29uZF92ZXJzaW9uICsgJy4nICsgZmlyc3RWZXIudGhpcmRfdmVyc2lvbiArICcuJyArIGZpcnN0VmVyLmZvdXJ0aF92ZXJzaW9uCiAgICAgIH0KCgogICAgICAvLyBhcnIuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAvLyAgIHRoaXMuJHNldCgKICAgICAgLy8gICAgIGl0ZW0sCiAgICAgIC8vICAgICAnc2VydmlvbicsCiAgICAgIC8vICAgICBpdGVtLmZpcnN0X3ZlcnNpb24gKyAnLicgKyBpdGVtLnNlY29uZF92ZXJzaW9uICsgJy4nICsgaXRlbS50aGlyZF92ZXJzaW9uICsgJy4nICsgaXRlbS5mb3VydGhfdmVyc2lvbiwKICAgICAgLy8gICApOwogICAgICAvLyB9KTsKCiAgICAgIC8vIGxldCBkYXRhID0gW107CiAgICAgIC8vIGFyci5tYXAoKGVsZSkgPT4gewogICAgICAvLyAgIGRhdGEucHVzaChlbGUuc2Vydmlvbik7CiAgICAgIC8vIH0pOwogICAgICAvLyAvLyDniYjmnKzlj7fmjpLluo8KICAgICAgLy8gZnVuY3Rpb24gc29ydFZlcnNpb24obGlzdCkgewogICAgICAvLyAgIHJldHVybiBsaXN0LnNvcnQoKHZlcnNpb24xLCB2ZXJzaW9uMikgPT4gewogICAgICAvLyAgICAgY29uc3QgYXJyMSA9IHZlcnNpb24xLnNwbGl0KCcuJykubWFwKChlKSA9PiBlICogMSk7CiAgICAgIC8vICAgICBjb25zdCBhcnIyID0gdmVyc2lvbjIuc3BsaXQoJy4nKS5tYXAoKGUpID0+IGUgKiAxKTsKICAgICAgLy8gICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGFycjEubGVuZ3RoLCBhcnIyLmxlbmd0aCk7CiAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgICAgIGlmICgoYXJyMVtpXSB8fCAwKSA+IChhcnIyW2ldIHx8IDApKSByZXR1cm4gMTsKICAgICAgLy8gICAgICAgaWYgKChhcnIxW2ldIHx8IDApIDwgKGFycjJbaV0gfHwgMCkpIHJldHVybiAtMTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIHJldHVybiAwOwogICAgICAvLyAgIH0pOwogICAgICAvLyB9CiAgICAgIC8vIHRoaXMuZm9yY2VWZXJzaW9uID0gZGF0YVswXTsKICAgICAgLy8gdGhpcy5wYXJhbXMubWFwKChpdGVtKSA9PiB7CiAgICAgIC8vICAgaWYgKGl0ZW0uc2VydmlvbiA9PSBkYXRhW2RhdGEubGVuZ3RoIC0gMV0pIHsKICAgICAgLy8gICAgIHRoaXMubmV3S2V5ID0gaXRlbS5wYWNrYWdlX2tleTsKICAgICAgLy8gICB9CiAgICAgIC8vIH0pOwogICAgfSwKICAgIC8vIOS4i+i9veWNh+e6p+WMhQogICAgZ2V0ZG93bmxvYWQoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51cGdyYWRlLnRvZ2dsZVN0YXR1cyB8fCB0aGlzLnVwZ3JhZGVTdGF0dXMuZm9yY2VfcmVtaW5kZXIpIHsKICAgICAgICB0aGlzLnBhcmFtc19rZXkgPSB0aGlzLm5ld0tleTsKICAgICAgfQogICAgICBkb3dubG9hZEFwaSh0aGlzLnBhcmFtc19rZXkpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgLy8gdGhpcy5kb3dubG9hZFN0YXR1cyA9IHJlcy5zdGF0dXM7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgaWYgKHRoaXMudXBncmFkZVByb2dyZXNzLnNwZWVkICE9PSAnMTAwLjAnKSB7CiAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VXBncmFkZVByb2dyZXNzKCk7CiAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICB9LCA1MDAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIvovb3nu4jmraInKTsKICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWwgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZEZpbGUodXJsKXsKICAgICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7CiAgICB9LAoKICAgIC8vIOWNh+e6p+i/m+W6pgogICAgZ2V0VXBncmFkZVByb2dyZXNzKCkgewogICAgICB1cGdyYWRlUHJvZ3Jlc3NBcGkoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudXBncmFkZVByb2dyZXNzID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmRvd25sb2FkU3RhdHVzID0gcmVzLnN0YXR1czsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDljYfnuqfljY/orq4KICAgIGdldFVwZ3JhZGVBZ3JlZW1lbnQoKSB7CiAgICAgIHVwZ3JhZGVBZ3JlZW1lbnRBcGkoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudXBncmFkZUFncmVlbWVudCA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy5kZWNsYXJhdGlvbiA9IHRydWU7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDljYfnuqfnirbmgIEKICAgIGdldFVwZ3JhZGVTdGF0dXMoKSB7CiAgICAgIHVwZ3JhZGVTdGF0dXNBcGkoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudXBncmFkZVN0YXR1cyA9IHJlcy5kYXRhOwogICAgICAgICAgaWYocmVzLmRhdGEuZm9yY2VfcmVtaW5kZXIpewogICAgICAgICAgICB0aGlzLmRlY2xhcmF0aW9uID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmdldFVwZ3JhZGVBZ3JlZW1lbnQoKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g56uL5Y2z5pu05pawCiAgICB1cGRhdGUoaXRlbSkgewogICAgICB0aGlzLmRlY2xhcmF0aW9uID0gdHJ1ZTsKICAgICAgaWYgKGl0ZW0gJiYgdGhpcy4kc3RvcmUuc3RhdGUudXBncmFkZS50b2dnbGVTdGF0dXMgPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnBhcmFtc19rZXkgPSBpdGVtLnBhcmFtc19rZXk7CiAgICAgIH0KICAgICAgLy8gdGhpcy52ZXJzaW9uID0gaXRlbS5maXJzdF92ZXJzaW9uICsgIi4iICsgaXRlbS5zZWNvbmRfdmVyc2lvbiArICIuIiArIGl0ZW0udGhpcmRfdmVyc2lvbiArICIuIiArIGl0ZW0uZm91cnRoX3ZlcnNpb247CiAgICAgIHRoaXMuZ2V0VXBncmFkZUFncmVlbWVudCgpOwogICAgfSwKICAgIC8vIOavlOi+g+ebuOWQjOeJiOacrOWPtwogICAgY29tcGFyZSgpIHsKICAgICAgdGhpcy51cGdyYWRlTGlzdC5tYXAoKGVsZSwgaSkgPT4gewogICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgIHRoaXMudXBncmFkZUxpc3RbaV0sCiAgICAgICAgICAnbW4nLAogICAgICAgICAgZWxlLmZpcnN0X3ZlcnNpb24gKyBlbGUuc2Vjb25kX3ZlcnNpb24gKyBlbGUudGhpcmRfdmVyc2lvbiArIGVsZS5mb3VydGhfdmVyc2lvbiwKICAgICAgICApOwoKICAgICAgICB0aGlzLnVwZ3JhZGVhYmxlTGlzdC5tYXAoKGl0ZW0sIGkpID0+IHsKICAgICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgICAgdGhpcy51cGdyYWRlYWJsZUxpc3RbaV0sCiAgICAgICAgICAgICdtbicsCiAgICAgICAgICAgIGl0ZW0uZmlyc3RfdmVyc2lvbiArIGl0ZW0uc2Vjb25kX3ZlcnNpb24gKyBpdGVtLnRoaXJkX3ZlcnNpb24gKyBpdGVtLmZvdXJ0aF92ZXJzaW9uLAogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgICBpZiAodGhpcy51cGdyYWRlTGlzdFtpXS5tbiA9PSB0aGlzLnVwZ3JhZGVhYmxlTGlzdFtpXS5tbikgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXBncmFkZUxpc3RbaV0sICdpbmRleG4nLCB0cnVlKTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnVwZ3JhZGVMaXN0W2ldLCAncGFyYW1zX2tleScsIHRoaXMudXBncmFkZWFibGVMaXN0W2ldLnBhY2thZ2Vfa2V5KTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnVwZ3JhZGVhYmxlTGlzdFtpXSwgJ2luZGV4bicsIHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5ZCM5oSPCiAgICBhZ3JlZSgpIHsKICAgICAgdGhpcy5kZWNsYXJhdGlvbiA9IGZhbHNlOwogICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gdHJ1ZTsKICAgICAgdGhpcy5nZXRkb3dubG9hZCgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZ3JhZGUvVE9HR0xFX1NUQVRVUyIsZmFsc2UpCiAgICB9LAogICAgcmVqZWN0KCl7CiAgICAgIHRoaXMuZGVjbGFyYXRpb24gPSBmYWxzZQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZ3JhZGUvVE9HR0xFX1NUQVRVUyIsZmFsc2UpCiAgICB9LAogICAgYmFjaygpIHsKICAgICAgdGhpcy51cGRhdGVNb2RhbCA9IGZhbHNlOwogICAgICAvLyB0aGlzLmdldFVwZ3JhZGVMaXN0KCk7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgIEFjY291bnRMb2dvdXQoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5oKo5bey5oiQ5Yqf6YCA5Ye6Jyk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLiRyb3V0ZVByb1N0ciArICcvbG9naW4nKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgcmVtb3ZlQ29va2llcygndG9rZW4nKTsKICAgICAgICAgIHJlbW92ZUNvb2tpZXMoJ2V4cGlyZXNfdGltZScpOwogICAgICAgICAgcmVtb3ZlQ29va2llcygndXVpZCcpOwogICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4ge30pOwogICAgfSwKICAgIGJhY2tTdXJlKCkgewogICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICB9LAogICAgLy8g5a+85Ye65aSH5Lu95paH5Lu2CiAgICBleHBvcnRzKGl0ZW0pIHsKICAgICAgbGV0IG5hbWUgPQogICAgICAgIGl0ZW0udGl0bGUgKwogICAgICAgICd2JyArCiAgICAgICAgaXRlbS5maXJzdF92ZXJzaW9uICsKICAgICAgICAnLicgKwogICAgICAgIGl0ZW0uc2Vjb25kX3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS50aGlyZF92ZXJzaW9uICsKICAgICAgICAnLicgKwogICAgICAgIGl0ZW0uZm91cnRoX3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS51cGdyYWRlX3RpbWU7CiAgICAgIGxldCBocmVmID0gU2V0dGluZy5hcGlCYXNlVVJMICsgYC9zeXN0ZW0vdXBncmFkZV9leHBvcnQvJHtpdGVtLmlkfS9maWxlYDsKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgdXJsOiBocmVmLAogICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpLXphdGlvbic6ICdCZWFyZXIgJyArIGdldENvb2tpZXMoJ3Rva2VuJyksCiAgICAgICAgfSwKICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2NoYXJzZXQ9VVRGLTgnLAogICAgICAgIH0pOwogICAgICAgIHZhciBkb3dubG9hZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgLy8g5LiL6L2955qE5paH5Lu25ZCNCiAgICAgICAgZG93bmxvYWRFbGVtZW50LmRvd25sb2FkID0gYCR7bmFtZX0uemlwYDsKICAgICAgICAvLyDliJvlu7rkuIvovb3nmoTpk77mjqUKICAgICAgICBkb3dubG9hZEVsZW1lbnQuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIC8vIOeCueWHu+S4i+i9vQogICAgICAgIGRvd25sb2FkRWxlbWVudC5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWRFbGVtZW50KTsKICAgICAgICAvLyDkuIvovb3lrozmiJDnp7vpmaTlhYPntKAKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvd25sb2FkRWxlbWVudCk7CiAgICAgICAgLy8g6YeK5pS+5o6JYmxvYuWvueixoQogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGRvd25sb2FkRWxlbWVudC5ocmVmKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRG93bmxvYWQoaXRlbSkgewogICAgICBsZXQgbmFtZSA9CiAgICAgICAgaXRlbS50aXRsZSArCiAgICAgICAgJ3YnICsKICAgICAgICBpdGVtLmZpcnN0X3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS5zZWNvbmRfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLnRoaXJkX3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS5mb3VydGhfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLnVwZ3JhZGVfdGltZTsKICAgICAgbGV0IGhyZWYgPSBTZXR0aW5nLmFwaUJhc2VVUkwgKyBgL3N5c3RlbS91cGdyYWRlX2V4cG9ydC8ke2l0ZW0uaWR9L2RhdGFgOwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6IGhyZWYsCiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcmktemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0Q29va2llcygndG9rZW4nKSwKICAgICAgICB9LAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07Y2hhcnNldD1VVEYtOCcsCiAgICAgICAgfSk7CiAgICAgICAgdmFyIGRvd25sb2FkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAvLyDkuIvovb3nmoTmlofku7blkI0KICAgICAgICBkb3dubG9hZEVsZW1lbnQuZG93bmxvYWQgPSBgJHtuYW1lfS5nemA7CiAgICAgICAgLy8g5Yib5bu65LiL6L2955qE6ZO+5o6lCiAgICAgICAgZG93bmxvYWRFbGVtZW50LmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAvLyDngrnlh7vkuIvovb0KICAgICAgICBkb3dubG9hZEVsZW1lbnQuY2xpY2soKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkRWxlbWVudCk7CiAgICAgICAgLy8g5LiL6L295a6M5oiQ56e76Zmk5YWD57SgCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkb3dubG9hZEVsZW1lbnQpOwogICAgICAgIC8vIOmHiuaUvuaOiWJsb2Llr7nosaEKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChkb3dubG9hZEVsZW1lbnQuaHJlZik7CiAgICAgIH0pOwogICAgfSwKICAgIHF1ZWFyeUV2ZWFyKGlkLCBpbmRleCkgewogICAgICB0aGlzLmR5bmFtaWMgPSBpbmRleDsKICAgIH0sCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICAvL+mUgOavgQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/system/onlineUpgrade","sourcesContent":["<template>\n<div class=\"upgrade\">\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt\">\n      <div class=\"header\">\n        <div>当前版本<span class=\"v\"></span><span class=\"num\">{{$store.state.userInfo.version}}</span></div>\n        <div class=\"info title\">\n          更新说明：\n          <span v-if=\"upgradeStatus.status != 1\">已升级至最新版本，无需更新</span>\n        <ul v-if=\"upgradeStatus.status == 1\">\n          <li>{{upgradeStatus.title}}</li>\n        </ul>\n        </div>\n        <el-button v-if=\"currentTab == 1 && upgradeStatus.status == 1\" type=\"primary\" class=\"primary btn update\" @click=\"update()\">立即更新</el-button>\n      </div>\n    </el-card>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt\">\n          <el-tabs v-model=\"currentTab\" @tab-click=\"handleClick\">\n            <el-tab-pane :label=\"item.label\" :name=\"item.value.toString()\" v-for=\"item in headerList\" :key=\"item.id\" ></el-tab-pane>\n          </el-tabs>\n        <div class=\"contentTime\" v-if=\"currentTab == 1\">\n          <div class=\"acea-row row-top on\" @mouseenter=\"quearyEvear(item.id,index)\" v-for=\"(item, index) in upgradeList\" :key=\"index\" :class=\"{active:index==dynamic}\">\n              <div class=\"time\">{{item.release_time}}</div>\n              <el-timeline class=\"list\">\n                  <el-timeline-item>\n                      <!-- <Icon :type=\"index==0 ? 'md-radio-button-on' : 'md-radio-button-off'\" slot=\"dot\"/> -->\n                      <el-collapse>\n                          <el-collapse-item >\n                            <template slot=\"title\">\n                              {{item.title}} v{{item.first_version}}.{{item.second_version}}.{{item.third_version}}.{{item.fourth_version}}<i class=\"el-icon-arrow-down\" />\n                            </template>\n                            <p class=\"info\">\n                              <ul style=\"white-space: pre-wrap;\">\n                                <li v-html=\"item.content\"></li>\n                              </ul>\n                            </p>\n                          </el-collapse-item>\n                      </el-collapse>\n                  </el-timeline-item>\n                  <el-button v-if=\"item.client_package_link\" type=\"success\"  class=\"primary btn\" @click=\"downloadFile(item.client_package_link)\">移动端源码</el-button>\n                  <el-button v-if=\"item.pc_package_link\" type=\"primary\" class=\"primary btn1\" @click=\"downloadFile(item.pc_package_link)\">PC端源码</el-button>\n              </el-timeline>\n          </div>\n        </div>\n        <div  v-if=\"currentTab == 2\"  height=\"550\">\n          <div class=\"contentTime\" >\n              <div class=\"acea-row row-top off\" @mouseenter=\"quearyEvear(item.id,index)\" v-for=\"(item,index) in upgradeLogList\" :key=\"index\" :class=\"{active:index==dynamic}\">\n                  <div class=\"time\">\n                      <div v-if=\"index == 0\">最近更新</div>\n                      <div>{{item.upgrade_time}}</div>\n                    </div>\n                  <el-timeline class=\"list\">\n                      <el-timeline-item>\n                          <Icon :type=\"index==0 ? 'md-radio-button-on' : 'md-radio-button-off'\" slot=\"dot\"/>\n                          <el-collapse>\n                              <el-collapse-item>\n                                <template slot=\"title\">\n                                  {{item.title}} v{{item.first_version}}.{{item.second_version}}.{{item.third_version}}.{{item.fourth_version}}<i type=\"el-icon-arrow-down\" />\n                                </template>\n                                <p class=\"info\">\n                                  <ul style=\"white-space: pre-wrap;\">\n                                    <li v-html=\"item.content\"></li>\n                                  </ul>\n                                </p>\n                              </el-collapse-item>\n                          </el-collapse>\n                      </el-timeline-item>\n                  </el-timeline>\n              </div>\n          </div>\n        </div>\n    </el-card>\n    <!-- 免责声明 -->\n    <el-dialog :visible.sync=\"declaration\"\n      width=\"470px\"\n      custom-clas=\"vertical-center-modal\"\n      :show-close=\"true\"\n      :close-on-click-modal=\"false\"\n    >\n        <p slot=\"header\" class=\"header-modal\">\n          <span>{{upgradeAgreement.title}}</span>\n        </p>\n        <div class=\"describe\">\n          <p v-html=\"upgradeAgreement.content\"></p>\n        </div>\n         <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"reject\">拒 绝</el-button>\n          <el-button type=\"primary\" @click=\"agree\">同 意</el-button>\n      </span>\n    </el-dialog>\n    <!-- 升级 -->\n    <el-dialog v-model=\"updateModal\" width=\"470px\"  custom-clas=\"vertical-center-modal\" :show-close=\"true\"\n      :close-on-click-modal=\"false\">\n        <p slot=\"header\" class=\"header-modal2\">\n          <span >升级至v{{forceVersion}}</span>\n        </p>\n        <div class=\"describe\" v-if=\"upgradeProgress.speed != '100.0' || this.downloadStatus !='200'\">\n          <i-circle\n            :size=\"140\"\n            :trail-width=\"4\"\n            :stroke-width=\"5\"\n            :percent=\"Number(upgradeProgress.speed)\"\n            stroke-linecap=\"square\"\n            stroke-color=\"#43a3fb\">\n            <div class=\"demo-i-circle-custom\">\n                <p>{{upgradeProgress.tip || '升级中'}}</p>\n            </div>\n          </i-circle>\n          <div class=\"proportion\">{{!upgradeProgress.speed?'':upgradeProgress.speed+'%'}}</div>\n          <div class=\"wait\">正在更新，请耐心等候～</div>\n        </div>\n        <div slot=\"footer\">\n          <!-- <div v-if=\"upgradeProgress.speed == '100.0'\"><el-button class=\"back\" type=\"primary\" shape=\"circle\" @click=\"updateModal = false\">确认</el-button></div> -->\n        </div>\n        <div v-if=\"upgradeProgress.speed == '100.0'\" class=\"describe\">\n          <el-progress type=\"circle\" :percentage=\"100\" status=\"success\"></el-progress>\n          <div class=\"success\">升级成功</div>\n        </div>\n        <div v-if=\"upgradeProgress.speed == '100.0'\" slot=\"footer\" class=\"footer2\">\n          <el-button class=\"confirm\" type=\"primary\" shape=\"circle\" @click=\"back()\">确认</el-button>\n          <!-- <div><el-button class=\"back\" shape=\"circle\" @click=\"backSure()\">返回</el-button></div> -->\n        </div>\n        <span v-if=\"upgradeProgress.speed == '100.0'\" slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"cancel\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"back\">确 认</el-button>\n        </span>\n    </el-dialog>\n</div>\n</template>\n\n<script>\nimport {\n  upgradeListApi,\n  upgradeProgressApi,\n  upgradeAgreementApi,\n  upgradeStatusApi,\n  upgradeLogListApi,\n  upgradeableListApi,\n  downloadApi,\n} from '@/api/system';\nimport axios from 'axios';\nimport { AccountLogout } from '@/api/account';\nimport { getCookies,removeCookies} from '@/libs/util';\n\nimport Setting from '@/setting';\nexport default {\n  name: 'systemUpgradeclient',\n  data() {\n    return {\n      Panel: '1',\n      currentTab: '1',\n      declaration: false,\n      updateModal: false,\n      modal_loading: false,\n      percent: 0,\n      params: [],\n      arr: [],\n      dynamic: false,\n      status: false,\n      version: '',\n      forceVersion: '',\n      headerList: [\n        {\n          label: '系统升级',\n          value: 1,\n        },\n        {\n          label: '升级记录',\n          value: 2,\n        },\n      ],\n      upgradeList: [],\n      upgradeLogList: [],\n      upgradeableList: [],\n      upgradeProgress: {\n        speed: 0,\n      },\n      upgradeAgreement: [],\n      upgradeStatus: {},\n      downloadStatus: null,\n      page: 1,\n      limit: 15,\n      // 定时器\n      timer: null,\n      params_key: undefined,\n      newKey: null,\n      servionStatus: false,\n      count:0\n    };\n  },\n  created() {\n    // this.getUpgradeList();\n    // this.getUpgradeLogList();\n    // this.getupgradeableList();\n    // if (this.$route.params.items) {\n    //   this.getUpgradeAgreement();\n    // }\n  },\n  async mounted() {\n\n    this.getUpgradeStatus();\n    await this.getUpgradeList();\n    await this.getupgradeableList();\n    if (this.$store.state.upgrade.toggleStatus) {\n      this.servionStatus = true;\n      this.getUpgradeAgreement();\n    }\n    // this.compare();\n  },\n  watch: {\n    'upgradeProgress.speed': {\n      handler(newVal, oldVal) {\n        if (newVal === '100.0') {\n          clearInterval(this.timer);\n        }\n      },\n    },\n    // 'this.downloadStatus': {\n    //   handler(newVal, oldVal) {\n    //     if (newVal = '200') {\n    //       this.updateModal = false;\n    //       clearInterval(this.timer);\n    //     }\n    //   }\n    // }\n  },\n  methods: {\n    handleReachBottom(){\n      if(this.count === this.upgradeLogList.length) {\n        this.$message.warning('暂无更多升级记录')\n      } else {\n        this.getUpgradeLogList();\n      }\n    },\n    handleClick() {\n      this.page = 1\n      if(this.currentTab == 1){\n        this.getupgradeableList();\n      } else {\n        this.upgradeLogList = []\n        this.getUpgradeLogList();\n      }\n    },\n    // 升级列表\n    async getUpgradeList() {\n      let data = {\n        page: this.page,\n        limit: this.limit,\n      };\n      let res = await upgradeListApi(data);\n      this.upgradeList = res.data.list;\n      this.upgradeList = res.data.list;\n    },\n    // 升级记录\n    getUpgradeLogList() {\n      let data = {\n        page: this.page,\n        limit: this.limit,\n      };\n      upgradeLogListApi(data)\n        .then((res) => {\n          this.upgradeLogList = [...this.upgradeLogList,...res.data.list]\n          this.count = res.data.count\n          if(this.upgradeLogList.length < this.count){\n            this.page++\n          }\n          if(this.count === this.upgradeLogList.length) {\n        this.$message.warning('暂无更多升级记录')\n      } else {\n        this.getUpgradeLogList();\n      }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n\n    // 可升级列表\n    async getupgradeableList() {\n      let res = await upgradeableListApi();\n      this.upgradeableList = res.data;\n      let firstVer = res.data[0]\n      if(this.$store.state.upgrade.toggleStatus || this.upgradeStatus.force_reminder){\n        const data = res.data.find(item => item.force_reminder === 1)\n        this.newKey = data.package_key;\n        this.forceVersion = data.first_version + '.' + data.second_version + '.' + data.third_version + '.' + data.fourth_version\n      }else{\n        this.params_key = this.upgradeableList[0].package_key\n        this.forceVersion = firstVer.first_version + '.' + firstVer.second_version + '.' + firstVer.third_version + '.' + firstVer.fourth_version\n      }\n\n\n      // arr.forEach((item) => {\n      //   this.$set(\n      //     item,\n      //     'servion',\n      //     item.first_version + '.' + item.second_version + '.' + item.third_version + '.' + item.fourth_version,\n      //   );\n      // });\n\n      // let data = [];\n      // arr.map((ele) => {\n      //   data.push(ele.servion);\n      // });\n      // // 版本号排序\n      // function sortVersion(list) {\n      //   return list.sort((version1, version2) => {\n      //     const arr1 = version1.split('.').map((e) => e * 1);\n      //     const arr2 = version2.split('.').map((e) => e * 1);\n      //     const length = Math.max(arr1.length, arr2.length);\n      //     for (let i = 0; i < length; i++) {\n      //       if ((arr1[i] || 0) > (arr2[i] || 0)) return 1;\n      //       if ((arr1[i] || 0) < (arr2[i] || 0)) return -1;\n      //     }\n      //     return 0;\n      //   });\n      // }\n      // this.forceVersion = data[0];\n      // this.params.map((item) => {\n      //   if (item.servion == data[data.length - 1]) {\n      //     this.newKey = item.package_key;\n      //   }\n      // });\n    },\n    // 下载升级包\n    getdownload() {\n      if (this.$store.state.upgrade.toggleStatus || this.upgradeStatus.force_reminder) {\n        this.params_key = this.newKey;\n      }\n      downloadApi(this.params_key)\n        .then((res) => {\n          // this.downloadStatus = res.status;\n          if (res.status == 200) {\n            if (this.upgradeProgress.speed !== '100.0') {\n              this.timer = setInterval(() => {\n                setTimeout(() => {\n                    this.getUpgradeProgress();\n                }, 0);\n              }, 5000);\n            } else {\n              clearInterval(this.timer);\n              this.updateModal = false;\n            }\n          } else {\n            this.updateModal = false;\n          }\n        })\n        .catch((err) => {\n          clearInterval(this.timer);\n          this.$message.error('下载终止');\n          this.updateModal = false;\n        });\n    },\n    downloadFile(url){\n      window.open(url, '_blank');\n    },\n\n    // 升级进度\n    getUpgradeProgress() {\n      upgradeProgressApi()\n        .then((res) => {\n          this.upgradeProgress = res.data;\n          this.downloadStatus = res.status;\n        })\n        .catch((res) => {\n          clearInterval(this.timer);\n          this.$message.error(res.msg);\n        });\n    },\n    // 升级协议\n    getUpgradeAgreement() {\n      upgradeAgreementApi()\n        .then((res) => {\n          this.upgradeAgreement = res.data;\n          this.declaration = true;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 升级状态\n    getUpgradeStatus() {\n      upgradeStatusApi()\n        .then((res) => {\n          this.upgradeStatus = res.data;\n          if(res.data.force_reminder){\n            this.declaration = true\n            this.getUpgradeAgreement()\n          }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 立即更新\n    update(item) {\n      this.declaration = true;\n      if (item && this.$store.state.upgrade.toggleStatus == false) {\n        this.params_key = item.params_key;\n      }\n      // this.version = item.first_version + \".\" + item.second_version + \".\" + item.third_version + \".\" + item.fourth_version;\n      this.getUpgradeAgreement();\n    },\n    // 比较相同版本号\n    compare() {\n      this.upgradeList.map((ele, i) => {\n        this.$set(\n          this.upgradeList[i],\n          'mn',\n          ele.first_version + ele.second_version + ele.third_version + ele.fourth_version,\n        );\n\n        this.upgradeableList.map((item, i) => {\n          this.$set(\n            this.upgradeableList[i],\n            'mn',\n            item.first_version + item.second_version + item.third_version + item.fourth_version,\n          );\n        });\n        if (this.upgradeList[i].mn == this.upgradeableList[i].mn) {\n          this.$set(this.upgradeList[i], 'indexn', true);\n          this.$set(this.upgradeList[i], 'params_key', this.upgradeableList[i].package_key);\n          this.$set(this.upgradeableList[i], 'indexn', true);\n        }\n      });\n    },\n    // 同意\n    agree() {\n      this.declaration = false;\n      this.updateModal = true;\n      this.getdownload();\n      this.$store.commit(\"upgrade/TOGGLE_STATUS\",false)\n    },\n    reject(){\n      this.declaration = false\n      this.$store.commit(\"upgrade/TOGGLE_STATUS\",false)\n    },\n    back() {\n      this.updateModal = false;\n      // this.getUpgradeList();\n      clearInterval(this.timer);\n      AccountLogout()\n        .then((res) => {\n          this.$message.success('您已成功退出');\n          this.$router.replace(this.$routeProStr + '/login');\n          localStorage.clear();\n          removeCookies('token');\n          removeCookies('expires_time');\n          removeCookies('uuid');\n          // window.location.reload()\n        })\n        .catch((res) => {});\n    },\n    backSure() {\n      this.updateModal = false;\n      clearInterval(this.timer);\n    },\n    cancel() {\n      this.updateModal = false;\n      clearInterval(this.timer);\n    },\n    // 导出备份文件\n    exports(item) {\n      let name =\n        item.title +\n        'v' +\n        item.first_version +\n        '.' +\n        item.second_version +\n        '.' +\n        item.third_version +\n        '.' +\n        item.fourth_version +\n        '.' +\n        item.upgrade_time;\n      let href = Setting.apiBaseURL + `/system/upgrade_export/${item.id}/file`;\n      axios({\n        method: 'get',\n        url: href,\n        responseType: 'blob',\n        headers: {\n          'Authori-zation': 'Bearer ' + getCookies('token'),\n        },\n      }).then((res) => {\n        var blob = new Blob([res.data], {\n          type: 'application/octet-stream;charset=UTF-8',\n        });\n        var downloadElement = document.createElement('a');\n        // 下载的文件名\n        downloadElement.download = `${name}.zip`;\n        // 创建下载的链接\n        downloadElement.href = window.URL.createObjectURL(blob);\n        // 点击下载\n        downloadElement.click();\n        document.body.appendChild(downloadElement);\n        // 下载完成移除元素\n        document.body.removeChild(downloadElement);\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(downloadElement.href);\n      });\n    },\n    handleDownload(item) {\n      let name =\n        item.title +\n        'v' +\n        item.first_version +\n        '.' +\n        item.second_version +\n        '.' +\n        item.third_version +\n        '.' +\n        item.fourth_version +\n        '.' +\n        item.upgrade_time;\n      let href = Setting.apiBaseURL + `/system/upgrade_export/${item.id}/data`;\n      axios({\n        method: 'get',\n        url: href,\n        responseType: 'blob',\n        headers: {\n          'Authori-zation': 'Bearer ' + getCookies('token'),\n        },\n      }).then((res) => {\n        var blob = new Blob([res.data], {\n          type: 'application/octet-stream;charset=UTF-8',\n        });\n        var downloadElement = document.createElement('a');\n        // 下载的文件名\n        downloadElement.download = `${name}.gz`;\n        // 创建下载的链接\n        downloadElement.href = window.URL.createObjectURL(blob);\n        // 点击下载\n        downloadElement.click();\n        document.body.appendChild(downloadElement);\n        // 下载完成移除元素\n        document.body.removeChild(downloadElement);\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(downloadElement.href);\n      });\n    },\n    quearyEvear(id, index) {\n      this.dynamic = index;\n    },\n  },\n  destroyed() {\n    //销毁\n    clearInterval(this.timer);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.active {\n  padding: 6px 0;\n  // background-color: #eee !important;\n}\n\n.active .ivu-collapse-simple {\n  // background-color: #eee !important;\n}\n\n.active .ivu-collapse-content {\n  // background-color: #eee !important;\n}\n\n.active .ivu-timeline-item-head-custom {\n  // background-color: #fff !important;\n  // z-index 9999\n}\n\n.active .btn {\n  top: 50px;\n}\n\n.primary {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n}\n\n.upgrade .header {\n  font-size: 12px;\n  color: #000;\n  // border-bottom:1px dotted rgba(221,221,221,1);\n  // padding-bottom: 25px;\n}\n\n.upgrade .header .v {\n  color: var(--prev-color-primary);\n  margin-left: 10px;\n}\n\n.upgrade .header .num {\n  color: var(--prev-color-primary);\n  font-size: 24px;\n}\n\n.upgrade .header .info {\n  color: #999999;\n}\n\n.upgrade .header .title {\n  color: #999999;\n  display: flex;\n}\n\n.upgrade .header .info ul {\n  color: #999999;\n  display: flex;\n  margin-left: 14px;\n}\n\n.upgrade .header .info ul li::marker {\n  color: red;\n}\n\n.upgrade .header .info ul li+li {\n  margin-left: 40px;\n}\n\n.upgrade .contentTime .acea-row {\n  padding: 5px;\n}\n\n.upgrade .contentTime .list {\n  position: relative;\n  width: 85%;\n}\n\n.upgrade .contentTime .info {\n  font-size: 12px !important;\n  color: #999 !important;\n  margin-top: 13px;\n}\n\n.upgrade .contentTime .info li {\n  list-style-type: disc;\n  margin-left: 16px;\n  line-height: 26px;\n  list-style: none;\n}\n\n.upgrade .contentTime .collapse {\n  width: 100%;\n}\n\n.upgrade .contentTime .ivu-collapse {\n  border: 0 !important;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header {\n  height: unset !important;\n  line-height: 20px !important;\n  border: 0 !important;\n  font-size: 16px !important;\n  color: #333333;\n  font-weight: 600;\n  // background: #eee;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header > i {\n  color: #BBBBBB !important;\n  margin-left: 9px;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item.ivu-collapse-item-active > .ivu-collapse-header > i {\n  transform: rotate(180deg);\n}\n\n.upgrade .contentTime {\n  margin-top: 30px;\n  position: relative;\n}\n\n.upgrade .contentTime .btn {\n  position: absolute;\n  top: 5px;\n  right: 60px;\n  z-index: 99;\n  height: max-content;\n}\n\n.upgrade .contentTime .btn1 {\n  position: absolute;\n  top: 0;\n  right: -29px;\n  z-index: 99;\n  margin-left: 14px;\n}\n\n.upgrade .contentTime .time {\n  font-size: 14px;\n  line-height: 14px;\n  color: #999;\n  text-align: right;\n  padding-right: 28px;\n  min-width: 150px;\n}\n\n.upgrade .contentTime .ivu-timeline-item:after {\n  content: ' ';\n  position: absolute;\n  top: 13px;\n  left: 6.5px;\n  width: 1px;\n  height: calc(100% - 13px);\n  background-color: #e8eaec;\n}\n\n.upgrade .contentTime:nth-child(2n) .ivu-timeline-item-head-custom {\n  z-index: 2;\n  font-size: 16px;\n  color: #DDDCDD;\n  // background: #eee;\n  margin-left: 12px;\n  margin-top: 10px;\n}\n\n.ivu-timeline-item-head-custom {\n  left: -24px;\n}\n.upgrade .contentTimed .on{\n  display:flex;\n  flex-wrap: nowrap;\n}\n.upgrade .contentTime .on:first-child .ivu-timeline-item-head-custom {\n  color: var(--prev-color-primary);\n  font-size: 18px;\n}\n::v-deep .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header{\n  line-height: 20px;\n\n}\n.upgrade .contentTimed .on .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header {\n  color: var(--prev-color-primary);\n}\n\n.on:first-child .ivu-collapse-header {\n  color: var(--prev-color-primary) !important;\n}\n\n.upgrade .contentTime .off:first-child .ivu-timeline-item-head-custom {\n  color: var(--prev-color-primary);\n  font-size: 18px;\n}\n\n.off:first-child .ivu-collapse-header {\n  color: var(--prev-color-primary) !important;\n}\n\n.off:first-child .time {\n  color: var(--prev-color-primary) !important;\n}\n\n.header-modal {\n  background: url('../../../assets/images/bg.png') no-repeat;\n  background-size: 100% 100%;\n  text-align: center;\n  border-radius: 6px 6px 0 0;\n}\n\n.ivu-modal{\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.header-modal2 {\n  background: url('../../../assets/images/bg2.png') no-repeat;\n  background-size: 100% 100%;\n  text-align: center;\n  border-radius: 6px 6px 0 0;\n}\n\n.ivu-modal-header {\n  padding: 0;\n  border-radius: 10px;\n  border: none;\n}\n\n.ivu-modal-header .header-modal2 {\n  height: 74px;\n  line-height: 74px;\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.ivu-modal-header p, .ivu-modal-header-inner {\n  height: 96px;\n  color: #fff;\n  line-height: 96px;\n  font-size: 24px;\n}\n\n.describe {\n  text-align: center;\n  padding-top: 30px;\n\n  .success {\n    font-size: 20px;\n    color: #333333;\n    margin-top: 10px;\n  }\n}\n\n.ivu-modal-footer {\n  border: none;\n  display: flex;\n  justify-content: center;\n}\n\n.footer .ivu-btn {\n  width: 128px;\n  height: 40px;\n  border: none;\n}\n\n.cancel {\n  background: #EEEEEE;\n}\n\n.vertical-center-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .ivu-modal {\n    top: 0;\n  }\n}\n::v-deep .vertical-center-modal .ivu-modal-header{\n  padding: 0 !important;\n  border: none;\n}\n::v-deep .ivu-modal-content{\n  border-radius: 14px 14px 0 0;\n  overflow: hidden;\n}\n.footer {\n  display: flex;\n  justify-content: space-around;\n}\n\n.demo-i-circle-custom {\n  & h1 {\n    color: #CCCCCC;\n    font-size: 12px;\n    font-weight: normal;\n    line-height: 17px;\n  }\n\n  & p {\n    color: #2A7EFB;\n    font-size: 14px;\n    line-height: 20px;\n    margin: 6px 0;\n  }\n\n  & span {\n    display: block;\n    color: #CCCCCC;\n    font-size: 12px;\n    line-height: 17px;\n  }\n\n  & span i {\n    font-style: normal;\n    color: #3f414d;\n  }\n}\n\n.proportion {\n  font-size: 20px;\n  font-weight: 600;\n  color: #2A7EFB;\n  margin: 12px 0 6px;\n}\n\n.wait {\n  font-size: 12px;\n  font-weight: 400;\n  color: #999999;\n}\n\n.footer2 {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  .confirm, .back {\n    width: 210px;\n    height: 40px;\n  }\n\n  .back {\n    border: none;\n  }\n}\n\n.describe {\n  padding-top: 0;\n}\n\n.describe h2 {\n  font-size: 22px;\n  font-weight: 400;\n  color: #333333;\n  margin-bottom: 12px;\n}\n\n.acea-row.row-top {\n  position: relative;\n  overflow: hidden;\n}\n\n.update {\n  margin: 27px 16px;\n}\n</style>\n"]}]}