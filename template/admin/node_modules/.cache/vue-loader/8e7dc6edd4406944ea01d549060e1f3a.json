{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1c2VyTGFiZWwgZnJvbSAnQC9jb21wb25lbnRzL2xhYmVsTGlzdCc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcyc7CmltcG9ydCBmcmVpZ2h0VGVtcGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL2ZyZWlnaHRUZW1wbGF0ZSc7CmltcG9ydCBjb3Vwb25MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9jb3Vwb25MaXN0JzsKaW1wb3J0IGFkZEF0dHIgZnJvbSAnLi4vcHJvZHVjdEF0dHIvYWRkQXR0cic7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB0YW9CYW8gZnJvbSAnLi90YW9CYW8nOwppbXBvcnQgV2FuZ0VkaXRvciBmcm9tICdAL2NvbXBvbmVudHMvd2FuZ0VkaXRvci9pbmRleC52dWUnOwppbXBvcnQgeyB1c2VyTGFiZWxBZGRBcGkgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsKICBwcm9kdWN0SW5mb0FwaSwKICBjYXNjYWRlckxpc3RBcGksCiAgcHJvZHVjdEFkZEFwaSwKICBnZW5lcmF0ZUF0dHJBcGksCiAgcHJvZHVjdEdldFJ1bGVBcGksCiAgcHJvZHVjdEdldFRlbXBsYXRlQXBpLAogIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSwKICBjaGVja0FjdGl2aXR5QXBpLAogIHByb2R1Y3RDYWNoZSwKICBjYWNoZURlbGV0ZSwKICB1cGxvYWRUeXBlLAogIGltcG9ydENhcmQsCiAgcHJvZHVjdENyZWF0ZUFwaSwKfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHsgZ2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgdXBsb2FkQnlQaWVjZXMgfSBmcm9tICdAL3V0aWxzL3VwbG9hZCc7IC8v5byV5YWldXBsb2FkQnlQaWVjZXPmlrnms5UKaW1wb3J0IHsgaXNGaWxlVXBsb2FkLCBpc1ZpZGVvVXBsb2FkIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCBjaGVja0FycmF5IGZyb20gJ0AvbGlicy9wZXJtaXNzaW9uJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdF9wcm9kdWN0QWRkJywKICBjb21wb25lbnRzOiB7CiAgICAvLyBWdWVVZWRpdG9yV3JhcCwKICAgIHVwbG9hZFBpY3R1cmVzLAogICAgZnJlaWdodFRlbXBsYXRlLAogICAgYWRkQXR0ciwKICAgIGNvdXBvbkxpc3QsCiAgICB0YW9CYW8sCiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSwKICAgIGdvb2RzTGlzdCwKICAgIFdhbmdFZGl0b3IsCiAgICB1c2VyTGFiZWwsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxTaG93OiBmYWxzZSwKICAgICAgZGF0YUxhYmVsOiBbXSwKICAgICAgaGVhZFRhYjogWwogICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgIHsgdGl0OiAn54mp5rWB6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc2JyB9LAogICAgICBdLAogICAgICB2aXJ0dWFsOiBbCiAgICAgICAgeyB0aXQ6ICfmma7pgJrllYblk4EnLCBpZDogMCwgdGl0MjogJ+eJqea1geWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+WNoeWvhi/nvZHnm5gnLCBpZDogMSwgdGl0MjogJ+iHquWKqOWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+S8mOaDoOWIuCcsIGlkOiAyLCB0aXQyOiAn6Ieq5Yqo5Y+R6LSnJyB9LAogICAgICAgIHsgdGl0OiAn6Jma5ouf5ZWG5ZOBJywgaWQ6IDMsIHRpdDI6ICfomZrmi5/lj5HotKcnIH0sCiAgICAgIF0sCiAgICAgIHNlbGV0VmlkZW86IDAsIC8v6YCJ5oup6KeG6aKR57G75Z6LCiAgICAgIGN1c3RvbUJ0bjogZmFsc2UsIC8v6Ieq5a6a5LmJ55WZ6KiA5byA5YWzCiAgICAgIGNvbnRlbnQ6ICcnLAogICAgICBjb250ZW50czogJycsCiAgICAgIGZpbGVVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQnLAogICAgICBmaWxlVXJsMjogU2V0dGluZy5hcGlCYXNlVVJMICsgJy9maWxlL3ZpZGVvX3VwbG9hZCcsCiAgICAgIGNhcmRVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQvMScsCiAgICAgIHVwbG9hZF90eXBlOiAnJywgLy/op4bpopHkuIrkvKDnsbvlnosgMSDmnKzlnLDkuIrkvKAgMiAzIDQgT1NT5LiK5LygCiAgICAgIHVwbG9hZERhdGE6IHt9LCAvLyDkuIrkvKDlj4LmlbAKICAgICAgaGVhZGVyOiB7fSwKCiAgICAgIHR5cGU6IDAsCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGdvb2RzX21vZGFsczogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgb3BlblN1YmltaXQ6IGZhbHNlLAogICAgICB2aXJ0dWFsRGF0YTogJycsCiAgICAgIHZpcnR1YWxMaXN0OiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICBdLAogICAgICBncmlkMjogewogICAgICAgIHhsOiAxMCwKICAgICAgICBsZzogMTIsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWQzOiB7CiAgICAgICAgeGw6IDE4LAogICAgICAgIGxnOiAxOCwKICAgICAgICBtZDogMjAsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNCwKICAgICAgfSwKICAgICAgLy8g5om56YeP6K6+572u6KGo5qC8ZGF0YQogICAgICBvbmVGb3JtQmF0Y2g6IFsKICAgICAgICB7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgIHZpcnR1YWxfbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgLy8g6KeE5qC85pWw5o2uCiAgICAgIGZvcm1EeW5hbWljOiB7CiAgICAgICAgYXR0cnNOYW1lOiAnJywKICAgICAgICBhdHRyc1ZhbDogJycsCiAgICAgIH0sCiAgICAgIGRpc2tfdHlwZTogMSwgLy/ljaHlr4bnsbvlnosKICAgICAgdGFiSW5kZXg6IDAsCiAgICAgIHRhYk5hbWU6ICcnLAogICAgICBmb3JtRHluYW1pY05hbWVEYXRhOiBbXSwKICAgICAgaXNCdG46IGZhbHNlLAogICAgICBjb2x1bW5zMjogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5Zu+54mHJywKICAgICAgICAgIHNsb3Q6ICdwaWMnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDgwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfllK7ku7cnLAogICAgICAgICAgc2xvdDogJ3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5oiQ5pys5Lu3JywKICAgICAgICAgIHNsb3Q6ICdjb3N0JywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5Y6f5Lu3JywKICAgICAgICAgIHNsb3Q6ICdvdF9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W6k+WtmCcsCiAgICAgICAgICBzbG90OiAnc3RvY2snLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfllYblk4HnvJblj7cnLAogICAgICAgICAgc2xvdDogJ2Jhcl9jb2RlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+mHjemHj++8iEtH77yJJywKICAgICAgICAgIHNsb3Q6ICd3ZWlnaHQnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvZPnp68obcKzKScsCiAgICAgICAgICBzbG90OiAndm9sdW1lJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNvbHVtbnMzOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgICAgc2xvdDogJ3BpYycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogODAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WUruS7tycsCiAgICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmiJDmnKzku7cnLAogICAgICAgICAgc2xvdDogJ2Nvc3QnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgICAgc2xvdDogJ290X3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5bqT5a2YJywKICAgICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WVhuWTgee8luWPtycsCiAgICAgICAgICBzbG90OiAnYmFyX2NvZGUnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBjb2x1bW5zSW5zdGFsbDogW10sCiAgICAgIGNvbHVtbnNJbnN0YWwyOiBbXSwKICAgICAgZ3JpZFBpYzogewogICAgICAgIHhsOiA2LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiAxMiwKICAgICAgICBzbTogMTIsCiAgICAgICAgeHM6IDEyLAogICAgICB9LAogICAgICBncmlkQnRuOiB7CiAgICAgICAgeGw6IDQsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDgsCiAgICAgICAgc206IDgsCiAgICAgICAgeHM6IDgsCiAgICAgIH0sCiAgICAgIC8v6Ieq5a6a5LmJ55WZ6KiA5LiL5ouJ6YCJ5oupCiAgICAgIEN1c3RvbUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3RleHQnLAogICAgICAgICAgbGFiZWw6ICfmlofmnKzmoYYnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdudW1iZXInLAogICAgICAgICAgbGFiZWw6ICfmlbDlrZcnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdlbWFpbCcsCiAgICAgICAgICBsYWJlbDogJ+mCruS7ticsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2RhdGEnLAogICAgICAgICAgbGFiZWw6ICfml6XmnJ8nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICd0aW1lJywKICAgICAgICAgIGxhYmVsOiAn5pe26Ze0JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgICAgbGFiZWw6ICfouqvku73or4EnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdwaG9uZScsCiAgICAgICAgICBsYWJlbDogJ+aJi+acuuWPtycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2ltZycsCiAgICAgICAgICBsYWJlbDogJ+WbvueJhycsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY3VzdG9tZXNzOiB7CiAgICAgICAgY29udGVudDogW10sCiAgICAgIH0sIC8v6Ieq5a6a5LmJ55WZ6KiA5YaF5a65CgogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICBkaXNrX2luZm86ICcnLCAvL+WNoeWvhuexu+WeiwogICAgICAgIGxvZ2lzdGljczogWycxJ10sIC8v6YCJ5oup54mp5rWB5pa55byPCiAgICAgICAgZnJlaWdodDogMiwgLy/ov5DotLnorr7nva4KICAgICAgICBwb3N0YWdlOiAwLCAvL+iuvue9rui/kOi0uemHkeminQogICAgICAgIHJlY29tbWVuZDogW10sIC8v5ZWG5ZOB5o6o6I2QCiAgICAgICAgcHJlc2FsZV9kYXk6IDEsIC8v6aKE5ZSu5Y+R6LSn5pe26Ze0Lee7k+adnwogICAgICAgIHByZXNhbGU6IGZhbHNlLCAvL+mihOWUruWVhuWTgeW8gOWFswogICAgICAgIGlzX2xpbWl0OiBmYWxzZSwKICAgICAgICBsaW1pdF90eXBlOiAwLAogICAgICAgIGxpbWl0X251bTogMCwKICAgICAgICB2aWRlb19vcGVuOiBmYWxzZSwgLy/op4bpopHmjInpkq7mmK/lkKbmmL7npLoKICAgICAgICB2aXBfcHJvZHVjdDogZmFsc2UsIC8v5LuY6LS55Lya5ZGY5LiT5bGe5byA5YWzCiAgICAgICAgY3VzdG9tX2Zvcm06IFtdLCAvL+iHquWumuS5ieeVmeiogAogICAgICAgIHN0b3JlX25hbWU6ICcnLAogICAgICAgIGNhdGVfaWQ6IFtdLAogICAgICAgIGxhYmVsX2lkOiBbXSwKICAgICAgICBrZXl3b3JkOiAnJywKICAgICAgICB1bml0X25hbWU6ICcnLAogICAgICAgIHN0b3JlX2luZm86ICcnLAogICAgICAgIGltYWdlOiAnJywKICAgICAgICByZWNvbW1lbmRfaW1hZ2U6ICcnLAogICAgICAgIHNsaWRlcl9pbWFnZTogW10sCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGZpY3RpOiAwLAogICAgICAgIGdpdmVfaW50ZWdyYWw6IDAsCiAgICAgICAgc29ydDogMCwKICAgICAgICBpc19zaG93OiAxLAogICAgICAgIGlzX2hvdDogMCwKICAgICAgICBpc19iZW5lZml0OiAwLAogICAgICAgIGlzX2Jlc3Q6IDAsCiAgICAgICAgaXNfbmV3OiAwLAogICAgICAgIGlzX2dvb2Q6IDAsCiAgICAgICAgaXNfcG9zdGFnZTogMCwKICAgICAgICBpc19zdWI6IFtdLAogICAgICAgIHJlY29tbWVuZF9saXN0OiBbXSwKICAgICAgICB2aXJ0dWFsX3R5cGU6IDAsCiAgICAgICAgLy8gaXNfc3ViOiAwLAogICAgICAgIGlkOiAwLAogICAgICAgIHNwZWNfdHlwZTogMCwKICAgICAgICBpc192aXJ0dWFsOiAwLAogICAgICAgIHZpZGVvX2xpbms6ICcnLAogICAgICAgIC8vIHBvc3RhZ2U6IDAsCiAgICAgICAgdGVtcF9pZDogJycsCiAgICAgICAgYXR0cnM6IFtdLAogICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBhY3Rpdml0eTogWyfpu5jorqQnLCAn56eS5p2AJywgJ+egjeS7tycsICfmi7zlm6InXSwKICAgICAgICBjb3Vwb25OYW1lOiBbXSwKICAgICAgICBoZWFkZXI6IFtdLAogICAgICAgIHNlbGVjdFJ1bGU6ICcnLAogICAgICAgIGNvdXBvbl9pZHM6IFtdLAogICAgICAgIGNvbW1hbmRfd29yZDogJycsCiAgICAgICAgbWluX3F0eTogMSwKICAgICAgfSwKICAgICAgcnVsZUxpc3Q6IFtdLAogICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICBjcmVhdGVCbnQ6IHRydWUsCiAgICAgIHNob3dJcHV0OiBmYWxzZSwKICAgICAgbWFueUZvcm1WYWxpZGF0ZTogW10sCiAgICAgIC8vIOWNleinhOagvOihqOagvGRhdGEKICAgICAgb25lRm9ybVZhbGlkYXRlOiBbCiAgICAgICAgewogICAgICAgICAgcGljOiAnJywKICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgY29zdDogMCwKICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICB3ZWlnaHQ6IDAsCiAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICBicm9rZXJhZ2VfdHdvOiAwLAogICAgICAgICAgdmlwX3ByaWNlOiAwLAogICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgIGNvdXBvbl9pZDogMCwKICAgICAgICB9LAogICAgICBdLAogICAgICBpbWFnZXM6IFtdLAogICAgICBpbWFnZXNUYWJsZTogJycsCiAgICAgIGN1cnJlbnRUYWI6ICcxJywKICAgICAgaXNDaG9pY2U6ICcnLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDgsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIGFkZFZpcnR1YWxNb2RlbDogZmFsc2UsCiAgICAgIHRlbXBsYXRlOiBmYWxzZSwKICAgICAgdXBsb2FkTGlzdDogW10sCiAgICAgIHRyZWVTZWxlY3Q6IFtdLAogICAgICBwaWNUaXQ6ICcnLAogICAgICB0YWJsZUluZGV4OiAwLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBzdG9yZV9uYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjYXRlX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB5YiG57G7JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIG1pbjogJzEnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHVuaXRfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXljZXkvY0nLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgLy8gaW1hZ2U6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35LiK5Lyg5ZWG5ZOB5Zu+IiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sCiAgICAgICAgc2xpZGVyX2ltYWdlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg5ZWG5ZOB6L2u5pKt5Zu+JywKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgc3BlY190eXBlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICAgIGlzX3ZpcnR1YWw6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgc2VsZWN0UnVsZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nllYblk4Hop4TmoLzlsZ7mgKcnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICB0ZW1wX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6L+Q6LS55qih5p2/JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHByZXNhbGVfdGltZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqea0u+WKqOaXtumXtCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGxvZ2lzdGljczogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWluOiAxLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup54mp5rWB5pa55byPJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgICAgICBtYXg6IDIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnianmtYHmlrnlvI8nLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBnaXZlX2ludGVncmFsOiBbeyB0eXBlOiAnaW50ZWdlcicsIG1lc3NhZ2U6ICfor7fovpPlhaXmlbTmlbAnIH1dLAogICAgICB9LAogICAgICBtYW55QnJva2VyYWdlOiAwLAogICAgICBtYW55QnJva2VyYWdlVHdvOiAwLAogICAgICBtYW55VmlwUHJpY2U6IDAsCiAgICAgIHVwbG9hZDogewogICAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIH0sCiAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIHByb2dyZXNzOiAwLCAvLyDov5vluqbmnaHpu5jorqQwCiAgICAgIHN0b2NrOiAwLAogICAgICBkaXNrX2luZm86ICcnLAogICAgICB2aWRlb0xpbms6ICcnLAogICAgICBhdHRyczogW10sCiAgICAgIGFjdGl2aXR5OiB7IOm7mOiupDogJ3JlZCcsIOenkuadgDogJ2JsdWUnLCDnoI3ku7c6ICdncmVlbicsIOaLvOWbojogJ3llbGxvdycgfSwKICAgICAgY291cG9uTmFtZTogW10sCiAgICAgIHVwZGF0ZUlkczogW10sCiAgICAgIHVwZGF0ZU5hbWU6IFtdLAogICAgICBjb3Vwb25JZHM6ICcnLAogICAgICBjb3Vwb25OYW1lczogW10sCiAgICAgIHJha2VCYWNrOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkuIDnuqfov5TkvaMnLAogICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S6jOe6p+i/lOS9oycsCiAgICAgICAgICBzbG90OiAnYnJva2VyYWdlX3R3bycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbWVtYmVyOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJrlkZjku7cnLAogICAgICAgICAgc2xvdDogJ3ZpcF9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29sdW1uc0luc3RhbE06IFtdLAogICAgICBtb3ZlSW5kZXg6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSksCiAgICBsYWJlbFdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6ICcxMjBweCc7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogICAgbGFiZWxCb3R0b20oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogJzE1cHgnOwogICAgfSwKICB9LAogIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB0aGlzLmJ1cy4kZW1pdCgnb25UYWdzVmlld1JlZnJlc2hSb3V0ZXJWaWV3JywgdGhpcy4kcm91dGUucGF0aCk7CiAgICBuZXh0KCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA4KTsKICAgIHRoaXMuZ2V0VG9rZW4oKTsKCiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5jb2x1bW5zSW5zdGFsbCk7CiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YTggPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLmNvbHVtbnNJbnN0YTgpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT09ICcwJyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgdGhpcy5nZXRJbmZvKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gJzAnKSB7CiAgICAgIHByb2R1Y3RDYWNoZSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5pbmZvOwogICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICAgIGxldCBjYXRlX2lkID0gZGF0YS5jYXRlX2lkLm1hcChOdW1iZXIpOwogICAgICAgICAgICBsZXQgbGFiZWxfaWQgPSBkYXRhLmxhYmVsX2lkLm1hcChOdW1iZXIpOwogICAgICAgICAgICB0aGlzLmF0dHJzID0gZGF0YS5pdGVtcyB8fCBbXTsKICAgICAgICAgICAgbGV0IGlkcyA9IFtdOwogICAgICAgICAgICAvLyBsZXQgbmFtZXMgPSBbXTsKICAgICAgICAgICAgaWYgKGRhdGEuY291cG9ucykgewogICAgICAgICAgICAgIGRhdGEuY291cG9ucy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgLy8gbmFtZXMucHVzaChpdGVtLnRpdGxlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgICAgICAgLy8gdGhpcy5jb3Vwb25OYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICAgICAgICAvLyB0aGF0LmNvdXBvbk5hbWUgPSBuYW1lczsKICAgICAgICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhLmxhYmVsX2lkOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWRzOwogICAgICAgICAgICB0aGlzLnVwZGF0ZUlkcyA9IGlkczsKICAgICAgICAgICAgdGhpcy51cGRhdGVOYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkID0gY2F0ZV9pZDsKICAgICAgICAgICAgLy8gdGhpcy5mb3JtVmFsaWRhdGUubGFiZWxfaWQgPSBsYWJlbF9pZDsKICAgICAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBkYXRhLmF0dHJzOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MgPSBkYXRhLmxvZ2lzdGljcyB8fCBbJzEnXTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaGVhZGVyID0gW107CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoMCk7CiAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IGRhdGEuYXR0cnM7CiAgICAgICAgICAgIHRoaXMuc3BlY190eXBlID0gZGF0YS5zcGVjX3R5cGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSBkYXRhLmlzX3ZpcnR1YWw7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtID0gZGF0YS5jdXN0b21fZm9ybSB8fCBbXTsKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5jdXN0b21CdG4gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudmlydHVhbGJ0bihkYXRhLnZpcnR1YWxfdHlwZSwgMSk7CiAgICAgICAgICAgIGlmIChkYXRhLnNwZWNfdHlwZSA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IFtdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZSA9IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcGljOiBkYXRhLmltYWdlLAogICAgICAgICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgICAgICAgICAgdm9sdW1lOiAwLAogICAgICAgICAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICAgICAgICAgIGJyb2tlcmFnZV90d286IDAsCiAgICAgICAgICAgICAgICAgIHZpcF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgICAgICAgICAgY291cG9uX2lkOiAwLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUpIHsKICAgICAgdGhpcy5tb2RhbHMgPSB0cnVlOwogICAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50eXBlID0gMDsKICAgIH0KICAgIHRoaXMuZ29vZHNDYXRlZ29yeSgpOwogICAgdGhpcy5wcm9kdWN0R2V0UnVsZSgpOwogICAgdGhpcy5wcm9kdWN0R2V0VGVtcGxhdGUoKTsKICAgIC8vIHRoaXMudXNlckxhYmVsKCk7CiAgICB0aGlzLnVwbG9hZFR5cGUoKTsKICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICByZXR1cm4gaXNGaWxlVXBsb2FkKGZpbGUpCiAgICB9LAogICAgLy8g5YiG54mH5LiK5LygCiAgICB2aWRlb1NhdmVUb1VybChmaWxlKSB7CiAgICAgIGlmKGlzVmlkZW9VcGxvYWQoZmlsZSkpewogICAgICAgIHVwbG9hZEJ5UGllY2VzKHsKICAgICAgICAgIGZpbGU6IGZpbGUsIC8vIOinhumikeWunuS9kwogICAgICAgICAgcGllY2VTaXplOiAzLCAvLyDliIbniYflpKflsI8KICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSBkYXRhLmZpbGVfcGF0aDsKICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgIH0sCiAgICAgICAgICBlcnJvcjogKGUpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlLm1zZyk7CiAgICAgICAgICB9LAogICAgICAgICAgdXBsb2FkaW5nOiAoY2h1bmssIGFsbENodW5rKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmlkZW9JbmcgPSB0cnVlOwogICAgICAgICAgICBsZXQgc3QgPSBNYXRoLmZsb29yKChjaHVuayAvIGFsbENodW5rKSAqIDEwMCk7CiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBzdDsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIC8vIOexu+Wei+mAieaLqS/loavlhaXlhoXlrrnliKTmlq0KICAgIHZpcnR1YWxidG4oaW5kZXgsIHR5cGUpIHsKICAgICAgaWYgKHR5cGUgIT0gMSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YiA9IFtdOwogICAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgIGNoZWNrQWN0aXZpdHlBcGkoaWQpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHt9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IHRoaXMuc3BlY190eXBlOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDA7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMDsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFsKICAgICAgICAgICAgeyB0aXQ6ICfln7rnoYDkv6Hmga8nLCBuYW1lOiAnMScgfSwKICAgICAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICAgICAgeyB0aXQ6ICfllYblk4Hor6bmg4UnLCBuYW1lOiAnMycgfSwKICAgICAgICAgICAgeyB0aXQ6ICfnianmtYHorr7nva4nLCBuYW1lOiAnNCcgfSwKICAgICAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICAgICAgeyB0aXQ6ICflhbbku5borr7nva4nLCBuYW1lOiAnNicgfSwKICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAxOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucG9zdGFnZSA9IDA7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMTsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFsKICAgICAgICAgICAgeyB0aXQ6ICfln7rnoYDkv6Hmga8nLCBuYW1lOiAnMScgfSwKICAgICAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICAgICAgeyB0aXQ6ICfllYblk4Hor6bmg4UnLCBuYW1lOiAnMycgfSwKICAgICAgICAgICAgLy8geyB0aXQ6ICLnianmtYHorr7nva4iLCBuYW1lOiAiNCIgfSwKICAgICAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNCcgfSwKICAgICAgICAgICAgeyB0aXQ6ICflhbbku5borr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAyOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDE7CiAgICAgICAgICB0aGlzLmhlYWRUYWIgPSBbCiAgICAgICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6KeE5qC85bqT5a2YJywgbmFtZTogJzInIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5ZWG5ZOB6K+m5oOFJywgbmFtZTogJzMnIH0sCiAgICAgICAgICAgIC8vIHsgdGl0OiAi54mp5rWB6K6+572uIiwgbmFtZTogIjQiIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6JCl6ZSA6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5YW25LuW6K6+572uJywgbmFtZTogJzUnIH0sCiAgICAgICAgICBdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID0gMzsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSAxOwogICAgICAgICAgdGhpcy5oZWFkVGFiID0gWwogICAgICAgICAgICB7IHRpdDogJ+WfuuehgOS/oeaBrycsIG5hbWU6ICcxJyB9LAogICAgICAgICAgICB7IHRpdDogJ+inhOagvOW6k+WtmCcsIG5hbWU6ICcyJyB9LAogICAgICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgICAgICAvLyB7IHRpdDogIueJqea1geiuvue9riIsIG5hbWU6ICI0IiB9LAogICAgICAgICAgICB7IHRpdDogJ+iQpemUgOiuvue9ricsIG5hbWU6ICc0JyB9LAogICAgICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc1JyB9LAogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5YiG57G7CiAgICBhZGRDYXRlKCkgewogICAgICB0aGlzLiRtb2RhbEZvcm0ocHJvZHVjdENyZWF0ZUFwaSgpKS50aGVuKCgpID0+IHRoaXMuZ29vZHNDYXRlZ29yeSgpKTsKICAgIH0sCiAgICAvLyDnianmtYHmlrnlvI/pgInmi6kKICAgIGxvZ2lzdGljc0J0bihlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGU7CiAgICB9LAogICAgLy8g5paw5aKe5qCH562+CiAgICBhZGRMYWJlbCgpIHsKICAgICAgdGhpcy4kbW9kYWxGb3JtKHVzZXJMYWJlbEFkZEFwaSgwKSkudGhlbigoKSA9PiB0aGlzLnVzZXJMYWJlbCgpKTsKICAgIH0sCiAgICAvLyDoh6rlrprkuYnnlZnoqIAg5byA5ZCv5YWz6ZetCiAgICBjdXN0b21NZXNzQnRuKGUpIHsKICAgICAgaWYgKCFlKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0gPSBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOiHquWumuS5ieeVmeiogCDmlrDlop7ooajljZUKICAgIGFkZGN1c3RvbSgpIHsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCA+IDkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+acgOWkmua3u+WKoDEw5p2hJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0ucHVzaCh7CiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBsYWJlbDogJ3RleHQnLAogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIoOmZpAogICAgZGVsY3VzdG9tKGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g6aKE5ZSu5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wcmVzYWxlX3RpbWUgPSBlOwogICAgfSwKICAgIC8vIOWVhuWTgeivpuaDhQogICAgZ2V0RWRpdG9yQ29udGVudChkYXRhKSB7CiAgICAgIHRoaXMuY29udGVudCA9IGRhdGE7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOS4iuS8oOWktOmDqHRva2VuCiAgICBnZXRUb2tlbigpIHsKICAgICAgdGhpcy5oZWFkZXJbJ0F1dGhvcmktemF0aW9uJ10gPSAnQmVhcmVyICcgKyBnZXRDb29raWVzKCd0b2tlbicpOwogICAgfSwKICAgIC8vIOWvvOWFpeWNoeWvhgogICAgdXBGaWxlKHJlcykgewogICAgICBpbXBvcnRDYXJkKHsgZmlsZTogcmVzLmRhdGEuc3JjIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudmlydHVhbExpc3QgPSB0aGlzLnZpcnR1YWxMaXN0LmNvbmNhdChyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6I635Y+W6KeG6aKR5LiK5Lyg57G75Z6LCiAgICB1cGxvYWRUeXBlKCkgewogICAgICB1cGxvYWRUeXBlKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51cGxvYWRfdHlwZSA9IHJlcy5kYXRhLnVwbG9hZF90eXBlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbmlbDmja7lsZXnpLoKICAgIGluZm9EYXRhKGRhdGEsIGlzQ29weSkgewogICAgICBsZXQgY2F0ZV9pZCA9IGRhdGEuY2F0ZV9pZC5tYXAoTnVtYmVyKTsKICAgICAgbGV0IGxhYmVsX2lkID0gZGF0YS5sYWJlbF9pZC5tYXAoTnVtYmVyKTsKICAgICAgdGhpcy5hdHRycyA9IGRhdGEuaXRlbXMgfHwgW107CiAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgZGF0YS5jb3Vwb25zLm1hcCgoaXRlbSkgPT4gewogICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICB9KTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSBkYXRhOwogICAgICB0aGlzLnNlbGV0VmlkZW8gPSBkYXRhLnNlbGV0VmlkZW87CiAgICAgIHRoaXMuY29udGVudHMgPSBkYXRhLmRlc2NyaXB0aW9uOwogICAgICB0aGlzLmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHMgPSBpZHM7CiAgICAgIHRoaXMudXBkYXRlSWRzID0gaWRzOwogICAgICB0aGlzLmRhdGFMYWJlbCA9IGRhdGEubGFiZWxfaWQ7CiAgICAgIHRoaXMudXBkYXRlTmFtZSA9IGRhdGEuY291cG9uczsKICAgICAgdGhpcy52aXJ0dWFsYnRuKGRhdGEudmlydHVhbF90eXBlLCAxKTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUubG9naXN0aWNzID0gZGF0YS5sb2dpc3RpY3MgfHwgWycxJ107CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtID0gZGF0YS5jdXN0b21fZm9ybSB8fCBbXTsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgdGhpcy5jdXN0b21CdG4gPSB0cnVlOwogICAgICB9CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNhdGVfaWQgPSBjYXRlX2lkOwogICAgICBpZiAoZGF0YS5hdHRyKSB7CiAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBbZGF0YS5hdHRyXTsKICAgICAgfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBbXTsKICAgICAgdGhpcy5nZW5lcmF0ZSgwLCBpc0NvcHksIGRhdGEuYXR0cnMpOwogICAgICAvLyB0aGlzLm1hbnlGb3JtVmFsaWRhdGUgPSBkYXRhLmF0dHJzOwogICAgICAvLyB0aGlzLiRzZXQodGhpcywgJ21hbnlGb3JtVmFsaWRhdGUnLCBkYXRhLmF0dHJzKTsKICAgICAgdGhpcy5zcGVjX3R5cGUgPSBkYXRhLnNwZWNfdHlwZTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IGRhdGEuaXNfdmlydHVhbDsKICAgICAgaWYgKGRhdGEuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jcmVhdGVCbnQgPSB0cnVlOwogICAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlID0gWwogICAgICAgICAgewogICAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgICAgdm9sdW1lOiAwLAogICAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICAgIGJyb2tlcmFnZV90d286IDAsCiAgICAgICAgICAgIHZpcF9wcmljZTogMCwKICAgICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgICAgY291cG9uX2lkOiAwLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICB9CiAgICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgICB9LAogICAgLy/lhbPpl63mt5jlrp3lvLnnqpflubbnlJ/miJDmlbDmja7vvJsKICAgIG9uQ2xvc2UoZGF0YSkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICB0aGlzLmluZm9EYXRhKGRhdGEsIDEpOwogICAgfSwKCiAgICBjaGVja01vdmUoZXZ0KSB7CiAgICAgIHRoaXMubW92ZUluZGV4ID0gZXZ0LmRyYWdnZWRDb250ZXh0LmluZGV4OwogICAgfSwKICAgIGVuZCgpIHsKICAgICAgdGhpcy5tb3ZlSW5kZXggPSAnJzsKICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgIH0sCiAgICAvLyDljZXni6zorr7nva7kvJrlkZjorr7nva4KICAgIGNoZWNrQWxsR3JvdXBDaGFuZ2UoZGF0YSkgewogICAgICB0aGlzLmNoZWNrQWxsR3JvdXAoZGF0YSk7CiAgICB9LAogICAgY2hlY2tBbGxHcm91cChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICBpZiAoZGF0YS5pbmRleE9mKDApID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmluZGV4T2YoMSkgPiAtMSkgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjaykuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGRhdGEuaW5kZXhPZigwKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5tZW1iZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbDIgPSB0aGlzLmNvbHVtbnNJbnN0YWxNLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLnJha2VCYWNrKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCk7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICBhZGRDb3Vwb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLmlzVGVtcGxhdGUgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLmNvdXBvblRlbXBsYXRlcy50YWJsZUxpc3QoKTsKICAgIH0sCiAgICAvLyDop4TmoLzkuK3kvJjmg6DliLjmn6XnnIsKICAgIHNlZShkYXRhLCBuYW1lLCBpbmRleCkgewogICAgICB0aGlzLnRhYk5hbWUgPSBuYW1lOwogICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7CgogICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID09PSAxKSB7CiAgICAgICAgaWYgKGRhdGEuZGlza19pbmZvICE9ICcnKSB7CiAgICAgICAgICB0aGlzLmRpc2tfdHlwZSA9IDE7CiAgICAgICAgICB0aGlzLmRpc2tfaW5mbyA9IGRhdGEuZGlza19pbmZvOwogICAgICAgICAgdGhpcy5zdG9jayA9IGRhdGEuc3RvY2s7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnZpcnR1YWxfbGlzdC5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuZGlza190eXBlID0gMjsKICAgICAgICAgIHRoaXMudmlydHVhbExpc3QgPSBkYXRhLnZpcnR1YWxfbGlzdDsKICAgICAgICB9CiAgICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuZ29vZHNDb3Vwb24uaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi50YWJsZUxpc3QoMyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDkvJjmg6DliLgKICAgIGFkZEdvb2RzQ291cG9uKGluZGV4LCBuYW1lKSB7CiAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDsKICAgICAgdGhpcy50YWJOYW1lID0gbmFtZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi50YWJsZUxpc3QoMyk7CiAgICB9LAogICAgYWRkVmlydHVhbChpbmRleCwgbmFtZSkgewogICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMudGFiTmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYWRkVmlydHVhbE1vZGVsID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDmj5DkuqTljaHlr4bkv6Hmga8KICAgIHVwVmlydHVhbCgpIHsKICAgICAgaWYgKHRoaXMuZGlza190eXBlID09IDIpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmlydHVhbExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnZpcnR1YWxMaXN0W2ldOwogICAgICAgICAgaWYgKCFlbGVtZW50LnZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+i+k+WFpeaJgOacieWNoeWvhicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICd2aXJ0dWFsX2xpc3QnLCB0aGlzLnZpcnR1YWxMaXN0KTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnc3RvY2snLCB0aGlzLnZpcnR1YWxMaXN0Lmxlbmd0aCk7CiAgICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAga2V5OiAnJywKICAgICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdkaXNrX2luZm8nLCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLmRpc2tfaW5mby5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnljaHlr4bkv6Hmga8nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLnN0b2NrKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5bqT5a2Y5pWw6YePJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdzdG9jaycsIE51bWJlcih0aGlzLnN0b2NrKSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3N0b2NrJywgTnVtYmVyKHRoaXMuc3RvY2spKTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnZGlza19pbmZvJywgdGhpcy5kaXNrX2luZm8pOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICd2aXJ0dWFsX2xpc3QnLCBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSBmYWxzZTsKICAgICAgdGhpcy5jbG9zZVZpcnR1YWwoKTsKICAgIH0sCiAgICAvLyAg5Yid5aeL5YyW5Y2h5a+G5pWw5o2u5L+h5oGvCiAgICBjbG9zZVZpcnR1YWwoKSB7CiAgICAgIHRoaXMuYWRkVmlydHVhbE1vZGVsID0gZmFsc2U7CiAgICAgIHRoaXMudmlydHVhbExpc3QgPSBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICBdOwogICAgICB0aGlzLmRpc2tfaW5mbyA9ICcnOwogICAgICB0aGlzLnN0b2NrID0gMDsKICAgIH0sCiAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgdW5pcXVlKGFycikgewogICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7CiAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhcnIpID0+ICFyZXMuaGFzKGFyci5pZCkgJiYgcmVzLnNldChhcnIuaWQsIDEpKTsKICAgIH0sCiAgICAvLyDojrflj5bkvJjmg6DliLhpZOaVsOaNrgogICAgbmFtZUlkKGlkLCBuYW1lcykgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWQ7CiAgICAgIHRoaXMuY291cG9uTmFtZSA9IHRoaXMudW5pcXVlKG5hbWVzKTsKICAgIH0sCiAgICAvLyDojrflj5bkvJjmg6DliLjkv6Hmga8KICAgIGdvb2RzQ291cG9uSWQoZGF0YSkgewogICAgICAvLyB0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0uY291cG9uX2lkID0gZGF0YS5pZDsKICAgICAgLy8gdGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLmNvdXBvbl9uYW1lID0gZGF0YS50aXRsZTsKICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ2NvdXBvbl9pZCcsIGRhdGEuaWQpOwogICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnY291cG9uX25hbWUnLCBkYXRhLnRpdGxlKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UobmFtZSkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmNvdXBvbk5hbWUuaW5kZXhPZihuYW1lKTsKICAgICAgdGhpcy5jb3Vwb25OYW1lLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGxldCBjb3Vwb25JZHMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzOwogICAgICBjb3Vwb25JZHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy51cGRhdGVJZHMgPSBjb3Vwb25JZHM7CiAgICAgIHRoaXMudXBkYXRlTmFtZSA9IHRoaXMuY291cG9uTmFtZTsKICAgIH0sCiAgICAvLyDov5DotLnmqKHmnb8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMucHJvZHVjdEdldFRlbXBsYXRlKCk7CiAgICB9LAogICAgLy8g5re75Yqg6L+Q6LS55qih5p2/CiAgICBhZGRUZW1wKCkgewogICAgICB0aGlzLiRyZWZzLnRlbXBsYXRlcy5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDliKDpmaTop4bpopHvvJsKICAgIGRlbFZpZGVvKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJHNldCh0aGF0LmZvcm1WYWxpZGF0ZSwgJ3ZpZGVvX2xpbmsnLCAnJyk7CiAgICAgIHRoYXQuJHNldCh0aGF0LCAncHJvZ3Jlc3MnLCAwKTsKICAgICAgdGhhdC52aWRlb0luZyA9IGZhbHNlOwogICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IGZhbHNlOwogICAgfSwKICAgIHpoX3VwbG9hZEZpbGUoKSB7CiAgICAgIGlmICh0aGlzLnNlbGV0VmlkZW8gPT0gMSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSB0aGlzLnZpZGVvTGluazsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnJlZmlkLmNsaWNrKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIrkvKDop4bpopEKICAgIHpoX3VwbG9hZEZpbGVfY2hhbmdlKGV2ZmlsZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGxldCBzdWZmaXggPSBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuc3Vic3RyKGV2ZmlsZS50YXJnZXQuZmlsZXNbMF0ubmFtZS5pbmRleE9mKCcuJykpOwogICAgICBpZiAoc3VmZml4LmluZGV4T2YoJy5tcDQnKSA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygTVA05paH5Lu2Jyk7CiAgICAgIH0KICAgICAgbGV0IHR5cGVzID0gewogICAgICAgIGtleTogZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLAogICAgICAgIGNvbnRlbnRUeXBlOiBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLnR5cGUsCiAgICAgIH07CiAgICAgIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSh0eXBlcykKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGF0LiR2aWRlb0Nsb3VkCiAgICAgICAgICAgIC52aWRlb1VwbG9hZCh7CiAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEudHlwZSwKICAgICAgICAgICAgICBldmZpbGU6IGV2ZmlsZSwKICAgICAgICAgICAgICByZXM6IHJlcywKICAgICAgICAgICAgICB1cGxvYWRpbmcoc3RhdHVzLCBwcm9ncmVzcykgewogICAgICAgICAgICAgICAgdGhhdC51cGxvYWQudmlkZW9JbmcgPSBzdGF0dXM7CiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdGhhdC5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHJlcy51cmw7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfop4bpopHkuIrkvKDmiJDlip8nKTsKICAgICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IGZhbHNlOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkuIrkuIDpobXvvJsKICAgIHVwVGFiKCkgewogICAgICB0aGlzLmN1cnJlbnRUYWIgPSAoTnVtYmVyKHRoaXMuY3VycmVudFRhYikgLSAxKS50b1N0cmluZygpOwogICAgfSwKICAgIC8vIOS4i+S4gOmhte+8mwogICAgZG93blRhYigpIHsKICAgICAgdGhpcy5jdXJyZW50VGFiID0gKE51bWJlcih0aGlzLmN1cnJlbnRUYWIpICsgMSkudG9TdHJpbmcoKTsKICAgIH0sCiAgICAvLyDlsZ7mgKflvLnnqpflm57osIPlh73mlbDvvJsKICAgIHVzZXJTZWFyY2hzKCkgewogICAgICB0aGlzLnByb2R1Y3RHZXRSdWxlKCk7CiAgICB9LAogICAgLy8g5re75Yqg6KeE5YiZ77ybCiAgICBhZGRSdWxlKCkgewogICAgICB0aGlzLiRyZWZzLmFkZGF0dHIubW9kYWwgPSB0cnVlOwogICAgfSwKICAgIC8vIOaJuemHj+iuvue9ruWIhuS9o++8mwogICAgYnJva2VyYWdlU2V0VXAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLmlzX3N1Yi5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICBpZiAodGhhdC5tYW55QnJva2VyYWdlIDw9IDAgfHwgdGhhdC5tYW55QnJva2VyYWdlVHdvIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnov5TkvaPph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhhdC5mb3JtVmFsaWRhdGUuaXNfc3ViLmluZGV4T2YoMCkgPiAtMSkgewogICAgICAgIGlmICh0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lya5ZGY5Lu35ZCO6L+b6KGM5om56YeP5re75YqgJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIubGVuZ3RoID09PSAyKSB7CiAgICAgICAgaWYgKHRoYXQubWFueUJyb2tlcmFnZSA8PSAwIHx8IHRoYXQubWFueUJyb2tlcmFnZVR3byA8PSAwIHx8IHRoYXQubWFueVZpcFByaWNlIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlrozph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yIChsZXQgdmFsIG9mIHRoYXQubWFueUZvcm1WYWxpZGF0ZSkgewogICAgICAgIHRoaXMuJHNldCh2YWwsICdicm9rZXJhZ2UnLCB0aGF0Lm1hbnlCcm9rZXJhZ2UpOwogICAgICAgIHRoaXMuJHNldCh2YWwsICdicm9rZXJhZ2VfdHdvJywgdGhhdC5tYW55QnJva2VyYWdlVHdvKTsKICAgICAgICB0aGlzLiRzZXQodmFsLCAndmlwX3ByaWNlJywgdGhhdC5tYW55VmlwUHJpY2UpOwogICAgICB9CiAgICB9LAogICAgLy8g5om56YeP6K6+572u5Lya5ZGY5Lu3CiAgICB2aXBQcmljZVNldFVwKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGlmICh0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeS8muWRmOS7t+WcqOi/m+ihjOaJuemHj+a3u+WKoCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAobGV0IHZhbCBvZiB0aGF0Lm1hbnlGb3JtVmFsaWRhdGUpIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICd2aXBfcHJpY2UnLCB0aGF0Lm1hbnlWaXBQcmljZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5Y2h5a+GCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMudmlydHVhbExpc3QucHVzaCh7CiAgICAgICAga2V5OiAnJywKICAgICAgICB2YWx1ZTogJycsCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIneWni+WMluWNoeWvhuS/oeaBrwogICAgaW5pdFZpcnR1YWxEYXRhKHN0YXR1cykgewogICAgICB0aGlzLnZpcnR1YWxMaXN0ID0gWwogICAgICAgIHsKICAgICAgICAgIGtleTogJycsCiAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICByZW1vdmVWaXJ0dWFsKGluZGV4KSB7CiAgICAgIHRoaXMudmlydHVhbExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmuIXnqbrmibnph4/op4TmoLzkv6Hmga8KICAgIGJhdGNoRGVsKCkgewogICAgICB0aGlzLm9uZUZvcm1CYXRjaCA9IFsKICAgICAgICB7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgIHZpcnR1YWxfbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBjb25maXJtKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUudHJpbSgpLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWxnuaApycpOwogICAgICB9CiAgICAgIHRoYXQucnVsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5ydWxlX25hbWUgPT09IHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUpIHsKICAgICAgICAgIHRoYXQuYXR0cnMgPSBpdGVtLnJ1bGVfdmFsdWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bllYblk4HlsZ7mgKfmqKHmnb/vvJsKICAgIHByb2R1Y3RHZXRSdWxlKCkgewogICAgICBwcm9kdWN0R2V0UnVsZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMucnVsZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6L+Q6LS55qih5p2/77ybCiAgICBwcm9kdWN0R2V0VGVtcGxhdGUoKSB7CiAgICAgIHByb2R1Y3RHZXRUZW1wbGF0ZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudGVtcGxhdGVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOihqOagvOS4reeahOWxnuaApwogICAgZGVsQXR0clRhYmxlKGluZGV4KSB7CiAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmibnph4/mt7vliqAKICAgIGJhdGNoQWRkKCkgewogICAgICBmb3IgKGxldCB2YWwgb2YgdGhpcy5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3BpYycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdwcmljZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLnByaWNlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnY29zdCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnb3RfcHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5vdF9wcmljZSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5zdG9jayA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdzdG9jaycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnN0b2NrKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlICE9PSAnJykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jhcl9jb2RlJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0uYmFyX2NvZGUpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0ID4gMCkgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3dlaWdodCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLndlaWdodCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS52b2x1bWUgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAndm9sdW1lJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDmjInpkq4KICAgIGFkZEJ0bigpIHsKICAgICAgdGhpcy5jbGVhckF0dHIoKTsKICAgICAgdGhpcy5jcmVhdGVCbnQgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93SXB1dCA9IHRydWU7CiAgICB9LAogICAgLy8g56uL5Y2z55Sf5oiQCiAgICBnZW5lcmF0ZSh0eXBlLCBpc0NvcHksIGFycikgewogICAgICBnZW5lcmF0ZUF0dHJBcGkoCiAgICAgICAgewogICAgICAgICAgYXR0cnM6IHRoaXMuYXR0cnMsCiAgICAgICAgICBpc192aXJ0dWFsOiBbMSwgMl0uaW5jbHVkZXModGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlKSA/IDEgOiAwLAogICAgICAgICAgdmlydHVhbF90eXBlOiB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUsCiAgICAgICAgfSwKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pZCwKICAgICAgICB0eXBlLAogICAgICApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGluZm8gPSByZXMuZGF0YS5pbmZvLAogICAgICAgICAgICBoZWFkZXIxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbmZvLmhlYWRlcikpOwogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gJzAnICYmICh0aGlzLiRyb3V0ZS5xdWVyeS50eXBlICE9IC0xIHx8IHR5cGUpICYmICFpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gaW5mby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gYXJyOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGhlYWRlciA9IGluZm8uaGVhZGVyOwogICAgICAgICAgaWYgKFsxLCAyXS5pbmNsdWRlcyh0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpKSB7CiAgICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbE0gPSBoZWFkZXI7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IGhlYWRlcjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IGhlYWRlcjE7CiAgICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbE0gPSBpbmZvLmhlYWRlcjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY2hlY2tBbGxHcm91cCh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIpOwogICAgICAgICAgaWYgKCF0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgJiYgdGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAxICYmICFpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGl0ZW0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBpZiAoIWl0ZW0ucGljKSB7CiAgICAgICAgICAgICAgICBpdGVtLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+W5raICiAgICBvZmZBdHRyTmFtZSgpIHsKICAgICAgdGhpcy5zaG93SXB1dCA9IGZhbHNlOwogICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWU7CiAgICB9LAogICAgY2xlYXJBdHRyKCkgewogICAgICB0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSA9ICcnOwogICAgICB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsID0gJyc7CiAgICB9LAogICAgLy8g5Yig6Zmk6KeE5qC8CiAgICBoYW5kbGVSZW1vdmVSb2xlKGluZGV4KSB7CiAgICAgIHRoaXMuYXR0cnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5Yig6Zmk5bGe5oCnCiAgICBoYW5kbGVSZW1vdmUyKGl0ZW0sIGluZGV4KSB7CiAgICAgIGl0ZW0uc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmt7vliqDop4TliJnlkI3np7AKICAgIGNyZWF0ZUF0dHJOYW1lKCkgewogICAgICBpZiAodGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUgJiYgdGhpcy5mb3JtRHluYW1pYy5hdHRyc1ZhbCkgewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgdmFsdWU6IHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNOYW1lLAogICAgICAgICAgZGV0YWlsOiBbdGhpcy5mb3JtRHluYW1pYy5hdHRyc1ZhbF0sCiAgICAgICAgfTsKICAgICAgICB0aGlzLmF0dHJzLnB1c2goZGF0YSk7CiAgICAgICAgdmFyIGhhc2ggPSB7fTsKICAgICAgICB0aGlzLmF0dHJzID0gdGhpcy5hdHRycy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHQudmFsdWVdID8gJycgOiAoaGFzaFtuZXh0LnZhbHVlXSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpKTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgICB0aGlzLmNsZWFyQXR0cigpOwogICAgICAgIHRoaXMuc2hvd0lwdXQgPSBmYWxzZTsKICAgICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fmt7vliqDlrozmlbTnmoTop4TmoLzvvIEnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOWxnuaApwogICAgY3JlYXRlQXR0cihudW0sIGlkeCkgewogICAgICBpZiAobnVtKSB7CiAgICAgICAgdGhpcy5hdHRyc1tpZHhdLmRldGFpbC5wdXNoKG51bSk7CiAgICAgICAgdmFyIGhhc2ggPSB7fTsKICAgICAgICB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsID0gdGhpcy5hdHRyc1tpZHhdLmRldGFpbC5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHRdID8gJycgOiAoaGFzaFtuZXh0XSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpKTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWxnuaApycpOwogICAgICB9CiAgICB9LAogICAgLy8g5ZWG5ZOB5YiG57G777ybCiAgICBnb29kc0NhdGVnb3J5KCkgewogICAgICBjYXNjYWRlckxpc3RBcGkoMSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnRyZWVTZWxlY3QgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8v6KeG6KeG5LiK5Lyg57G75Z6LCiAgICBjaGFuZ2VWaWRlbyhlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSAnJzsKICAgICAgdGhpcy52aWRlb0xpbmsgPSAnJzsKICAgIH0sCiAgICAvLyDmlLnlj5jop4TmoLwKICAgIGNoYW5nZVNwZWMoKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YiA9IFtdOwogICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIGlmIChpZCkgewogICAgICAgIGNoZWNrQWN0aXZpdHlBcGkoaWQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7fSkKICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IHRoaXMuc3BlY190eXBlOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDor6bmg4UKICAgIGdldEluZm8oKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5zcGluU2hvdyA9IHRydWU7CiAgICAgIHByb2R1Y3RJbmZvQXBpKHRoYXQuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLnByb2R1Y3RJbmZvOwogICAgICAgICAgdGhpcy5pbmZvRGF0YShkYXRhKTsKICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZShpKSB7CiAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpLCAxKTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnNwbGljZShpLCAxKTsKICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbMF0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlWzBdOwogICAgfSwKICAgIC8vIOWFs+mXreWbvueJh+S4iuS8oOaooeaAgeahhgogICAgY2hhbmdlQ2FuY2VsKG1zZykgewogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcCh0aXQsIHBpY1RpdCwgaW5kZXgpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgIHRoaXMuaXNDaG9pY2UgPSB0aXQgPT09ICdkYW4nID8gJ+WNlemAiScgOiAn5aSa6YCJJzsKICAgICAgdGhpcy5waWNUaXQgPSBwaWNUaXQ7CiAgICAgIHRoaXMudGFibGVJbmRleCA9IGluZGV4OwogICAgfSwKICAgIC8vIOiOt+WPluWNleW8oOWbvueJh+S/oeaBrwogICAgZ2V0UGljKHBjKSB7CiAgICAgIHN3aXRjaCAodGhpcy5waWNUaXQpIHsKICAgICAgICBjYXNlICdkYW5Gcm9tJzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGl0ZW0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkYW5UYWJsZSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkdW9waSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZWNvbW1lbmRfaW1hZ2UnOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2ltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGVbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICB9CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpY0QocGMpIHsKICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgdGhpcy5pbWFnZXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnB1c2goaXRlbS5hdHRfZGlyKTsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2UgPSB0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2Uuc3BsaWNlKDAsIDEwKTsKICAgICAgfSk7CiAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZVswXTsKICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgaGFuZGxlU3VibWl0KG5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnR5cGUgPSB0aGlzLnR5cGU7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzID0gdGhpcy5vbmVGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pdGVtcyA9IFtdOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc19jb3B5ID0gMDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLml0ZW1zID0gdGhpcy5hdHRyczsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnMgPSB0aGlzLm1hbnlGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX2NvcHkgPSAxOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSAmJiB0aGlzLm1hbnlGb3JtVmFsaWRhdGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3or7fngrnlh7vnlJ/miJDlpJrop4TmoLwnKTsKICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+354K55Ye755Sf5oiQ6KeE5qC877yBJyk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpdGVtW2ldLnN0b2NrID4gMTAwMDAwMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfop4TmoLzlupPlrZgt5bqT5a2Y6LaF5Ye657O757uf6IyD5Zu0KDEwMDAwMDApJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWJbMF0gPT09IDEpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1baV0uYnJva2VyYWdlID09PSBudWxsIHx8IGl0ZW1baV0uYnJva2VyYWdlX3R3byA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iQpemUgOiuvue9ri0g5LiA5LqM57qn6L+U5L2j5LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoaXRlbVtpXS52aXBfcHJpY2UgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfokKXplIDorr7nva4t5Lya5ZGY5Lu35LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoaXRlbVtpXS5icm9rZXJhZ2UgPT09IG51bGwgfHwgaXRlbVtpXS5icm9rZXJhZ2VfdHdvID09PSBudWxsIHx8IGl0ZW1baV0udmlwX3ByaWNlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6JCl6ZSA6K6+572uLSDkuIDkuoznuqfov5TkvaPlkozkvJrlkZjku7fkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5mcmVpZ2h0ID09IDMgJiYgIXRoaXMuZm9ybVZhbGlkYXRlLnRlbXBfaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLei/kOi0ueaooeadv+S4jeiDveS4uuepuicpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGFjdGl2ZUlkcyA9IFtdOwogICAgICAgICAgdGhpcy5kYXRhTGFiZWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBhY3RpdmVJZHMucHVzaChpdGVtLmlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUubGFiZWxfaWQgPSBhY3RpdmVJZHM7CiAgICAgICAgICBpZiAodGhpcy5vcGVuU3ViaW1pdCkgcmV0dXJuOwogICAgICAgICAgdGhpcy5vcGVuU3ViaW1pdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHRoaXMuZm9ybWF0UmljaFRleHQodGhpcy5jb250ZW50KTsKICAgICAgICAgIHByb2R1Y3RBZGRBcGkodGhpcy5mb3JtVmFsaWRhdGUpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcwJykgewogICAgICAgICAgICAgICAgY2FjaGVEZWxldGUoKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoaXMuJHJvdXRlUHJvU3RyICsgJy9wcm9kdWN0L3Byb2R1Y3RfbGlzdCcgfSk7CiAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc3RvcmVfbmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5ZCN56ew5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5YiG57G75LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS51bml0X25hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgeWNleS9jeS4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB6L2u5pKt5Zu+5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MubGVuZ3RoICYmICF0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn54mp5rWB6K6+572uLeiHs+WwkemAieaLqeS4gOenjeeJqea1geaWueW8jycpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUudGVtcF9pZCAmJiB0aGlzLmZvcm1WYWxpZGF0ZS5mcmVpZ2h0ID09IDMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLei/kOi0ueaooeadv+S4jeiDveS4uuepuicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlVGVtcGxhdGUobXNnKSB7CiAgICAgIHRoaXMudGVtcGxhdGUgPSBtc2c7CiAgICB9LAogICAgLy8g6KGo5Y2V6aqM6K+BCiAgICB2YWxpZGF0ZShwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+WKqAogICAgaGFuZGxlRHJhZ1N0YXJ0KGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IGl0ZW07CiAgICB9LAogICAgaGFuZGxlRHJhZ0VuZChlLCBpdGVtKSB7CiAgICAgIHRoaXMuZHJhZ2dpbmcgPSBudWxsOwogICAgfSwKICAgIGhhbmRsZURyYWdPdmVyKGUpIHsKICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW50ZXIoZSwgaXRlbSkgewogICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOwogICAgICBpZiAoaXRlbSA9PT0gdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2VdOwogICAgICBjb25zdCBzcmMgPSBuZXdJdGVtcy5pbmRleE9mKHRoaXMuZHJhZ2dpbmcpOwogICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKGl0ZW0pOwogICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZSA9IG5ld0l0ZW1zOwogICAgfSwKICAgIC8vIOi/h+a7pOivpuaDheWGheWuuQogICAgZm9ybWF0UmljaFRleHQoaHRtbCkgewogICAgICBsZXQgbmV3Q29udGVudCA9IGh0bWwucmVwbGFjZSgvPGltZ1tePl0qPi9naSwgZnVuY3Rpb24gKG1hdGNoLCBjYXB0dXJlKSB7CiAgICAgICAgbWF0Y2ggPSBtYXRjaC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvc3R5bGU9J1teJ10rJy9naSwgJycpOwogICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgvd2lkdGg9IlteIl0rIi9naSwgJycpLnJlcGxhY2UoL3dpZHRoPSdbXiddKycvZ2ksICcnKTsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL2hlaWdodD0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvaGVpZ2h0PSdbXiddKycvZ2ksICcnKTsKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCBmdW5jdGlvbiAobWF0Y2gsIGNhcHR1cmUpIHsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL3dpZHRoOlteO10rOy9naSwgJ21heC13aWR0aDoxMDAlOycpLnJlcGxhY2UoL21heC1tYXgtd2lkdGg6W147XSs7L2dpLCAnbWF4LXdpZHRoOjEwMCU7JykKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC88YnJbXj5dKlwvPi9naSwgJycpOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKAogICAgICAgIC9cPGltZy9naSwKICAgICAgICAnPGltZyBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7aGVpZ2h0OmF1dG87ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowOyInLAogICAgICApOwogICAgICByZXR1cm4gbmV3Q29udGVudDsKICAgIH0sCiAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgdW5pcXVlKGFycikgewogICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7CiAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhcnIpID0+ICFyZXMuaGFzKGFyci5wcm9kdWN0X2lkKSAmJiByZXMuc2V0KGFyci5wcm9kdWN0X2lkLCAxKSk7CiAgICB9LAogICAgLy8g5ZWG5ZOBaWQKICAgIGdldFByb2R1Y3RJZChkYXRhKSB7CiAgICAgIHRoaXMuZ29vZHNfbW9kYWxzID0gZmFsc2U7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJlY29tbWVuZF9saXN0ID0gdGhpcy51bmlxdWUodGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2xpc3QuY29uY2F0KGRhdGEpKTsKICAgIH0sCiAgICAvLyDpgInmi6nmjqjojZDllYblk4EKICAgIGNoYW5nZUdvb2RzKCkgewogICAgICB0aGlzLmdvb2RzX21vZGFscyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LmdldExpc3QoKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ29vZHNDYXRlZ29yeSgpOwogICAgfSwKICAgIC8vIOmAieaLqeeUqOaIt+agh+etvgogICAgYWN0aXZlRGF0YShkYXRhTGFiZWwpIHsKICAgICAgdGhpcy5sYWJlbFNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhTGFiZWw7CiAgICB9LAogICAgLy8g5qCH562+5by556qX5YWz6ZetCiAgICBsYWJlbENsb3NlKCkgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIoOmZpOeUqOaIt+agh+etvgogICAgY2xvc2VMYWJlbChsYWJlbCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmRhdGFMYWJlbC5pbmRleE9mKHRoaXMuZGF0YUxhYmVsLmZpbHRlcigoZCkgPT4gZC5pZCA9PSBsYWJlbC5pZClbMF0pOwogICAgICB0aGlzLmRhdGFMYWJlbC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOaJk+W8gOmAieaLqeeUqOaIt+agh+etvgogICAgb3BlbkxhYmVsKHJvdykgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKChlKSA9PiB7CiAgICAgICAgLy8gdGhpcy4kcmVmcy51c2VyTGFiZWwudXNlckxhYmVsKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhTGFiZWwpKSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVuaXF1ZXMoc29uZ3MpIHsKICAgICAgbGV0IHJlc3VsdCA9IHt9OwogICAgICBsZXQgZmluYWxSZXN1bHQgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb25ncy5sZW5ndGg7IGkrKykgewogICAgICAgIHJlc3VsdFtzb25nc1tpXS5wcm9kdWN0X2lkXSA9IHNvbmdzW2ldOwogICAgICB9CiAgICAgIGZvciAobGV0IGl0ZW0gaW4gcmVzdWx0KSB7CiAgICAgICAgZmluYWxSZXN1bHQucHVzaChyZXN1bHRbaXRlbV0pOwogICAgICB9CiAgICAgIHJldHVybiBmaW5hbFJlc3VsdDsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmVSZWNvbW1lbmQoaSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5yZWNvbW1lbmRfbGlzdC5zcGxpY2UoaSwgMSk7CiAgICB9LAogICAgd2F0Y2hBY3Rpdml0eSgpIHsKICAgICAgbGV0IG1hcmtldGluZyA9IFtdCiAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hY3Rpdml0eS5tYXAoKGVsKSA9PiB7CiAgICAgICAgaWYgKGVsID09ICfpu5jorqQnKSB7CiAgICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgICAgfQogICAgICAgIGlmIChlbCA9PSAn56eS5p2AJyAmJiBjaGVja0FycmF5KCdzZWNraWxsJykpIHsKICAgICAgICAgIG1hcmtldGluZy5wdXNoKGVsKTsKICAgICAgICB9IAogICAgICAgICBpZiAoZWwgPT0gJ+egjeS7tycgJiYgY2hlY2tBcnJheSgnYmFyZ2FpbicpKSB7CiAgICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgICAgfSAKICAgICAgICAgaWYgKGVsID09ICfmi7zlm6InICYmIGNoZWNrQXJyYXkoJ2NvbWJpbmF0aW9uJykpIHsKICAgICAgICAgIG1hcmtldGluZy5wdXNoKGVsKTsKICAgICAgICB9IAogICAgICB9KTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYWN0aXZpdHkgPSBtYXJrZXRpbmcKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA05CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/product/productAdd","sourcesContent":["<template>\n  <div class=\"\" id=\"shopp-manager\" v-loading=\"spinShow\">\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.params.id ? '' : ''\"\n      :backUrl=\"$routeProStr + '/product/product_list'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\" :body-style=\"{ padding: '0 20px 20px' }\">\n      <el-tabs v-model=\"currentTab\">\n        <el-tab-pane v-for=\"(item, index) in headTab\" :key=\"index\" :label=\"item.tit\" :name=\"item.name\"></el-tab-pane>\n      </el-tabs>\n      <el-form\n        class=\"formValidate mt20\"\n        ref=\"formValidate\"\n        :rules=\"ruleValidate\"\n        :model=\"formValidate\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        @submit.native.prevent\n      >\n        <!-- -->\n        <el-row :gutter=\"24\" v-show=\"currentTab === '1'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" props=\"is_virtual\">\n              <div\n                class=\"virtual\"\n                :class=\"formValidate.virtual_type == item.id ? 'virtual_boder' : 'virtual_boder2'\"\n                v-for=\"(item, index) in virtual\"\n                :key=\"index\"\n                @click=\"virtualbtn(item.id, 2)\"\n              >\n                <div class=\"virtual_top\">{{ item.tit }}</div>\n                <div class=\"virtual_bottom\">({{ item.tit2 }})</div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_san\"></div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_dui\"></div>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"cate_id\">\n              <!-- {{ formValidate.cate_id }}\n              <el-select v-model=\"formValidate.cate_id\" placeholder=\"\" multiple class=\"content_width\">\n                <el-option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{\n                  item.html + item.cate_name\n                }}</el-option>\n              </el-select>\n              {{ formValidate.cate_id }} -->\n              <el-cascader\n                class=\"content_width\"\n                v-model=\"formValidate.cate_id\"\n                size=\"small\"\n                :options=\"treeSelect\"\n                :props=\"{ multiple: true, checkStrictly: true, emitPath: false }\"\n                clearable\n              ></el-cascader>\n              <span class=\"addfont\" @click=\"addCate\"></span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"store_name\">\n              <el-input class=\"content_width\" v-model.trim=\"formValidate.store_name\" placeholder=\"\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"unit_name\">\n              <el-input class=\"content_width\" v-model=\"formValidate.unit_name\" placeholder=\"\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"slider_image\">\n              <div class=\"acea-row\">\n                <div\n                  class=\"pictrue\"\n                  v-for=\"(item, index) in formValidate.slider_image\"\n                  :key=\"index\"\n                  draggable=\"true\"\n                  @dragstart=\"handleDragStart($event, item)\"\n                  @dragover.prevent=\"handleDragOver($event, item)\"\n                  @dragenter=\"handleDragEnter($event, item)\"\n                  @dragend=\"handleDragEnd($event, item)\"\n                >\n                  <img v-lazy=\"item\" />\n                  <i class=\"el-icon-error btndel\" @click=\"handleRemove(index)\"></i>\n                </div>\n                <div\n                  v-if=\"formValidate.slider_image.length < 10\"\n                  class=\"upLoad acea-row row-center-wrapper\"\n                  @click=\"modalPicTap('duo')\"\n                >\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n                <el-input v-model=\"formValidate.slider_image[0]\" style=\"display: none\"></el-input>\n              </div>\n\n              <div class=\"titTip\">800*80010</div>\n\n              <!-- <div class=\"tips\">(10<br />750*750)</div> -->\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.video_open\" size=\"large\">\n                <span slot=\"open\"></span>\n                <span slot=\"close\"></span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.video_open && !formValidate.video_link\">\n            <el-form-item label=\"\">\n              <el-radio-group v-model=\"seletVideo\" @input=\"changeVideo\">\n                <el-radio :label=\"0\" class=\"radio\"></el-radio>\n                <el-radio :label=\"1\"></el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.video_open\" id=\"selectvideo\">\n            <el-form-item label=\"\" prop=\"video_link\">\n              <el-input\n                v-if=\"seletVideo == 1 && !formValidate.video_link\"\n                class=\"content_width\"\n                v-model=\"videoLink\"\n                placeholder=\"\"\n              />\n              <input type=\"file\" ref=\"refid\" @change=\"zh_uploadFile_change\" style=\"display: none\" />\n              <div\n                v-if=\"seletVideo == 0 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                class=\"ml10 videbox\"\n                @click=\"zh_uploadFile\"\n              >\n                +\n              </div>\n              <el-button\n                v-if=\"seletVideo == 1 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                type=\"primary\"\n                class=\"ml10\"\n                @click=\"zh_uploadFile\"\n                ></el-button\n              >\n              <el-upload\n                v-if=\"upload_type === '1' && !videoLink && !formValidate.video_link\"\n                :show-file-list=\"false\"\n                :action=\"fileUrl2\"\n                :before-upload=\"videoSaveToUrl\"\n                :data=\"uploadData\"\n                :headers=\"header\"\n                :multiple=\"false\"\n                style=\"display: inline-block\"\n                accept=\".mp4\"\n              >\n                <div v-if=\"seletVideo === 0 && !formValidate.video_link\" class=\"videbox\">+</div>\n              </el-upload>\n              <div class=\"box-video-style\" v-if=\"formValidate.video_link\">\n                <video\n                  style=\"width: 100%; height: 100%;\"\n                  :src=\"formValidate.video_link\"\n                  controls=\"controls\"\n                >\n                   video \n                </video>\n                <div class=\"mark\"></div>\n                <i class=\"el-icon-delete iconv\" @click=\"delVideo\"></i>\n              </div>\n              <Progress class=\"progress\" :percent=\"progress\" :stroke-width=\"5\" v-if=\"upload.videoIng || videoIng\" />\n              <div class=\"titTip\">93016:9</div>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"\">\n              <el-radio-group v-model=\"formValidate.is_show\">\n                <el-radio :label=\"1\" class=\"radio\"></el-radio>\n                <el-radio :label=\"0\"></el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n\n          <!-- <el-col :span=\"24\">\n                        <el-form-item label=\"\" prop=\"label_id\">\n                            <el-select v-model=\"formValidate.label_id\" multiple v-width=\"'50%'\">\n                                <el-option v-for=\"item in dataLabel\" :value=\"item.id\" :key=\"item.id\">{{ item.label_name }}</el-option>\n                            </el-select>\n                        </el-form-item>\n                    </el-col> -->\n        </el-row>\n        <!-- -->\n        <el-row :gutter=\"24\" v-show=\"currentTab === '2'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" props=\"spec_type\">\n              <el-radio-group v-model=\"formValidate.spec_type\" @input=\"changeSpec\">\n                <el-radio :label=\"0\" class=\"radio\"></el-radio>\n                <el-radio :label=\"1\"></el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <!-- -->\n          <el-col :span=\"24\" v-if=\"formValidate.spec_type === 1\" class=\"noForm\">\n            <el-form-item label=\"\" prop=\"\">\n              <div class=\"acea-row row-middle\">\n                <el-select v-model=\"formValidate.selectRule\" class=\"content_width mr14\">\n                  <el-option\n                    v-for=\"(item, index) in ruleList\"\n                    :value=\"item.rule_name\"\n                    :key=\"index\"\n                    :label=\"item.rule_name\"\n                  ></el-option>\n                </el-select>\n                <el-button type=\"primary\" @click=\"confirm\"></el-button>\n                <el-button @click=\"addRule\"></el-button>\n              </div>\n            </el-form-item>\n\n            <el-form-item v-if=\"attrs.length !== 0\">\n              <draggable\n                class=\"dragArea list-group\"\n                :list=\"attrs\"\n                group=\"peoples\"\n                handle=\".move-icon\"\n                :move=\"checkMove\"\n                @end=\"end\"\n              >\n                <div v-for=\"(item, index) in attrs\" :key=\"index\" class=\"acea-row row-middle mb10\">\n                  <div class=\"move-icon\">\n                    <span class=\"iconfont icondrag2\"></span>\n                  </div>\n                  <div style=\"width: 90%\" :class=\"moveIndex === index ? 'borderStyle' : ''\">\n                    <div class=\"acea-row row-middle\">\n                      <span class=\"mr5\">{{ item.value }}</span>\n                      <i size=\"14\" class=\"curs el-icon-error\" @click=\"handleRemoveRole(index)\" />\n                    </div>\n                    <div class=\"rulesBox\">\n                      <draggable class=\"item\" :list=\"item.detail\" handle=\".drag\">\n                        <el-tag\n                          closable\n                          color=\"primary\"\n                          v-for=\"(j, indexn) in item.detail\"\n                          :key=\"indexn\"\n                          class=\"mr20 drag\"\n                          @close=\"handleRemove2(item.detail, indexn)\"\n                          >{{ j }}</el-tag\n                        >\n                      </draggable>\n                      <el-input\n                        placeholder=\"\"\n                        v-model=\"item.detail.attrsVal\"\n                        @keyup.enter.native=\"createAttr(item.detail.attrsVal, index)\"\n                        style=\"width: 190px\"\n                      >\n                        <template slot=\"append\"\n                          ><el-button type=\"primary\" @click=\"createAttr(item.detail.attrsVal, index)\"\n                            ></el-button\n                          ></template\n                        >\n                      </el-input>\n                    </div>\n                  </div>\n                </div>\n              </draggable>\n              <!-- <div  v-for=\"(item, index) in attrs\" :key=\"index\">\n                                    <div class=\"acea-row row-middle\"><span class=\"mr5\">{{item.value}}</span><Icon type=\"ios-close-circle\" size=\"14\" class=\"curs\" @click=\"handleRemoveRole(index)\"/></div>\n                                    <div class=\"rulesBox\">\n                                        <el-tag type=\"dot\" closable color=\"primary\" v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" :name=\"j\" class=\"mr20\" @on-close=\"handleRemove2(item.detail,indexn)\">{{j}}</el-tag>\n                                        <el-input search enter-button=\"\" placeholder=\"\" v-model=\"item.detail.attrsVal\" @on-search=\"createAttr(item.detail.attrsVal,index)\" style=\"width: 150px\"/>\n                                    </div>\n                                </div> -->\n            </el-form-item>\n            <!-- <el-col :span=\"24\" v-if=\"createBnt\"> -->\n            <el-form-item v-if=\"createBnt\">\n              <el-button type=\"primary\" @click=\"addBtn\"></el-button>\n              <el-button type=\"success\" @click=\"generate(1)\"></el-button>\n            </el-form-item>\n            <!-- </el-col> -->\n            <el-col :span=\"24\" v-if=\"showIput\">\n              <el-col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <el-form-item label=\"\">\n                  <el-input placeholder=\"\" v-model=\"formDynamic.attrsName\" />\n                </el-form-item>\n              </el-col>\n              <el-col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <el-form-item label=\"\">\n                  <el-input v-model=\"formDynamic.attrsVal\" placeholder=\"\" />\n                </el-form-item>\n              </el-col>\n              <el-col :xl=\"6\" :lg=\"5\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <div class=\"df-n-warp\">\n                  <el-button type=\"primary\" @click=\"createAttrName\"></el-button>\n                  <el-button @click=\"offAttrName\"></el-button>\n                </div>\n              </el-col>\n            </el-col>\n            <!-- -->\n            <el-col\n              :xl=\"24\"\n              :lg=\"24\"\n              :md=\"24\"\n              :sm=\"24\"\n              :xs=\"24\"\n              v-if=\"manyFormValidate.length && formValidate.header.length !== 0 && attrs.length !== 0\"\n            >\n              <!-- -->\n              <el-col :span=\"24\" v-if=\"[0, 3].includes(formValidate.virtual_type)\">\n                <el-form-item label=\"\" class=\"labeltop\">\n                  <el-table :data=\"oneFormBatch\" border>\n                    <el-table-column\n                      :label=\"item.title\"\n                      :min-width=\"item.minWidth\"\n                      v-for=\"(item, index) in formValidate.is_virtual ? columns3 : columns2\"\n                      :key=\"index\"\n                    >\n                      <template slot-scope=\"scope\">\n                        <template v-if=\"item.key\">\n                          <div>\n                            <span>{{ scope.row[item.key] }}</span>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'pic'\">\n                          <div\n                            class=\"acea-row row-middle row-center-wrapper\"\n                            @click=\"modalPicTap('dan', 'duopi', scope.$index)\"\n                          >\n                            <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                              <img v-lazy=\"oneFormBatch[0].pic\" />\n                            </div>\n                            <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                              <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                            </div>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'cost'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].cost\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'ot_price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].ot_price\"\n                            :min=\"0\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'stock'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].stock\"\n                            :disabled=\"formValidate.virtual_type == 1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'fictitious'\">\n                          <el-button\n                            v-if=\"!scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"addGoodsCoupon(scope.$index, 'oneFormBatch')\"\n                            ></el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"formValidate.virtual_type == 2 && scope.row.coupon_id\"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            >{{ scope.row.coupon_name }}</span\n                          >\n                          <el-button\n                            v-else-if=\"!scope.row.virtual_list.length && formValidate.virtual_type == 1\"\n                            @click=\"addVirtual(scope.$index, 'oneFormBatch')\"\n                            ></el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"scope.row.virtual_list.length && formValidate.virtual_type == 1\"\n                            @click=\"see(scope.row, 'oneFormBatch', scope.$index)\"\n                            ></span\n                          >\n                        </template>\n                        <template v-else-if=\"item.slot === 'bar_code'\">\n                          <el-input v-model=\"oneFormBatch[0].bar_code\"></el-input>\n                        </template>\n                        <template v-else-if=\"item.slot === 'weight'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].weight\"\n                            :step=\"0.1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'volume'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].volume\"\n                            :step=\"0.1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'action'\">\n                          <a @click=\"batchAdd\"></a>\n                          <el-divider direction=\"vertical\"></el-divider>\n                          <a @click=\"batchDel\"></a>\n                        </template>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-form-item>\n              </el-col>\n              <!-- -->\n              <el-col :span=\"24\">\n                <el-form-item label=\"\" class=\"labeltop\">\n                  <el-table :data=\"manyFormValidate\" border>\n                    <el-table-column\n                      :label=\"item.title\"\n                      :min-width=\"item.minWidth\"\n                      v-for=\"(item, index) in formValidate.header\"\n                      :key=\"index\"\n                    >\n                      <template slot-scope=\"scope\">\n                        <template v-if=\"item.key\">\n                          <div>\n                            <span>{{ scope.row[item.key] }}</span>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'pic'\">\n                          <div\n                            class=\"acea-row row-middle row-center-wrapper\"\n                            @click=\"modalPicTap('dan', 'duoTable', scope.$index)\"\n                          >\n                            <div class=\"pictrue pictrueTab\" v-if=\"manyFormValidate[scope.$index].pic\">\n                              <img v-lazy=\"manyFormValidate[scope.$index].pic\" />\n                            </div>\n                            <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                              <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                            </div>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'cost'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].cost\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'ot_price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].ot_price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'stock'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].stock\"\n                            :disabled=\"formValidate.virtual_type == 1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            :precision=\"0\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'bar_code'\">\n                          <el-input v-model=\"manyFormValidate[scope.$index].bar_code\"></el-input>\n                        </template>\n                        <template v-else-if=\"item.slot === 'weight'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].weight\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'volume'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].volume\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'fictitious'\">\n                          <el-button\n                            v-if=\"!scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"addGoodsCoupon(scope.$index, 'manyFormValidate')\"\n                            ></el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            >{{ scope.row.coupon_name }}</span\n                          >\n                          <el-button\n                            v-else-if=\"!scope.row.virtual_list && !scope.row.stock && formValidate.virtual_type == 1\"\n                            @click=\"addVirtual(scope.$index, 'manyFormValidate')\"\n                            ></el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"\n                              (scope.row.virtual_list.length || scope.row.stock) && formValidate.virtual_type == 1\n                            \"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            ></span\n                          >\n                        </template>\n                        <template v-else-if=\"item.slot === 'action'\">\n                          <a @click=\"delAttrTable(scope.$index)\"></a>\n                        </template>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-form-item>\n              </el-col>\n            </el-col>\n          </el-col>\n          <!-- -->\n          <div v-if=\"formValidate.spec_type === 0\">\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'danTable', 0)\">\n                  <div class=\"pictrue\" v-if=\"oneFormValidate[0].pic\">\n                    <img v-lazy=\"oneFormValidate[0].pic\" />\n                    <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n                  </div>\n                  <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                    <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n                    <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                  </div>\n                </div>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].price\"\n                  :min=\"0\"\n                  :precision=\"2\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                  :active-change=\"false\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].cost\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].ot_price\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].stock\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :disabled=\"formValidate.virtual_type == 1\"\n                  :precision=\"0\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"\">\n                <el-input v-model.trim=\"oneFormValidate[0].bar_code\" class=\"content_width\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n              <el-form-item label=\"(KG)\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].weight\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"(m)\" v-if=\"formValidate.virtual_type == 0\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].volume\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n\n            <el-col :span=\"24\">\n              <el-form-item label=\"\" v-if=\"formValidate.virtual_type == 1 || formValidate.virtual_type == 2\">\n                <el-button\n                  v-if=\"!oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"addGoodsCoupon(0, 'oneFormValidate')\"\n                  ></el-button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  >{{ oneFormValidate[0].coupon_name }}</span\n                >\n                <el-button\n                  v-if=\"\n                    !oneFormValidate[0].virtual_list.length &&\n                    !oneFormValidate[0].stock &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"addVirtual(0, 'oneFormValidate')\"\n                  ></el-button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"\n                    (oneFormValidate[0].virtual_list.length || oneFormValidate[0].stock > 0) &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  ></span\n                >\n              </el-form-item>\n            </el-col>\n          </div>\n        </el-row>\n        <!-- -->\n        <el-row v-show=\"currentTab === '3'\">\n          <el-col :span=\"16\">\n            <el-form-item label=\"\">\n              <WangEditor style=\"width: 100%\" :content=\"contents\" @editorContent=\"getEditorContent\"></WangEditor>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\" style=\"width: 33%\">\n            <div class=\"ifam\">\n              <div class=\"content\" v-html=\"content\"></div>\n            </div>\n          </el-col>\n        </el-row>\n\n        <!-- -->\n        <el-row v-show=\"headTab.length === 6 ? currentTab === '4' : false\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"logistics\">\n              <el-checkbox-group v-model=\"formValidate.logistics\" @change=\"logisticsBtn\">\n                <el-checkbox label=\"1\"></el-checkbox>\n                <el-checkbox label=\"2\"></el-checkbox>\n              </el-checkbox-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-radio-group v-model=\"formValidate.freight\">\n                <!-- <el-radio :label=\"1\"></el-radio> -->\n                <el-radio :label=\"2\"></el-radio>\n                <el-radio :label=\"3\"></el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.freight != 3 && formValidate.freight != 1\">\n            <el-form-item label=\"\" :prop=\"formValidate.freight != 1 ? 'freight' : ''\">\n              <div class=\"acea-row\">\n                <el-input-number\n                  :controls=\"false\"\n                  :min=\"0\"\n                  v-model=\"formValidate.postage\"\n                  placeholder=\"\"\n                  class=\"content_width maxW\"\n                />\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.freight == 3\">\n            <el-form-item label=\"\" prop=\"temp_id\">\n              <div class=\"acea-row\">\n                <el-select\n                  v-model=\"formValidate.temp_id\"\n                  clearable\n                  placeholder=\"\"\n                  class=\"content_width maxW\"\n                >\n                  <el-option\n                    v-for=\"(item, index) in templateList\"\n                    :value=\"item.id\"\n                    :key=\"index\"\n                    :label=\"item.name\"\n                  ></el-option>\n                </el-select>\n                <span class=\"addfont\" @click=\"addTemp\"></span>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <!-- -->\n        <el-row :gutter=\"24\" v-show=\"headTab.length === 6 ? currentTab === '5' : currentTab === '4'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                v-model=\"formValidate.ficti\"\n                placeholder=\"\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                v-model=\"formValidate.sort\"\n                placeholder=\"\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"give_integral\">\n              <el-input-number\n                :controls=\"false\"\n                v-model=\"formValidate.give_integral\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                placeholder=\"\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"\">\n              <div v-if=\"couponName.length\" class=\"mb20\">\n                <el-tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @close=\"handleClose(item)\">{{\n                  item.title\n                }}</el-tag>\n              </div>\n              <el-button type=\"primary\" @click=\"addCoupon\"></el-button>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" prop=\"label_id\">\n              <div style=\"display: flex\">\n                <div class=\"labelInput acea-row row-between-wrapper\" @click=\"openLabel\">\n                  <div style=\"width: 90%\">\n                    <div v-if=\"dataLabel.length\">\n                      <el-tag closable v-for=\"(item, index) in dataLabel\" @close=\"closeLabel(item)\" :key=\"index\">{{\n                        item.label_name\n                      }}</el-tag>\n                    </div>\n                    <span class=\"span\" v-else></span>\n                  </div>\n                  <div class=\"iconfont iconxiayi\"></div>\n                </div>\n                <span class=\"addfont\" @click=\"addLabel\"></span>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.vip_product\" size=\"large\">\n                <span slot=\"open\"></span>\n                <span slot=\"close\"></span>\n              </el-switch>\n              <div class=\"titTip\"></div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-checkbox-group v-model=\"formValidate.is_sub\" @change=\"checkAllGroupChange\">\n                <el-checkbox :label=\"1\"></el-checkbox>\n                <el-checkbox :label=\"0\"></el-checkbox>\n              </el-checkbox-group>\n              <!-- <el-radio-group v-model=\"formValidate.is_sub\">\n                                <el-radio :label=\"1\" class=\"radio\"></el-radio>\n                                <el-radio :label=\"0\"></el-radio>\n                            </el-radio-group> -->\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.is_sub.length\">\n            <!---->\n            <el-form-item label=\"\" v-if=\"formValidate.spec_type === 0\">\n              <el-table :data=\"oneFormValidate\" border>\n                <el-table-column\n                  :label=\"item.title\"\n                  :min-width=\"item.minWidth\"\n                  v-for=\"(item, index) in columnsInstall\"\n                  :key=\"index\"\n                >\n                  <template slot-scope=\"scope\">\n                    <template v-if=\"item.key\">\n                      <div>\n                        <span>{{ scope.row[item.key] }}</span>\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'pic'\">\n                      <div class=\"pictrue pictrueTab\">\n                        <img v-lazy=\"oneFormValidate[0].pic\" />\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'price'\">\n                      <span>{{ oneFormValidate[0].price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'cost'\">\n                      <span>{{ oneFormValidate[0].cost }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'ot_price'\">\n                      <span>{{ oneFormValidate[0].ot_price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'stock'\">\n                      <span>{{ oneFormValidate[0].stock }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'bar_code'\">\n                      <span>{{ oneFormValidate[0].bar_code }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'weight'\">\n                      <span>{{ oneFormValidate[0].weight }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'fictitious'\">\n                      <el-button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(scope.$index, 'oneFormValidate')\"\n                        ></el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <el-button\n                        v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(scope.$index, 'oneFormValidate')\"\n                        ></el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'oneFormValidate', scope.$index)\"\n                        ></span\n                      >\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].brokerage\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage_two'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].brokerage_two\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'vip_price'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].vip_price\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n            <!---->\n            <el-form-item label=\"\" v-if=\"formValidate.spec_type === 1\">\n              <span v-if=\"formValidate.is_sub.indexOf(1) > -1\">\n                <span class=\"brokerage\"></span\n                ><el-input\n                  type=\"number\"\n                  :controls=\"false\"\n                  placeholder=\"\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyBrokerage\"\n                >\n                </el-input>\n                <span class=\"brokerage\"></span\n                ><el-input\n                  type=\"number\"\n                  :controls=\"false\"\n                  placeholder=\"\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyBrokerageTwo\"\n                  ></el-input\n                >\n              </span>\n              <span v-if=\"formValidate.is_sub.indexOf(0) > -1\">\n                <el-input-number\n                  :controls=\"false\"\n                  placeholder=\"\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyVipPrice\"\n                ></el-input-number>\n              </span>\n              <el-button type=\"primary\" @click=\"brokerageSetUp\"></el-button>\n              <!-- <template v-if=\"formValidate.is_sub\">\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerage\"></el-input-number>\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerageTwo\"></el-input-number>\n                                <el-button type=\"primary\" @click=\"brokerageSetUp\"></el-button>\n                            </template>\n                            <template v-else>\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"\" :min=\"0\" class=\"columnsBox\" v-model=\"manyVipPrice\"></el-input-number>\n                                <el-button type=\"primary\" @click=\"vipPriceSetUp\"></el-button>\n                            </template> -->\n            </el-form-item>\n            <el-form-item label=\"\" v-if=\"formValidate.spec_type === 1 && manyFormValidate.length\">\n              <el-table v-if=\"formValidate.is_sub\" :data=\"manyFormValidate\" border>\n                <el-table-column\n                  :label=\"item.title\"\n                  :min-width=\"item.minWidth\"\n                  v-for=\"(item, index) in columnsInstal2\"\n                  :key=\"index\"\n                >\n                  <template slot-scope=\"scope\">\n                    <template v-if=\"item.key\">\n                      <div>\n                        <span>{{ scope.row[item.key] }}</span>\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'pic'\">\n                      <div class=\"pictrue pictrueTab\">\n                        <img v-lazy=\"manyFormValidate[scope.$index].pic\" />\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'price'\">\n                      <span>{{ manyFormValidate[scope.$index].price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'cost'\">\n                      <span>{{ manyFormValidate[scope.$index].cost }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'ot_price'\">\n                      <span>{{ manyFormValidate[scope.$index].ot_price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'stock'\">\n                      <span>{{ manyFormValidate[scope.$index].stock }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'bar_code'\">\n                      <span>{{ manyFormValidate[scope.$index].bar_code }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'weight'\">\n                      <span>{{ manyFormValidate[index].weight }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'fictitious'\">\n                      <el-button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(scope.$index, 'manyFormValidate')\"\n                        ></el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <el-button\n                        v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(scope.$index, 'manyFormValidate')\"\n                        ></el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        ></span\n                      >\n                    </template>\n                    <template v-else-if=\"item.slot === 'volume'\">\n                      <span>{{ manyFormValidate[scope.$index].volume }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].brokerage\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage_two'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].brokerage_two\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'vip_price'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].vip_price\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"1\"\n                :max=\"9999999999\"\n                :precision=\"0\"\n                v-model=\"formValidate.min_qty\"\n                placeholder=\"\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.is_limit\" size=\"large\">\n                <span slot=\"open\"></span>\n                <span slot=\"close\"></span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\" v-if=\"formValidate.is_limit\">\n              <el-radio-group v-model=\"formValidate.limit_type\">\n                <el-radio :label=\"1\"></el-radio>\n                <el-radio :label=\"2\"></el-radio>\n              </el-radio-group>\n              <div class=\"titTip\"></div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.is_limit\">\n            <el-form-item label=\"\" prop=\"limit_num\">\n              <div class=\"acea-row row-middle\">\n                <el-input-number\n                  :controls=\"false\"\n                  placeholder=\"\"\n                  :precision=\"0\"\n                  :min=\"1\"\n                  v-model=\"formValidate.limit_num\"\n                  class=\"content_width\"\n                />\n                <span class=\"ml10\">  </span>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.virtual_type == 0 || formValidate.virtual_type == 3\">\n            <el-form-item label=\"\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.presale\" size=\"large\">\n                <span slot=\"open\"></span>\n                <span slot=\"close\"></span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.presale\">\n            <el-form-item label=\"\" prop=\"presale_time\">\n              <div class=\"acea-row row-middle\">\n                <el-date-picker\n                  clearable\n                  :editable=\"false\"\n                  type=\"datetimerange\"\n                  format=\"yyyy-MM-dd HH:mm\"\n                  value-format=\"yyyy-MM-dd HH:mm\"\n                  range-separator=\"-\"\n                  start-placeholder=\"\"\n                  end-placeholder=\"\"\n                  @change=\"onchangeTime\"\n                  v-model=\"formValidate.presale_time\"\n                ></el-date-picker>\n              </div>\n              <div class=\"titTip\"></div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.presale\">\n            <el-form-item label=\"\" prop=\"presale_day\">\n              <div class=\"acea-row row-middle\">\n                <span class=\"mr10\"></span>\n                <el-input-number\n                  class=\"w-80\"\n                  :controls=\"false\"\n                  placeholder=\"\"\n                  :precision=\"0\"\n                  :min=\"1\"\n                  v-model=\"formValidate.presale_day\"\n                />\n                <span class=\"ml10\">  </span>\n              </div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-checkbox-group v-model=\"formValidate.recommend\">\n                <el-checkbox label=\"is_hot\"></el-checkbox>\n                <el-checkbox label=\"is_benefit\"></el-checkbox>\n                <el-checkbox label=\"is_best\"></el-checkbox>\n                <el-checkbox label=\"is_new\"></el-checkbox>\n                <el-checkbox label=\"is_good\"></el-checkbox>\n              </el-checkbox-group>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"\">\n              <div class=\"color-list acea-row row-middle\">\n                <div\n                  class=\"color-item\"\n                  :class=\"activity[color]\"\n                  v-for=\"color in formValidate.activity\"\n                  v-dragging=\"{\n                    item: color,\n                    list: formValidate.activity,\n                    group: 'color',\n                  }\"\n                  :key=\"color\"\n                >\n                  {{ color }}\n                </div>\n              </div>\n              <div class=\"titTip\"></div>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"\">\n              <div class=\"picBox\">\n                <div class=\"pictrue\" v-for=\"(item, index) in formValidate.recommend_list\" :key=\"index\">\n                  <img v-lazy=\"item.image\" />\n                  <i class=\"el-icon-error btndel\" @click=\"handleRemoveRecommend(index)\"></i>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" @click=\"changeGoods\">\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <!-- -->\n        <el-row justify=\"space-between\" v-show=\"headTab.length === 6 ? currentTab === '6' : currentTab === '5'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input class=\"content_width\" v-model.trim=\"formValidate.keyword\" placeholder=\"\" />\n              <div class=\"titTip\">PCSEO</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input\n                class=\"content_width\"\n                v-model.trim=\"formValidate.store_info\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"\"\n              />\n              <div class=\"titTip\">PCSEO</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-input\n                v-model.trim=\"formValidate.command_word\"\n                placeholder=\"\"\n                type=\"textarea\"\n                :rows=\"3\"\n                class=\"content_width\"\n              />\n              <div class=\"titTip\"></div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'recommend_image')\">\n                <div class=\"pictrue\" v-if=\"formValidate.recommend_image\">\n                  <img v-lazy=\"formValidate.recommend_image\" />\n                  <el-input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></el-input>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                  <el-input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></el-input>\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n                <div class=\"titTip\">35:2</div>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"customBtn\" @change=\"customMessBtn\" size=\"large\">\n                <span slot=\"open\"></span>\n                <span slot=\"close\"></span>\n              </el-switch>\n              <div class=\"addCustom_content\" v-if=\"customBtn\">\n                <div v-for=\"(item, index) in formValidate.custom_form\" :key=\"index\" class=\"custom_box\">\n                  <el-input\n                    v-model.trim=\"item.title\"\n                    :placeholder=\"'' + (index + 1)\"\n                    style=\"width: 150px; margin-right: 10px\"\n                    :maxlength=\"10\"\n                  />\n                  <el-select v-model=\"item.label\" style=\"width: 200px; margin-left: 6px; margin-right: 10px\">\n                    <el-option\n                      v-for=\"items in CustomList\"\n                      :value=\"items.value\"\n                      :key=\"items.value\"\n                      :label=\"items.label\"\n                    ></el-option>\n                  </el-select>\n                  <el-checkbox v-model=\"item.status\"></el-checkbox>\n                  <div class=\"addfont\" @click=\"delcustom()\"></div>\n                </div>\n              </div>\n              <div class=\"addCustomBox\" v-show=\"customBtn\">\n                <div class=\"btn\" @click=\"addcustom\">+ </div>\n                <div class=\"titTip\">10</div>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-form-item>\n          <el-button v-if=\"currentTab !== '1'\" @click=\"upTab\"></el-button>\n          <el-button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '6' && formValidate.virtual_type == 0\"\n            @click=\"downTab\"\n            ></el-button\n          >\n          <el-button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '5' && formValidate.virtual_type != 0\"\n            @click=\"downTab\"\n            ></el-button\n          >\n          <el-button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '6') && formValidate.virtual_type == 0\"\n            ></el-button\n          >\n          <el-button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '5') && formValidate.virtual_type != 0\"\n            ></el-button\n          >\n        </el-form-item>\n      </el-form>\n      <el-dialog :visible.sync=\"modalPic\" width=\"950px\" scrollable title=\"\" :close-on-click-modal=\"false\">\n        <uploadPictures\n          :isChoice=\"isChoice\"\n          @getPic=\"getPic\"\n          @getPicD=\"getPicD\"\n          :gridBtn=\"gridBtn\"\n          :gridPic=\"gridPic\"\n          v-if=\"modalPic\"\n        ></uploadPictures>\n      </el-dialog>\n      <el-dialog\n        :visible.sync=\"addVirtualModel\"\n        width=\"720px\"\n        title=\"\"\n        :show-close=\"true\"\n        :close-on-click-modal=\"false\"\n        @closed=\"initVirtualData\"\n      >\n        <div class=\"trip\"></div>\n        <div class=\"type-radio\">\n          <el-form label-width=\"85px\">\n            <el-form-item label=\"\">\n              <el-radio-group v-model=\"disk_type\" size=\"large\">\n                <el-radio :label=\"1\"></el-radio>\n                <el-radio :label=\"2\"></el-radio>\n              </el-radio-group>\n              <div v-if=\"disk_type == 1\">\n                <div class=\"stock-disk\">\n                  <el-input v-model=\"disk_info\" size=\"large\" type=\"textarea\" :rows=\"4\" placeholder=\"\" />\n                </div>\n                <div class=\"stock-input\">\n                  <!-- <el-input type=\"number\" v-model=\"stock\" size=\"large\" :min='0' placeholder=\"\">\n                    <span slot=\"append\"></span>\n                  </el-input> -->\n                  <el-input-number :controls=\"false\" :max=\"100000\" :min=\"1\" :step=\"1\" :precision=\"0\" v-model=\"stock\" />\n                  <span class=\"pl10\"></span>\n                </div>\n              </div>\n              <div class=\"scroll-virtual\" v-if=\"disk_type == 2\">\n                <div class=\"virtual-data mb10\" v-for=\"(item, index) in virtualList\" :key=\"index\">\n                  <span class=\"mr10 virtual-title\">{{ index + 1 }}</span>\n                  <el-input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.key\"\n                    style=\"width: 150px\"\n                    placeholder=\"()\"\n                  ></el-input>\n                  <span class=\"mr10 virtual-title\">{{ index + 1 }}</span>\n                  <el-input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.value\"\n                    style=\"width: 150px\"\n                    placeholder=\"\"\n                  ></el-input>\n                  <span class=\"deteal-btn\" @click=\"removeVirtual(index)\"></span>\n                </div>\n              </div>\n              <div class=\"add-more\" v-if=\"disk_type == 2\">\n                <el-button class=\"h-33\" type=\"primary\" @click=\"handleAdd\"></el-button>\n                <el-upload class=\"ml10\" :action=\"cardUrl\" :data=\"uploadData\" :headers=\"header\" :on-success=\"upFile\" :before-upload=\"beforeUpload\"\n >\n                  <el-button></el-button>\n                </el-upload>\n              </div>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"closeVirtual\"> </el-button>\n          <el-button type=\"primary\" @click=\"upVirtual\"> </el-button>\n        </span>\n      </el-dialog>\n    </el-card>\n    <freightTemplate :template=\"template\" v-on:changeTemplate=\"changeTemplate\" ref=\"templates\"></freightTemplate>\n    <add-attr ref=\"addattr\" @getList=\"userSearchs\"></add-attr>\n    <coupon-list\n      ref=\"couponTemplates\"\n      @nameId=\"nameId\"\n      :couponids=\"formValidate.coupon_ids\"\n      :updateIds=\"updateIds\"\n      :updateName=\"updateName\"\n    ></coupon-list>\n    <coupon-list ref=\"goodsCoupon\" many=\"one\" :luckDraw=\"true\" @getCouponId=\"goodsCouponId\"></coupon-list>\n    <!-- -->\n    <el-dialog\n      :visible.sync=\"modals\"\n      @closed=\"cancel\"\n      class=\"Box\"\n      title=\"1688\"\n      :close-on-click-modal=\"false\"\n      width=\"720px\"\n    >\n      <tao-bao ref=\"taobaos\" v-if=\"modals\" @on-close=\"onClose\"></tao-bao>\n    </el-dialog>\n    <el-dialog :visible.sync=\"goods_modals\" title=\"\" footerHide class=\"paymentFooter\" scrollable width=\"1000px\">\n      <goods-list v-if=\"goods_modals\" ref=\"goodslist\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </el-dialog>\n    <!--  -->\n    <el-dialog\n      :visible.sync=\"labelShow\"\n      title=\"\"\n      :show-close=\"true\"\n      width=\"540px\"\n      :close-on-click-modal=\"false\"\n    >\n      <userLabel ref=\"userLabel\" @activeData=\"activeData\" @close=\"labelClose\"></userLabel>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport userLabel from '@/components/labelList';\nimport { mapState } from 'vuex';\nimport vuedraggable from 'vuedraggable';\nimport uploadPictures from '@/components/uploadPictures';\nimport freightTemplate from '@/components/freightTemplate';\nimport couponList from '@/components/couponList';\nimport addAttr from '../productAttr/addAttr';\nimport goodsList from '@/components/goodsList/index';\nimport taoBao from './taoBao';\nimport WangEditor from '@/components/wangEditor/index.vue';\nimport { userLabelAddApi } from '@/api/user';\nimport {\n  productInfoApi,\n  cascaderListApi,\n  productAddApi,\n  generateAttrApi,\n  productGetRuleApi,\n  productGetTemplateApi,\n  productGetTempKeysApi,\n  checkActivityApi,\n  productCache,\n  cacheDelete,\n  uploadType,\n  importCard,\n  productCreateApi,\n} from '@/api/product';\nimport Setting from '@/setting';\nimport { getCookies } from '@/libs/util';\nimport { uploadByPieces } from '@/utils/upload'; //uploadByPieces\nimport { isFileUpload, isVideoUpload } from '@/utils';\nimport checkArray from '@/libs/permission';\n\nexport default {\n  name: 'product_productAdd',\n  components: {\n    // VueUeditorWrap,\n    uploadPictures,\n    freightTemplate,\n    addAttr,\n    couponList,\n    taoBao,\n    draggable: vuedraggable,\n    goodsList,\n    WangEditor,\n    userLabel,\n  },\n  data() {\n    return {\n      labelShow: false,\n      dataLabel: [],\n      headTab: [\n        { tit: '', name: '1' },\n        { tit: '', name: '2' },\n        { tit: '', name: '3' },\n        { tit: '', name: '4' },\n        { tit: '', name: '5' },\n        { tit: '', name: '6' },\n      ],\n      virtual: [\n        { tit: '', id: 0, tit2: '' },\n        { tit: '/', id: 1, tit2: '' },\n        { tit: '', id: 2, tit2: '' },\n        { tit: '', id: 3, tit2: '' },\n      ],\n      seletVideo: 0, //\n      customBtn: false, //\n      content: '',\n      contents: '',\n      fileUrl: Setting.apiBaseURL + '/file/upload',\n      fileUrl2: Setting.apiBaseURL + '/file/video_upload',\n      cardUrl: Setting.apiBaseURL + '/file/upload/1',\n      upload_type: '', // 1  2 3 4 OSS\n      uploadData: {}, // \n      header: {},\n\n      type: 0,\n      modals: false,\n      goods_modals: false,\n      spinShow: false,\n      openSubimit: false,\n      virtualData: '',\n      virtualList: [\n        {\n          key: '',\n          value: '',\n        },\n      ],\n      grid2: {\n        xl: 10,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      grid3: {\n        xl: 18,\n        lg: 18,\n        md: 20,\n        sm: 24,\n        xs: 24,\n      },\n      // data\n      oneFormBatch: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          virtual_list: [],\n        },\n      ],\n      // \n      formDynamic: {\n        attrsName: '',\n        attrsVal: '',\n      },\n      disk_type: 1, //\n      tabIndex: 0,\n      tabName: '',\n      formDynamicNameData: [],\n      isBtn: false,\n      columns2: [\n        {\n          title: '',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: 'KG',\n          slot: 'weight',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '(m)',\n          slot: 'volume',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 120,\n        },\n      ],\n      columns3: [\n        {\n          title: '',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 120,\n        },\n      ],\n      columns: [],\n      columnsInstall: [],\n      columnsInstal2: [],\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      //\n      CustomList: [\n        {\n          value: 'text',\n          label: '',\n        },\n        {\n          value: 'number',\n          label: '',\n        },\n        {\n          value: 'email',\n          label: '',\n        },\n        {\n          value: 'data',\n          label: '',\n        },\n        {\n          value: 'time',\n          label: '',\n        },\n        {\n          value: 'id',\n          label: '',\n        },\n        {\n          value: 'phone',\n          label: '',\n        },\n        {\n          value: 'img',\n          label: '',\n        },\n      ],\n      customess: {\n        content: [],\n      }, //\n\n      formValidate: {\n        disk_info: '', //\n        logistics: ['1'], //\n        freight: 2, //\n        postage: 0, //\n        recommend: [], //\n        presale_day: 1, //-\n        presale: false, //\n        is_limit: false,\n        limit_type: 0,\n        limit_num: 0,\n        video_open: false, //\n        vip_product: false, //\n        custom_form: [], //\n        store_name: '',\n        cate_id: [],\n        label_id: [],\n        keyword: '',\n        unit_name: '',\n        store_info: '',\n        image: '',\n        recommend_image: '',\n        slider_image: [],\n        description: '',\n        ficti: 0,\n        give_integral: 0,\n        sort: 0,\n        is_show: 1,\n        is_hot: 0,\n        is_benefit: 0,\n        is_best: 0,\n        is_new: 0,\n        is_good: 0,\n        is_postage: 0,\n        is_sub: [],\n        recommend_list: [],\n        virtual_type: 0,\n        // is_sub: 0,\n        id: 0,\n        spec_type: 0,\n        is_virtual: 0,\n        video_link: '',\n        // postage: 0,\n        temp_id: '',\n        attrs: [],\n        items: [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n          },\n        ],\n        activity: ['', '', '', ''],\n        couponName: [],\n        header: [],\n        selectRule: '',\n        coupon_ids: [],\n        command_word: '',\n        min_qty: 1,\n      },\n      ruleList: [],\n      templateList: [],\n      createBnt: true,\n      showIput: false,\n      manyFormValidate: [],\n      // data\n      oneFormValidate: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          brokerage: 0,\n          brokerage_two: 0,\n          vip_price: 0,\n          virtual_list: [],\n          coupon_id: 0,\n        },\n      ],\n      images: [],\n      imagesTable: '',\n      currentTab: '1',\n      isChoice: '',\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      modalPic: false,\n      addVirtualModel: false,\n      template: false,\n      uploadList: [],\n      treeSelect: [],\n      picTit: '',\n      tableIndex: 0,\n      ruleValidate: {\n        store_name: [{ required: true, message: '', trigger: 'blur' }],\n        cate_id: [\n          {\n            required: true,\n            message: '',\n            trigger: 'change',\n            type: 'array',\n            min: '1',\n          },\n        ],\n        unit_name: [{ required: true, message: '', trigger: 'blur' }],\n        // image: [{ required: true, message: \"\", trigger: \"change\" }],\n        slider_image: [\n          {\n            required: true,\n            message: '',\n            type: 'array',\n            trigger: 'change',\n          },\n        ],\n        spec_type: [{ required: true, message: '', trigger: 'change' }],\n        is_virtual: [{ required: true, message: '', trigger: 'change' }],\n        selectRule: [{ required: true, message: '', trigger: 'change' }],\n        temp_id: [\n          {\n            required: true,\n            message: '',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n        presale_time: [\n          {\n            required: true,\n            type: 'array',\n            message: '',\n            trigger: 'change',\n          },\n        ],\n        logistics: [\n          {\n            required: true,\n            type: 'array',\n            min: 1,\n            message: '',\n            trigger: 'change',\n          },\n          {\n            type: 'array',\n            max: 2,\n            message: '',\n            trigger: 'change',\n          },\n        ],\n        give_integral: [{ type: 'integer', message: '' }],\n      },\n      manyBrokerage: 0,\n      manyBrokerageTwo: 0,\n      manyVipPrice: 0,\n      upload: {\n        videoIng: false, // \n      },\n      videoIng: false, // \n      progress: 0, // 0\n      stock: 0,\n      disk_info: '',\n      videoLink: '',\n      attrs: [],\n      activity: { : 'red', : 'blue', : 'green', : 'yellow' },\n      couponName: [],\n      updateIds: [],\n      updateName: [],\n      couponIds: '',\n      couponNames: [],\n      rakeBack: [\n        {\n          title: '',\n          slot: 'brokerage',\n          align: 'center',\n          width: 95,\n        },\n        {\n          title: '',\n          slot: 'brokerage_two',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      member: [\n        {\n          title: '',\n          slot: 'vip_price',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      columnsInstalM: [],\n      moveIndex: ''\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '120px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n    labelBottom() {\n      return this.isMobile ? undefined : '15px';\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.bus.$emit('onTagsViewRefreshRouterView', this.$route.path);\n    next();\n  },\n  created() {\n    this.columns = this.columns2.slice(0, 8);\n    this.getToken();\n\n    // this.columnsInstall = this.columns2.slice(0, 4).concat(this.columnsInstall);\n    // this.columnsInsta8 = this.columns2.slice(0, 4).concat(this.columnsInsta8);\n  },\n  mounted() {\n    if (this.$route.params.id !== '0' && this.$route.params.id) {\n      this.getInfo();\n    } else if (this.$route.params.id === '0') {\n      productCache()\n        .then((res) => {\n          let data = res.data.info;\n          if (!Array.isArray(data)) {\n            let cate_id = data.cate_id.map(Number);\n            let label_id = data.label_id.map(Number);\n            this.attrs = data.items || [];\n            let ids = [];\n            // let names = [];\n            if (data.coupons) {\n              data.coupons.map((item) => {\n                ids.push(item.id);\n                // names.push(item.title);\n              });\n              this.couponName = data.coupons;\n            }\n\n            this.formValidate = data;\n            // this.couponName = data.coupons;\n            // that.couponName = names;\n            this.dataLabel = data.label_id;\n            this.formValidate.coupon_ids = ids;\n            this.updateIds = ids;\n            this.updateName = data.coupons;\n            this.formValidate.cate_id = cate_id;\n            // this.formValidate.label_id = label_id;\n            this.oneFormValidate = data.attrs;\n            this.formValidate.logistics = data.logistics || ['1'];\n            this.formValidate.header = [];\n            this.generate(0);\n            this.manyFormValidate = data.attrs;\n            this.spec_type = data.spec_type;\n            this.formValidate.is_virtual = data.is_virtual;\n            this.formValidate.custom_form = data.custom_form || [];\n            if (this.formValidate.custom_form.length != 0) {\n              this.customBtn = true;\n            }\n            this.virtualbtn(data.virtual_type, 1);\n            if (data.spec_type === 0) {\n              this.manyFormValidate = [];\n            } else {\n              this.createBnt = true;\n              this.oneFormValidate = [\n                {\n                  pic: data.image,\n                  price: 0,\n                  cost: 0,\n                  ot_price: 0,\n                  stock: 0,\n                  bar_code: '',\n                  weight: 0,\n                  volume: 0,\n                  brokerage: 0,\n                  brokerage_two: 0,\n                  vip_price: 0,\n                  virtual_list: [],\n                  coupon_id: 0,\n                },\n              ];\n            }\n            this.watchActivity()\n            this.spinShow = false;\n          }\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n        });\n    }\n    if (this.$route.query.type) {\n      this.modals = true;\n      this.type = this.$route.query.type;\n    } else {\n      this.type = 0;\n    }\n    this.goodsCategory();\n    this.productGetRule();\n    this.productGetTemplate();\n    // this.userLabel();\n    this.uploadType();\n    this.watchActivity()\n  },\n  methods: {\n    beforeUpload(file) {\n      return isFileUpload(file)\n    },\n    // \n    videoSaveToUrl(file) {\n      if(isVideoUpload(file)){\n        uploadByPieces({\n          file: file, // \n          pieceSize: 3, // \n          success: (data) => {\n            this.formValidate.video_link = data.file_path;\n            this.progress = 100;\n          },\n          error: (e) => {\n            this.$message.error(e.msg);\n          },\n          uploading: (chunk, allChunk) => {\n            this.videoIng = true;\n            let st = Math.floor((chunk / allChunk) * 100);\n            this.progress = st;\n          },\n        });\n      }\n      return false;\n    },\n    // /\n    virtualbtn(index, type) {\n      if (type != 1) {\n        this.formValidate.is_sub = [];\n        let id = this.$route.params.id;\n        if (id) {\n          checkActivityApi(id)\n            .then((res) => {})\n            .catch((res) => {\n              this.formValidate.spec_type = this.spec_type;\n              this.$message.error(res.msg);\n            });\n        } else {\n          if (this.formValidate.spec_type == 1) {\n            this.generate(1);\n          }\n        }\n      }\n      switch (index) {\n        case 0:\n          this.formValidate.virtual_type = 0;\n          this.formValidate.is_virtual = 0;\n          this.headTab = [\n            { tit: '', name: '1' },\n            { tit: '', name: '2' },\n            { tit: '', name: '3' },\n            { tit: '', name: '4' },\n            { tit: '', name: '5' },\n            { tit: '', name: '6' },\n          ];\n          break;\n        case 1:\n          this.formValidate.virtual_type = 1;\n          this.formValidate.postage = 0;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '', name: '1' },\n            { tit: '', name: '2' },\n            { tit: '', name: '3' },\n            // { tit: \"\", name: \"4\" },\n            { tit: '', name: '4' },\n            { tit: '', name: '5' },\n          ];\n          break;\n        case 2:\n          this.formValidate.virtual_type = 2;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '', name: '1' },\n            { tit: '', name: '2' },\n            { tit: '', name: '3' },\n            // { tit: \"\", name: \"4\" },\n            { tit: '', name: '4' },\n            { tit: '', name: '5' },\n          ];\n          break;\n        case 3:\n          this.formValidate.virtual_type = 3;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '', name: '1' },\n            { tit: '', name: '2' },\n            { tit: '', name: '3' },\n            // { tit: \"\", name: \"4\" },\n            { tit: '', name: '4' },\n            { tit: '', name: '5' },\n          ];\n          break;\n      }\n    },\n    // \n    addCate() {\n      this.$modalForm(productCreateApi()).then(() => this.goodsCategory());\n    },\n    // \n    logisticsBtn(e) {\n      this.formValidate.logistics = e;\n    },\n    // \n    addLabel() {\n      this.$modalForm(userLabelAddApi(0)).then(() => this.userLabel());\n    },\n    //  \n    customMessBtn(e) {\n      if (!e) {\n        this.formValidate.custom_form = [];\n      }\n    },\n    //  \n    addcustom() {\n      if (this.formValidate.custom_form.length > 9) {\n        this.$message.warning('10');\n      } else {\n        this.formValidate.custom_form.push({\n          title: '',\n          label: 'text',\n          value: '',\n          status: false,\n        });\n      }\n    },\n    // \n    delcustom(index) {\n      this.formValidate.custom_form.splice(index, 1);\n    },\n    // \n    onchangeTime(e) {\n      this.formValidate.presale_time = e;\n    },\n    // \n    getEditorContent(data) {\n      this.content = data;\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    // \n    upFile(res) {\n      importCard({ file: res.data.src }).then((res) => {\n        this.virtualList = this.virtualList.concat(res.data);\n      });\n    },\n    //\n    uploadType() {\n      uploadType().then((res) => {\n        this.upload_type = res.data.upload_type;\n      });\n    },\n    // \n    infoData(data, isCopy) {\n      let cate_id = data.cate_id.map(Number);\n      let label_id = data.label_id.map(Number);\n      this.attrs = data.items || [];\n      let ids = [];\n      data.coupons.map((item) => {\n        ids.push(item.id);\n      });\n      this.formValidate = data;\n      this.seletVideo = data.seletVideo;\n      this.contents = data.description;\n      this.couponName = data.coupons;\n      this.formValidate.coupon_ids = ids;\n      this.updateIds = ids;\n      this.dataLabel = data.label_id;\n      this.updateName = data.coupons;\n      this.virtualbtn(data.virtual_type, 1);\n      this.formValidate.logistics = data.logistics || ['1'];\n      this.formValidate.custom_form = data.custom_form || [];\n      if (this.formValidate.custom_form.length != 0) {\n        this.customBtn = true;\n      }\n      this.formValidate.cate_id = cate_id;\n      if (data.attr) {\n        this.oneFormValidate = [data.attr];\n      }\n      this.formValidate.header = [];\n      this.generate(0, isCopy, data.attrs);\n      // this.manyFormValidate = data.attrs;\n      // this.$set(this, 'manyFormValidate', data.attrs);\n      this.spec_type = data.spec_type;\n      this.formValidate.is_virtual = data.is_virtual;\n      if (data.spec_type === 0) {\n        this.manyFormValidate = [];\n      } else {\n        this.createBnt = true;\n        this.oneFormValidate = [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n            weight: 0,\n            volume: 0,\n            brokerage: 0,\n            brokerage_two: 0,\n            vip_price: 0,\n            virtual_list: [],\n            coupon_id: 0,\n          },\n        ];\n      }\n      this.watchActivity()\n    },\n    //\n    onClose(data) {\n      this.modals = false;\n      this.infoData(data, 1);\n    },\n\n    checkMove(evt) {\n      this.moveIndex = evt.draggedContext.index;\n    },\n    end() {\n      this.moveIndex = '';\n      this.generate(1);\n    },\n    // \n    checkAllGroupChange(data) {\n      this.checkAllGroup(data);\n    },\n    checkAllGroup(data) {\n      if (this.formValidate.spec_type === 0) {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstall = this.columns2.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      } else {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      }\n    },\n    // \n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    // \n    see(data, name, index) {\n      this.tabName = name;\n      this.tabIndex = index;\n\n      if (this.formValidate.virtual_type === 1) {\n        if (data.disk_info != '') {\n          this.disk_type = 1;\n          this.disk_info = data.disk_info;\n          this.stock = data.stock;\n        } else if (data.virtual_list.length) {\n          this.disk_type = 2;\n          this.virtualList = data.virtual_list;\n        }\n        this.addVirtualModel = true;\n      } else {\n        this.$refs.goodsCoupon.isTemplate = true;\n        this.$refs.goodsCoupon.tableList(3);\n      }\n    },\n    // \n    addGoodsCoupon(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.$refs.goodsCoupon.isTemplate = true;\n      this.$refs.goodsCoupon.tableList(3);\n    },\n    addVirtual(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.addVirtualModel = true;\n    },\n    // \n    upVirtual() {\n      if (this.disk_type == 2) {\n        for (let i = 0; i < this.virtualList.length; i++) {\n          const element = this.virtualList[i];\n          if (!element.value) {\n            this.$message.error('');\n            return;\n          }\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', this.virtualList);\n        this.$set(this[this.tabName][this.tabIndex], 'stock', this.virtualList.length);\n        this.virtualList = [\n          {\n            key: '',\n            value: '',\n          },\n        ];\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', '');\n      } else {\n        if (!this.disk_info.length) {\n          return this.$message.error('');\n        }\n        if (!this.stock) {\n          return this.$message.error('');\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', this.disk_info);\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', []);\n      }\n      this.addVirtualModel = false;\n      this.closeVirtual();\n    },\n    //  \n    closeVirtual() {\n      this.addVirtualModel = false;\n      this.virtualList = [\n        {\n          key: '',\n          value: '',\n        },\n      ];\n      this.disk_info = '';\n      this.stock = 0;\n    },\n    //\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    // id\n    nameId(id, names) {\n      this.formValidate.coupon_ids = id;\n      this.couponName = this.unique(names);\n    },\n    // \n    goodsCouponId(data) {\n      // this[this.tabName][this.tabIndex].coupon_id = data.id;\n      // this[this.tabName][this.tabIndex].coupon_name = data.title;\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_id', data.id);\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_name', data.title);\n      this.$refs.goodsCoupon.isTemplate = false;\n    },\n    handleClose(name) {\n      let index = this.couponName.indexOf(name);\n      this.couponName.splice(index, 1);\n      let couponIds = this.formValidate.coupon_ids;\n      couponIds.splice(index, 1);\n      this.updateIds = couponIds;\n      this.updateName = this.couponName;\n    },\n    // \n    getList() {\n      this.productGetTemplate();\n    },\n    // \n    addTemp() {\n      this.$refs.templates.isTemplate = true;\n    },\n    // \n    delVideo() {\n      let that = this;\n      that.$set(that.formValidate, 'video_link', '');\n      that.$set(that, 'progress', 0);\n      that.videoIng = false;\n      that.upload.videoIng = false;\n    },\n    zh_uploadFile() {\n      if (this.seletVideo == 1) {\n        this.formValidate.video_link = this.videoLink;\n      } else {\n        this.$refs.refid.click();\n      }\n    },\n    // \n    zh_uploadFile_change(evfile) {\n      let that = this;\n      let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'));\n      if (suffix.indexOf('.mp4') === -1) {\n        return that.$message.error('MP4');\n      }\n      let types = {\n        key: evfile.target.files[0].name,\n        contentType: evfile.target.files[0].type,\n      };\n      productGetTempKeysApi(types)\n        .then((res) => {\n          that.$videoCloud\n            .videoUpload({\n              type: res.data.type,\n              evfile: evfile,\n              res: res,\n              uploading(status, progress) {\n                that.upload.videoIng = status;\n                if (res.status == 200) {\n                  that.progress = 100;\n                }\n              },\n            })\n            .then((res) => {\n              that.formValidate.video_link = res.url;\n              that.$message.success('');\n              that.upload.videoIng = false;\n            })\n            .catch((res) => {\n              that.$message.error(res);\n            });\n        })\n        .catch((res) => {\n          that.$message.error(res.msg);\n        });\n    },\n    // \n    upTab() {\n      this.currentTab = (Number(this.currentTab) - 1).toString();\n    },\n    // \n    downTab() {\n      this.currentTab = (Number(this.currentTab) + 1).toString();\n    },\n    // \n    userSearchs() {\n      this.productGetRule();\n    },\n    // \n    addRule() {\n      this.$refs.addattr.modal = true;\n    },\n    // \n    brokerageSetUp() {\n      let that = this;\n      if (that.formValidate.is_sub.indexOf(1) > -1) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0) {\n          return that.$message.error('');\n        }\n      } else if (that.formValidate.is_sub.indexOf(0) > -1) {\n        if (that.manyVipPrice <= 0) {\n          return that.$message.error('');\n        }\n      }\n      if (this.formValidate.is_sub.length === 2) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0 || that.manyVipPrice <= 0) {\n          return that.$message.error('');\n        }\n      }\n      for (let val of that.manyFormValidate) {\n        this.$set(val, 'brokerage', that.manyBrokerage);\n        this.$set(val, 'brokerage_two', that.manyBrokerageTwo);\n        this.$set(val, 'vip_price', that.manyVipPrice);\n      }\n    },\n    // \n    vipPriceSetUp() {\n      let that = this;\n      if (that.manyVipPrice <= 0) {\n        return that.$message.error('');\n      } else {\n        for (let val of that.manyFormValidate) {\n          this.$set(val, 'vip_price', that.manyVipPrice);\n        }\n      }\n    },\n    // \n    handleAdd() {\n      this.virtualList.push({\n        key: '',\n        value: '',\n      });\n    },\n    // \n    initVirtualData(status) {\n      this.virtualList = [\n        {\n          key: '',\n          value: '',\n        },\n      ];\n    },\n    removeVirtual(index) {\n      this.virtualList.splice(index, 1);\n    },\n    // \n    batchDel() {\n      this.oneFormBatch = [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          virtual_list: [],\n        },\n      ];\n    },\n    confirm() {\n      let that = this;\n      that.createBnt = true;\n      if (that.formValidate.selectRule.trim().length <= 0) {\n        return that.$message.error('');\n      }\n      that.ruleList.forEach(function (item, index) {\n        if (item.rule_name === that.formValidate.selectRule) {\n          that.attrs = item.rule_value;\n        }\n      });\n    },\n    // \n    productGetRule() {\n      productGetRuleApi().then((res) => {\n        this.ruleList = res.data;\n      });\n    },\n    // \n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    // \n    delAttrTable(index) {\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {\n            this.manyFormValidate.splice(index, 1);\n            this.$message.success(res.msg);\n          })\n          .catch((res) => {\n            this.$message.error(res.msg);\n          });\n      } else {\n        this.manyFormValidate.splice(index, 1);\n      }\n    },\n    // \n    batchAdd() {\n      for (let val of this.manyFormValidate) {\n        if (this.oneFormBatch[0].pic) {\n          this.$set(val, 'pic', this.oneFormBatch[0].pic);\n        }\n        if (this.oneFormBatch[0].price > 0) {\n          this.$set(val, 'price', this.oneFormBatch[0].price);\n        }\n        if (this.oneFormBatch[0].cost > 0) {\n          this.$set(val, 'cost', this.oneFormBatch[0].cost);\n        }\n        if (this.oneFormBatch[0].ot_price > 0) {\n          this.$set(val, 'ot_price', this.oneFormBatch[0].ot_price);\n        }\n        if (this.oneFormBatch[0].stock > 0) {\n          this.$set(val, 'stock', this.oneFormBatch[0].stock);\n        }\n        if (this.oneFormBatch[0].bar_code !== '') {\n          this.$set(val, 'bar_code', this.oneFormBatch[0].bar_code);\n        }\n        if (this.oneFormBatch[0].weight > 0) {\n          this.$set(val, 'weight', this.oneFormBatch[0].weight);\n        }\n        if (this.oneFormBatch[0].volume > 0) {\n          this.$set(val, 'volume', this.oneFormBatch[0].volume);\n        }\n      }\n    },\n    // \n    addBtn() {\n      this.clearAttr();\n      this.createBnt = false;\n      this.showIput = true;\n    },\n    // \n    generate(type, isCopy, arr) {\n      generateAttrApi(\n        {\n          attrs: this.attrs,\n          is_virtual: [1, 2].includes(this.formValidate.virtual_type) ? 1 : 0,\n          virtual_type: this.formValidate.virtual_type,\n        },\n        this.formValidate.id,\n        type,\n      )\n        .then((res) => {\n          let info = res.data.info,\n            header1 = JSON.parse(JSON.stringify(info.header));\n          if (this.$route.params.id !== '0' && (this.$route.query.type != -1 || type) && !isCopy) {\n            this.manyFormValidate = info.value;\n          }\n          if (isCopy) {\n            this.manyFormValidate = arr;\n          }\n          let header = info.header;\n          if ([1, 2].includes(this.formValidate.virtual_type)) {\n            this.columnsInstalM = header;\n            this.formValidate.header = header;\n          } else {\n            this.formValidate.header = header1;\n            this.columnsInstalM = info.header;\n          }\n          this.checkAllGroup(this.formValidate.is_sub);\n          if (!this.$route.params.id && this.formValidate.spec_type === 1 && !isCopy) {\n            this.manyFormValidate.map((item) => {\n              item.pic = this.formValidate.image;\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          } else if (this.$route.params.id) {\n            this.manyFormValidate.map((item) => {\n              if (!item.pic) {\n                item.pic = this.formValidate.image;\n              }\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // \n    offAttrName() {\n      this.showIput = false;\n      this.createBnt = true;\n    },\n    clearAttr() {\n      this.formDynamic.attrsName = '';\n      this.formDynamic.attrsVal = '';\n    },\n    // \n    handleRemoveRole(index) {\n      this.attrs.splice(index, 1);\n      this.manyFormValidate.splice(index, 1);\n    },\n    // \n    handleRemove2(item, index) {\n      item.splice(index, 1);\n    },\n    // \n    createAttrName() {\n      if (this.formDynamic.attrsName && this.formDynamic.attrsVal) {\n        let data = {\n          value: this.formDynamic.attrsName,\n          detail: [this.formDynamic.attrsVal],\n        };\n        this.attrs.push(data);\n        var hash = {};\n        this.attrs = this.attrs.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next.value] ? '' : (hash[next.value] = true && item.push(next));\n          return item;\n        }, []);\n        this.clearAttr();\n        this.showIput = false;\n        this.createBnt = true;\n      } else {\n        this.$message.warning('');\n      }\n    },\n    // \n    createAttr(num, idx) {\n      if (num) {\n        this.attrs[idx].detail.push(num);\n        var hash = {};\n        this.attrs[idx].detail = this.attrs[idx].detail.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next] ? '' : (hash[next] = true && item.push(next));\n          return item;\n        }, []);\n      } else {\n        this.$message.warning('');\n      }\n    },\n    // \n    goodsCategory() {\n      cascaderListApi(1)\n        .then((res) => {\n          this.treeSelect = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    //\n    changeVideo(e) {\n      this.formValidate.video_link = '';\n      this.videoLink = '';\n    },\n    // \n    changeSpec() {\n      this.formValidate.is_sub = [];\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {})\n          .catch((res) => {\n            this.formValidate.spec_type = this.spec_type;\n            this.$message.error(res.msg);\n          });\n      }\n    },\n    // \n    getInfo() {\n      let that = this;\n      that.spinShow = true;\n      productInfoApi(that.$route.params.id)\n        .then(async (res) => {\n          let data = res.data.productInfo;\n          this.infoData(data);\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$message.error(res.msg);\n        });\n    },\n    handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.slider_image.splice(i, 1);\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n    },\n    // \n    changeCancel(msg) {\n      this.modalPic = false;\n    },\n    // \n    modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '' : '';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // \n    getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          if (!this.$route.params.id) {\n            if (this.formValidate.spec_type === 0) {\n              this.oneFormValidate[0].pic = pc.att_dir;\n            } else {\n              this.manyFormValidate.map((item) => {\n                item.pic = pc.att_dir;\n              });\n              this.oneFormBatch[0].pic = pc.att_dir;\n            }\n          }\n          break;\n        case 'danTable':\n          this.oneFormValidate[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'duopi':\n          this.oneFormBatch[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'recommend_image':\n          this.formValidate.recommend_image = pc.att_dir;\n          break;\n        default:\n          this.manyFormValidate[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    // \n    getPicD(pc) {\n      this.images = pc;\n      this.images.map((item) => {\n        this.formValidate.slider_image.push(item.att_dir);\n        this.formValidate.slider_image = this.formValidate.slider_image.splice(0, 10);\n      });\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n      this.modalPic = false;\n    },\n    // \n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.formValidate.type = this.type;\n          if (this.formValidate.spec_type === 0) {\n            this.formValidate.attrs = this.oneFormValidate;\n            this.formValidate.header = [];\n            this.formValidate.items = [];\n            this.formValidate.is_copy = 0;\n          } else {\n            this.formValidate.items = this.attrs;\n            this.formValidate.attrs = this.manyFormValidate;\n            this.formValidate.is_copy = 1;\n          }\n          if (this.formValidate.spec_type === 1 && this.manyFormValidate.length === 0) {\n            return this.$message.warning('-');\n            // return this.$message.warning('');\n          }\n          let item = this.formValidate.attrs;\n          for (let i = 0; i < item.length; i++) {\n            if (item[i].stock > 1000000) {\n              return this.$message.error('-(1000000)');\n            }\n          }\n          if (this.formValidate.is_sub[0] === 1) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null) {\n                return this.$message.error('- ');\n              }\n            }\n          } else {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].vip_price === null) {\n                return this.$message.error('-');\n              }\n            }\n          }\n          if (this.formValidate.is_sub.length === 2) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null || item[i].vip_price === null) {\n                return this.$message.error('- ');\n              }\n            }\n          }\n          if (this.formValidate.freight == 3 && !this.formValidate.temp_id) {\n            return this.$message.warning('-');\n          }\n          let activeIds = [];\n          this.dataLabel.forEach((item) => {\n            activeIds.push(item.id);\n          });\n          this.formValidate.label_id = activeIds;\n          if (this.openSubimit) return;\n          this.openSubimit = true;\n          this.formValidate.description = this.formatRichText(this.content);\n          productAddApi(this.formValidate)\n            .then(async (res) => {\n              this.openSubimit = false;\n              this.$message.success(res.msg);\n              if (this.$route.params.id === '0') {\n                cacheDelete().catch((err) => {\n                  this.$message.error(err.msg);\n                });\n              }\n              setTimeout(() => {\n                this.openSubimit = false;\n                this.$router.push({ path: this.$routeProStr + '/product/product_list' });\n              }, 500);\n            })\n            .catch((res) => {\n              setTimeout((e) => {\n                this.openSubimit = false;\n              }, 1000);\n              this.$message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.store_name) {\n            return this.$message.warning('-');\n          } else if (!this.formValidate.cate_id.length) {\n            return this.$message.warning('-');\n          } else if (!this.formValidate.unit_name) {\n            return this.$message.warning('-');\n          } else if (!this.formValidate.slider_image.length) {\n            return this.$message.warning('-');\n          } else if (!this.formValidate.logistics.length && !this.formValidate.virtual_type) {\n            return this.$message.warning('-');\n          } else if (!this.formValidate.temp_id && this.formValidate.freight == 3) {\n            return this.$message.warning('-');\n          }\n        }\n      });\n    },\n    changeTemplate(msg) {\n      this.template = msg;\n    },\n    // \n    validate(prop, status, error) {\n      if (status === false) {\n        this.$message.warning(error);\n      }\n    },\n    // \n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.slider_image];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.slider_image = newItems;\n    },\n    // \n    formatRichText(html) {\n      let newContent = html.replace(/<img[^>]*>/gi, function (match, capture) {\n        match = match.replace(/style=\"[^\"]+\"/gi, '').replace(/style='[^']+'/gi, '');\n        match = match.replace(/width=\"[^\"]+\"/gi, '').replace(/width='[^']+'/gi, '');\n        match = match.replace(/height=\"[^\"]+\"/gi, '').replace(/height='[^']+'/gi, '');\n        return match;\n      });\n      newContent = newContent.replace(/style=\"[^\"]+\"/gi, function (match, capture) {\n        match = match.replace(/width:[^;]+;/gi, 'max-width:100%;').replace(/max-max-width:[^;]+;/gi, 'max-width:100%;')\n        return match;\n      });\n      newContent = newContent.replace(/<br[^>]*\\/>/gi, '');\n      newContent = newContent.replace(\n        /\\<img/gi,\n        '<img style=\"max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;\"',\n      );\n      return newContent;\n    },\n    //\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.product_id) && res.set(arr.product_id, 1));\n    },\n    // id\n    getProductId(data) {\n      this.goods_modals = false;\n      this.formValidate.recommend_list = this.unique(this.formValidate.recommend_list.concat(data));\n    },\n    // \n    changeGoods() {\n      this.goods_modals = true;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    // \n    activeData(dataLabel) {\n      this.labelShow = false;\n      this.dataLabel = dataLabel;\n    },\n    // \n    labelClose() {\n      this.labelShow = false;\n    },\n    // \n    closeLabel(label) {\n      let index = this.dataLabel.indexOf(this.dataLabel.filter((d) => d.id == label.id)[0]);\n      this.dataLabel.splice(index, 1);\n    },\n    // \n    openLabel(row) {\n      this.labelShow = true;\n      this.$nextTick((e) => {\n        // this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)));\n      });\n    },\n    uniques(songs) {\n      let result = {};\n      let finalResult = [];\n      for (let i = 0; i < songs.length; i++) {\n        result[songs[i].product_id] = songs[i];\n      }\n      for (let item in result) {\n        finalResult.push(result[item]);\n      }\n      return finalResult;\n    },\n    handleRemoveRecommend(i) {\n      this.formValidate.recommend_list.splice(i, 1);\n    },\n    watchActivity() {\n      let marketing = []\n       this.formValidate.activity.map((el) => {\n        if (el == '') {\n          marketing.push(el);\n        }\n        if (el == '' && checkArray('seckill')) {\n          marketing.push(el);\n        } \n         if (el == '' && checkArray('bargain')) {\n          marketing.push(el);\n        } \n         if (el == '' && checkArray('combination')) {\n          marketing.push(el);\n        } \n      });\n      this.formValidate.activity = marketing\n    },\n  },\n};\n</script>\n<style scoped lang=\"stylus\">\n::v-deep .el-tabs__item {\n  height: 54px !important;\n  line-height: 54px !important;\n}\n\n.content_width {\n  width: 460px;\n}\n\n.list-group {\n  margin-left: -8px;\n}\n\n.borderStyle {\n  border: 1px solid #ccc;\n  padding: 8px;\n  border-radius: 4px;\n}\n\n.drag {\n  cursor: move;\n  margin: 3px 0\n}\n\n.move-icon {\n  width: 30px;\n  cursor: move;\n  margin-right: 10px;\n}\n\n.move-icon .icondrag2 {\n  font-size: 26px;\n  color: #d8d8d8;\n}\n\n.maxW ::v-deep .ivu-select-dropdown {\n  max-width: 600px;\n}\n\n#shopp-manager .ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.noLeft {\n  ::v-deep .ivu-form-item-content {\n    margin-left: 0 !important;\n  }\n}\n\n#shopp-manager .ivu-form-item {\n  position: relative;\n}\n\n#shopp-manager .ivu-form-item .tips {\n  position: absolute;\n  color: #999;\n  top: 29px;\n  left: -77px;\n  font-size: 12px;\n}\n\n.box-video-style {\n  width: 375px; \n  height: 211px;\n  border-radius: 10px;\n  background-color: #707070;\n  margin-top: 10px;\n  position: relative;\n  overflow: hidden;\n}\n\n.box-video-style .iconv {\n  color: #fff;\n  line-height: 180px;\n  width: 50px;\n  height: 50px;\n  display: inherit;\n  font-size: 26px;\n  position: absolute;\n  top: -74px;\n  left: 50%;\n  margin-left: -25px;\n  cursor: pointer;\n}\n\n.box-video-style .mark {\n  position: absolute;\n  width: 100%;\n  height: 30px;\n  top: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n}\n\n.submission {\n  margin-left: 10px;\n}\n\n.color-list .tip {\n  color: #c9c9c9;\n  font-size: 12px;\n}\n\n.color-list .color-item {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 10px;\n  color: #fff;\n  margin-right: 10px;\n  font-size: 12px;\n\n}\n\n.color-list .color-item.blue {\n  background-color: #1E9FFF;\n}\n\n.color-list .color-item.yellow {\n  background-color: rgb(254, 185, 0);\n}\n\n.color-list .color-item.green {\n  background-color: #009688;\n}\n\n.color-list .color-item.red {\n  background-color: #ed4014;\n}\n\n.columnsBox {\n  margin-right: 10px;\n  width: 200px;\n}\n\n.priceBox {\n  width: 100%;\n}\n\n.rulesBox {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  .item{\n    display:flex;\n    flex-wrap: wrap;\n  }\n}\n\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrueTab {\n  width: 40px !important;\n  height: 40px !important;\n}\n\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.curs {\n  cursor: pointer;\n}\n\n.inpWith {\n  width: 60%;\n}\n\n.labeltop {\n  ::v-deep .ivu-form-item-label {\n    float: none !important;\n    display: inline-block !important;\n    margin-left: 120px !important;\n    width: auto !important;\n  }\n}\n\n.video-icon {\n  background-image: url('https://cdn.oss.9gt.net/prov1.1/1/icons.png'); // cdn.oss.9gt.net/prov1.1/1/icons.png);\n  background-color: #fff;\n  background-position: -9999px;\n  background-repeat: no-repeat;\n}\n\n.see {\n  color: #2d8cf0;\n  cursor: pointer;\n}\n\n.trip {\n  color: #bbb;\n  margin-bottom: 10px;\n  font-size: 12px;\n}\n\n\n.virtual-data {\n  display: flex;\n  align-items: center;\n}\n\n.add-more {\n  margin-top: 20px;\n  display: flex;\n}\n\n.virtual-title {\n  width: 60px;\n}\n\n.scroll-virtual {\n  max-height: 400px;\n  overflow-y: auto;\n  margin-top: 10px;\n}\n\n.footer {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 30px;\n\n  .clear, .submit {\n    padding: 10px 20px;\n    border-radius: 5px;\n    color: #fff;\n    cursor: pointer;\n  }\n\n  .clear {\n    background-color: #ccc;\n    margin-right: 20px;\n  }\n\n  .submit {\n    background-color: #2d8cf0;\n  }\n}\n\n.picBox {\n  display: flex;\n}\n\n.btndel {\n  position: absolute;\n  z-index: 9;\n  width: 20px !important;\n  height: 20px !important;\n  left: 46px;\n  top: -4px;\n}\n\n.ifam {\n  width: 344px;\n  height: 644px;\n  background: url('../../../assets/images/phonebg.png') no-repeat center top;\n  background-size: 344px 644px;\n  padding: 40px 20px;\n  padding-top: 50px;\n  margin: 0 auto;\n\n  .content {\n    height: 560px;\n    overflow: hidden;\n    scrollbar-width: none; /* firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n\n  .content::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n::v-deep .ivu-date-picker {\n  width: 300px;\n}\n\n.virtual_boder {\n  border: 1px solid var(--prev-color-primary);\n}\n\n.virtual_boder2 {\n  border: 1px solid #E7E7E7;\n}\n\n.virtual_san {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 0;\n  height: 0;\n  border-bottom: 26px solid var(--prev-color-primary);\n  border-left: 26px solid transparent;\n}\n\n.virtual_dui {\n  position: absolute;\n  bottom: -2px;\n  right: 2px;\n  color: #FFFFFF;\n  font-family: system-ui;\n}\n\n.virtual {\n  width: 120px;\n  height: 60px;\n  background: #FFFFFF;\n  border-radius: 3px;\n  // border: 1px solid #E7E7E7;\n  float: left;\n  text-align: center;\n  padding-top: 8px;\n  position: relative;\n  cursor: pointer;\n  line-height: 23px;\n\n  .virtual_top {\n    font-size: 14px;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.85);\n  }\n\n  .virtual_bottom {\n    font-size: 12px;\n    font-weight: 400;\n    color: #999999;\n  }\n}\n\n.virtual:nth-child(2n) {\n  margin: 0 12px;\n}\n\n.addfont {\n  display: inline-block;\n  font-size: 12px;\n  font-weight: 400;\n  color: var(--prev-color-primary);\n  margin-left: 14px;\n  cursor: pointer;\n}\n\n.titTip {\n  display: inline-bolck;\n  font-size: 12px;\n  line-height: 24px;\n  font-weight: 400;\n  color: #999999;\n}\n\n.videbox {\n  width: 60px;\n  height: 60px;\n  background: rgba(0, 0, 0, 0.02);\n  border-radius: 4px;\n  border: 1px dashed #DDDDDD;\n  line-height: 50px;\n  text-align: center;\n  color: #898989;\n  font-size: 30px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.addCustom_content {\n  margin-top: 20px;\n\n  .custom_box {\n    margin-bottom: 10px;\n  }\n}\n\n.addCustomBox {\n  margin-top: 12px;\n  font-size: 13px;\n  font-weight: 400;\n  color: var(--prev-color-primary);\n\n  .btn {\n    cursor: pointer;\n    width: max-content;\n  }\n}\n\n.type-radio {\n  margin-buttom: 10px;\n}\n\n.deteal-btn {\n  color: #5179ea;\n}\n\n.stock-disk {\n  margin: 10px 0;\n}\n\n.line {\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 20px;\n}\n\n.labelInput {\n  border: 1px solid #dcdee2;\n  width: 414px;\n  padding: 0 15px;\n  border-radius: 5px;\n  min-height: 30px;\n  cursor: pointer;\n  font-size: 12px;\n\n  .span {\n    color: #c5c8ce;\n  }\n\n  .iconxiayi {\n    font-size: 12px;\n  }\n}\n\n#shopp-manager ::v-deep .ivu-form-item-content {\n  line-height: 33px !important;\n}\n\n#selectvideo ::v-deep .ivu-form-item-content {\n  line-height: 0px !important;\n}\n\n.progress {\n  margin-top: 10px;\n}\n.labelInput ::v-deep .el-tag{\n  color: #606266;\n  background-color: #F0F2F5;\n  border-color: #F0F2F5;\n  margin-right: 6px;\n}\n.labelInput ::v-deep .el-tag .el-tag__close{\n  color: #909399;\n}\n.labelInput ::v-deep .el-tag .el-tag__close:hover{\n  color: #fff;\n  background-color: #909399;\n}\n.brokerage{\n  font-size: 12px;\n}\n</style>\n"]}]}