{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/goods/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/goods/list.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IFNvY2tldCB9IGZyb20gJ0AvbGlicy9zb2NrZXQnOwppbXBvcnQgeyBwcm9kdWN0Q2FydCwgcHJvZHVjdEhvdCwgcHJvZHVjdFZpc2l0IH0gZnJvbSAnQC9hcGkva2VmdS5qcyc7CmltcG9ydCB7IHNlcnZpY2VJbmZvIH0gZnJvbSAnQC9hcGkva2VmdV9tb2JpbGUnOwppbXBvcnQgZW1wdHkgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9lbXB0eSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdF9pbmZvJywKICBjb21wb25lbnRzOiB7CiAgICBlbXB0eSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcHM6IHsKICAgICAgICBiYXI6IHsKICAgICAgICAgIGJhY2tncm91bmQ6ICcjMzkzMjMyJywKICAgICAgICAgIG9wYWNpdHk6ICcuNScsCiAgICAgICAgICBzaXplOiAnMnB4JywKICAgICAgICB9LAogICAgICB9LAogICAgICBzZWFyY2hUeHQ6ICcnLAogICAgICB0YWJDdXI6IDAsCiAgICAgIHRhYkxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICB0aXRsZTogJ+i0reS5sCcsCiAgICAgICAgICBhcGk6ICdwcm9kdWN0Q2FydCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6IDEsCiAgICAgICAgICB0aXRsZTogJ+i2s+i/uScsCiAgICAgICAgICBhcGk6ICdwcm9kdWN0SG90JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogMiwKICAgICAgICAgIHRpdGxlOiAn54Ot6ZSAJywKICAgICAgICAgIGFwaTogJ3Byb2R1Y3RWaXNpdCcsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgdG9VaWQ6ICcnLAogICAgICBsaXN0OiBbXSwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdGFiQ3VyKG5WYWwsIG9WYWwpIHsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIGlmIChuVmFsID09IDApIHJldHVybiB0aGlzLmdldEJ1eUxpc3QoKTsKICAgICAgaWYgKG5WYWwgPT0gMSkgcmV0dXJuIHRoaXMuZ2V0VmlzaXQoKTsKICAgICAgaWYgKG5WYWwgPT0gMikgcmV0dXJuIHRoaXMuZ2V0UHJvZHVjdEhvdCgpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBzZXJ2aWNlSW5mbygpLnRoZW4oKHJlcykgPT4gewogICAgICB3aW5kb3cuZG9jdW1lbnQudGl0bGUgPSBgJHtyZXMuZGF0YS5zaXRlX25hbWV9IC0g5ZWG5ZOB5YiX6KGoYDsKICAgIH0pOwogICAgdGhpcy50b1VpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRvVWlkOwogICAgdGhpcy5nZXRCdXlMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDotK3kubDorrDlvZUKICAgIGdldEJ1eUxpc3QoKSB7CiAgICAgIHByb2R1Y3RDYXJ0KHRoaXMudG9VaWQsIHsKICAgICAgICBzdG9yZV9uYW1lOiB0aGlzLnNlYXJjaFR4dCwKICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeDremUgOWVhuWTgQogICAgZ2V0UHJvZHVjdEhvdCgpIHsKICAgICAgcHJvZHVjdEhvdCh0aGlzLnRvVWlkLCB7CiAgICAgICAgc3RvcmVfbmFtZTogdGhpcy5zZWFyY2hUeHQsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDotrPov7kKICAgIGdldFZpc2l0KCkgewogICAgICBwcm9kdWN0VmlzaXQodGhpcy50b1VpZCwgewogICAgICAgIHN0b3JlX25hbWU6IHRoaXMuc2VhcmNoVHh0LAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o6o6YCBCiAgICBiaW5nR29vZHMoaXRlbSkgewogICAgICBsZXQgb2JqID0gewogICAgICAgIHR5cGU6ICdjaGF0JywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBtc246IGl0ZW0uaWQsCiAgICAgICAgICB0eXBlOiA1LAogICAgICAgICAgdG9fdWlkOiB0aGlzLnRvVWlkLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIFNvY2tldC50aGVuKCh3cykgPT4gewogICAgICAgIHdzLnNlbmQob2JqKTsKICAgICAgfSk7CiAgICAgIC8vIHRoaXMuYnVzLiRlbWl0KCdzZWxlY3RHb29kcycsaXRlbSkKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICAvLyDpobbpg6jpgInpobnljaHliIfmjaIKICAgIGJpbmRUYWIoaXRlbSkgewogICAgICB0aGlzLnRhYkN1ciA9IGl0ZW0ua2V5OwogICAgfSwKICAgIC8vIOaQnOe0ogogICAgYmluZFNlYXJjaCgpIHsKICAgICAgaWYgKHRoaXMudGFiQ3VyID09IDApIHJldHVybiB0aGlzLmdldEJ1eUxpc3QoKTsKICAgICAgaWYgKHRoaXMudGFiQ3VyID09IDEpIHJldHVybiB0aGlzLmdldFZpc2l0KCk7CiAgICAgIGlmICh0aGlzLnRhYkN1ciA9PSAyKSByZXR1cm4gdGhpcy5nZXRQcm9kdWN0SG90KCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/kefu/mobile/goods","sourcesContent":["<template>\n  <div class=\"product_info\">\n    <div class=\"head\">\n      <div class=\"tab-box\">\n        <div\n          class=\"tab-item\"\n          :class=\"{ on: index == tabCur }\"\n          v-for=\"(item, index) in tabList\"\n          :key=\"index\"\n          @click=\"bindTab(item)\"\n        >\n          {{ item.title }}\n        </div>\n      </div>\n      <div class=\"search-box\">\n        <el-input\n          type=\"text\"\n          placeholder=\"搜索商品名称/ID\"\n          v-model=\"searchTxt\"\n          style=\"border-radius: 0.39rem; background: #f5f6f9\"\n          :search=\"true\"\n          @on-search=\"bindSearch\"\n        />\n      </div>\n    </div>\n    <div class=\"scroll-box\" v-if=\"list.length > 0\">\n      <vue-scroll :ops=\"ops\">\n        <div class=\"goods-item\" v-for=\"(item, index) in list\" :key=\"index\">\n          <img :src=\"item.image\" mode=\"\" />\n          <div class=\"info\">\n            <div class=\"title line2 mb15\">{{ item.store_name }}</div>\n            <div class=\"num\">\n              <span class=\"mr15\">库存 {{ item.stock }}</span>\n              <span>销量 {{ item.sales }}</span>\n            </div>\n          </div>\n          <div class=\"right\">\n            <div class=\"price\">￥{{ item.price }}</div>\n            <div class=\"btn\" @click=\"bingGoods(item)\">推送</div>\n          </div>\n        </div>\n        <div class=\"slot-load\" slot=\"load-deactive\"></div>\n        <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n      </vue-scroll>\n    </div>\n    <empty v-else msg=\"暂无商品信息\"></empty>\n  </div>\n</template>\n\n<script>\nimport { Socket } from '@/libs/socket';\nimport { productCart, productHot, productVisit } from '@/api/kefu.js';\nimport { serviceInfo } from '@/api/kefu_mobile';\nimport empty from '../../components/empty';\nexport default {\n  name: 'product_info',\n  components: {\n    empty,\n  },\n  data() {\n    return {\n      ops: {\n        bar: {\n          background: '#393232',\n          opacity: '.5',\n          size: '2px',\n        },\n      },\n      searchTxt: '',\n      tabCur: 0,\n      tabList: [\n        {\n          key: 0,\n          title: '购买',\n          api: 'productCart',\n        },\n        {\n          key: 1,\n          title: '足迹',\n          api: 'productHot',\n        },\n        {\n          key: 2,\n          title: '热销',\n          api: 'productVisit',\n        },\n      ],\n      toUid: '',\n      list: [],\n    };\n  },\n  watch: {\n    tabCur(nVal, oVal) {\n      this.list = [];\n      if (nVal == 0) return this.getBuyList();\n      if (nVal == 1) return this.getVisit();\n      if (nVal == 2) return this.getProductHot();\n    },\n  },\n  created() {\n    serviceInfo().then((res) => {\n      window.document.title = `${res.data.site_name} - 商品列表`;\n    });\n    this.toUid = this.$route.query.toUid;\n    this.getBuyList();\n  },\n  methods: {\n    // 购买记录\n    getBuyList() {\n      productCart(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 热销商品\n    getProductHot() {\n      productHot(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 足迹\n    getVisit() {\n      productVisit(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 推送\n    bingGoods(item) {\n      let obj = {\n        type: 'chat',\n        data: {\n          msn: item.id,\n          type: 5,\n          to_uid: this.toUid,\n        },\n      };\n      Socket.then((ws) => {\n        ws.send(obj);\n      });\n      // this.bus.$emit('selectGoods',item)\n      this.$router.go(-1);\n    },\n    // 顶部选项卡切换\n    bindTab(item) {\n      this.tabCur = item.key;\n    },\n    // 搜索\n    bindSearch() {\n      if (this.tabCur == 0) return this.getBuyList();\n      if (this.tabCur == 1) return this.getVisit();\n      if (this.tabCur == 2) return this.getProductHot();\n    },\n  },\n};\n</script>\n<style>\npage {\n  height: 100%;\n}\n</style>\n<style lang=\"stylus\" scoped>\n.product_info{\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    .head{\n        background: #fff;\n        .tab-box{\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            height: .8rem;\n            padding: 0 1.46rem;\n            .tab-item{\n                height: .8rem;\n                line-height: .8rem;\n                padding: 0 .15rem;\n                font-size: .28rem;\n                color: #282828;\n                &.on{\n                    border-bottom: 1px solid #3875EA;\n                }\n            }\n        }\n        .search-box{\n            display: flex;\n            align-items: center;\n            height: 1.28rem;\n            padding: 0 .3rem;\n            input{\n                display: block;\n                width: 100%;\n                height: .68rem;\n                padding-left: .7rem;\n                background: #F5F6F9;\n                border-radius: .39rem;\n                box-sizing: border-box;\n                /*background-image: url(\"../static/search.png\");*/\n            }\n        }\n    }\n    .scroll-box{\n        flex: 1;\n        overflow: hidden;\n        .goods-item{\n            display: flex;\n            padding: .3rem;\n            margin-top: .15rem;\n            background-color: #fff;\n            img{\n                width: 1.7rem;\n                height: 1.7rem;\n                border-radius: 0.06rem;\n            }\n            .info{\n                width: 3.26rem;\n                margin-left: .22rem;\n                .title{\n                    font-size: .28rem;\n                    color: #282828;\n                }\n                .num{\n                    margin-top: .1rem;\n                    font-size: .24rem;\n                    color: #9F9F9F;\n                }\n            }\n            .right{\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n                margin-left: .36rem;\n                .price{\n                    color: #F74C31;\n                }\n                .btn{\n                    width: 100%;\n                    height: .6rem;\n                    line-height: .6rem;\n                    text-align: center;\n                    color: #fff;\n                    background: #3875EA;\n                    border-radius: 0.06rem;\n                }\n            }\n        }\n    }\n}\n</style>\n"]}]}