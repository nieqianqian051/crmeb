{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/systemMenus/components/menusFrom.vue?vue&type=style&index=0&id=93891b4a&scoped=true&lang=css","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/systemMenus/components/menusFrom.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50cmVlcy1jb2FkZCB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA1MDBweDsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLnNjb2xsaGlkZSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBhdXRvOwogIG1hcmdpbi1sZWZ0OiAxOHB4OwogIHBhZGRpbmc6IDEwcHggMCAxMHB4IDA7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKLmNvbnRlbnQgewogIGZvbnQtc2l6ZTogMTJweDsKfQoKLnRpbWUgewogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogIzJkOGNmMDsKfQoKLmljb25zLWl0ZW0gewogIGZsb2F0OiBsZWZ0OwogIG1hcmdpbjogNnB4IDZweCA2cHggMDsKICB3aWR0aDogNTNweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbGlzdC1zdHlsZTogbm9uZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgaGVpZ2h0OiA1MHB4OwogIGNvbG9yOiAjNWM2Yjc3OwogIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHBhZGRpbmctdG9wOiAxMHB4Owp9CgouaWNvbnMtaXRlbSAuZi1zLTI0IHsKICBmb250LXNpemU6IDI0cHg7Cn0KCi5zZWFyY2gtcnVsZSB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHBhZGRpbmc6IDEwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsKfQoKLnJ1bGUgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIG1heC1oZWlnaHQ6IDcwMHB4OwogIG92ZXJmbG93OiBzY3JvbGw7Cn0KCi8q5a6a5LmJ5rua5Yqo5p2h6auY5a695Y+K6IOM5pmvIOmrmOWuveWIhuWIq+WvueW6lOaoquerlua7muWKqOadoeeahOWwuuWvuCovCi5ydWxlOjotd2Via2l0LXNjcm9sbGJhciB7CiAgd2lkdGg6IDEwcHg7CiAgaGVpZ2h0OiAxMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7Cn0KCi8q5a6a5LmJ5rua5Yqo5p2h6L2o6YGTIOWGhemYtOW9sSvlnIbop5IqLwoucnVsZTo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgewogIGJvcmRlci1yYWRpdXM6IDRweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Owp9CgovKuWumuS5iea7keWdlyDlhoXpmLTlvbEr5ZyG6KeSKi8KLnJ1bGU6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTsKfQoKLnJ1bGUtbGlzdCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjVmNTsKICB3aWR0aDogMzIlOwogIG1hcmdpbjogNXB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBwYWRkaW5nOiAxMHB4OwogIGNvbG9yOiAjMzMzOwogIGN1cnNvcjogcG9pbnRlcjsKICB0cmFuc2l0aW9uOiBhbGwgMC4xczsKfQoKLnJ1bGUtbGlzdDpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M1ZDFkZDsKfQoKLnJ1bGUtbGlzdCBkaXYgewogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5zZWxlY3QtcnVsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M1ZDFkZDsKfQoKLmFkZCB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouZGYgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0K"},{"version":3,"sources":["menusFrom.vue"],"names":[],"mappings":";AA0ZA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"menusFrom.vue","sourceRoot":"src/pages/system/systemMenus/components","sourcesContent":["<template>\n  <div>\n    <el-dialog :visible.sync=\"modals\" width=\"540px\" :title=\"titleFrom\" :close-on-click-modal=\"false\">\n      <el-form ref=\"formValidate\" :model=\"formValidate\" label-width=\"80px\" @submit.native.prevent>\n        <el-row :gutter=\"24\">\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"类型：\">\n              <el-radio-group v-model=\"formValidate.auth_type\" @input=\"changeAuthType\">\n                <el-radio :label=\"item.value\" v-for=\"(item, i) in optionsRadio\" :key=\"i\">\n                  <span>{{ item.label }}</span>\n                </el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item :label=\"!authType ? '接口名称：' : '按钮名称：'\" prop=\"menu_name\">\n              <div class=\"add\">\n                <el-input\n                  v-model=\"formValidate.menu_name\"\n                  :placeholder=\"!authType ? '请输入接口名称' : '请输入按钮名称'\"\n                >\n                </el-input>\n                <!-- <el-button class=\"ml10 df\" v-show=\"!authType\" @click=\"getRuleList()\" icon=\"ios-apps\"></el-button> -->\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"父级分类：\">\n              <el-cascader\n                :options=\"menuList\"\n                change-on-select\n                v-model=\"formValidate.path\"\n                filterable\n                style=\"width: 100%\"\n              ></el-cascader>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\" v-if=\"authType != 2\">\n            <el-form-item label=\"页面地址：\" prop=\"menu_path\">\n              <el-input v-model=\"formValidate.menu_path\" placeholder=\"请输入页面地址\" @change=\"changeUnique\">\n                <template #prepend>\n                  <span>{{ $routeProStr }}</span>\n                </template>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\" v-if=\"authType == 2\">\n            <el-form-item label=\"请求方式：\" prop=\"methods\">\n              <el-select v-model=\"formValidate.methods\">\n                <el-option value=\"GET\" label=\"GET\"></el-option>\n                <el-option value=\"POST\" label=\"POST\"></el-option>\n                <el-option value=\"PUT\" label=\"PUT\"></el-option>\n                <el-option value=\"DELETE\" label=\"DELETE\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\" v-if=\"authType == 2\">\n            <el-form-item label=\"接口地址：\" prop=\"api_url\">\n              <el-input v-model=\"formValidate.api_url\" placeholder=\"请输入接口地址\" @change=\"changeUnique\"> </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"权限标识：\" prop=\"unique_auth\">\n              <el-input v-model=\"formValidate.unique_auth\" placeholder=\"请输入权限标识\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\" v-if=\"authType != 2\">\n            <el-form-item label=\"图标：\">\n              <el-input v-model=\"formValidate.icon\" placeholder=\"请选择图标，点击右面图标\">\n                <el-button slot=\"append\" icon=\"el-icon-picture-outline\" @click=\"iconClick\"></el-button>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"备注：\">\n              <el-input v-model=\"formValidate.mark\" placeholder=\"请输入备注\" number></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"排序：\">\n              <el-input type=\"number\" v-model=\"formValidate.sort\" placeholder=\"请输入排序\" number></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"状态：\">\n              <el-radio-group v-model=\"formValidate.is_show\" @input=\"changeShow\">\n                <el-radio :label=\"item.value\" v-for=\"(item, i) in isShowRadio\" :key=\"i\">\n                  <span>{{ item.label }}</span>\n                </el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleReset\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit('formValidate')\">提 交</el-button>\n      </span>\n    </el-dialog>\n    <el-dialog :visible.sync=\"modal12\" width=\"720px\" title=\"图标选择\">\n      <el-input\n        v-model=\"iconVal\"\n        placeholder=\"输入关键词搜索,注意全是英文\"\n        clearable\n        style=\"width: 300px\"\n        @change=\"upIcon(iconVal)\"\n        ref=\"search\"\n      />\n      <div class=\"trees-coadd\">\n        <div class=\"scollhide\">\n          <div class=\"iconlist\">\n            <ul class=\"list-inline\">\n              <li class=\"icons-item\" v-for=\"(item, i) in iconVal ? searchData : list\" :key=\"i\" :title=\"item\">\n                <i :class=\"'el-icon-' + item\" class=\"f-s-24\" @click=\"iconChange(item)\"></i>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n    <el-dialog :visible.sync=\"ruleModal\" width=\"1100px\" title=\"权限列表\" @closed=\"modalchange\">\n      <div class=\"search-rule\">\n        <el-input\n          class=\"mr10\"\n          v-model=\"searchRule\"\n          placeholder=\"输入关键词搜索\"\n          clearable\n          style=\"width: 300px\"\n          ref=\"search\"\n        />\n        <el-button class=\"mr10\" type=\"primary\" @click=\"searchRules\">搜索</el-button>\n        <el-button @click=\"init\">重置</el-button>\n      </div>\n      <div class=\"rule\">\n        <div\n          class=\"rule-list\"\n          v-show=\"!arrs.length || arrs.includes(index)\"\n          :class=\"{ 'select-rule': arrs.includes(index) }\"\n          v-for=\"(item, index) in ruleList\"\n          :key=\"index\"\n          @click=\"selectRule(item)\"\n        >\n          <div>接口名称：{{ item.real_name }}</div>\n          <div>请求方式：{{ item.method }}</div>\n          <div>接口地址：{{ item.rule }}</div>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { addMenusApi, addMenus, getRuleList } from '@/api/systemMenus';\nimport icon from '@/utils/icon';\n\nexport default {\n  name: 'menusFrom',\n  props: {\n    formVal: {\n      type: Object,\n      default: null,\n    },\n    titleFrom: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      arrs: [],\n      searchRule: '',\n      iconVal: '',\n      grid: {\n        xl: 22,\n        lg: 22,\n        md: 22,\n        sm: 22,\n        xs: 22,\n      },\n      modals: false,\n      modal12: false,\n      FromData: [],\n      valids: false,\n      list2: [],\n      list: icon,\n      search: icon,\n      ruleModal: false,\n      ruleList: [],\n      authType: 1,\n      formValidate: {},\n      searchData: [],\n      isShowRadio: [\n        { value: 1, label: '开启' },\n        { value: 0, label: '关闭' },\n      ],\n    };\n  },\n  watch: {\n    formVal(val) {\n      this.formValidate = val;\n    },\n    'formValidate.header': function (n) {\n      this.formValidate.is_header = n ? 1 : 0;\n    },\n    'formValidate.auth_type': function (n) {\n      if (n === undefined) {\n        n = 1;\n      }\n      this.authType = n;\n    },\n    'formValidate.data': function (n) {},\n  },\n  computed: {\n    /* eslint-disable */\n    optionsList() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('pid' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    headerOptionsList() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('header' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    optionsListmodule() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('module' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    optionsRadio() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('auth_type' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    isheaderRadio() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('is_header' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    // isShowRadio() {\n    //   let a = [];\n    //   this.FromData.map((item) => {\n    //     if ('is_show' === item.field) {\n    //       a = item.options;\n    //     }\n    //   });\n    //   return a;\n    // },\n    isShowPathRadio() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('is_show_path' === item.field) {\n          a = item.options;\n        }\n      });\n      return a;\n    },\n    menuList() {\n      let a = [];\n      this.FromData.map((item) => {\n        if ('menu_list' === item.field) {\n          a = item.props.options;\n        }\n      });\n      return a;\n    },\n  },\n  methods: {\n    // 获取权限列表\n    getRuleList() {\n      getRuleList().then((res) => {\n        this.ruleList = res.data;\n        this.ruleModal = true;\n      });\n    },\n    modalchange() {\n      this.arrs = [];\n      this.ruleModal = '';\n      this.ruleModal = false;\n    },\n    changeUnique(val) {\n      let value = this.$routeProStr + val.target.value;\n      if (value.slice(0, 1) === '/') value = value.replace('/', '');\n      this.formValidate.unique_auth = value.replaceAll('/', '-');\n    },\n    changeAuthType(val) {\n      this.authType = val;\n    },\n    changeShow(val) {\n      this.formValidate.is_show = val;\n    },\n    selectRule(data) {\n      this.$emit('selectRule', data);\n      this.$nextTick((e) => {\n        this.ruleModal = false;\n      });\n    },\n    // 搜索\n    upIcon(n) {\n      this.searchData = this.list.filter((item) => item.indexOf(this.iconVal) > -1);\n    },\n    // 搜索规则\n    searchRules() {\n      if (this.searchRule.trim()) {\n        this.arrs = [];\n        for (var i = 0; i < this.ruleList.length; i++) {\n          if (this.ruleList[i].real_name.indexOf(this.searchRule) !== -1) {\n            this.arrs.push(i);\n          }\n        }\n      } else {\n        this.arrs = [];\n      }\n    },\n    init() {\n      this.searchRule = '';\n      this.arrs = [];\n    },\n    handleCreate1(val) {\n      this.headerOptionsList.push({\n        value: val,\n        label: val,\n      });\n    },\n    // 获取新增表单\n    getAddFrom() {\n      addMenus()\n        .then(async (res) => {\n          this.FromData = res.data.rules;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    iconClick() {\n      this.modal12 = true;\n    },\n    iconChange(n) {\n      this.formValidate.icon = n;\n      this.modal12 = false;\n    },\n    // 提交\n    handleSubmit(name) {\n      //判断是否选择父级分类\n      if (this.formValidate.path) {\n        let length = this.formValidate.path.length;\n        this.formValidate.pid = this.formValidate.path[length - 1] || 0;\n      }\n      let data = {\n        url: this.formValidate.id ? `/setting/menus/${this.formValidate.id}` : '/setting/menus',\n        method: this.formValidate.id ? 'put' : 'post',\n        datas: this.formValidate,\n      };\n      if (!this.formValidate.menu_name) {\n        return this.$message.warning('请填写菜单/按钮/接口名称');\n      }\n      if (!this.formValidate.menu_path && this.authType != 2) {\n        return this.$message.warning('请填写页面/按钮地址');\n      }\n      if (!this.formValidate.api_url && this.authType == 2) {\n        return this.$message.warning('请填写接口地址');\n      }\n      this.valids = true;\n      addMenusApi(data)\n        .then(async (res) => {\n          this.$message.success(res.msg);\n          this.modals = false;\n          this.$emit('changeMenu');\n          this.getAddFrom();\n          // this.$store.dispatch('menus/getMenusNavList');\n        })\n        .catch((res) => {\n          this.valids = false;\n          this.$message.error(res.msg);\n        });\n    },\n    handleReset() {\n      this.modals = false;\n      this.$refs['formValidate'].resetFields();\n      this.$emit('clearFrom');\n    },\n  },\n  created() {\n    this.list = this.search;\n    // this.getAddFrom();\n  },\n};\n</script>\n\n<style scoped>\n.trees-coadd {\n  width: 100%;\n  height: 500px;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.scollhide {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  margin-left: 18px;\n  padding: 10px 0 10px 0;\n  box-sizing: border-box;\n}\n\n.content {\n  font-size: 12px;\n}\n\n.time {\n  font-size: 12px;\n  color: #2d8cf0;\n}\n\n.icons-item {\n  float: left;\n  margin: 6px 6px 6px 0;\n  width: 53px;\n  text-align: center;\n  list-style: none;\n  cursor: pointer;\n  height: 50px;\n  color: #5c6b77;\n  transition: all 0.2s ease;\n  position: relative;\n  padding-top: 10px;\n}\n\n.icons-item .f-s-24 {\n  font-size: 24px;\n}\n\n.search-rule {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  background-color: #f2f2f2;\n}\n\n.rule {\n  display: flex;\n  flex-wrap: wrap;\n  max-height: 700px;\n  overflow: scroll;\n}\n\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\n.rule::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n  background-color: #f5f5f5;\n}\n\n/*定义滚动条轨道 内阴影+圆角*/\n.rule::-webkit-scrollbar-track {\n  border-radius: 4px;\n  background-color: #f5f5f5;\n}\n\n/*定义滑块 内阴影+圆角*/\n.rule::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: #555;\n}\n\n.rule-list {\n  background-color: #f8f5f5;\n  width: 32%;\n  margin: 5px;\n  border-radius: 3px;\n  padding: 10px;\n  color: #333;\n  cursor: pointer;\n  transition: all 0.1s;\n}\n\n.rule-list:hover {\n  background-color: #c5d1dd;\n}\n\n.rule-list div {\n  white-space: nowrap;\n}\n\n.select-rule {\n  background-color: #c5d1dd;\n}\n\n.add {\n  display: flex;\n  align-items: center;\n}\n\n.df {\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}