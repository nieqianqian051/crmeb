{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/components/addReply.vue?vue&type=style&index=0&id=50f16ea4&lang=stylus&scoped=true","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/components/addReply.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/index.js","mtime":1746465207601},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci51cGxvYWQtYm94IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtcyBjZW50ZXIKICBqdXN0aWZ5LWNvbnRlbnQgY2VudGVyCiAgd2lkdGg6IDU4cHg7CiAgaGVpZ2h0OiA1OHB4OwogIGJvcmRlcjogMXB4IGRhc2hlZCAjYzBjY2RhOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICAvL2JveC1zaGFkb3c6IDJweCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsaW5lLWhlaWdodDogNThweDsKICBjdXJzb3I6IHBvaW50ZXI7CgogICsgLnVwbG9hZC1ib3ggewogICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgfQoKICAuaXZ1LWljb24gewogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgIGZvbnQtc2l6ZTogMjBweDsKICB9CgogIC5pbWFnZSB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICB9CgogIC5idG4gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgcmlnaHQ6IDA7CiAgICBmb250LXNpemU6IDE0cHgKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDUwJSwgLTUwJSk7CiAgfQp9IC5kZi1haWN7CiAgZGlzcGxheSBmbGV4CiAgZmxleC13cmFwOiB3cmFwCn0KICAudzQxNHsKICAgIHdpZHRoOjQxNHB4OwogIH0K"},{"version":3,"sources":["addReply.vue"],"names":[],"mappings":";AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addReply.vue","sourceRoot":"src/pages/product/components","sourcesContent":["<template>\n  <el-dialog\n    :visible.sync=\"visibleModal\"\n    title=\"添加自评\"\n    width=\"720px\"\n    :close-on-click-modal=\"false\"\n    @close=\"onCancel\"\n  >\n    <el-form :model=\"formData\" label-width=\"100px\" label-position=\"right\">\n      <el-form-item label=\"商品：\">\n        <div class=\"upload-box\" @click=\"callGoods\">\n          <img v-if=\"goods.id\" :src=\"goods.image\" class=\"image\" />\n          <i v-else class=\"el-icon-goods\"></i>\n        </div>\n      </el-form-item>\n      <el-form-item v-if=\"goods.id\" label=\"商品规格：\">\n        <div class=\"upload-box\" @click=\"callAttr\">\n          <img v-if=\"attr.image\" :src=\"attr.image\" class=\"image\" />\n          <i v-else class=\"el-icon-plus\" />\n        </div>\n        <div>{{ attr.suk }}</div>\n      </el-form-item>\n      <el-form-item label=\"用户头像：\">\n        <div class=\"upload-box\" @click=\"callPicture('单选')\">\n          <img v-if=\"avatar.att_dir\" :src=\"avatar.att_dir\" class=\"image\" />\n          <i v-if=\"avatar.att_dir\" class=\"el-icon-error btn\" @click.stop=\"removeUser\"></i>\n          <i v-else class=\"el-icon-user\" />\n        </div>\n      </el-form-item>\n      <el-form-item label=\"用户名称：\">\n        <el-input v-model=\"formData.nickname\" placeholder=\"请输入用户名称\" class=\"w100\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"评价文字：\">\n        <el-input v-model=\"formData.comment\" type=\"textarea\" placeholder=\"请输入评价文字\" class=\"w100\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品分数：\">\n        <el-rate v-model=\"product_score\" />\n      </el-form-item>\n      <el-form-item label=\"服务分数：\">\n        <el-rate v-model=\"service_score\" />\n      </el-form-item>\n      <el-form-item label=\"评价图片：\">\n        <div class=\"df-aic\">\n          <div v-for=\"item in picture\" :key=\"item.att_id\" class=\"upload-box\">\n            <img :src=\"item.att_dir\" class=\"image\" />\n            <i class=\"el-icon-error btn\" @click.stop=\"removePicture(item.att_id)\"></i>\n          </div>\n          <div v-if=\"picture.length < 8\" class=\"upload-box\" @click=\"callPicture('多选')\">\n            <i class=\"el-icon-picture-outline\"></i>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"评价时间：\">\n        <el-date-picker\n          clearable\n          v-model=\"add_time\"\n          type=\"datetime\"\n          range-separator=\"-\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          @change=\"onChange\"\n          style=\"width: 414px\"\n        />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"onCancel\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"onOk\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { saveFictitiousReply } from '@/api/product';\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    goods: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    attr: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    avatar: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    picture: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n  },\n  data() {\n    return {\n      formData: {\n        avatar: '',\n        nickname: '',\n        comment: '',\n      },\n      product_score: 5,\n      service_score: 5,\n      pics: [],\n      add_time: '',\n      visibleModal: false,\n    };\n  },\n  watch: {\n    picture(value) {\n      this.pics = value.map((item) => {\n        return item.att_dir;\n      });\n    },\n    visible(value) {\n      this.visibleModal = value;\n      if (!value) {\n        this.formData.nickname = '';\n        this.formData.comment = '';\n        this.product_score = 5;\n        this.service_score = 5;\n        this.add_time = '';\n      }\n    },\n  },\n  methods: {\n    removeUser() {\n      this.avatar.att_dir = '';\n    },\n    removePicture(att_id) {\n      this.$emit('removePicture', att_id);\n    },\n    onChange(date) {\n      this.add_time = date;\n    },\n    callGoods() {\n      this.$emit('callGoods');\n    },\n    callAttr() {\n      this.$emit('callAttr');\n    },\n    callPicture(type) {\n      this.$emit('callPicture', type);\n    },\n    onOk() {\n      if (!this.goods.id) {\n        return this.$message.error('请选择商品');\n      }\n      if (!this.attr.image) {\n        return this.$message.error('请选择商品规格');\n      }\n      if (!this.avatar.att_dir) {\n        return this.$message.error('请选择用户头像');\n      }\n      if (!this.formData.nickname) {\n        return this.$message.error('请填写用户昵称');\n      }\n      if (!this.formData.comment) {\n        return this.$message.error('请填写评论内容');\n      }\n      if (!this.product_score) {\n        return this.$message.error('商品分数必须是1-5之间的整数');\n      }\n      if (!this.service_score) {\n        return this.$message.error('服务分数必须是1-5之间的整数');\n      }\n      let data = {\n        image: {\n          image: this.goods.image,\n          product_id: this.goods.id,\n        },\n        suk: this.attr.suk,\n        avatar: this.avatar.att_dir,\n        nickname: this.formData.nickname,\n        comment: this.formData.comment,\n        product_score: this.product_score,\n        service_score: this.service_score,\n        pics: this.pics,\n        add_time: this.add_time,\n      };\n      saveFictitiousReply(data)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.$emit('close', false);\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    onCancel() {\n      this.$emit('close', false);\n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.upload-box {\n  position: relative;\n  display: flex;\n  align-items center\n  justify-content center\n  width: 58px;\n  height: 58px;\n  border: 1px dashed #c0ccda;\n  border-radius: 4px;\n  //box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);\n  vertical-align: middle;\n  text-align: center;\n  line-height: 58px;\n  cursor: pointer;\n\n  + .upload-box {\n    margin-left: 10px;\n  }\n\n  .ivu-icon {\n    vertical-align: middle;\n    font-size: 20px;\n  }\n\n  .image {\n    width: 100%;\n    height: 100%;\n    border-radius: 3px;\n  }\n\n  .btn {\n    position: absolute;\n    top: 0;\n    right: 0;\n    font-size: 14px\n    transform: translate(50%, -50%);\n  }\n} .df-aic{\n  display flex\n  flex-wrap: wrap\n}\n  .w414{\n    width:414px;\n  }\n</style>\n"]}]}