{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/agent/handle/promotersList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/agent/handle/promotersList.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHN0YWlyTGlzdEFwaSB9IGZyb20gJ0AvYXBpL2FnZW50JzsKaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Byb21vdGVyc0xpc3QnLAogIC8vIHByb3BzOiB7CiAgLy8gICAgIGxpc3RUaXRsZTogewogIC8vICAgICAgICAgdHlwZTogU3RyaW5nLAogIC8vICAgICAgICAgZGVmYXVsdDogJycKICAvLyAgICAgfQogIC8vIH0sCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCk7CiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKTsKICAgICAgfQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBmcm9tTGlzdDogewogICAgICAgIHRpdGxlOiAn6YCJ5oup5pe26Ze0JywKICAgICAgICBjdXN0b206IHRydWUsCiAgICAgICAgZnJvbVR4dDogWwogICAgICAgICAgeyB0ZXh0OiAn5YWo6YOoJywgdmFsOiAnJyB9LAogICAgICAgICAgeyB0ZXh0OiAn5LuK5aSpJywgdmFsOiAndG9kYXknIH0sCiAgICAgICAgICB7IHRleHQ6ICfmmKjlpKknLCB2YWw6ICd5ZXN0ZXJkYXknIH0sCiAgICAgICAgICB7IHRleHQ6ICfmnIDov5E35aSpJywgdmFsOiAnbGF0ZWx5NycgfSwKICAgICAgICAgIHsgdGV4dDogJ+acgOi/kTMw5aSpJywgdmFsOiAnbGF0ZWx5MzAnIH0sCiAgICAgICAgICB7IHRleHQ6ICfmnKzmnIgnLCB2YWw6ICdtb250aCcgfSwKICAgICAgICAgIHsgdGV4dDogJ+acrOW5tCcsIHZhbDogJ3llYXInIH0sCiAgICAgICAgXSwKICAgICAgICBmcm9tVHh0MjogWwogICAgICAgICAgeyB0ZXh0OiAn5YWo6YOoJywgdmFsOiAnJyB9LAogICAgICAgICAgeyB0ZXh0OiAn5LiA57qn5o6o5bm/5Lq6JywgdmFsOiAxIH0sCiAgICAgICAgICB7IHRleHQ6ICfkuoznuqfmjqjlub/kuronLCB2YWw6IDIgfSwKICAgICAgICBdLAogICAgICAgIGZyb21UeHQzOiBbCiAgICAgICAgICB7IHRleHQ6ICflhajpg6gnLCB2YWw6ICcnIH0sCiAgICAgICAgICB7IHRleHQ6ICfkuIDnuqfmjqjlub/kurrorqLljZUnLCB2YWw6IDEgfSwKICAgICAgICAgIHsgdGV4dDogJ+S6jOe6p+aOqOW5v+S6uuiuouWNlScsIHZhbDogMiB9LAogICAgICAgICAgeyB0ZXh0OiAn5LqL5Lia6YOo5o6o5bm/6K6i5Y2VJywgdmFsOiAzIH0sCiAgICAgICAgICB7IHRleHQ6ICfku6PnkIbllYbmjqjlub/orqLljZUnLCB2YWw6IDQgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICBsaW1pdDogMTUsCiAgICAgICAgcGFnZTogMSwKICAgICAgICBuaWNrbmFtZTogJycsCiAgICAgICAgZGF0YTogJycsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgb3JkZXJfaWQ6ICcnLAogICAgICAgIHVpZDogMCwKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYkxpc3Q6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgdGltZVZhbDogW10sCiAgICAgIGNvbHVtbnM0OiBbXSwKICAgICAgbGlzdFRpdGxlOiAnJywKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWydpc01vYmlsZSddKSwKICAgIGxhYmVsV2lkdGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogJzgwcHgnOwogICAgfSwKICAgIGxhYmVsUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2FuY2VsKCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IHsKICAgICAgICBsaW1pdDogMTUsCiAgICAgICAgcGFnZTogMSwKICAgICAgICBuaWNrbmFtZTogJycsCiAgICAgICAgZGF0YTogJycsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgb3JkZXJfaWQ6ICcnLAogICAgICAgIHVpZDogMCwKICAgICAgfTsKICAgICAgdGhpcy50aW1lVmFsID0gW107CiAgICB9LAogICAgLy8g5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLnRpbWVWYWwgPSBlOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhID0gdGhpcy50aW1lVmFsID8gdGhpcy50aW1lVmFsLmpvaW4oJy0nKSA6ICcnOwogICAgICB0aGlzLmdldExpc3QodGhpcy5yb3dzTGlzdCwgdGhpcy5saXN0VGl0bGUpOwogICAgfSwKICAgIC8vIOmAieaLqeaXtumXtAogICAgc2VsZWN0Q2hhbmdlKHRhYikgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhID0gdGFiOwogICAgICB0aGlzLnRpbWVWYWwgPSBbXTsKICAgICAgdGhpcy5nZXRMaXN0KHRoaXMucm93c0xpc3QsIHRoaXMubGlzdFRpdGxlKTsKICAgIH0sCiAgICAvLyDliJfooagKICAgIGdldExpc3Qocm93LCB0aXQpIHsKICAgICAgdGhpcy5saXN0VGl0bGUgPSB0aXQ7CiAgICAgIHRoaXMucm93c0xpc3QgPSByb3c7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxldCB1cmwgPSAnJzsKICAgICAgaWYgKHRoaXMubGlzdFRpdGxlID09PSAnbWFuJykgewogICAgICAgIHVybCA9ICdhZ2VudC9zdGFpcic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXJsID0gJ2FnZW50L3N0YWlyL29yZGVyJzsKICAgICAgfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS51aWQgPSByb3cudWlkOwogICAgICBzdGFpckxpc3RBcGkodXJsLCB0aGlzLmZvcm1WYWxpZGF0ZSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50YWJMaXN0ID0gZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEuY291bnQ7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudGFiTGlzdCA9IFtdOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBwYWdlQ2hhbmdlKCkgewogICAgICB0aGlzLmdldExpc3QodGhpcy5yb3dzTGlzdCwgdGhpcy5saXN0VGl0bGUpOwogICAgfSwKICAgIC8vIOaQnOe0ogogICAgdXNlclNlYXJjaHMoKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QodGhpcy5yb3dzTGlzdCwgdGhpcy5saXN0VGl0bGUpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["promotersList.vue"],"names":[],"mappings":";AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"promotersList.vue","sourceRoot":"src/pages/agent/handle","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :visible.sync=\"modals\"\n      :title=\"listTitle === 'man' ? '统计推广人列表' : '推广订单'\"\n      :close-on-click-modal=\"false\"\n      width=\"1000px\"\n      @closed=\"onCancel\"\n    >\n      <div class=\"table_box\">\n        <el-form\n          ref=\"formValidate\"\n          :model=\"formValidate\"\n          :label-width=\"labelWidth\"\n          :label-position=\"labelPosition\"\n          @submit.native.prevent\n          inline\n        >\n          <el-form-item label=\"时间选择：\">\n            <el-date-picker\n              clearable\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              v-model=\"timeVal\"\n              value-format=\"yyyy/MM/dd\"\n              type=\"daterange\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              style=\"width: 250px\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"用户类型：\">\n            <el-select v-model=\"formValidate.type\" clearable class=\"form_content_width\">\n              <el-option\n                v-for=\"(item, i) in listTitle === 'man' ? fromList.fromTxt2 : fromList.fromTxt3\"\n                :key=\"i\"\n                :value=\"item.val\"\n                :label=\"item.text\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"搜索：\" v-if=\"listTitle === 'man'\">\n            <el-input\n              clearable\n              placeholder=\"请输入请姓名、电话、UID\"\n              v-model=\"formValidate.nickname\"\n              class=\"form_content_width\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"订单号：\" v-if=\"listTitle === 'order'\">\n            <el-input\n              clearable\n              placeholder=\"请输入请订单号\"\n              v-model=\"formValidate.order_id\"\n              class=\"form_content_width\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"userSearchs\">查询</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <el-table\n        ref=\"selection\"\n        :data=\"tabList\"\n        v-loading=\"loading\"\n        empty-text=\"暂无数据\"\n        highlight-current-row\n        max-height=\"400\"\n      >\n        <template v-if=\"listTitle === 'man'\">\n          <el-table-column label=\"UID\" width=\"80\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.uid }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"头像\" min-width=\"90\">\n            <template slot-scope=\"scope\">\n              <div class=\"tabBox_img\" v-viewer>\n                <img v-lazy=\"scope.row.avatar ? scope.row.avatar : require('../../../assets/images/moren.jpg')\" />\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"用户信息\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.nickname }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"是否推广员\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.promoter_name }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"推广人数\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.spread_count }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"订单数\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.order_count }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"绑定时间\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.spread_time | formatDate }}</span>\n            </template>\n          </el-table-column>\n        </template>\n        <template v-else>\n          <el-table-column label=\"订单ID\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.order_id }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"用户信息\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.user_info }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"时间\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row._add_time }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"返佣金额\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.brokerage_price || 0 }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"事业部返佣金额\" min-width=\"130\" v-if=\"rowsList.division_type == 1\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.division_brokerage || 0 }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"代理商返佣金额\" min-width=\"130\" v-if=\"rowsList.division_type == 2\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.agent_brokerage || 0 }}</span>\n            </template>\n          </el-table-column>\n        </template>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination\n          v-if=\"total\"\n          :total=\"total\"\n          :page.sync=\"formValidate.page\"\n          :limit.sync=\"formValidate.limit\"\n          @pagination=\"pageChange\"\n        />\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { stairListApi } from '@/api/agent';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'promotersList',\n  // props: {\n  //     listTitle: {\n  //         type: String,\n  //         default: ''\n  //     }\n  // },\n  filters: {\n    formatDate(time) {\n      if (time !== 0) {\n        let date = new Date(time * 1000);\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\n      }\n    },\n  },\n  data() {\n    return {\n      modals: false,\n      fromList: {\n        title: '选择时间',\n        custom: true,\n        fromTxt: [\n          { text: '全部', val: '' },\n          { text: '今天', val: 'today' },\n          { text: '昨天', val: 'yesterday' },\n          { text: '最近7天', val: 'lately7' },\n          { text: '最近30天', val: 'lately30' },\n          { text: '本月', val: 'month' },\n          { text: '本年', val: 'year' },\n        ],\n        fromTxt2: [\n          { text: '全部', val: '' },\n          { text: '一级推广人', val: 1 },\n          { text: '二级推广人', val: 2 },\n        ],\n        fromTxt3: [\n          { text: '全部', val: '' },\n          { text: '一级推广人订单', val: 1 },\n          { text: '二级推广人订单', val: 2 },\n          { text: '事业部推广订单', val: 3 },\n          { text: '代理商推广订单', val: 4 },\n        ],\n      },\n      formValidate: {\n        limit: 15,\n        page: 1,\n        nickname: '',\n        data: '',\n        type: '',\n        order_id: '',\n        uid: 0,\n      },\n      loading: false,\n      tabList: [],\n      total: 0,\n      timeVal: [],\n      columns4: [],\n      listTitle: '',\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '80px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  methods: {\n    onCancel() {\n      this.formValidate = {\n        limit: 15,\n        page: 1,\n        nickname: '',\n        data: '',\n        type: '',\n        order_id: '',\n        uid: 0,\n      };\n      this.timeVal = [];\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.data = this.timeVal ? this.timeVal.join('-') : '';\n      this.getList(this.rowsList, this.listTitle);\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.formValidate.data = tab;\n      this.timeVal = [];\n      this.getList(this.rowsList, this.listTitle);\n    },\n    // 列表\n    getList(row, tit) {\n      this.listTitle = tit;\n      this.rowsList = row;\n      this.loading = true;\n      let url = '';\n      if (this.listTitle === 'man') {\n        url = 'agent/stair';\n      } else {\n        url = 'agent/stair/order';\n      }\n      this.formValidate.uid = row.uid;\n      stairListApi(url, this.formValidate)\n        .then(async (res) => {\n          let data = res.data;\n          this.tabList = data.list;\n          this.total = data.count;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.tabList = [];\n          this.$message.error(res.msg);\n        });\n    },\n    pageChange() {\n      this.getList(this.rowsList, this.listTitle);\n    },\n    // 搜索\n    userSearchs() {\n      this.formValidate.page = 1;\n      this.getList(this.rowsList, this.listTitle);\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}