{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/components/labelList/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/components/labelList/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHByb2R1Y3RVc2VyTGFiZWwgfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1c2VyTGFiZWwnLAogIHByb3BzOiB7CiAgICAvLyBkYXRhTGFiZWw6IHsKICAgIC8vIAl0eXBlOiBBcnJheSwKICAgIC8vIAlkZWZhdWx0OiAoKSA9PiBbXQogICAgLy8gfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsTGlzdDogW10sCiAgICAgIGRhdGFMYWJlbDogW10sCiAgICAgIGlzVXNlcjogZmFsc2UsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0TGFiZWwoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluQXJyYXk6IGZ1bmN0aW9uIChzZWFyY2gsIGFycmF5KSB7CiAgICAgIGZvciAobGV0IGkgaW4gYXJyYXkpIHsKICAgICAgICBpZiAoYXJyYXlbaV0uaWQgPT0gc2VhcmNoKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIC8vIOeUqOaIt+agh+etvgogICAgc2V0TGFiZWwoKSB7CiAgICAgIC8vIHRoaXMuZGF0YUxhYmVsID0gZGF0YTsKICAgICAgcHJvZHVjdFVzZXJMYWJlbCgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgcmVzLmRhdGEubWFwKChlbCkgPT4gewogICAgICAgICAgICBpZiAoZWwuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICB0aGlzLmlzVXNlciA9IHRydWU7CiAgICAgICAgICAgICAgZWwuY2hpbGRyZW4ubWFwKChsYWJlbCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5BcnJheShsYWJlbC5pZCwgdGhpcy5kYXRhTGFiZWwpKSB7CiAgICAgICAgICAgICAgICAgIGxhYmVsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxhYmVsLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5sYWJlbExpc3QgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdExhYmVsKGxhYmVsKSB7CiAgICAgIGlmIChsYWJlbC5kaXNhYmxlZCkgewogICAgICAgIGxldCBpbmRleCA9IHRoaXMuZGF0YUxhYmVsLmluZGV4T2YodGhpcy5kYXRhTGFiZWwuZmlsdGVyKChkKSA9PiBkLmlkID09IGxhYmVsLmlkKVswXSk7CiAgICAgICAgdGhpcy5kYXRhTGFiZWwuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBsYWJlbC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGF0YUxhYmVsLnB1c2goeyBsYWJlbF9uYW1lOiBsYWJlbC5sYWJlbF9uYW1lLCBpZDogbGFiZWwuaWQgfSk7CiAgICAgICAgbGFiZWwuZGlzYWJsZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu5a6aCiAgICBzdWJCdG4oKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2FjdGl2ZURhdGEnLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YUxhYmVsKSkpOwogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/labelList","sourcesContent":["<template>\n  <div class=\"label-wrapper\">\n    <div class=\"list-box\">\n      <template v-if=\"isUser\">\n        <div class=\"label-box\" v-for=\"(item, index) in labelList\" :key=\"index\">\n          <div class=\"title\" v-if=\"item.children\">{{ item.label_name }}</div>\n          <div class=\"list\" v-if=\"item.children && item.children.length\">\n            <div\n              class=\"label-item\"\n              :class=\"{ on: label.disabled }\"\n              v-for=\"(label, j) in item.children\"\n              :key=\"j\"\n              @click=\"selectLabel(label)\"\n            >\n              {{ label.label_name }}\n            </div>\n          </div>\n        </div>\n      </template>\n      <div v-if=\"!isUser\">暂无标签</div>\n    </div>\n    <div class=\"footer\">\n      <el-button class=\"btns\" ghost @click=\"cancel\">取消</el-button>\n      <el-button type=\"primary\" class=\"btns\" @click=\"subBtn\">确定</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { productUserLabel } from '@/api/product';\nexport default {\n  name: 'userLabel',\n  props: {\n    // dataLabel: {\n    // \ttype: Array,\n    // \tdefault: () => []\n    // }\n  },\n  data() {\n    return {\n      labelList: [],\n      dataLabel: [],\n      isUser: false,\n    };\n  },\n  mounted() {\n    this.setLabel();\n  },\n  methods: {\n    inArray: function (search, array) {\n      for (let i in array) {\n        if (array[i].id == search) {\n          return true;\n        }\n      }\n      return false;\n    },\n    // 用户标签\n    setLabel() {\n      // this.dataLabel = data;\n      productUserLabel()\n        .then((res) => {\n          res.data.map((el) => {\n            if (el.children) {\n              this.isUser = true;\n              el.children.map((label) => {\n                if (this.inArray(label.id, this.dataLabel)) {\n                  label.disabled = true;\n                } else {\n                  label.disabled = false;\n                }\n              });\n            }\n          });\n          this.labelList = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    selectLabel(label) {\n      if (label.disabled) {\n        let index = this.dataLabel.indexOf(this.dataLabel.filter((d) => d.id == label.id)[0]);\n        this.dataLabel.splice(index, 1);\n        label.disabled = false;\n      } else {\n        this.dataLabel.push({ label_name: label.label_name, id: label.id });\n        label.disabled = true;\n      }\n    },\n    // 确定\n    subBtn() {\n      this.$emit('activeData', JSON.parse(JSON.stringify(this.dataLabel)));\n    },\n    cancel() {\n      this.$emit('close');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.label-wrapper {\n  .list {\n    display: flex;\n    flex-wrap: wrap;\n    .label-item {\n      margin: 10px 8px 10px 0;\n      padding: 3px 8px;\n      background: #eeeeee;\n      color: #333333;\n      border-radius: 2px;\n      cursor: pointer;\n      font-size: 12px;\n      &.on {\n        color: #fff;\n        background: var(--prev-color-primary);\n      }\n    }\n  }\n  .footer {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 40px;\n    button {\n      margin-left: 10px;\n    }\n  }\n}\n.btn {\n  width: 60px;\n  height: 24px;\n}\n.title {\n  font-size: 13px;\n}\n.list-box {\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 240px;\n}\n.label-box {\n  margin-bottom: 10px;\n}\n</style>\n"]}]}