{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/component/main.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/component/main.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMYXlvdXRQYXJlbnRWaWV3IGZyb20gJ0AvbGF5b3V0L3JvdXRlclZpZXcvcGFyZW50LnZ1ZSc7CmltcG9ydCBGb290ZXJzIGZyb20gJ0AvbGF5b3V0L2Zvb3Rlci9pbmRleC52dWUnOwppbXBvcnQgTGlua3MgZnJvbSAnQC9sYXlvdXQvcm91dGVyVmlldy9saW5rLnZ1ZSc7CmltcG9ydCBJZnJhbWVzIGZyb20gJ0AvbGF5b3V0L3JvdXRlclZpZXcvaWZyYW1lcy52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2xheW91dE1haW4nLAogIGNvbXBvbmVudHM6IHsgTGF5b3V0UGFyZW50VmlldywgRm9vdGVycywgTGlua3MsIElmcmFtZXMgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGVhZGVySGVpZ2h0OiAnJywKICAgICAgY3VycmVudFJvdXRlTWV0YToge30sCiAgICAgIGlzU2hvd0xpbms6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5bluIPlsYDphY3nva7kv6Hmga8KICAgIGdldFRoZW1lQ29uZmlnKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWc7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEhlYWRlckhlaWdodCgpOwogICAgdGhpcy5pbml0Q3VycmVudFJvdXRlTWV0YSh0aGlzLiRyb3V0ZS5tZXRhKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMluW9k+WJjei3r+eUsSBtZXRhIOS/oeaBrwogICAgaW5pdEN1cnJlbnRSb3V0ZU1ldGEobWV0YSkgewogICAgICB0aGlzLmlzU2hvd0xpbmsgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW50Um91dGVNZXRhID0gbWV0YTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5pc1Nob3dMaW5rID0gdHJ1ZTsKICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICAvLyDorr7nva4gbWFpbiDnmoTpq5jluqYKICAgIGluaXRIZWFkZXJIZWlnaHQoKSB7CiAgICAgIGxldCB7IGlzVGFnc3ZpZXcgfSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnOwogICAgICBpZiAoaXNUYWdzdmlldykgcmV0dXJuICh0aGlzLmhlYWRlckhlaWdodCA9IGA4NHB4YCk7CiAgICAgIGVsc2UgcmV0dXJuICh0aGlzLmhlYWRlckhlaWdodCA9IGA1MHB4YCk7CiAgICB9LAogICAgLy8g5a2Q57uE5Lu26Kem5Y+R5pu05pawCiAgICBvbkdldEN1cnJlbnRSb3V0ZU1ldGEoKSB7CiAgICAgIHRoaXMuaW5pdEN1cnJlbnRSb3V0ZU1ldGEodGhpcy4kcm91dGUubWV0YSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOebkeWQrCB2dWV4IOaVsOaNruWPmOWMlgogICAgJyRzdG9yZS5zdGF0ZS50aGVtZUNvbmZpZy50aGVtZUNvbmZpZyc6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmhlYWRlckhlaWdodCA9IHZhbC5pc1RhZ3N2aWV3ID8gJzg0cHgnIDogJzUwcHgnOwogICAgICAgIGlmICh2YWwuaXNGaXhlZEhlYWRlckNoYW5nZSAhPT0gdmFsLmlzRml4ZWRIZWFkZXIpIHsKICAgICAgICAgIGlmICghdGhpcy4kcmVmcy5sYXlvdXRTY3JvbGxiYXJSZWYpIHJldHVybiBmYWxzZTsKICAgICAgICAgIHRoaXMuJHJlZnMubGF5b3V0U2Nyb2xsYmFyUmVmLnVwZGF0ZSgpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgICAvLyDnm5HlkKzot6/nlLHnmoTlj5jljJYKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyKHRvKSB7CiAgICAgICAgdGhpcy5pbml0Q3VycmVudFJvdXRlTWV0YSh0by5tZXRhKTsKICAgICAgICB0aGlzLiRyZWZzLmxheW91dFNjcm9sbGJhclJlZi53cmFwLnNjcm9sbFRvcCA9IDA7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["main.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/layout/component","sourcesContent":["<template>\n  <el-main class=\"layout-main\">\n    <el-scrollbar\n      class=\"layout-scrollbar\"\n      ref=\"layoutScrollbarRef\"\n      v-show=\"!currentRouteMeta.isLink && !currentRouteMeta.isIframe\"\n      :style=\"{ minHeight: `calc(100vh - ${headerHeight}` }\"\n    >\n      <LayoutParentView />\n      <Footers v-if=\"getThemeConfig.isFooter\" />\n    </el-scrollbar>\n    <Links\n      :style=\"{ height: `calc(100vh - ${headerHeight}` }\"\n      :meta=\"currentRouteMeta\"\n      v-if=\"currentRouteMeta.isLink && !currentRouteMeta.isIframe\"\n    />\n    <Iframes\n      :style=\"{ height: `calc(100vh - ${headerHeight}` }\"\n      :meta=\"currentRouteMeta\"\n      v-if=\"currentRouteMeta.isLink && currentRouteMeta.isIframe && isShowLink\"\n      @getCurrentRouteMeta=\"onGetCurrentRouteMeta\"\n    />\n  </el-main>\n</template>\n\n<script>\nimport LayoutParentView from '@/layout/routerView/parent.vue';\nimport Footers from '@/layout/footer/index.vue';\nimport Links from '@/layout/routerView/link.vue';\nimport Iframes from '@/layout/routerView/iframes.vue';\nexport default {\n  name: 'layoutMain',\n  components: { LayoutParentView, Footers, Links, Iframes },\n  data() {\n    return {\n      headerHeight: '',\n      currentRouteMeta: {},\n      isShowLink: false,\n    };\n  },\n  computed: {\n    // 获取布局配置信息\n    getThemeConfig() {\n      return this.$store.state.themeConfig.themeConfig;\n    },\n  },\n  mounted() {\n    this.initHeaderHeight();\n    this.initCurrentRouteMeta(this.$route.meta);\n  },\n  methods: {\n    // 初始化当前路由 meta 信息\n    initCurrentRouteMeta(meta) {\n      this.isShowLink = false;\n      this.currentRouteMeta = meta;\n      setTimeout(() => {\n        this.isShowLink = true;\n      }, 100);\n    },\n    // 设置 main 的高度\n    initHeaderHeight() {\n      let { isTagsview } = this.$store.state.themeConfig.themeConfig;\n      if (isTagsview) return (this.headerHeight = `84px`);\n      else return (this.headerHeight = `50px`);\n    },\n    // 子组件触发更新\n    onGetCurrentRouteMeta() {\n      this.initCurrentRouteMeta(this.$route.meta);\n    },\n  },\n  watch: {\n    // 监听 vuex 数据变化\n    '$store.state.themeConfig.themeConfig': {\n      handler(val) {\n        this.headerHeight = val.isTagsview ? '84px' : '50px';\n        if (val.isFixedHeaderChange !== val.isFixedHeader) {\n          if (!this.$refs.layoutScrollbarRef) return false;\n          this.$refs.layoutScrollbarRef.update();\n        }\n      },\n      deep: true,\n    },\n    // 监听路由的变化\n    $route: {\n      handler(to) {\n        this.initCurrentRouteMeta(to.meta);\n        this.$refs.layoutScrollbarRef.wrap.scrollTop = 0;\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n"]}]}