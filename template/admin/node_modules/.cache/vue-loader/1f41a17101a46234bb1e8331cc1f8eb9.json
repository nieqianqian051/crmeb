{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/components/from/from.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/components/from/from.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBmb3JtQ3JlYXRlIGZyb20gJ0Bmb3JtLWNyZWF0ZS9lbGVtZW50LXVpJzsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC9saWJzL3JlcXVlc3QnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2VkaXQnLAogIGNvbXBvbmVudHM6IHsKICAgIGZvcm1DcmVhdGU6IGZvcm1DcmVhdGUuJGZvcm0oKSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgndXNlckxldmVsJywgWyd0YXNrSWQnLCAnbGV2ZWxJZCddKSwKICB9LAogIHByb3BzOiB7CiAgICBGcm9tRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgdXBkYXRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIEZyb21EYXRhKCkgewogICAgICB0aGlzLkZyb21EYXRhLnJ1bGVzLmZvckVhY2goKGUpID0+IHsKICAgICAgICBlLnRpdGxlICs9ICfvvJonOwogICAgICB9KTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgdHlwZTogMCwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZhcGk6IG51bGwsCiAgICAgIGNvbmZpZzogewogICAgICAgIGZvcm06IHsKICAgICAgICAgIGxhYmVsV2lkdGg6ICcxMDBweCcsCiAgICAgICAgfSwKICAgICAgICByZXNldEJ0bjogZmFsc2UsCiAgICAgICAgc3VibWl0QnRuOiBmYWxzZSwKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHVwbG9hZDogewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIG9uU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgZmlsZS51cmwgPSByZXMuZGF0YS5zcmM7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY291cG9uc1R5cGUoKSB7CiAgICAgIHRoaXMuJHBhcmVudC5hZGRUeXBlKHRoaXMudHlwZSk7CiAgICB9LAogICAgZm9ybVN1Ym1pdCgpIHsKICAgICAgdGhpcy5mYXBpLnN1Ym1pdCgpOwogICAgfSwKICAgIC8vIOaPkOS6pOihqOWNlSBncm91cAogICAgb25TdWJtaXQoZm9ybURhdGEpIHsKICAgICAgbGV0IGRhdGFzID0ge307CiAgICAgIGRhdGFzID0gZm9ybURhdGE7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHJldHVybjsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgcmVxdWVzdCh7CiAgICAgICAgdXJsOiB0aGlzLkZyb21EYXRhLmFjdGlvbiwKICAgICAgICBtZXRob2Q6IHRoaXMuRnJvbURhdGEubWV0aG9kLAogICAgICAgIGRhdGE6IGRhdGFzLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICh0aGlzLnVwZGF0ZSkgdGhpcy4kcGFyZW50LmdldExpc3QoKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0RmFpbCcpOwogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbPpl63mjInpkq4KICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy50eXBlID0gMDsKICAgICAgLy8gdGhpcy4kZW1pdCgnb25DYW5jZWwnKQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["from.vue"],"names":[],"mappings":";AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"from.vue","sourceRoot":"src/components/from","sourcesContent":["<template>\n  <div v-if=\"FromData\">\n    <el-dialog :visible.sync=\"modals\" :title=\"FromData.title\" :z-index=\"1\" width=\"720px\" @closed=\"cancel\">\n      <template>\n        <div class=\"radio acea-row row-middle\" v-if=\"FromData.action === '/marketing/coupon/save.html'\">\n          <div class=\"name ivu-form-item-content\">优惠券类型</div>\n          <el-radio-group v-model=\"type\" @input=\"couponsType\">\n            <el-radio :label=\"0\">通用券</el-radio>\n            <el-radio :label=\"1\">品类券</el-radio>\n            <el-radio :label=\"2\">商品券</el-radio>\n          </el-radio-group>\n        </div>\n      </template>\n      <form-create\n        :option=\"config\"\n        :rule=\"Array.from(this.FromData.rules)\"\n        v-model=\"fapi\"\n        @submit=\"onSubmit\"\n        class=\"formBox\"\n        ref=\"fc\"\n        handleIcon=\"false\"\n      ></form-create>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modals = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"formSubmit\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport formCreate from '@form-create/element-ui';\nimport request from '@/libs/request';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'edit',\n  components: {\n    formCreate: formCreate.$form(),\n  },\n  computed: {\n    ...mapState('userLevel', ['taskId', 'levelId']),\n  },\n  props: {\n    FromData: {\n      type: Object,\n      default: null,\n    },\n    update: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    FromData() {\n      this.FromData.rules.forEach((e) => {\n        e.title += '：';\n      });\n    },\n  },\n  data() {\n    return {\n      modals: false,\n      type: 0,\n      loading: false,\n      fapi: null,\n      config: {\n        form: {\n          labelWidth: '100px',\n        },\n        resetBtn: false,\n        submitBtn: false,\n        global: {\n          upload: {\n            props: {\n              onSuccess(res, file) {\n                if (res.status === 200) {\n                  file.url = res.data.src;\n                } else {\n                  this.$message.error(res.msg);\n                }\n              },\n            },\n          },\n        },\n      },\n    };\n  },\n  methods: {\n    couponsType() {\n      this.$parent.addType(this.type);\n    },\n    formSubmit() {\n      this.fapi.submit();\n    },\n    // 提交表单 group\n    onSubmit(formData) {\n      let datas = {};\n      datas = formData;\n      if (this.loading) return;\n      this.loading = true;\n      request({\n        url: this.FromData.action,\n        method: this.FromData.method,\n        data: datas,\n      })\n        .then((res) => {\n          if (this.update) this.$parent.getList();\n          this.$message.success(res.msg);\n          this.modals = false;\n          setTimeout(() => {\n            this.$emit('submitFail');\n            this.loading = false;\n          }, 1000);\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    // 关闭按钮\n    cancel() {\n      this.type = 0;\n      // this.$emit('onCancel')\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.radio {\n  margin-bottom: 14px;\n}\n.radio ::v-deep .name {\n  width: 125px;\n  text-align: right;\n  padding-right: 12px;\n}\n</style>\n"]}]}