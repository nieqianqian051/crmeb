{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/setting/storeService/feedback.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/setting/storeService/feedback.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGtlZnVGZWVkQmFjaywga2VmdUZlZWRCYWNrRWRpdCB9IGZyb20gJ0AvYXBpL3NldHRpbmcnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2ZlZWRiYWNrJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMTUsCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIHRpbWU6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgfSwKICAgICAgcGlja2VyT3B0aW9uczogdGhpcy4kdGltZU9wdGlvbnMsCiAgICAgIHRpbWVWYWw6IFtdLAogICAgICB0b3RhbDogMCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWydpc01vYmlsZSddKSwKICAgIGxhYmVsV2lkdGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogJzgwcHgnOwogICAgfSwKICAgIGxhYmVsUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5aSH5rOo77ybCiAgICByZW1hcmtzKGlkKSB7CiAgICAgIHRoaXMuJG1vZGFsRm9ybShrZWZ1RmVlZEJhY2tFZGl0KGlkKSkudGhlbigoKSA9PiB0aGlzLmdldExpc3QoKSk7CiAgICB9LAogICAgLy8g6YCJ5oupCiAgICBzZWxDaGFuZ2UoKSB7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOmAieaLqeaXtumXtAogICAgc2VsZWN0Q2hhbmdlKHRhYikgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS50aW1lID0gdGFiOwogICAgICB0aGlzLnRpbWVWYWwgPSBbXTsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLy8g5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLnRpbWVWYWwgPSBlOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS50aW1lID0gdGhpcy50aW1lVmFsID8gdGhpcy50aW1lVmFsLmpvaW4oJy0nKSA6ICcnOwogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICBnZXRMaXN0KCkgewogICAgICBrZWZ1RmVlZEJhY2soewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgICB0aW1lOiB0aGlzLmZvcm1WYWxpZGF0ZS50aW1lLAogICAgICAgIHRpdGxlOiB0aGlzLmZvcm1WYWxpZGF0ZS50aXRsZSwKICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuY291bnQ7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpAogICAgZGVsKHJvdywgdGl0LCBudW0pIHsKICAgICAgbGV0IGRlbGZyb21EYXRhID0gewogICAgICAgIHRpdGxlOiB0aXQsCiAgICAgICAgbnVtOiBudW0sCiAgICAgICAgdXJsOiBgL2FwcC9mZWVkYmFjay8ke3Jvdy5pZH1gLAogICAgICAgIG1ldGhvZDogJ0RFTEVURScsCiAgICAgICAgaWRzOiAnJywKICAgICAgfTsKICAgICAgdGhpcy4kbW9kYWxTdXJlKGRlbGZyb21EYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UobnVtLCAxKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["feedback.vue"],"names":[],"mappings":";AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"feedback.vue","sourceRoot":"src/pages/setting/storeService","sourcesContent":["<template>\n  <div>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form\n          ref=\"formValidate\"\n          :model=\"formValidate\"\n          :label-width=\"labelWidth\"\n          :label-position=\"labelPosition\"\n          class=\"tabform\"\n          @submit.native.prevent\n          inline\n        >\n          <el-form-item label=\"留言时间：\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n              class=\"mr20\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"留言信息：\">\n            <el-input\n              clearable\n              placeholder=\"请输入用户昵称/电话/留言内容搜索\"\n              v-model=\"formValidate.title\"\n              class=\"form_content_width\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"selChange\">查询</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt mt16\">\n      <el-table :data=\"list\" v-loading=\"loading\" no-userFrom-text=\"暂无数据\" no-filtered-userFrom-text=\"暂无筛选结果\">\n        <el-table-column label=\"ID\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.id }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"昵称\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.rela_name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"电话\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.phone }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"内容\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.content }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <div>{{ scope.row.status === 1 ? '已处理' : '未处理' }}</div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"时间\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.add_time }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"170\">\n          <template slot-scope=\"scope\">\n            <a @click=\"remarks(scope.row.id)\">{{ scope.row.status === 1 ? '备注' : '处理' }}</a>\n            <el-divider direction=\"vertical\"></el-divider>\n            <a @click=\"del(scope.row, '删除反馈', scope.$index)\">删除</a>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination v-if=\"total\" :total=\"total\" :page.sync=\"page\" :limit.sync=\"limit\" @pagination=\"getList\" />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { kefuFeedBack, kefuFeedBackEdit } from '@/api/setting';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'feedback',\n  data() {\n    return {\n      loading: false,\n      list: [],\n      page: 1,\n      limit: 15,\n      formValidate: {\n        time: '',\n        title: '',\n      },\n      pickerOptions: this.$timeOptions,\n      timeVal: [],\n      total: 0,\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '80px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    //备注；\n    remarks(id) {\n      this.$modalForm(kefuFeedBackEdit(id)).then(() => this.getList());\n    },\n    // 选择\n    selChange() {\n      this.page = 1;\n      this.getList();\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.formValidate.time = tab;\n      this.timeVal = [];\n      this.page = 1;\n      this.getList();\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.time = this.timeVal ? this.timeVal.join('-') : '';\n      this.page = 1;\n      this.getList();\n    },\n    getList() {\n      kefuFeedBack({\n        page: this.page,\n        limit: this.limit,\n        time: this.formValidate.time,\n        title: this.formValidate.title,\n      }).then((res) => {\n        this.list = res.data.data;\n        this.total = res.data.count;\n      });\n    },\n    // 删除\n    del(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `/app/feedback/${row.id}`,\n        method: 'DELETE',\n        ids: '',\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.list.splice(num, 1);\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}