{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/user/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/user/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1c2VyTGFiZWxzIGZyb20gJy4vdXNlckxhYmVsJzsKaW1wb3J0IHsgdXNlckluZm8sIHVzZXJHcm91cEFwaSwgcHV0R3JvdXBBcGksIHVzZXJMYWJlbCB9IGZyb20gJ0AvYXBpL2tlZnUnOwppbXBvcnQgdnVlUGlja2VycyBmcm9tICd2dWUtcGlja2Vycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaW5kZXgnLAogIGNvbXBvbmVudHM6IHsKICAgIHVzZXJMYWJlbHMsCiAgICB2dWVQaWNrZXJzLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYW5nZTogZmFsc2UsIC8v5qih5oCB5qGG5pi+56S66ZqQ6JePCiAgICAgIGFjdGl2ZVVzZXJJbmZvOiAnJywKICAgICAgcGlja2VyVmlzaWJsZTogZmFsc2UsIC8v5YiG57uE6YCJ5oupCiAgICAgIGdyb3VwTGlzdDogW10sIC8v5YiG57uECiAgICAgIGxhYmVsTGlzdDogW10sIC8v5qCH562+CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0R3JvdXAoKTsKICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W55So5oi35qCH562+CiAgICBnZXRMaXN0KCkgewogICAgICB1c2VyTGFiZWwodGhpcy4kcm91dGUucGFyYW1zLnVpZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxhYmVsTGlzdCA9IHJlcy5kYXRhIHx8IFtdOwogICAgICAgICAgaWYgKHRoaXMubGFiZWxMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmNoYW5nZSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRkaWFsb2cuZXJyb3IoJ+aaguaXoOagh+etvicpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuJGRpYWxvZy5lcnJvcihlcnIubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+iOt+WPlueUqOaIt+ivpuaDhQogICAgZ2V0VXNlckluZm8oKSB7CiAgICAgIHVzZXJJbmZvKHRoaXMuJHJvdXRlLnBhcmFtcy51aWQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5hY3RpdmVVc2VySW5mbyA9IHJlcy5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuJGRpYWxvZy5lcnJvcihlcnIubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+iOt+WPlueUqOaIt+WIhue7hAogICAgZ2V0R3JvdXAoKSB7CiAgICAgIGxldCBvYmogPSB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgZ3JvdXBfbmFtZTogJ+aXoCcsCiAgICAgIH07CiAgICAgIHVzZXJHcm91cEFwaSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgcmVzLmRhdGEudW5zaGlmdChvYmopOwogICAgICAgICAgbGV0IHRkYXRhID0gW107CiAgICAgICAgICByZXMuZGF0YS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgdGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0uZ3JvdXBfbmFtZSwKICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5pZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZ3JvdXBMaXN0ID0gW3RkYXRhXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLiRkaWFsb2cuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZWRpdExhYmVsKCkgewogICAgICB0aGlzLmNoYW5nZSA9IGZhbHNlOwogICAgICB0aGlzLmdldFVzZXJJbmZvKCk7CiAgICB9LAogICAgb25TaG93TGFiZWwoKSB7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIHNob3dOYW1lKCkgewogICAgICB0aGlzLnBpY2tlclZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbCgpIHt9LAogICAgLy8g6YCJ5oup5YiG57uECiAgICBjb25maXJtKHJlcykgewogICAgICBwdXRHcm91cEFwaSh0aGlzLiRyb3V0ZS5wYXJhbXMudWlkLCByZXNbMF0udmFsdWUpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgdGhpcy5nZXRVc2VySW5mbygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuJGRpYWxvZy5lcnJvcihlcnIubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjbG9zZUNoYW5nZShtc2cpIHsKICAgICAgdGhpcy5jaGFuZ2UgPSBtc2c7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu/mobile/user","sourcesContent":["<template>\n  <div class=\"userBox\" v-if=\"activeUserInfo\">\n    <div class=\"user-header acea-row row-middle\">\n      <div class=\"user-header-img mr20\">\n        <img v-lazy=\"activeUserInfo.avatar\" />\n      </div>\n      <div class=\"user-header-name\">\n        <span class=\"sp1 mr10\" v-text=\"activeUserInfo.nickname\"></span>\n        <span class=\"sp2\">{{ $route.params.type | sourceType }}</span>\n      </div>\n    </div>\n    <div class=\"user-list\">\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">用户标签</span>\n        <div class=\"labelBox\" v-if=\"activeUserInfo.labelNames.length\">\n          <span class=\"label\" v-for=\"(item, index) in activeUserInfo.labelNames\" :key=\"index\">{{ item }}</span>\n        </div>\n        <span v-else class=\"labelBox\">无</span>\n        <span class=\"iconfontYI icon-up\" @click=\"onShowLabel\"></span>\n      </div>\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">手机号</span>\n        <span class=\"sp2\" v-text=\"activeUserInfo.phone || '无'\"></span>\n      </div>\n      <div class=\"acea-row item\">\n        <span class=\"sp1\">分组</span>\n        <span\n          class=\"checkName\"\n          v-if=\"activeUserInfo.group_name\"\n          v-text=\"activeUserInfo.group_name\"\n          @click=\"showName\"\n        ></span>\n        <span v-else @click=\"showName\">无</span>\n        <vue-pickers\n          :data=\"groupList\"\n          v-if=\"groupList.length\"\n          :showToolbar=\"true\"\n          :maskClick=\"true\"\n          @confirm=\"confirm\"\n          :defaultIndex=\"0\"\n          :visible.sync=\"pickerVisible\"\n        ></vue-pickers>\n      </div>\n    </div>\n    <div class=\"user-list\">\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">用户等级</span>\n        <span class=\"sp2\" v-text=\"activeUserInfo.level_name ? activeUserInfo.level_name : '无'\"></span>\n      </div>\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">用户类型</span>\n        <span class=\"sp2\">{{ activeUserInfo.user_type | userType }}</span>\n      </div>\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">余额</span>\n        <span class=\"sp2\" v-text=\"activeUserInfo.now_money || '无'\"></span>\n      </div>\n      <div class=\"acea-row item bgt\">\n        <span class=\"sp1\">推广员</span>\n        <span class=\"sp2\" v-text=\"activeUserInfo.is_promoter === 1 ? '是' : '否'\"></span>\n      </div>\n      <div class=\"acea-row item\">\n        <span class=\"sp1\">生日</span>\n        <span class=\"sp2\" v-text=\"activeUserInfo.birthday || '无'\"></span>\n      </div>\n    </div>\n    <user-labels\n      v-if=\"change\"\n      :change=\"change\"\n      @cancel=\"cancel\"\n      :labelList=\"labelList\"\n      :uid=\"Number($route.params.uid)\"\n      @editLabel=\"editLabel\"\n      @closeChange=\"closeChange\"\n    ></user-labels>\n  </div>\n</template>\n\n<script>\nimport userLabels from './userLabel';\nimport { userInfo, userGroupApi, putGroupApi, userLabel } from '@/api/kefu';\nimport vuePickers from 'vue-pickers';\nexport default {\n  name: 'index',\n  components: {\n    userLabels,\n    vuePickers,\n  },\n  data() {\n    return {\n      change: false, //模态框显示隐藏\n      activeUserInfo: '',\n      pickerVisible: false, //分组选择\n      groupList: [], //分组\n      labelList: [], //标签\n    };\n  },\n  mounted() {\n    this.getGroup();\n    this.getUserInfo();\n  },\n  methods: {\n    //获取用户标签\n    getList() {\n      userLabel(this.$route.params.uid)\n        .then((res) => {\n          this.labelList = res.data || [];\n          if (this.labelList.length) {\n            this.change = true;\n          } else {\n            this.$dialog.error('暂无标签');\n          }\n        })\n        .catch((err) => {\n          this.$dialog.error(err.msg);\n        });\n    },\n    //获取用户详情\n    getUserInfo() {\n      userInfo(this.$route.params.uid)\n        .then((res) => {\n          this.activeUserInfo = res.data;\n        })\n        .catch((err) => {\n          this.$dialog.error(err.msg);\n        });\n    },\n    //获取用户分组\n    getGroup() {\n      let obj = {\n        id: 0,\n        group_name: '无',\n      };\n      userGroupApi()\n        .then((res) => {\n          res.data.unshift(obj);\n          let tdata = [];\n          res.data.map((item) => {\n            tdata.push({\n              label: item.group_name,\n              value: item.id,\n            });\n          });\n          this.groupList = [tdata];\n        })\n        .catch((err) => {\n          this.$dialog.error(err.msg);\n        });\n    },\n    editLabel() {\n      this.change = false;\n      this.getUserInfo();\n    },\n    onShowLabel() {\n      this.getList();\n    },\n    showName() {\n      this.pickerVisible = true;\n    },\n    cancel() {},\n    // 选择分组\n    confirm(res) {\n      putGroupApi(this.$route.params.uid, res[0].value)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.getUserInfo();\n        })\n        .catch((err) => {\n          this.$dialog.error(err.msg);\n        });\n    },\n    closeChange(msg) {\n      this.change = msg;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.userBox {\n  background: #f0f1f2;\n}\n.bgt {\n  border-bottom: 1px solid #f0f2f7;\n}\n.user {\n  &-header {\n    width: 100%;\n    height: 1.5rem;\n    line-height: 1.5rem;\n    &-img {\n      width: 1.1rem;\n      height: 1.1rem;\n      border-radius: 50%;\n      overflow: hidden;\n      img {\n        width: 100%;\n        height: 100%;\n      }\n    }\n    &-name {\n      .sp1 {\n        color: #282828;\n        font-size: 0.32rem;\n        font-weight: bold;\n      }\n      .sp2 {\n        background: rgba(56, 117, 234, 0.14);\n        color: #3875ea;\n        font-size: 0.18rem;\n        padding: 0.1rem;\n        border-radius: 4px;\n      }\n    }\n    padding: 0 0.3rem;\n    background: #fff;\n    margin-bottom: 0.15rem;\n  }\n  &-list {\n    padding: 0 0.2rem;\n    background: #fff;\n    margin-bottom: 0.15rem;\n    .item {\n      width: 100%;\n      padding: 0.2rem 0;\n      .sp1 {\n        color: #686868;\n        font-size: 0.28rem;\n        width: 1.6rem;\n      }\n      .sp2 {\n        color: #282828;\n        font-size: 0.28rem;\n      }\n    }\n    .labelBox {\n      display: flex;\n      flex-wrap: wrap;\n      width: 4.8rem;\n    }\n    .label {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 0.5rem;\n      border: 1px solid #3875ea;\n      opacity: 1;\n      border-radius: 16px;\n      padding: 0 0.15rem;\n      text-align: center;\n      color: #3875ea;\n      font-size: 0.2rem;\n      margin: 0.07rem 0.15rem 0.07rem 0;\n    }\n  }\n}\n</style>\n"]}]}