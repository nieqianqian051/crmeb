{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js","mtime":1746465018446},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1c2VyTGFiZWwgZnJvbSAnQC9jb21wb25lbnRzL2xhYmVsTGlzdCc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcyc7CmltcG9ydCBmcmVpZ2h0VGVtcGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL2ZyZWlnaHRUZW1wbGF0ZSc7CmltcG9ydCBjb3Vwb25MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9jb3Vwb25MaXN0JzsKaW1wb3J0IGFkZEF0dHIgZnJvbSAnLi4vcHJvZHVjdEF0dHIvYWRkQXR0cic7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB0YW9CYW8gZnJvbSAnLi90YW9CYW8nOwppbXBvcnQgV2FuZ0VkaXRvciBmcm9tICdAL2NvbXBvbmVudHMvd2FuZ0VkaXRvci9pbmRleC52dWUnOwppbXBvcnQgeyB1c2VyTGFiZWxBZGRBcGkgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsKICBwcm9kdWN0SW5mb0FwaSwKICBjYXNjYWRlckxpc3RBcGksCiAgcHJvZHVjdEFkZEFwaSwKICBnZW5lcmF0ZUF0dHJBcGksCiAgcHJvZHVjdEdldFJ1bGVBcGksCiAgcHJvZHVjdEdldFRlbXBsYXRlQXBpLAogIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSwKICBjaGVja0FjdGl2aXR5QXBpLAogIHByb2R1Y3RDYWNoZSwKICBjYWNoZURlbGV0ZSwKICB1cGxvYWRUeXBlLAogIGltcG9ydENhcmQsCiAgcHJvZHVjdENyZWF0ZUFwaSwKfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHsgZ2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgdXBsb2FkQnlQaWVjZXMgfSBmcm9tICdAL3V0aWxzL3VwbG9hZCc7IC8v5byV5YWldXBsb2FkQnlQaWVjZXPmlrnms5UKaW1wb3J0IHsgaXNGaWxlVXBsb2FkLCBpc1ZpZGVvVXBsb2FkIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCBjaGVja0FycmF5IGZyb20gJ0AvbGlicy9wZXJtaXNzaW9uJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdF9wcm9kdWN0QWRkJywKICBjb21wb25lbnRzOiB7CiAgICAvLyBWdWVVZWRpdG9yV3JhcCwKICAgIHVwbG9hZFBpY3R1cmVzLAogICAgZnJlaWdodFRlbXBsYXRlLAogICAgYWRkQXR0ciwKICAgIGNvdXBvbkxpc3QsCiAgICB0YW9CYW8sCiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSwKICAgIGdvb2RzTGlzdCwKICAgIFdhbmdFZGl0b3IsCiAgICB1c2VyTGFiZWwsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxTaG93OiBmYWxzZSwKICAgICAgZGF0YUxhYmVsOiBbXSwKICAgICAgaGVhZFRhYjogWwogICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgIHsgdGl0OiAn54mp5rWB6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc2JyB9LAogICAgICBdLAogICAgICB2aXJ0dWFsOiBbCiAgICAgICAgeyB0aXQ6ICfmma7pgJrllYblk4EnLCBpZDogMCwgdGl0MjogJ+eJqea1geWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+WNoeWvhi/nvZHnm5gnLCBpZDogMSwgdGl0MjogJ+iHquWKqOWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+S8mOaDoOWIuCcsIGlkOiAyLCB0aXQyOiAn6Ieq5Yqo5Y+R6LSnJyB9LAogICAgICAgIHsgdGl0OiAn6Jma5ouf5ZWG5ZOBJywgaWQ6IDMsIHRpdDI6ICfomZrmi5/lj5HotKcnIH0sCiAgICAgIF0sCiAgICAgIHNlbGV0VmlkZW86IDAsIC8v6YCJ5oup6KeG6aKR57G75Z6LCiAgICAgIGN1c3RvbUJ0bjogZmFsc2UsIC8v6Ieq5a6a5LmJ55WZ6KiA5byA5YWzCiAgICAgIGNvbnRlbnQ6ICcnLAogICAgICBjb250ZW50czogJycsCiAgICAgIGZpbGVVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQnLAogICAgICBmaWxlVXJsMjogU2V0dGluZy5hcGlCYXNlVVJMICsgJy9maWxlL3ZpZGVvX3VwbG9hZCcsCiAgICAgIGNhcmRVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQvMScsCiAgICAgIHVwbG9hZF90eXBlOiAnJywgLy/op4bpopHkuIrkvKDnsbvlnosgMSDmnKzlnLDkuIrkvKAgMiAzIDQgT1NT5LiK5LygCiAgICAgIHVwbG9hZERhdGE6IHt9LCAvLyDkuIrkvKDlj4LmlbAKICAgICAgaGVhZGVyOiB7fSwKCiAgICAgIHR5cGU6IDAsCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGdvb2RzX21vZGFsczogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgb3BlblN1YmltaXQ6IGZhbHNlLAogICAgICB2aXJ0dWFsRGF0YTogJycsCiAgICAgIHZpcnR1YWxMaXN0OiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICBdLAogICAgICBncmlkMjogewogICAgICAgIHhsOiAxMCwKICAgICAgICBsZzogMTIsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWQzOiB7CiAgICAgICAgeGw6IDE4LAogICAgICAgIGxnOiAxOCwKICAgICAgICBtZDogMjAsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNCwKICAgICAgfSwKICAgICAgLy8g5om56YeP6K6+572u6KGo5qC8ZGF0YQogICAgICBvbmVGb3JtQmF0Y2g6IFsKICAgICAgICB7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgIHZpcnR1YWxfbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgLy8g6KeE5qC85pWw5o2uCiAgICAgIGZvcm1EeW5hbWljOiB7CiAgICAgICAgYXR0cnNOYW1lOiAnJywKICAgICAgICBhdHRyc1ZhbDogJycsCiAgICAgIH0sCiAgICAgIGRpc2tfdHlwZTogMSwgLy/ljaHlr4bnsbvlnosKICAgICAgdGFiSW5kZXg6IDAsCiAgICAgIHRhYk5hbWU6ICcnLAogICAgICBmb3JtRHluYW1pY05hbWVEYXRhOiBbXSwKICAgICAgaXNCdG46IGZhbHNlLAogICAgICBjb2x1bW5zMjogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5Zu+54mHJywKICAgICAgICAgIHNsb3Q6ICdwaWMnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDgwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfllK7ku7cnLAogICAgICAgICAgc2xvdDogJ3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5oiQ5pys5Lu3JywKICAgICAgICAgIHNsb3Q6ICdjb3N0JywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5Y6f5Lu3JywKICAgICAgICAgIHNsb3Q6ICdvdF9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W6k+WtmCcsCiAgICAgICAgICBzbG90OiAnc3RvY2snLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfllYblk4HnvJblj7cnLAogICAgICAgICAgc2xvdDogJ2Jhcl9jb2RlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+mHjemHj++8iEtH77yJJywKICAgICAgICAgIHNsb3Q6ICd3ZWlnaHQnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvZPnp68obcKzKScsCiAgICAgICAgICBzbG90OiAndm9sdW1lJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNvbHVtbnMzOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgICAgc2xvdDogJ3BpYycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogODAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WUruS7tycsCiAgICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmiJDmnKzku7cnLAogICAgICAgICAgc2xvdDogJ2Nvc3QnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgICAgc2xvdDogJ290X3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5bqT5a2YJywKICAgICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WVhuWTgee8luWPtycsCiAgICAgICAgICBzbG90OiAnYmFyX2NvZGUnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIHNsb3Q6ICdhY3Rpb24nLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBjb2x1bW5zSW5zdGFsbDogW10sCiAgICAgIGNvbHVtbnNJbnN0YWwyOiBbXSwKICAgICAgZ3JpZFBpYzogewogICAgICAgIHhsOiA2LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiAxMiwKICAgICAgICBzbTogMTIsCiAgICAgICAgeHM6IDEyLAogICAgICB9LAogICAgICBncmlkQnRuOiB7CiAgICAgICAgeGw6IDQsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDgsCiAgICAgICAgc206IDgsCiAgICAgICAgeHM6IDgsCiAgICAgIH0sCiAgICAgIC8v6Ieq5a6a5LmJ55WZ6KiA5LiL5ouJ6YCJ5oupCiAgICAgIEN1c3RvbUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3RleHQnLAogICAgICAgICAgbGFiZWw6ICfmlofmnKzmoYYnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdudW1iZXInLAogICAgICAgICAgbGFiZWw6ICfmlbDlrZcnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdlbWFpbCcsCiAgICAgICAgICBsYWJlbDogJ+mCruS7ticsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2RhdGEnLAogICAgICAgICAgbGFiZWw6ICfml6XmnJ8nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICd0aW1lJywKICAgICAgICAgIGxhYmVsOiAn5pe26Ze0JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgICAgbGFiZWw6ICfouqvku73or4EnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdwaG9uZScsCiAgICAgICAgICBsYWJlbDogJ+aJi+acuuWPtycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2ltZycsCiAgICAgICAgICBsYWJlbDogJ+WbvueJhycsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY3VzdG9tZXNzOiB7CiAgICAgICAgY29udGVudDogW10sCiAgICAgIH0sIC8v6Ieq5a6a5LmJ55WZ6KiA5YaF5a65CgogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICBkaXNrX2luZm86ICcnLCAvL+WNoeWvhuexu+WeiwogICAgICAgIGxvZ2lzdGljczogWycxJ10sIC8v6YCJ5oup54mp5rWB5pa55byPCiAgICAgICAgZnJlaWdodDogMiwgLy/ov5DotLnorr7nva4KICAgICAgICBwb3N0YWdlOiAwLCAvL+iuvue9rui/kOi0uemHkeminQogICAgICAgIHJlY29tbWVuZDogW10sIC8v5ZWG5ZOB5o6o6I2QCiAgICAgICAgcHJlc2FsZV9kYXk6IDEsIC8v6aKE5ZSu5Y+R6LSn5pe26Ze0Lee7k+adnwogICAgICAgIHByZXNhbGU6IGZhbHNlLCAvL+mihOWUruWVhuWTgeW8gOWFswogICAgICAgIGlzX2xpbWl0OiBmYWxzZSwKICAgICAgICBsaW1pdF90eXBlOiAwLAogICAgICAgIGxpbWl0X251bTogMCwKICAgICAgICB2aWRlb19vcGVuOiBmYWxzZSwgLy/op4bpopHmjInpkq7mmK/lkKbmmL7npLoKICAgICAgICB2aXBfcHJvZHVjdDogZmFsc2UsIC8v5LuY6LS55Lya5ZGY5LiT5bGe5byA5YWzCiAgICAgICAgY3VzdG9tX2Zvcm06IFtdLCAvL+iHquWumuS5ieeVmeiogAogICAgICAgIHN0b3JlX25hbWU6ICcnLAogICAgICAgIGNhdGVfaWQ6IFtdLAogICAgICAgIGxhYmVsX2lkOiBbXSwKICAgICAgICBrZXl3b3JkOiAnJywKICAgICAgICB1bml0X25hbWU6ICcnLAogICAgICAgIHN0b3JlX2luZm86ICcnLAogICAgICAgIGltYWdlOiAnJywKICAgICAgICByZWNvbW1lbmRfaW1hZ2U6ICcnLAogICAgICAgIHNsaWRlcl9pbWFnZTogW10sCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGZpY3RpOiAwLAogICAgICAgIGdpdmVfaW50ZWdyYWw6IDAsCiAgICAgICAgc29ydDogMCwKICAgICAgICBpc19zaG93OiAxLAogICAgICAgIGlzX2hvdDogMCwKICAgICAgICBpc19iZW5lZml0OiAwLAogICAgICAgIGlzX2Jlc3Q6IDAsCiAgICAgICAgaXNfbmV3OiAwLAogICAgICAgIGlzX2dvb2Q6IDAsCiAgICAgICAgaXNfcG9zdGFnZTogMCwKICAgICAgICBpc19zdWI6IFtdLAogICAgICAgIHJlY29tbWVuZF9saXN0OiBbXSwKICAgICAgICB2aXJ0dWFsX3R5cGU6IDAsCiAgICAgICAgLy8gaXNfc3ViOiAwLAogICAgICAgIGlkOiAwLAogICAgICAgIHNwZWNfdHlwZTogMCwKICAgICAgICBpc192aXJ0dWFsOiAwLAogICAgICAgIHZpZGVvX2xpbms6ICcnLAogICAgICAgIC8vIHBvc3RhZ2U6IDAsCiAgICAgICAgdGVtcF9pZDogJycsCiAgICAgICAgYXR0cnM6IFtdLAogICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBhY3Rpdml0eTogWyfpu5jorqQnLCAn56eS5p2AJywgJ+egjeS7tycsICfmi7zlm6InXSwKICAgICAgICBjb3Vwb25OYW1lOiBbXSwKICAgICAgICBoZWFkZXI6IFtdLAogICAgICAgIHNlbGVjdFJ1bGU6ICcnLAogICAgICAgIGNvdXBvbl9pZHM6IFtdLAogICAgICAgIGNvbW1hbmRfd29yZDogJycsCiAgICAgICAgbWluX3F0eTogMSwKICAgICAgfSwKICAgICAgcnVsZUxpc3Q6IFtdLAogICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICBjcmVhdGVCbnQ6IHRydWUsCiAgICAgIHNob3dJcHV0OiBmYWxzZSwKICAgICAgbWFueUZvcm1WYWxpZGF0ZTogW10sCiAgICAgIC8vIOWNleinhOagvOihqOagvGRhdGEKICAgICAgb25lRm9ybVZhbGlkYXRlOiBbCiAgICAgICAgewogICAgICAgICAgcGljOiAnJywKICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgY29zdDogMCwKICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICB3ZWlnaHQ6IDAsCiAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICBicm9rZXJhZ2VfdHdvOiAwLAogICAgICAgICAgdmlwX3ByaWNlOiAwLAogICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgIGNvdXBvbl9pZDogMCwKICAgICAgICB9LAogICAgICBdLAogICAgICBpbWFnZXM6IFtdLAogICAgICBpbWFnZXNUYWJsZTogJycsCiAgICAgIGN1cnJlbnRUYWI6ICcxJywKICAgICAgaXNDaG9pY2U6ICcnLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDgsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIGFkZFZpcnR1YWxNb2RlbDogZmFsc2UsCiAgICAgIHRlbXBsYXRlOiBmYWxzZSwKICAgICAgdXBsb2FkTGlzdDogW10sCiAgICAgIHRyZWVTZWxlY3Q6IFtdLAogICAgICBwaWNUaXQ6ICcnLAogICAgICB0YWJsZUluZGV4OiAwLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBzdG9yZV9uYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjYXRlX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB5YiG57G7JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIG1pbjogJzEnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHVuaXRfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXljZXkvY0nLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgLy8gaW1hZ2U6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35LiK5Lyg5ZWG5ZOB5Zu+IiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sCiAgICAgICAgc2xpZGVyX2ltYWdlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg5ZWG5ZOB6L2u5pKt5Zu+JywKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgc3BlY190eXBlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICAgIGlzX3ZpcnR1YWw6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgc2VsZWN0UnVsZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nllYblk4Hop4TmoLzlsZ7mgKcnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICB0ZW1wX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6L+Q6LS55qih5p2/JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHByZXNhbGVfdGltZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqea0u+WKqOaXtumXtCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGxvZ2lzdGljczogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWluOiAxLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup54mp5rWB5pa55byPJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgICAgICBtYXg6IDIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnianmtYHmlrnlvI8nLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBnaXZlX2ludGVncmFsOiBbeyB0eXBlOiAnaW50ZWdlcicsIG1lc3NhZ2U6ICfor7fovpPlhaXmlbTmlbAnIH1dLAogICAgICB9LAogICAgICBtYW55QnJva2VyYWdlOiAwLAogICAgICBtYW55QnJva2VyYWdlVHdvOiAwLAogICAgICBtYW55VmlwUHJpY2U6IDAsCiAgICAgIHVwbG9hZDogewogICAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIH0sCiAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIHByb2dyZXNzOiAwLCAvLyDov5vluqbmnaHpu5jorqQwCiAgICAgIHN0b2NrOiAwLAogICAgICBkaXNrX2luZm86ICcnLAogICAgICB2aWRlb0xpbms6ICcnLAogICAgICBhdHRyczogW10sCiAgICAgIGFjdGl2aXR5OiB7IOm7mOiupDogJ3JlZCcsIOenkuadgDogJ2JsdWUnLCDnoI3ku7c6ICdncmVlbicsIOaLvOWbojogJ3llbGxvdycgfSwKICAgICAgY291cG9uTmFtZTogW10sCiAgICAgIHVwZGF0ZUlkczogW10sCiAgICAgIHVwZGF0ZU5hbWU6IFtdLAogICAgICBjb3Vwb25JZHM6ICcnLAogICAgICBjb3Vwb25OYW1lczogW10sCiAgICAgIHJha2VCYWNrOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkuIDnuqfov5TkvaMnLAogICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S6jOe6p+i/lOS9oycsCiAgICAgICAgICBzbG90OiAnYnJva2VyYWdlX3R3bycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbWVtYmVyOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJrlkZjku7cnLAogICAgICAgICAgc2xvdDogJ3ZpcF9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29sdW1uc0luc3RhbE06IFtdLAogICAgICBtb3ZlSW5kZXg6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSksCiAgICBsYWJlbFdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6ICcxMjBweCc7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogICAgbGFiZWxCb3R0b20oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogJzE1cHgnOwogICAgfSwKICB9LAogIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB0aGlzLmJ1cy4kZW1pdCgnb25UYWdzVmlld1JlZnJlc2hSb3V0ZXJWaWV3JywgdGhpcy4kcm91dGUucGF0aCk7CiAgICBuZXh0KCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA4KTsKICAgIHRoaXMuZ2V0VG9rZW4oKTsKCiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5jb2x1bW5zSW5zdGFsbCk7CiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YTggPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLmNvbHVtbnNJbnN0YTgpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT09ICcwJyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgdGhpcy5nZXRJbmZvKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gJzAnKSB7CiAgICAgIHByb2R1Y3RDYWNoZSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5pbmZvOwogICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICAgIGxldCBjYXRlX2lkID0gZGF0YS5jYXRlX2lkLm1hcChOdW1iZXIpOwogICAgICAgICAgICBsZXQgbGFiZWxfaWQgPSBkYXRhLmxhYmVsX2lkLm1hcChOdW1iZXIpOwogICAgICAgICAgICB0aGlzLmF0dHJzID0gZGF0YS5pdGVtcyB8fCBbXTsKICAgICAgICAgICAgbGV0IGlkcyA9IFtdOwogICAgICAgICAgICAvLyBsZXQgbmFtZXMgPSBbXTsKICAgICAgICAgICAgaWYgKGRhdGEuY291cG9ucykgewogICAgICAgICAgICAgIGRhdGEuY291cG9ucy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgLy8gbmFtZXMucHVzaChpdGVtLnRpdGxlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgICAgICAgLy8gdGhpcy5jb3Vwb25OYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICAgICAgICAvLyB0aGF0LmNvdXBvbk5hbWUgPSBuYW1lczsKICAgICAgICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhLmxhYmVsX2lkOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWRzOwogICAgICAgICAgICB0aGlzLnVwZGF0ZUlkcyA9IGlkczsKICAgICAgICAgICAgdGhpcy51cGRhdGVOYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkID0gY2F0ZV9pZDsKICAgICAgICAgICAgLy8gdGhpcy5mb3JtVmFsaWRhdGUubGFiZWxfaWQgPSBsYWJlbF9pZDsKICAgICAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBkYXRhLmF0dHJzOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MgPSBkYXRhLmxvZ2lzdGljcyB8fCBbJzEnXTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaGVhZGVyID0gW107CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoMCk7CiAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IGRhdGEuYXR0cnM7CiAgICAgICAgICAgIHRoaXMuc3BlY190eXBlID0gZGF0YS5zcGVjX3R5cGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSBkYXRhLmlzX3ZpcnR1YWw7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtID0gZGF0YS5jdXN0b21fZm9ybSB8fCBbXTsKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5jdXN0b21CdG4gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudmlydHVhbGJ0bihkYXRhLnZpcnR1YWxfdHlwZSwgMSk7CiAgICAgICAgICAgIGlmIChkYXRhLnNwZWNfdHlwZSA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IFtdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZSA9IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcGljOiBkYXRhLmltYWdlLAogICAgICAgICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgICAgICAgICAgdm9sdW1lOiAwLAogICAgICAgICAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICAgICAgICAgIGJyb2tlcmFnZV90d286IDAsCiAgICAgICAgICAgICAgICAgIHZpcF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgICAgICAgICAgY291cG9uX2lkOiAwLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUpIHsKICAgICAgdGhpcy5tb2RhbHMgPSB0cnVlOwogICAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50eXBlID0gMDsKICAgIH0KICAgIHRoaXMuZ29vZHNDYXRlZ29yeSgpOwogICAgdGhpcy5wcm9kdWN0R2V0UnVsZSgpOwogICAgdGhpcy5wcm9kdWN0R2V0VGVtcGxhdGUoKTsKICAgIC8vIHRoaXMudXNlckxhYmVsKCk7CiAgICB0aGlzLnVwbG9hZFR5cGUoKTsKICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICByZXR1cm4gaXNGaWxlVXBsb2FkKGZpbGUpCiAgICB9LAogICAgLy8g5YiG54mH5LiK5LygCiAgICB2aWRlb1NhdmVUb1VybChmaWxlKSB7CiAgICAgIGlmKGlzVmlkZW9VcGxvYWQoZmlsZSkpewogICAgICAgIHVwbG9hZEJ5UGllY2VzKHsKICAgICAgICAgIGZpbGU6IGZpbGUsIC8vIOinhumikeWunuS9kwogICAgICAgICAgcGllY2VTaXplOiAzLCAvLyDliIbniYflpKflsI8KICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSBkYXRhLmZpbGVfcGF0aDsKICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgIH0sCiAgICAgICAgICBlcnJvcjogKGUpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlLm1zZyk7CiAgICAgICAgICB9LAogICAgICAgICAgdXBsb2FkaW5nOiAoY2h1bmssIGFsbENodW5rKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmlkZW9JbmcgPSB0cnVlOwogICAgICAgICAgICBsZXQgc3QgPSBNYXRoLmZsb29yKChjaHVuayAvIGFsbENodW5rKSAqIDEwMCk7CiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBzdDsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIC8vIOexu+Wei+mAieaLqS/loavlhaXlhoXlrrnliKTmlq0KICAgIHZpcnR1YWxidG4oaW5kZXgsIHR5cGUpIHsKICAgICAgaWYgKHR5cGUgIT0gMSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YiA9IFtdOwogICAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgIGNoZWNrQWN0aXZpdHlBcGkoaWQpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHt9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IHRoaXMuc3BlY190eXBlOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDA7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMDsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFsKICAgICAgICAgICAgeyB0aXQ6ICfln7rnoYDkv6Hmga8nLCBuYW1lOiAnMScgfSwKICAgICAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICAgICAgeyB0aXQ6ICfllYblk4Hor6bmg4UnLCBuYW1lOiAnMycgfSwKICAgICAgICAgICAgeyB0aXQ6ICfnianmtYHorr7nva4nLCBuYW1lOiAnNCcgfSwKICAgICAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICAgICAgeyB0aXQ6ICflhbbku5borr7nva4nLCBuYW1lOiAnNicgfSwKICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAxOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucG9zdGFnZSA9IDA7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMTsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFsKICAgICAgICAgICAgeyB0aXQ6ICfln7rnoYDkv6Hmga8nLCBuYW1lOiAnMScgfSwKICAgICAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICAgICAgeyB0aXQ6ICfllYblk4Hor6bmg4UnLCBuYW1lOiAnMycgfSwKICAgICAgICAgICAgLy8geyB0aXQ6ICLnianmtYHorr7nva4iLCBuYW1lOiAiNCIgfSwKICAgICAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNCcgfSwKICAgICAgICAgICAgeyB0aXQ6ICflhbbku5borr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAyOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDE7CiAgICAgICAgICB0aGlzLmhlYWRUYWIgPSBbCiAgICAgICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6KeE5qC85bqT5a2YJywgbmFtZTogJzInIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5ZWG5ZOB6K+m5oOFJywgbmFtZTogJzMnIH0sCiAgICAgICAgICAgIC8vIHsgdGl0OiAi54mp5rWB6K6+572uIiwgbmFtZTogIjQiIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6JCl6ZSA6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5YW25LuW6K6+572uJywgbmFtZTogJzUnIH0sCiAgICAgICAgICBdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID0gMzsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSAxOwogICAgICAgICAgdGhpcy5oZWFkVGFiID0gWwogICAgICAgICAgICB7IHRpdDogJ+WfuuehgOS/oeaBrycsIG5hbWU6ICcxJyB9LAogICAgICAgICAgICB7IHRpdDogJ+inhOagvOW6k+WtmCcsIG5hbWU6ICcyJyB9LAogICAgICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgICAgICAvLyB7IHRpdDogIueJqea1geiuvue9riIsIG5hbWU6ICI0IiB9LAogICAgICAgICAgICB7IHRpdDogJ+iQpemUgOiuvue9ricsIG5hbWU6ICc0JyB9LAogICAgICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc1JyB9LAogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5YiG57G7CiAgICBhZGRDYXRlKCkgewogICAgICB0aGlzLiRtb2RhbEZvcm0ocHJvZHVjdENyZWF0ZUFwaSgpKS50aGVuKCgpID0+IHRoaXMuZ29vZHNDYXRlZ29yeSgpKTsKICAgIH0sCiAgICAvLyDnianmtYHmlrnlvI/pgInmi6kKICAgIGxvZ2lzdGljc0J0bihlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGU7CiAgICB9LAogICAgLy8g5paw5aKe5qCH562+CiAgICBhZGRMYWJlbCgpIHsKICAgICAgdGhpcy4kbW9kYWxGb3JtKHVzZXJMYWJlbEFkZEFwaSgwKSkudGhlbigoKSA9PiB0aGlzLnVzZXJMYWJlbCgpKTsKICAgIH0sCiAgICAvLyDoh6rlrprkuYnnlZnoqIAg5byA5ZCv5YWz6ZetCiAgICBjdXN0b21NZXNzQnRuKGUpIHsKICAgICAgaWYgKCFlKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0gPSBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOiHquWumuS5ieeVmeiogCDmlrDlop7ooajljZUKICAgIGFkZGN1c3RvbSgpIHsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCA+IDkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+acgOWkmua3u+WKoDEw5p2hJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0ucHVzaCh7CiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBsYWJlbDogJ3RleHQnLAogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIoOmZpAogICAgZGVsY3VzdG9tKGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g6aKE5ZSu5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wcmVzYWxlX3RpbWUgPSBlOwogICAgfSwKICAgIC8vIOWVhuWTgeivpuaDhQogICAgZ2V0RWRpdG9yQ29udGVudChkYXRhKSB7CiAgICAgIHRoaXMuY29udGVudCA9IGRhdGE7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOS4iuS8oOWktOmDqHRva2VuCiAgICBnZXRUb2tlbigpIHsKICAgICAgdGhpcy5oZWFkZXJbJ0F1dGhvcmktemF0aW9uJ10gPSAnQmVhcmVyICcgKyBnZXRDb29raWVzKCd0b2tlbicpOwogICAgfSwKICAgIC8vIOWvvOWFpeWNoeWvhgogICAgdXBGaWxlKHJlcykgewogICAgICBpbXBvcnRDYXJkKHsgZmlsZTogcmVzLmRhdGEuc3JjIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudmlydHVhbExpc3QgPSB0aGlzLnZpcnR1YWxMaXN0LmNvbmNhdChyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6I635Y+W6KeG6aKR5LiK5Lyg57G75Z6LCiAgICB1cGxvYWRUeXBlKCkgewogICAgICB1cGxvYWRUeXBlKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51cGxvYWRfdHlwZSA9IHJlcy5kYXRhLnVwbG9hZF90eXBlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbmlbDmja7lsZXnpLoKICAgIGluZm9EYXRhKGRhdGEsIGlzQ29weSkgewogICAgICBsZXQgY2F0ZV9pZCA9IGRhdGEuY2F0ZV9pZC5tYXAoTnVtYmVyKTsKICAgICAgbGV0IGxhYmVsX2lkID0gZGF0YS5sYWJlbF9pZC5tYXAoTnVtYmVyKTsKICAgICAgdGhpcy5hdHRycyA9IGRhdGEuaXRlbXMgfHwgW107CiAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgZGF0YS5jb3Vwb25zLm1hcCgoaXRlbSkgPT4gewogICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICB9KTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSBkYXRhOwogICAgICB0aGlzLnNlbGV0VmlkZW8gPSBkYXRhLnNlbGV0VmlkZW87CiAgICAgIHRoaXMuY29udGVudHMgPSBkYXRhLmRlc2NyaXB0aW9uOwogICAgICB0aGlzLmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHMgPSBpZHM7CiAgICAgIHRoaXMudXBkYXRlSWRzID0gaWRzOwogICAgICB0aGlzLmRhdGFMYWJlbCA9IGRhdGEubGFiZWxfaWQ7CiAgICAgIHRoaXMudXBkYXRlTmFtZSA9IGRhdGEuY291cG9uczsKICAgICAgdGhpcy52aXJ0dWFsYnRuKGRhdGEudmlydHVhbF90eXBlLCAxKTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUubG9naXN0aWNzID0gZGF0YS5sb2dpc3RpY3MgfHwgWycxJ107CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtID0gZGF0YS5jdXN0b21fZm9ybSB8fCBbXTsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgdGhpcy5jdXN0b21CdG4gPSB0cnVlOwogICAgICB9CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNhdGVfaWQgPSBjYXRlX2lkOwogICAgICBpZiAoZGF0YS5hdHRyKSB7CiAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBbZGF0YS5hdHRyXTsKICAgICAgfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBbXTsKICAgICAgdGhpcy5nZW5lcmF0ZSgwLCBpc0NvcHksIGRhdGEuYXR0cnMpOwogICAgICAvLyB0aGlzLm1hbnlGb3JtVmFsaWRhdGUgPSBkYXRhLmF0dHJzOwogICAgICAvLyB0aGlzLiRzZXQodGhpcywgJ21hbnlGb3JtVmFsaWRhdGUnLCBkYXRhLmF0dHJzKTsKICAgICAgdGhpcy5zcGVjX3R5cGUgPSBkYXRhLnNwZWNfdHlwZTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IGRhdGEuaXNfdmlydHVhbDsKICAgICAgaWYgKGRhdGEuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jcmVhdGVCbnQgPSB0cnVlOwogICAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlID0gWwogICAgICAgICAgewogICAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgICAgdm9sdW1lOiAwLAogICAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICAgIGJyb2tlcmFnZV90d286IDAsCiAgICAgICAgICAgIHZpcF9wcmljZTogMCwKICAgICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgICAgY291cG9uX2lkOiAwLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICB9CiAgICAgIHRoaXMud2F0Y2hBY3Rpdml0eSgpCiAgICB9LAogICAgLy/lhbPpl63mt5jlrp3lvLnnqpflubbnlJ/miJDmlbDmja7vvJsKICAgIG9uQ2xvc2UoZGF0YSkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICB0aGlzLmluZm9EYXRhKGRhdGEsIDEpOwogICAgfSwKCiAgICBjaGVja01vdmUoZXZ0KSB7CiAgICAgIHRoaXMubW92ZUluZGV4ID0gZXZ0LmRyYWdnZWRDb250ZXh0LmluZGV4OwogICAgfSwKICAgIGVuZCgpIHsKICAgICAgdGhpcy5tb3ZlSW5kZXggPSAnJzsKICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgIH0sCiAgICAvLyDljZXni6zorr7nva7kvJrlkZjorr7nva4KICAgIGNoZWNrQWxsR3JvdXBDaGFuZ2UoZGF0YSkgewogICAgICB0aGlzLmNoZWNrQWxsR3JvdXAoZGF0YSk7CiAgICB9LAogICAgY2hlY2tBbGxHcm91cChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICBpZiAoZGF0YS5pbmRleE9mKDApID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmluZGV4T2YoMSkgPiAtMSkgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjaykuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGRhdGEuaW5kZXhPZigwKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5tZW1iZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbDIgPSB0aGlzLmNvbHVtbnNJbnN0YWxNLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLnJha2VCYWNrKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCk7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICBhZGRDb3Vwb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLmlzVGVtcGxhdGUgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLmNvdXBvblRlbXBsYXRlcy50YWJsZUxpc3QoKTsKICAgIH0sCiAgICAvLyDop4TmoLzkuK3kvJjmg6DliLjmn6XnnIsKICAgIHNlZShkYXRhLCBuYW1lLCBpbmRleCkgewogICAgICB0aGlzLnRhYk5hbWUgPSBuYW1lOwogICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7CgogICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID09PSAxKSB7CiAgICAgICAgaWYgKGRhdGEuZGlza19pbmZvICE9ICcnKSB7CiAgICAgICAgICB0aGlzLmRpc2tfdHlwZSA9IDE7CiAgICAgICAgICB0aGlzLmRpc2tfaW5mbyA9IGRhdGEuZGlza19pbmZvOwogICAgICAgICAgdGhpcy5zdG9jayA9IGRhdGEuc3RvY2s7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnZpcnR1YWxfbGlzdC5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuZGlza190eXBlID0gMjsKICAgICAgICAgIHRoaXMudmlydHVhbExpc3QgPSBkYXRhLnZpcnR1YWxfbGlzdDsKICAgICAgICB9CiAgICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuZ29vZHNDb3Vwb24uaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi50YWJsZUxpc3QoMyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDkvJjmg6DliLgKICAgIGFkZEdvb2RzQ291cG9uKGluZGV4LCBuYW1lKSB7CiAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDsKICAgICAgdGhpcy50YWJOYW1lID0gbmFtZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi50YWJsZUxpc3QoMyk7CiAgICB9LAogICAgYWRkVmlydHVhbChpbmRleCwgbmFtZSkgewogICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMudGFiTmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYWRkVmlydHVhbE1vZGVsID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDmj5DkuqTljaHlr4bkv6Hmga8KICAgIHVwVmlydHVhbCgpIHsKICAgICAgaWYgKHRoaXMuZGlza190eXBlID09IDIpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmlydHVhbExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnZpcnR1YWxMaXN0W2ldOwogICAgICAgICAgaWYgKCFlbGVtZW50LnZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+i+k+WFpeaJgOacieWNoeWvhicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICd2aXJ0dWFsX2xpc3QnLCB0aGlzLnZpcnR1YWxMaXN0KTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnc3RvY2snLCB0aGlzLnZpcnR1YWxMaXN0Lmxlbmd0aCk7CiAgICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAga2V5OiAnJywKICAgICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdkaXNrX2luZm8nLCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLmRpc2tfaW5mby5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnljaHlr4bkv6Hmga8nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLnN0b2NrKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5bqT5a2Y5pWw6YePJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdzdG9jaycsIE51bWJlcih0aGlzLnN0b2NrKSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3N0b2NrJywgTnVtYmVyKHRoaXMuc3RvY2spKTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnZGlza19pbmZvJywgdGhpcy5kaXNrX2luZm8pOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICd2aXJ0dWFsX2xpc3QnLCBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSBmYWxzZTsKICAgICAgdGhpcy5jbG9zZVZpcnR1YWwoKTsKICAgIH0sCiAgICAvLyAg5Yid5aeL5YyW5Y2h5a+G5pWw5o2u5L+h5oGvCiAgICBjbG9zZVZpcnR1YWwoKSB7CiAgICAgIHRoaXMuYWRkVmlydHVhbE1vZGVsID0gZmFsc2U7CiAgICAgIHRoaXMudmlydHVhbExpc3QgPSBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICBdOwogICAgICB0aGlzLmRpc2tfaW5mbyA9ICcnOwogICAgICB0aGlzLnN0b2NrID0gMDsKICAgIH0sCiAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgdW5pcXVlKGFycikgewogICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7CiAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhcnIpID0+ICFyZXMuaGFzKGFyci5pZCkgJiYgcmVzLnNldChhcnIuaWQsIDEpKTsKICAgIH0sCiAgICAvLyDojrflj5bkvJjmg6DliLhpZOaVsOaNrgogICAgbmFtZUlkKGlkLCBuYW1lcykgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWQ7CiAgICAgIHRoaXMuY291cG9uTmFtZSA9IHRoaXMudW5pcXVlKG5hbWVzKTsKICAgIH0sCiAgICAvLyDojrflj5bkvJjmg6DliLjkv6Hmga8KICAgIGdvb2RzQ291cG9uSWQoZGF0YSkgewogICAgICAvLyB0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0uY291cG9uX2lkID0gZGF0YS5pZDsKICAgICAgLy8gdGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLmNvdXBvbl9uYW1lID0gZGF0YS50aXRsZTsKICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ2NvdXBvbl9pZCcsIGRhdGEuaWQpOwogICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnY291cG9uX25hbWUnLCBkYXRhLnRpdGxlKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UobmFtZSkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmNvdXBvbk5hbWUuaW5kZXhPZihuYW1lKTsKICAgICAgdGhpcy5jb3Vwb25OYW1lLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGxldCBjb3Vwb25JZHMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzOwogICAgICBjb3Vwb25JZHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy51cGRhdGVJZHMgPSBjb3Vwb25JZHM7CiAgICAgIHRoaXMudXBkYXRlTmFtZSA9IHRoaXMuY291cG9uTmFtZTsKICAgIH0sCiAgICAvLyDov5DotLnmqKHmnb8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMucHJvZHVjdEdldFRlbXBsYXRlKCk7CiAgICB9LAogICAgLy8g5re75Yqg6L+Q6LS55qih5p2/CiAgICBhZGRUZW1wKCkgewogICAgICB0aGlzLiRyZWZzLnRlbXBsYXRlcy5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDliKDpmaTop4bpopHvvJsKICAgIGRlbFZpZGVvKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJHNldCh0aGF0LmZvcm1WYWxpZGF0ZSwgJ3ZpZGVvX2xpbmsnLCAnJyk7CiAgICAgIHRoYXQuJHNldCh0aGF0LCAncHJvZ3Jlc3MnLCAwKTsKICAgICAgdGhhdC52aWRlb0luZyA9IGZhbHNlOwogICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IGZhbHNlOwogICAgfSwKICAgIHpoX3VwbG9hZEZpbGUoKSB7CiAgICAgIGlmICh0aGlzLnNlbGV0VmlkZW8gPT0gMSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSB0aGlzLnZpZGVvTGluazsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnJlZmlkLmNsaWNrKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIrkvKDop4bpopEKICAgIHpoX3VwbG9hZEZpbGVfY2hhbmdlKGV2ZmlsZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGxldCBzdWZmaXggPSBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuc3Vic3RyKGV2ZmlsZS50YXJnZXQuZmlsZXNbMF0ubmFtZS5pbmRleE9mKCcuJykpOwogICAgICBpZiAoc3VmZml4LmluZGV4T2YoJy5tcDQnKSA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygTVA05paH5Lu2Jyk7CiAgICAgIH0KICAgICAgbGV0IHR5cGVzID0gewogICAgICAgIGtleTogZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLAogICAgICAgIGNvbnRlbnRUeXBlOiBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLnR5cGUsCiAgICAgIH07CiAgICAgIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSh0eXBlcykKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGF0LiR2aWRlb0Nsb3VkCiAgICAgICAgICAgIC52aWRlb1VwbG9hZCh7CiAgICAgICAgICAgICAgdHlwZTogcmVzLmRhdGEudHlwZSwKICAgICAgICAgICAgICBldmZpbGU6IGV2ZmlsZSwKICAgICAgICAgICAgICByZXM6IHJlcywKICAgICAgICAgICAgICB1cGxvYWRpbmcoc3RhdHVzLCBwcm9ncmVzcykgewogICAgICAgICAgICAgICAgdGhhdC51cGxvYWQudmlkZW9JbmcgPSBzdGF0dXM7CiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdGhhdC5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHJlcy51cmw7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfop4bpopHkuIrkvKDmiJDlip8nKTsKICAgICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IGZhbHNlOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkuIrkuIDpobXvvJsKICAgIHVwVGFiKCkgewogICAgICB0aGlzLmN1cnJlbnRUYWIgPSAoTnVtYmVyKHRoaXMuY3VycmVudFRhYikgLSAxKS50b1N0cmluZygpOwogICAgfSwKICAgIC8vIOS4i+S4gOmhte+8mwogICAgZG93blRhYigpIHsKICAgICAgdGhpcy5jdXJyZW50VGFiID0gKE51bWJlcih0aGlzLmN1cnJlbnRUYWIpICsgMSkudG9TdHJpbmcoKTsKICAgIH0sCiAgICAvLyDlsZ7mgKflvLnnqpflm57osIPlh73mlbDvvJsKICAgIHVzZXJTZWFyY2hzKCkgewogICAgICB0aGlzLnByb2R1Y3RHZXRSdWxlKCk7CiAgICB9LAogICAgLy8g5re75Yqg6KeE5YiZ77ybCiAgICBhZGRSdWxlKCkgewogICAgICB0aGlzLiRyZWZzLmFkZGF0dHIubW9kYWwgPSB0cnVlOwogICAgfSwKICAgIC8vIOaJuemHj+iuvue9ruWIhuS9o++8mwogICAgYnJva2VyYWdlU2V0VXAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLmlzX3N1Yi5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICBpZiAodGhhdC5tYW55QnJva2VyYWdlIDw9IDAgfHwgdGhhdC5tYW55QnJva2VyYWdlVHdvIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnov5TkvaPph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhhdC5mb3JtVmFsaWRhdGUuaXNfc3ViLmluZGV4T2YoMCkgPiAtMSkgewogICAgICAgIGlmICh0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lya5ZGY5Lu35ZCO6L+b6KGM5om56YeP5re75YqgJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIubGVuZ3RoID09PSAyKSB7CiAgICAgICAgaWYgKHRoYXQubWFueUJyb2tlcmFnZSA8PSAwIHx8IHRoYXQubWFueUJyb2tlcmFnZVR3byA8PSAwIHx8IHRoYXQubWFueVZpcFByaWNlIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlrozph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yIChsZXQgdmFsIG9mIHRoYXQubWFueUZvcm1WYWxpZGF0ZSkgewogICAgICAgIHRoaXMuJHNldCh2YWwsICdicm9rZXJhZ2UnLCB0aGF0Lm1hbnlCcm9rZXJhZ2UpOwogICAgICAgIHRoaXMuJHNldCh2YWwsICdicm9rZXJhZ2VfdHdvJywgdGhhdC5tYW55QnJva2VyYWdlVHdvKTsKICAgICAgICB0aGlzLiRzZXQodmFsLCAndmlwX3ByaWNlJywgdGhhdC5tYW55VmlwUHJpY2UpOwogICAgICB9CiAgICB9LAogICAgLy8g5om56YeP6K6+572u5Lya5ZGY5Lu3CiAgICB2aXBQcmljZVNldFVwKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGlmICh0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeS8muWRmOS7t+WcqOi/m+ihjOaJuemHj+a3u+WKoCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAobGV0IHZhbCBvZiB0aGF0Lm1hbnlGb3JtVmFsaWRhdGUpIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICd2aXBfcHJpY2UnLCB0aGF0Lm1hbnlWaXBQcmljZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5Y2h5a+GCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMudmlydHVhbExpc3QucHVzaCh7CiAgICAgICAga2V5OiAnJywKICAgICAgICB2YWx1ZTogJycsCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIneWni+WMluWNoeWvhuS/oeaBrwogICAgaW5pdFZpcnR1YWxEYXRhKHN0YXR1cykgewogICAgICB0aGlzLnZpcnR1YWxMaXN0ID0gWwogICAgICAgIHsKICAgICAgICAgIGtleTogJycsCiAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICByZW1vdmVWaXJ0dWFsKGluZGV4KSB7CiAgICAgIHRoaXMudmlydHVhbExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmuIXnqbrmibnph4/op4TmoLzkv6Hmga8KICAgIGJhdGNoRGVsKCkgewogICAgICB0aGlzLm9uZUZvcm1CYXRjaCA9IFsKICAgICAgICB7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgIHZpcnR1YWxfbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBjb25maXJtKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUudHJpbSgpLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWxnuaApycpOwogICAgICB9CiAgICAgIHRoYXQucnVsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5ydWxlX25hbWUgPT09IHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUpIHsKICAgICAgICAgIHRoYXQuYXR0cnMgPSBpdGVtLnJ1bGVfdmFsdWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bllYblk4HlsZ7mgKfmqKHmnb/vvJsKICAgIHByb2R1Y3RHZXRSdWxlKCkgewogICAgICBwcm9kdWN0R2V0UnVsZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMucnVsZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6L+Q6LS55qih5p2/77ybCiAgICBwcm9kdWN0R2V0VGVtcGxhdGUoKSB7CiAgICAgIHByb2R1Y3RHZXRUZW1wbGF0ZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudGVtcGxhdGVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOihqOagvOS4reeahOWxnuaApwogICAgZGVsQXR0clRhYmxlKGluZGV4KSB7CiAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmibnph4/mt7vliqAKICAgIGJhdGNoQWRkKCkgewogICAgICBmb3IgKGxldCB2YWwgb2YgdGhpcy5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3BpYycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdwcmljZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLnByaWNlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnY29zdCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnb3RfcHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5vdF9wcmljZSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5zdG9jayA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdzdG9jaycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnN0b2NrKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlICE9PSAnJykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jhcl9jb2RlJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0uYmFyX2NvZGUpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0ID4gMCkgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3dlaWdodCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLndlaWdodCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS52b2x1bWUgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAndm9sdW1lJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDmjInpkq4KICAgIGFkZEJ0bigpIHsKICAgICAgdGhpcy5jbGVhckF0dHIoKTsKICAgICAgdGhpcy5jcmVhdGVCbnQgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93SXB1dCA9IHRydWU7CiAgICB9LAogICAgLy8g56uL5Y2z55Sf5oiQCiAgICBnZW5lcmF0ZSh0eXBlLCBpc0NvcHksIGFycikgewogICAgICBnZW5lcmF0ZUF0dHJBcGkoCiAgICAgICAgewogICAgICAgICAgYXR0cnM6IHRoaXMuYXR0cnMsCiAgICAgICAgICBpc192aXJ0dWFsOiBbMSwgMl0uaW5jbHVkZXModGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlKSA/IDEgOiAwLAogICAgICAgICAgdmlydHVhbF90eXBlOiB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUsCiAgICAgICAgfSwKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pZCwKICAgICAgICB0eXBlLAogICAgICApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGluZm8gPSByZXMuZGF0YS5pbmZvLAogICAgICAgICAgICBoZWFkZXIxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbmZvLmhlYWRlcikpOwogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gJzAnICYmICh0aGlzLiRyb3V0ZS5xdWVyeS50eXBlICE9IC0xIHx8IHR5cGUpICYmICFpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gaW5mby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gYXJyOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGhlYWRlciA9IGluZm8uaGVhZGVyOwogICAgICAgICAgaWYgKFsxLCAyXS5pbmNsdWRlcyh0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpKSB7CiAgICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbE0gPSBoZWFkZXI7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IGhlYWRlcjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IGhlYWRlcjE7CiAgICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbE0gPSBpbmZvLmhlYWRlcjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY2hlY2tBbGxHcm91cCh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIpOwogICAgICAgICAgaWYgKCF0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgJiYgdGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAxICYmICFpc0NvcHkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGl0ZW0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBpZiAoIWl0ZW0ucGljKSB7CiAgICAgICAgICAgICAgICBpdGVtLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+W5raICiAgICBvZmZBdHRyTmFtZSgpIHsKICAgICAgdGhpcy5zaG93SXB1dCA9IGZhbHNlOwogICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWU7CiAgICB9LAogICAgY2xlYXJBdHRyKCkgewogICAgICB0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSA9ICcnOwogICAgICB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsID0gJyc7CiAgICB9LAogICAgLy8g5Yig6Zmk6KeE5qC8CiAgICBoYW5kbGVSZW1vdmVSb2xlKGluZGV4KSB7CiAgICAgIHRoaXMuYXR0cnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5Yig6Zmk5bGe5oCnCiAgICBoYW5kbGVSZW1vdmUyKGl0ZW0sIGluZGV4KSB7CiAgICAgIGl0ZW0uc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmt7vliqDop4TliJnlkI3np7AKICAgIGNyZWF0ZUF0dHJOYW1lKCkgewogICAgICBpZiAodGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUgJiYgdGhpcy5mb3JtRHluYW1pYy5hdHRyc1ZhbCkgewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgdmFsdWU6IHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNOYW1lLAogICAgICAgICAgZGV0YWlsOiBbdGhpcy5mb3JtRHluYW1pYy5hdHRyc1ZhbF0sCiAgICAgICAgfTsKICAgICAgICB0aGlzLmF0dHJzLnB1c2goZGF0YSk7CiAgICAgICAgdmFyIGhhc2ggPSB7fTsKICAgICAgICB0aGlzLmF0dHJzID0gdGhpcy5hdHRycy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHQudmFsdWVdID8gJycgOiAoaGFzaFtuZXh0LnZhbHVlXSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpKTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgICB0aGlzLmNsZWFyQXR0cigpOwogICAgICAgIHRoaXMuc2hvd0lwdXQgPSBmYWxzZTsKICAgICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fmt7vliqDlrozmlbTnmoTop4TmoLzvvIEnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOWxnuaApwogICAgY3JlYXRlQXR0cihudW0sIGlkeCkgewogICAgICBpZiAobnVtKSB7CiAgICAgICAgdGhpcy5hdHRyc1tpZHhdLmRldGFpbC5wdXNoKG51bSk7CiAgICAgICAgdmFyIGhhc2ggPSB7fTsKICAgICAgICB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsID0gdGhpcy5hdHRyc1tpZHhdLmRldGFpbC5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHRdID8gJycgOiAoaGFzaFtuZXh0XSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpKTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWxnuaApycpOwogICAgICB9CiAgICB9LAogICAgLy8g5ZWG5ZOB5YiG57G777ybCiAgICBnb29kc0NhdGVnb3J5KCkgewogICAgICBjYXNjYWRlckxpc3RBcGkoMSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnRyZWVTZWxlY3QgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8v6KeG6KeG5LiK5Lyg57G75Z6LCiAgICBjaGFuZ2VWaWRlbyhlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSAnJzsKICAgICAgdGhpcy52aWRlb0xpbmsgPSAnJzsKICAgIH0sCiAgICAvLyDmlLnlj5jop4TmoLwKICAgIGNoYW5nZVNwZWMoKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YiA9IFtdOwogICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIGlmIChpZCkgewogICAgICAgIGNoZWNrQWN0aXZpdHlBcGkoaWQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7fSkKICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IHRoaXMuc3BlY190eXBlOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDor6bmg4UKICAgIGdldEluZm8oKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5zcGluU2hvdyA9IHRydWU7CiAgICAgIHByb2R1Y3RJbmZvQXBpKHRoYXQuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLnByb2R1Y3RJbmZvOwogICAgICAgICAgdGhpcy5pbmZvRGF0YShkYXRhKTsKICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZShpKSB7CiAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpLCAxKTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnNwbGljZShpLCAxKTsKICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbMF0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlWzBdOwogICAgfSwKICAgIC8vIOWFs+mXreWbvueJh+S4iuS8oOaooeaAgeahhgogICAgY2hhbmdlQ2FuY2VsKG1zZykgewogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcCh0aXQsIHBpY1RpdCwgaW5kZXgpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgIHRoaXMuaXNDaG9pY2UgPSB0aXQgPT09ICdkYW4nID8gJ+WNlemAiScgOiAn5aSa6YCJJzsKICAgICAgdGhpcy5waWNUaXQgPSBwaWNUaXQ7CiAgICAgIHRoaXMudGFibGVJbmRleCA9IGluZGV4OwogICAgfSwKICAgIC8vIOiOt+WPluWNleW8oOWbvueJh+S/oeaBrwogICAgZ2V0UGljKHBjKSB7CiAgICAgIHN3aXRjaCAodGhpcy5waWNUaXQpIHsKICAgICAgICBjYXNlICdkYW5Gcm9tJzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGl0ZW0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkYW5UYWJsZSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkdW9waSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZWNvbW1lbmRfaW1hZ2UnOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2ltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGVbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICB9CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpY0QocGMpIHsKICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgdGhpcy5pbWFnZXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnB1c2goaXRlbS5hdHRfZGlyKTsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2UgPSB0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2Uuc3BsaWNlKDAsIDEwKTsKICAgICAgfSk7CiAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZVswXTsKICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgaGFuZGxlU3VibWl0KG5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnR5cGUgPSB0aGlzLnR5cGU7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzID0gdGhpcy5vbmVGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pdGVtcyA9IFtdOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc19jb3B5ID0gMDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLml0ZW1zID0gdGhpcy5hdHRyczsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnMgPSB0aGlzLm1hbnlGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX2NvcHkgPSAxOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSAmJiB0aGlzLm1hbnlGb3JtVmFsaWRhdGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3or7fngrnlh7vnlJ/miJDlpJrop4TmoLwnKTsKICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+354K55Ye755Sf5oiQ6KeE5qC877yBJyk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpdGVtW2ldLnN0b2NrID4gMTAwMDAwMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfop4TmoLzlupPlrZgt5bqT5a2Y6LaF5Ye657O757uf6IyD5Zu0KDEwMDAwMDApJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWJbMF0gPT09IDEpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1baV0uYnJva2VyYWdlID09PSBudWxsIHx8IGl0ZW1baV0uYnJva2VyYWdlX3R3byA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iQpemUgOiuvue9ri0g5LiA5LqM57qn6L+U5L2j5LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoaXRlbVtpXS52aXBfcHJpY2UgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfokKXplIDorr7nva4t5Lya5ZGY5Lu35LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoaXRlbVtpXS5icm9rZXJhZ2UgPT09IG51bGwgfHwgaXRlbVtpXS5icm9rZXJhZ2VfdHdvID09PSBudWxsIHx8IGl0ZW1baV0udmlwX3ByaWNlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6JCl6ZSA6K6+572uLSDkuIDkuoznuqfov5TkvaPlkozkvJrlkZjku7fkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5mcmVpZ2h0ID09IDMgJiYgIXRoaXMuZm9ybVZhbGlkYXRlLnRlbXBfaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLei/kOi0ueaooeadv+S4jeiDveS4uuepuicpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGFjdGl2ZUlkcyA9IFtdOwogICAgICAgICAgdGhpcy5kYXRhTGFiZWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBhY3RpdmVJZHMucHVzaChpdGVtLmlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUubGFiZWxfaWQgPSBhY3RpdmVJZHM7CiAgICAgICAgICBpZiAodGhpcy5vcGVuU3ViaW1pdCkgcmV0dXJuOwogICAgICAgICAgdGhpcy5vcGVuU3ViaW1pdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHRoaXMuZm9ybWF0UmljaFRleHQodGhpcy5jb250ZW50KTsKICAgICAgICAgIHByb2R1Y3RBZGRBcGkodGhpcy5mb3JtVmFsaWRhdGUpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcwJykgewogICAgICAgICAgICAgICAgY2FjaGVEZWxldGUoKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoaXMuJHJvdXRlUHJvU3RyICsgJy9wcm9kdWN0L3Byb2R1Y3RfbGlzdCcgfSk7CiAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc3RvcmVfbmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5ZCN56ew5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5YiG57G75LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS51bml0X25hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgeWNleS9jeS4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB6L2u5pKt5Zu+5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MubGVuZ3RoICYmICF0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn54mp5rWB6K6+572uLeiHs+WwkemAieaLqeS4gOenjeeJqea1geaWueW8jycpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUudGVtcF9pZCAmJiB0aGlzLmZvcm1WYWxpZGF0ZS5mcmVpZ2h0ID09IDMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLei/kOi0ueaooeadv+S4jeiDveS4uuepuicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlVGVtcGxhdGUobXNnKSB7CiAgICAgIHRoaXMudGVtcGxhdGUgPSBtc2c7CiAgICB9LAogICAgLy8g6KGo5Y2V6aqM6K+BCiAgICB2YWxpZGF0ZShwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+WKqAogICAgaGFuZGxlRHJhZ1N0YXJ0KGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IGl0ZW07CiAgICB9LAogICAgaGFuZGxlRHJhZ0VuZChlLCBpdGVtKSB7CiAgICAgIHRoaXMuZHJhZ2dpbmcgPSBudWxsOwogICAgfSwKICAgIGhhbmRsZURyYWdPdmVyKGUpIHsKICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW50ZXIoZSwgaXRlbSkgewogICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOwogICAgICBpZiAoaXRlbSA9PT0gdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2VdOwogICAgICBjb25zdCBzcmMgPSBuZXdJdGVtcy5pbmRleE9mKHRoaXMuZHJhZ2dpbmcpOwogICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKGl0ZW0pOwogICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZSA9IG5ld0l0ZW1zOwogICAgfSwKICAgIC8vIOi/h+a7pOivpuaDheWGheWuuQogICAgZm9ybWF0UmljaFRleHQoaHRtbCkgewogICAgICBsZXQgbmV3Q29udGVudCA9IGh0bWwucmVwbGFjZSgvPGltZ1tePl0qPi9naSwgZnVuY3Rpb24gKG1hdGNoLCBjYXB0dXJlKSB7CiAgICAgICAgbWF0Y2ggPSBtYXRjaC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvc3R5bGU9J1teJ10rJy9naSwgJycpOwogICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgvd2lkdGg9IlteIl0rIi9naSwgJycpLnJlcGxhY2UoL3dpZHRoPSdbXiddKycvZ2ksICcnKTsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL2hlaWdodD0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvaGVpZ2h0PSdbXiddKycvZ2ksICcnKTsKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCBmdW5jdGlvbiAobWF0Y2gsIGNhcHR1cmUpIHsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL3dpZHRoOlteO10rOy9naSwgJ21heC13aWR0aDoxMDAlOycpLnJlcGxhY2UoL21heC1tYXgtd2lkdGg6W147XSs7L2dpLCAnbWF4LXdpZHRoOjEwMCU7JykKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC88YnJbXj5dKlwvPi9naSwgJycpOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKAogICAgICAgIC9cPGltZy9naSwKICAgICAgICAnPGltZyBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7aGVpZ2h0OmF1dG87ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowOyInLAogICAgICApOwogICAgICByZXR1cm4gbmV3Q29udGVudDsKICAgIH0sCiAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgdW5pcXVlKGFycikgewogICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7CiAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhcnIpID0+ICFyZXMuaGFzKGFyci5wcm9kdWN0X2lkKSAmJiByZXMuc2V0KGFyci5wcm9kdWN0X2lkLCAxKSk7CiAgICB9LAogICAgLy8g5ZWG5ZOBaWQKICAgIGdldFByb2R1Y3RJZChkYXRhKSB7CiAgICAgIHRoaXMuZ29vZHNfbW9kYWxzID0gZmFsc2U7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJlY29tbWVuZF9saXN0ID0gdGhpcy51bmlxdWUodGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2xpc3QuY29uY2F0KGRhdGEpKTsKICAgIH0sCiAgICAvLyDpgInmi6nmjqjojZDllYblk4EKICAgIGNoYW5nZUdvb2RzKCkgewogICAgICB0aGlzLmdvb2RzX21vZGFscyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LmdldExpc3QoKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ29vZHNDYXRlZ29yeSgpOwogICAgfSwKICAgIC8vIOmAieaLqeeUqOaIt+agh+etvgogICAgYWN0aXZlRGF0YShkYXRhTGFiZWwpIHsKICAgICAgdGhpcy5sYWJlbFNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhTGFiZWw7CiAgICB9LAogICAgLy8g5qCH562+5by556qX5YWz6ZetCiAgICBsYWJlbENsb3NlKCkgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIoOmZpOeUqOaIt+agh+etvgogICAgY2xvc2VMYWJlbChsYWJlbCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmRhdGFMYWJlbC5pbmRleE9mKHRoaXMuZGF0YUxhYmVsLmZpbHRlcigoZCkgPT4gZC5pZCA9PSBsYWJlbC5pZClbMF0pOwogICAgICB0aGlzLmRhdGFMYWJlbC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOaJk+W8gOmAieaLqeeUqOaIt+agh+etvgogICAgb3BlbkxhYmVsKHJvdykgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKChlKSA9PiB7CiAgICAgICAgLy8gdGhpcy4kcmVmcy51c2VyTGFiZWwudXNlckxhYmVsKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhTGFiZWwpKSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVuaXF1ZXMoc29uZ3MpIHsKICAgICAgbGV0IHJlc3VsdCA9IHt9OwogICAgICBsZXQgZmluYWxSZXN1bHQgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb25ncy5sZW5ndGg7IGkrKykgewogICAgICAgIHJlc3VsdFtzb25nc1tpXS5wcm9kdWN0X2lkXSA9IHNvbmdzW2ldOwogICAgICB9CiAgICAgIGZvciAobGV0IGl0ZW0gaW4gcmVzdWx0KSB7CiAgICAgICAgZmluYWxSZXN1bHQucHVzaChyZXN1bHRbaXRlbV0pOwogICAgICB9CiAgICAgIHJldHVybiBmaW5hbFJlc3VsdDsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmVSZWNvbW1lbmQoaSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5yZWNvbW1lbmRfbGlzdC5zcGxpY2UoaSwgMSk7CiAgICB9LAogICAgd2F0Y2hBY3Rpdml0eSgpIHsKICAgICAgbGV0IG1hcmtldGluZyA9IFtdCiAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hY3Rpdml0eS5tYXAoKGVsKSA9PiB7CiAgICAgICAgaWYgKGVsID09ICfpu5jorqQnKSB7CiAgICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgICAgfQogICAgICAgIGlmIChlbCA9PSAn56eS5p2AJyAmJiBjaGVja0FycmF5KCdzZWNraWxsJykpIHsKICAgICAgICAgIG1hcmtldGluZy5wdXNoKGVsKTsKICAgICAgICB9IAogICAgICAgICBpZiAoZWwgPT0gJ+egjeS7tycgJiYgY2hlY2tBcnJheSgnYmFyZ2FpbicpKSB7CiAgICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgICAgfSAKICAgICAgICAgaWYgKGVsID09ICfmi7zlm6InICYmIGNoZWNrQXJyYXkoJ2NvbWJpbmF0aW9uJykpIHsKICAgICAgICAgIG1hcmtldGluZy5wdXNoKGVsKTsKICAgICAgICB9IAogICAgICB9KTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYWN0aXZpdHkgPSBtYXJrZXRpbmcKICAgIH0sCiAgfSwKfTsK"},null]}