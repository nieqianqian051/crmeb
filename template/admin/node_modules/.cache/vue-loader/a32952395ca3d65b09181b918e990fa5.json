{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/tagsView/contextmenu.vue?vue&type=style&index=0&id=2a4dc6e5&scoped=true&lang=scss","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/tagsView/contextmenu.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/sass-loader/dist/cjs.js","mtime":1746465018452},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jdXN0b20tY29udGV4dG1lbnUgewogIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlciB0b3A7CiAgei1pbmRleDogMjE5MDsKICBwb3NpdGlvbjogZml4ZWQ7CiAgLmVsLWRyb3Bkb3duLW1lbnVfX2l0ZW0gewogICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgaSB7CiAgICAgIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OwogICAgfQogIH0KfQo="},{"version":3,"sources":["contextmenu.vue"],"names":[],"mappings":";AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"contextmenu.vue","sourceRoot":"src/layout/navBars/tagsView","sourcesContent":["<template>\n  <div>\n    <transition name=\"el-zoom-in-center\">\n      <ul\n        class=\"el-dropdown-menu el-popper el-dropdown-menu--medium custom-contextmenu\"\n        :style=\"`top: ${dropdowns.y}px;left: ${dropdowns.x}px;`\"\n        x-placement=\"bottom-end\"\n        id=\"contextmenu\"\n        v-show=\"isShow\"\n      >\n        <li\n          class=\"el-dropdown-menu__item\"\n          v-for=\"(v, k) in dropdownList\"\n          :key=\"k\"\n          @click=\"onCurrentContextmenuClick(v.id)\"\n        >\n          <template v-if=\"!v.affix\">\n            <i :class=\"v.icon\"></i>\n            <span>{{ $t(v.txt) }}</span>\n          </template>\n        </li>\n        <div x-arrow class=\"popper__arrow\" :style=\"{ left: `${arrowLeft}px` }\"></div>\n      </ul>\n    </transition>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'layoutTagsViewContextmenu',\n  props: {\n    dropdown: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      isShow: false,\n      dropdownList: [\n        { id: 0, txt: 'message.tagsView.refresh', affix: false, icon: 'el-icon-refresh-right' },\n        { id: 1, txt: 'message.tagsView.close', affix: false, icon: 'el-icon-close' },\n        { id: 2, txt: 'message.tagsView.closeOther', affix: false, icon: 'el-icon-circle-close' },\n        { id: 3, txt: 'message.tagsView.closeAll', affix: false, icon: 'el-icon-folder-delete' },\n      ],\n      path: {},\n      arrowLeft: 5,\n    };\n  },\n  computed: {\n    dropdowns() {\n      // 99 为 `Dropdown 下拉菜单` 的宽度\n      if (this.dropdown.x + 99 > document.documentElement.clientWidth) {\n        return {\n          x: document.documentElement.clientWidth - 99 - 5,\n          y: this.dropdown.y,\n        };\n      } else {\n        return this.dropdown;\n      }\n    },\n  },\n  mounted() {\n    // 监听页面监听进行右键菜单的关闭\n    document.body.addEventListener('click', this.closeContextmenu);\n  },\n  methods: {\n    // 当前项菜单点击\n    onCurrentContextmenuClick(id) {\n      this.$emit('currentContextmenuClick', { id, path: this.path });\n    },\n    // 打开右键菜单：判断是否固定，固定则不显示关闭按钮\n    openContextmenu(item) {\n      this.path = item.path;\n      item.meta.isAffix ? (this.dropdownList[1].affix = true) : (this.dropdownList[1].affix = false);\n      this.closeContextmenu();\n      setTimeout(() => {\n        this.isShow = true;\n      }, 80);\n    },\n    // 关闭右键菜单\n    closeContextmenu() {\n      this.isShow = false;\n    },\n  },\n  destroyed() {\n    // 页面卸载时，移除右键菜单监听事件\n    document.body.removeEventListener('click', this.closeContextmenu);\n  },\n  // 监听下拉菜单位置\n  watch: {\n    dropdown: {\n      handler({ x }) {\n        if (x + 99 > document.documentElement.clientWidth)\n          this.arrowLeft = 99 - (document.documentElement.clientWidth - x);\n        else this.arrowLeft = 10;\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.custom-contextmenu {\n  transform-origin: center top;\n  z-index: 2190;\n  position: fixed;\n  .el-dropdown-menu__item {\n    font-size: 12px !important;\n    white-space: nowrap;\n    i {\n      font-size: 12px !important;\n    }\n  }\n}\n</style>\n"]}]}