{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/components/PriceChange.vue?vue&type=style&index=0&id=c0dbd7dc&scoped=true&lang=css","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/components/PriceChange.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmlucHV0IHsKICBkaXNwbGF5OiBibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgYmFja2dyb3VuZDogbm9uZTsKICBjb2xvcjogaW5oZXJpdDsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiBjdXJyZW50Y29sb3I7CiAgZm9udDogaW5oZXJpdDsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICBsZXR0ZXItc3BhY2luZzogaW5oZXJpdDsKICB0ZXh0LWFsaWduOiBpbmhlcml0OwogIHRleHQtaW5kZW50OiBpbmhlcml0OwogIHRleHQtdHJhbnNmb3JtOiBpbmhlcml0OwogIHRleHQtc2hhZG93OiBpbmhlcml0OwogIGJvcmRlcjogbm9uZTsKfQovKkBpbXBvcnQgJy4uLy4uLy4uL3N0eWxlcy9yZXNldC5jc3MnOyovCi5wcmljZUNoYW5nZSB7CiAgcG9zaXRpb246IGZpeGVkOwogIHdpZHRoOiA1LjhyZW07CiAgaGVpZ2h0OiA2LjdyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXItcmFkaXVzOiAwLjFyZW07CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIG1hcmdpbi1sZWZ0OiAtMi45cmVtOwogIG1hcmdpbi10b3A6IC0zLjM1cmVtOwogIHotaW5kZXg6IDk5OwogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7CiAgLW8tdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7CiAgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dCAwczsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgLW8tdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAtbW96LXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgLW1zLXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICBvcGFjaXR5OiAwOwp9Ci5wcmljZUNoYW5nZS5vbiB7CiAgb3BhY2l0eTogMTsKICB0cmFuc2Zvcm06IHNjYWxlKDEpOwogIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAtby10cmFuc2Zvcm06IHNjYWxlKDEpOwogIC1tb3otdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAtbXMtdHJhbnNmb3JtOiBzY2FsZSgxKTsKfQoucHJpY2VDaGFuZ2UgLnByaWNlVGl0bGUgewogIGJhY2tncm91bmQ6IHVybCgnLi4vLi4vLi4vYXNzZXRzL2ltYWdlcy9wcmljZXRpdGxlLmpwZycpIG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEuNnJlbTsKICBib3JkZXItcmFkaXVzOiAwLjFyZW0gMC4xcmVtIDAgMDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAwLjRyZW07CiAgY29sb3I6ICNmZmY7CiAgbGluZS1oZWlnaHQ6IDEuNnJlbTsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnByaWNlQ2hhbmdlIC5wcmljZVRpdGxlIC5pY29uZm9udFlJIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZm9udC1zaXplOiAwLjRyZW07CiAgcmlnaHQ6IDAuMjZyZW07CiAgdG9wOiAwLjIzcmVtOwogIHdpZHRoOiAwLjRyZW07CiAgaGVpZ2h0OiAwLjRyZW07CiAgbGluZS1oZWlnaHQ6IDAuNHJlbTsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgewogIHBhZGRpbmc6IDAgMC40cmVtOwp9Ci5wcmljZUNoYW5nZSAubGlzdENoYW5nZSAuaXRlbSB7CiAgaGVpZ2h0OiAxLjAzcmVtOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTNlM2UzOwogIGZvbnQtc2l6ZTogMC4zMnJlbTsKICBjb2xvcjogIzMzMzsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gLm1vbmV5IHsKICBjb2xvcjogIzY2NjsKICB3aWR0aDogM3JlbTsKICB0ZXh0LWFsaWduOiByaWdodDsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gLm1vbmV5IC5pY29uZm9udFlJIHsKICBmb250LXNpemU6IDAuMzJyZW07CiAgbWFyZ2luLWxlZnQ6IDAuMnJlbTsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gLm1vbmV5IGlucHV0IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgY29sb3I6ICNjY2M7CiAgYm9yZGVyOiBub25lOwp9Ci5wcmljZUNoYW5nZSAubGlzdENoYW5nZSAuaXRlbSAubW9uZXkgaW5wdXQub24gewogIGNvbG9yOiAjNjY2Owp9Ci5wcmljZUNoYW5nZSAubW9kaWZ5IHsKICBmb250LXNpemU6IDAuMzJyZW07CiAgY29sb3I6ICNmZmY7CiAgd2lkdGg6IDQuOXJlbTsKICBoZWlnaHQ6IDAuOXJlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbGluZS1oZWlnaHQ6IDAuOXJlbTsKICBib3JkZXItcmFkaXVzOiAwLjQ1cmVtOwogIGJhY2tncm91bmQtY29sb3I6ICMyMjkxZjg7CiAgbWFyZ2luOiAwLjUzcmVtIGF1dG8gMCBhdXRvOwp9Ci5wcmljZUNoYW5nZSAubW9kaWZ5MSB7CiAgZm9udC1zaXplOiAwLjMycmVtOwogIGNvbG9yOiAjMzEyYjJiOwogIHdpZHRoOiA0LjlyZW07CiAgaGVpZ2h0OiAwLjlyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxpbmUtaGVpZ2h0OiAwLjlyZW07CiAgYm9yZGVyLXJhZGl1czogMC40NXJlbTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwogIG1hcmdpbjogMC4zcmVtIGF1dG8gMCBhdXRvOwp9Ci5wcmljZUNoYW5nZSAubGlzdENoYW5nZSB0ZXh0YXJlYSB7CiAgYm9yZGVyOiAxcHggc29saWQgI2VlZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDJyZW07CiAgbWFyZ2luLXRvcDogMC41cmVtOwogIGJvcmRlci1yYWRpdXM6IDAuMXJlbTsKICBjb2xvcjogIzMzMzsKICBwYWRkaW5nOiAwLjJyZW07CiAgZm9udC1zaXplOiAwLjNyZW07Cn0K"},{"version":3,"sources":["PriceChange.vue"],"names":[],"mappings":";AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PriceChange.vue","sourceRoot":"src/pages/kefu/components","sourcesContent":["<template>\n  <div>\n    <div class=\"priceChange\" :class=\"change === true ? 'on' : ''\">\n      <div class=\"priceTitle\">\n        {{ status === 0 ? (orderInfo.refund_status === 1 ? '立即退款' : '一键改价') : '订单备注' }}\n        <span class=\"iconfontYI icon-guanbi\" @click=\"close\"></span>\n      </div>\n      <div class=\"listChange\" v-if=\"status === 0\">\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>商品总价(¥)</div>\n          <div class=\"money\">{{ orderInfo.total_price }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>原始邮费(¥)</div>\n          <div class=\"money\">{{ orderInfo.pay_postage }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>实际支付(¥)</div>\n          <div class=\"money\">\n            <input type=\"text\" v-model=\"price\" :class=\"focus === true ? 'on' : ''\" @focus=\"priceChange\" />\n          </div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 1\">\n          <div>实际支付(¥)</div>\n          <div class=\"money\">{{ orderInfo.pay_price }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 1\">\n          <div>退款金额(¥)</div>\n          <div class=\"money\">\n            <input type=\"text\" v-model=\"refund_price\" :class=\"focus === true ? 'on' : ''\" @focus=\"priceChange\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"listChange\" v-else>\n        <textarea\n          :placeholder=\"orderInfo.remark ? orderInfo.remark : '请填写备注信息...'\"\n          v-model=\"remark\"\n          maxlength=\"100\"\n        ></textarea>\n      </div>\n      <div class=\"modify\" @click=\"save\">\n        {{ orderInfo.refund_status === 0 || status === 1 ? '立即修改' : '确认退款' }}\n      </div>\n      <div class=\"modify1\" @click=\"refuse\" v-if=\"orderInfo.refund_status === 1 && status === 0\">拒绝退款</div>\n    </div>\n    <div class=\"maskModel\" @touchmove.prevent v-show=\"change === true\"></div>\n  </div>\n</template>\n<script>\nimport { required, num } from '@/utils/validate';\nimport { validatorDefaultCatch } from '@/libs/dialog';\nimport { orderRemark, editPriceApi, orderRefundApi } from '@/api/kefu';\nexport default {\n  name: 'PriceChange',\n  components: {},\n  props: {\n    change: Boolean,\n    orderInfo: {\n      type: Object,\n      default: null,\n    },\n    status: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data: function () {\n    return {\n      focus: false,\n      price: 0,\n      refund_price: 0,\n      remark: '',\n    };\n  },\n  watch: {\n    orderInfo: function () {\n      this.price = this.orderInfo.pay_price;\n      this.refund_price = this.orderInfo.pay_price;\n      this.remark = this.orderInfo.remark;\n    },\n  },\n  methods: {\n    priceChange: function () {\n      this.focus = true;\n    },\n    close: function () {\n      this.price = this.orderInfo.pay_price;\n      this.$emit('closeChange', false);\n    },\n    save() {\n      this.savePrice({\n        price: this.price,\n        refund_price: this.refund_price,\n        type: 1,\n        remark: this.remark,\n        id: this.orderInfo.id,\n        order_id: this.orderInfo.order_id,\n      });\n    },\n    async savePrice(opt) {\n      let that = this,\n        data = {},\n        price = opt.price,\n        refund_price = opt.refund_price,\n        refund_status = that.orderInfo.refund_status,\n        remark = opt.remark;\n      if (that.status == 0 && refund_status === 0) {\n        try {\n          await this.$validator({\n            price: [required(required.message('金额')), num(num.message('金额'))],\n          }).validate({ price });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.total_price = this.orderInfo.total_price;\n        data.total_postage = this.orderInfo.total_price;\n        data.pay_postage = this.orderInfo.pay_postage;\n        data.gain_integral = this.orderInfo.gain_integral;\n        data.pay_price = opt.price;\n        data.order_id = opt.order_id;\n        editPriceApi(opt.id, data)\n          .then(() => {\n            this.$emit('closechange', false);\n            that.$dialog.success('改价成功');\n          })\n          .catch((error) => {\n            that.$dialog.error(error.msg);\n          });\n      } else if (that.status == 0 && refund_status === 1) {\n        try {\n          await this.$validator({\n            refund_price: [required(required.message('金额')), num(num.message('金额'))],\n          }).validate({ refund_price });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.price = opt.refund_price;\n        data.type = opt.type;\n        data.order_id = opt.order_id;\n        orderRefundApi(data).then(\n          (res) => {\n            this.$emit('closechange', false);\n            that.$dialog.success('操作成功');\n          },\n          (err) => {\n            this.$emit('closechange', false);\n            that.$dialog.error(err.msg);\n          },\n        );\n      } else {\n        try {\n          await this.$validator({\n            remark: [required(required.message('备注'))],\n          }).validate({ remark });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.remark = remark;\n        data.order_id = opt.order_id;\n        orderRemark(data).then(\n          (res) => {\n            this.$emit('closechange', false);\n            that.$dialog.success('提交成功');\n          },\n          (err) => {\n            this.$emit('closechange', false);\n            that.$dialog.error(err.msg);\n          },\n        );\n      }\n    },\n    refuse() {\n      this.savePrice({\n        price: this.price,\n        refund_price: this.refund_price,\n        type: 2,\n        remark: this.remark,\n        id: this.orderInfo.id,\n        order_id: this.orderInfo.order_id,\n      });\n    },\n  },\n};\n</script>\n<style scoped>\ninput {\n  display: block;\n  height: 100%;\n  background: none;\n  color: inherit;\n  opacity: 1;\n  -webkit-text-fill-color: currentcolor;\n  font: inherit;\n  line-height: inherit;\n  letter-spacing: inherit;\n  text-align: inherit;\n  text-indent: inherit;\n  text-transform: inherit;\n  text-shadow: inherit;\n  border: none;\n}\n/*@import '../../../styles/reset.css';*/\n.priceChange {\n  position: fixed;\n  width: 5.8rem;\n  height: 6.7rem;\n  background-color: #fff;\n  border-radius: 0.1rem;\n  top: 50%;\n  left: 50%;\n  margin-left: -2.9rem;\n  margin-top: -3.35rem;\n  z-index: 99;\n  transition: all 0.3s ease-in-out 0s;\n  -webkit-transition: all 0.3s ease-in-out 0s;\n  -o-transition: all 0.3s ease-in-out 0s;\n  -moz-transition: all 0.3s ease-in-out 0s;\n  -webkit-transform: scale(0);\n  -o-transform: scale(0);\n  -moz-transform: scale(0);\n  -ms-transform: scale(0);\n  transform: scale(0);\n  opacity: 0;\n}\n.priceChange.on {\n  opacity: 1;\n  transform: scale(1);\n  -webkit-transform: scale(1);\n  -o-transform: scale(1);\n  -moz-transform: scale(1);\n  -ms-transform: scale(1);\n}\n.priceChange .priceTitle {\n  background: url('../../../assets/images/pricetitle.jpg') no-repeat;\n  background-size: 100% 100%;\n  width: 100%;\n  height: 1.6rem;\n  border-radius: 0.1rem 0.1rem 0 0;\n  text-align: center;\n  font-size: 0.4rem;\n  color: #fff;\n  line-height: 1.6rem;\n  position: relative;\n}\n.priceChange .priceTitle .iconfontYI {\n  position: absolute;\n  font-size: 0.4rem;\n  right: 0.26rem;\n  top: 0.23rem;\n  width: 0.4rem;\n  height: 0.4rem;\n  line-height: 0.4rem;\n}\n.priceChange .listChange {\n  padding: 0 0.4rem;\n}\n.priceChange .listChange .item {\n  height: 1.03rem;\n  border-bottom: 1px solid #e3e3e3;\n  font-size: 0.32rem;\n  color: #333;\n}\n.priceChange .listChange .item .money {\n  color: #666;\n  width: 3rem;\n  text-align: right;\n}\n.priceChange .listChange .item .money .iconfontYI {\n  font-size: 0.32rem;\n  margin-left: 0.2rem;\n}\n.priceChange .listChange .item .money input {\n  width: 100%;\n  height: 100%;\n  text-align: right;\n  color: #ccc;\n  border: none;\n}\n.priceChange .listChange .item .money input.on {\n  color: #666;\n}\n.priceChange .modify {\n  font-size: 0.32rem;\n  color: #fff;\n  width: 4.9rem;\n  height: 0.9rem;\n  text-align: center;\n  line-height: 0.9rem;\n  border-radius: 0.45rem;\n  background-color: #2291f8;\n  margin: 0.53rem auto 0 auto;\n}\n.priceChange .modify1 {\n  font-size: 0.32rem;\n  color: #312b2b;\n  width: 4.9rem;\n  height: 0.9rem;\n  text-align: center;\n  line-height: 0.9rem;\n  border-radius: 0.45rem;\n  background-color: #eee;\n  margin: 0.3rem auto 0 auto;\n}\n.priceChange .listChange textarea {\n  border: 1px solid #eee;\n  width: 100%;\n  height: 2rem;\n  margin-top: 0.5rem;\n  border-radius: 0.1rem;\n  color: #333;\n  padding: 0.2rem;\n  font-size: 0.3rem;\n}\n</style>\n"]}]}