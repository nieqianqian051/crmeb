{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productList/taoBao.vue?vue&type=style&index=0&id=19e32458&scoped=true&lang=stylus","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productList/taoBao.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/index.js","mtime":1746465207601},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cjo6di1kZWVwIC5pdnUtZm9ybS1pdGVtLWNvbnRlbnQgewogIGxpbmUtaGVpZ2h0OiB1bnNldCAhaW1wb3J0YW50Owp9CgouQm94IC5pdnUtcmFkaW8td3JhcHBlciB7CiAgbWFyZ2luLXJpZ2h0OiAyNXB4Owp9CgouQm94IC5udW1QdXQgewogIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7Cn0KLmFkZHsKICBjb2xvcjogIzJEOGNGMDsKICBjdXJzb3IgcG9pbnRlcgp9Ci5sdW5Cb3ggewogIC8qIHdpZHRoIDgwcHggKi8KICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYm9yZGVyOiAxcHggc29saWQgIzBiYjIwYzsKfQoKLnBpY3RydWVCb3ggewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQoKLnBpY3RydWUgewogIHdpZHRoOiA4NXB4OwogIGhlaWdodDogODVweDsKICBib3JkZXI6IDFweCBkb3R0ZWQgcmdiYSgwLCAwLCAwLCAwLjEpOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwoKICBpbWcgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgfQp9CgoucGljdHJ1ZVRhYiB7CiAgd2lkdGg6IDQwcHggIWltcG9ydGFudDsKICBoZWlnaHQ6IDQwcHggIWltcG9ydGFudDsKfQoKLnVwTG9hZCB7CiAgd2lkdGg6IDQwcHg7CiAgaGVpZ2h0OiA0MHB4OwogIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wMik7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouaXZ1LXRhYmxlLXdyYXBwZXIgewogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2RjZGVlMjsKICBib3JkZXItdG9wOiAxcHggc29saWQgI2RjZGVlMjsKfQoKLmZ0IHsKICBjb2xvcjogcmVkOwp9Cg=="},{"version":3,"sources":["taoBao.vue"],"names":[],"mappings":";AAuzBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"taoBao.vue","sourceRoot":"src/pages/product/productList","sourcesContent":["<template>\n  <div class=\"Box\" v-loading=\"spinShow\">\n    <div>\n      <div>\n        生成的商品默认是没有上架的，请手动上架商品！\n        <a href=\"https://doc.crmeb.com/single/v5/7785\" v-if=\"copyConfig.copy_type == 2\" target=\"_blank\">如何配置密钥</a>\n        <span v-else\n          >您当前剩余{{ copyConfig.copy_num }}条采集次数，<a class=\"add\" @click=\"mealPay('copy')\">增加采集次数</a></span\n        >\n      </div>\n      <div>商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置</div>\n    </div>\n    <el-form\n      class=\"formValidate mt20\"\n      ref=\"formValidate\"\n      :model=\"formValidate\"\n      :rules=\"ruleInline\"\n      label-width=\"120px\"\n      label-position=\"right\"\n      @submit.native.prevent\n    >\n      <el-row :gutter=\"24\">\n        <!--<el-col :span=\"24\">-->\n        <!--<el-form-item label=\"\"  label-for=\"\">-->\n        <!--<el-radio-group v-model=\"artFrom.type\">-->\n        <!--<el-radio label=\"taobao\">淘宝</el-radio>-->\n        <!--<el-radio label=\"tmall\">天猫</el-radio>-->\n        <!--<el-radio label=\"jd\">京东</el-radio>-->\n        <!--<el-radio label=\"pdd\">拼多多</el-radio>-->\n        <!--<el-radio label=\"suning\">苏宁</el-radio>-->\n        <!--<el-radio label=\"1688\">1688</el-radio>-->\n        <!--</el-radio-group>-->\n        <!--</el-form-item>-->\n        <!--</el-col>-->\n        <el-col span=\"15\">\n          <el-form-item label=\"链接地址：\">\n            <el-input\n              search\n              enter-button=\"确定\"\n              v-model=\"soure_link\"\n              placeholder=\"请输入链接地址\"\n              class=\"numPut\"\n              @on-search=\"add\"\n            />\n          </el-form-item>\n        </el-col>\n        <div>\n          <div v-if=\"isData\">\n            <el-col :span=\"24\" class=\"\">\n              <el-form-item label=\"商品名称：\" prop=\"store_name\">\n                <el-input v-model=\"formValidate.store_name\" placeholder=\"请输入商品名称\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品简介：\" prop=\"store_info\" label-for=\"store_info\">\n                <el-input v-model=\"formValidate.store_info\" type=\"textarea\" :rows=\"3\" placeholder=\"请输入商品简介\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品分类：\" prop=\"cate_id\">\n                <!-- <el-select v-model=\"formValidate.cate_id\" multiple>\n                  <el-option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{\n                    item.html + item.cate_name\n                  }}</el-option>\n                </el-select> -->\n                <el-cascader\n                  v-model=\"formValidate.cate_id\"\n                  size=\"small\"\n                  :options=\"treeSelect\"\n                  :props=\"{ multiple: true, emitPath: false, checkStrictly: true }\"\n                  clearable\n                ></el-cascader>\n              </el-form-item>\n            </el-col>\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"商品关键字：\" prop=\"keyword\" label-for=\"keyword\">\n                <el-input v-model=\"formValidate.keyword\" placeholder=\"请输入商品关键字\" />\n              </el-form-item>\n            </el-col>\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"单位：\" prop=\"unit_name\" label-for=\"unit_name\">\n                <el-input v-model=\"formValidate.unit_name\" placeholder=\"请输入单位\" />\n              </el-form-item>\n            </el-col>\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"虚拟销量：\" label-for=\"ficti\">\n                <el-input-number\n                  :controls=\"false\"\n                  class=\"perW100\"\n                  v-model=\"formValidate.ficti\"\n                  placeholder=\"请输入虚拟销量\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"积分：\" label-for=\"give_integral\">\n                <el-input-number\n                  :controls=\"false\"\n                  class=\"perW100\"\n                  v-model=\"formValidate.give_integral\"\n                  placeholder=\"请输入积分\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"运费模板：\" prop=\"temp_id\">\n                <el-select v-model=\"formValidate.temp_id\" clearable>\n                  <el-option\n                    v-for=\"(item, index) in templateList\"\n                    :value=\"item.id\"\n                    :key=\"index\"\n                    :label=\"item.name\"\n                  ></el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <!--<el-col v-bind=\"grid\">-->\n            <!--<el-form-item label=\"邮费：\"  label-for=\"postage\">-->\n            <!--<el-input-number controls-position=\"right\"  v-model=\"formValidate.postage\" placeholder=\"请输入邮费\"  />-->\n            <!--</el-form-item>-->\n            <!--</el-col>-->\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品图：\">\n                <div class=\"pictrueBox\">\n                  <div class=\"pictrue\" v-if=\"formValidate.image\" v-viewer>\n                    <img v-lazy=\"formValidate.image\" />\n                  </div>\n                </div>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品轮播图：\">\n                <div class=\"acea-row\" v-viewer>\n                  <div\n                    class=\"lunBox mr15\"\n                    v-for=\"(item, index) in formValidate.slider_image\"\n                    :key=\"index\"\n                    draggable=\"true\"\n                    @dragstart=\"handleDragStart($event, item)\"\n                    @dragover.prevent=\"handleDragOver($event, item)\"\n                    @dragenter=\"handleDragEnter($event, item)\"\n                    @dragend=\"handleDragEnd($event, item)\"\n                  >\n                    <div class=\"pictrue\"><img v-lazy=\"item\" /></div>\n                    <ButtonGroup size=\"small\">\n                      <el-button @click.native=\"checked(item, index)\">主图</el-button>\n                      <el-button @click.native=\"handleRemove(index)\">移除</el-button>\n                    </ButtonGroup>\n                  </div>\n                </div>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"批量设置：\" class=\"labeltop\" v-if=\"formValidate.attrs\">\n                <el-col :xl=\"23\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\n                  <el-form-item>\n                    <el-table :data=\"oneFormBatch\" border>\n                      <el-table-column\n                        :label=\"item.title\"\n                        :min-width=\"item.minWidth\"\n                        v-for=\"(item, index) in columns\"\n                        :key=\"index\"\n                      >\n                        <template slot-scope=\"scope\">\n                          <template v-if=\"item.key\">\n                            <div>\n                              <span>{{ scope.row[item.key] }}</span>\n                            </div>\n                          </template>\n                          <template v-else-if=\"item.slot === 'pic'\">\n                            <div\n                              class=\"acea-row row-middle row-center-wrapper\"\n                              @click=\"modalPicTap('dan', 'duopi', scope.$index)\"\n                            >\n                              <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                                <img v-lazy=\"oneFormBatch[0].pic\" />\n                              </div>\n                              <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                                <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                              </div>\n                            </div>\n                          </template>\n                          <template v-else-if=\"item.slot === 'price'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].price\"\n                              :min=\"0\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'cost'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].cost\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'ot_price'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].ot_price\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'stock'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].stock\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'bar_code'\">\n                            <el-input v-model=\"oneFormBatch[0].bar_code\"></el-input>\n                          </template>\n                          <template v-else-if=\"item.slot === 'weight'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].weight\"\n                              :min=\"0\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'volume'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"oneFormBatch[0].volume\"\n                              :min=\"0\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                        </template>\n                      </el-table-column>\n                      <el-table-column label=\"操作\" fixed=\"right\" width=\"170\">\n                        <template slot-scope=\"\">\n                          <a @click=\"batchAdd\">添加</a>\n                          <el-divider direction=\"vertical\"></el-divider>\n                          <a @click=\"batchDel\">清空</a>\n                        </template>\n                      </el-table-column>\n                    </el-table>\n                  </el-form-item>\n                </el-col>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品规格：\" props=\"spec_type\" label-for=\"spec_type\">\n                <!-- 单规格表格-->\n                <el-col :xl=\"23\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\n                  <el-form-item>\n                    <el-table :data=\"items\" border>\n                      <el-table-column\n                        :label=\"item.title\"\n                        :min-width=\"item.minWidth\"\n                        v-for=\"(item, index) in columns\"\n                        :key=\"index\"\n                      >\n                        <template slot-scope=\"scope\">\n                          <template v-if=\"item.key\">\n                            <div>\n                              <span>{{ scope.row[item.key] }}</span>\n                            </div>\n                          </template>\n                          <template v-else-if=\"item.slot === 'pic'\">\n                            <div\n                              class=\"acea-row row-middle row-center-wrapper\"\n                              @click=\"modalPicTap('dan', scope.$index)\"\n                            >\n                              <div class=\"pictrue pictrueTab\" v-if=\"formValidate.attrs[scope.$index].pic\">\n                                <img v-lazy=\"formValidate.attrs[scope.$index].pic\" />\n                              </div>\n                              <div class=\"upLoad upLoadTab acea-row row-center-wrapper\" v-else>\n                                <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                              </div>\n                            </div>\n                          </template>\n                          <template v-else-if=\"item.slot === 'price'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].price\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'cost'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].cost\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'ot_price'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].ot_price\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'stock'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].stock\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'bar_code'\">\n                            <el-input v-model=\"formValidate.attrs[scope.$index].bar_code\"></el-input>\n                          </template>\n                          <template v-else-if=\"item.slot === 'weight'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].weight\"\n                              :min=\"0\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                          <template v-else-if=\"item.slot === 'volume'\">\n                            <el-input-number\n                              :controls=\"false\"\n                              v-model=\"formValidate.attrs[scope.$index].volume\"\n                              :min=\"0\"\n                              class=\"priceBox\"\n                            ></el-input-number>\n                          </template>\n                        </template>\n                      </el-table-column>\n                      <el-table-column label=\"操作\" fixed=\"right\" width=\"170\">\n                        <template slot-scope=\"scope\">\n                          <a @click=\"delAttrTable(scope.$index)\">删除</a>\n                        </template>\n                      </el-table-column>\n                    </el-table>\n                  </el-form-item>\n                </el-col>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品详情：\">\n                <WangEditor\n                  style=\"width: 100%\"\n                  :content=\"formValidate.description\"\n                  @editorContent=\"getEditorContent\"\n                ></WangEditor>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item>\n                <el-button\n                  type=\"primary\"\n                  :loading=\"modal_loading\"\n                  class=\"submission\"\n                  @click=\"handleSubmit('formValidate')\"\n                  >提交</el-button\n                >\n              </el-form-item>\n            </el-col>\n          </div>\n        </div>\n      </el-row>\n    </el-form>\n    <el-dialog\n      :visible.sync=\"modalPic\"\n      width=\"950px\"\n      title=\"上传商品图\"\n      :mask-closable=\"false\"\n      :close-on-click-modal=\"false\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        :gridBtn=\"gridBtn\"\n        :gridPic=\"gridPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { crawlFromApi, cascaderListApi, crawlSaveApi, productGetTemplateApi, copyConfigApi } from '@/api/product';\nimport uploadPictures from '@/components/uploadPictures';\nimport WangEditor from '@/components/wangEditor/index.vue';\n\nexport default {\n  name: 'taoBao',\n  data() {\n    return {\n      // 批量设置表格data\n      oneFormBatch: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ],\n      columnsBatch: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '重量（KG）',\n          slot: 'weight',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '体积(m³)',\n          slot: 'volume',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          align: 'center',\n          minWidth: 140,\n        },\n      ],\n      modal_loading: false,\n      images: '',\n      soure_link: '',\n      modalPic: false,\n      isChoice: '',\n      spinShow: false,\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      columns: [],\n      treeSelect: [],\n      ruleInline: {\n        cate_id: [\n          {\n            required: true,\n            message: '请选择商品分类',\n            trigger: 'change',\n            type: 'array',\n            min: '1',\n          },\n        ],\n        temp_id: [\n          {\n            required: true,\n            message: '请选择运费模板',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n      },\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      grid2: {\n        xl: 12,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      formValidate: {\n        store_name: '',\n        cate_id: [],\n        temp_id: '',\n        keyword: '',\n        unit_name: '',\n        store_info: '',\n        image: '',\n        slider_image: [],\n        description: '',\n        ficti: 0,\n        give_integral: 0,\n        is_show: 0,\n        price: 0,\n        cost: 0,\n        ot_price: 0,\n        stock: 0,\n        soure_link: '',\n        description_images: '',\n        postage: 0,\n        attrs: [],\n        items: [],\n      },\n      items: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ],\n      templateList: [],\n      copyConfig: {\n        copy_type: 2,\n        copy_num: 0,\n      },\n      isData: false,\n      artFrom: {\n        type: 'taobao',\n        url: '',\n      },\n      tableIndex: 0,\n      content: '',\n    };\n  },\n  components: { WangEditor, uploadPictures },\n  computed: {},\n\n  created() {\n    this.goodsCategory();\n  },\n  mounted() {\n    this.productGetTemplate();\n    this.getCopyConfig();\n  },\n  methods: {\n    mealPay(val) {\n      this.$router.push({\n        path: this.$routeProStr + '/setting/sms/sms_pay/index',\n        query: { type: val },\n      });\n    },\n    batchDel() {\n      this.oneFormBatch = [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ];\n    },\n    batchAdd() {\n      let formBatch = this.oneFormBatch[0];\n      this.$set(\n        this.formValidate,\n        'attrs',\n        this.formValidate.attrs.map((item) => {\n          if (formBatch.pic) {\n            item.pic = formBatch.pic;\n          }\n          if (formBatch.price > 0) {\n            item.price = formBatch.price;\n          }\n          if (formBatch.cost > 0) {\n            item.cost = formBatch.cost;\n          }\n          if (formBatch.ot_price > 0) {\n            item.ot_price = formBatch.ot_price;\n          }\n          if (formBatch.stock > 0) {\n            item.stock = formBatch.stock;\n          }\n          if (formBatch.bar_code) {\n            item.bar_code = formBatch.bar_code;\n          }\n          if (formBatch.weight) {\n            item.weight = formBatch.weight;\n          }\n          if (formBatch.volume) {\n            item.weight = formBatch.volume;\n          }\n          return item;\n        }),\n      );\n    },\n    getEditorContent(data) {\n      this.content = data;\n    },\n    // 删除表格中的属性\n    delAttrTable(index) {\n      this.items.splice(index, 1);\n    },\n    // 获取运费模板；\n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    getCopyConfig() {\n      copyConfigApi().then((res) => {\n        this.copyConfig.copy_type = res.data.copy_type;\n        this.copyConfig.copy_num = res.data.copy_num;\n      });\n    },\n    // 删除图片\n    handleRemove(i) {\n      this.formValidate.slider_image.splice(i, 1);\n    },\n    // 选择主图\n    checked(item, index) {\n      this.formValidate.image = item;\n    },\n    // 商品分类；\n    goodsCategory() {\n      cascaderListApi(1)\n        .then((res) => {\n          this.treeSelect = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 生成表单\n    add() {\n      if (this.soure_link) {\n        var reg = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/;\n        if (!reg.test(this.soure_link)) {\n          return this.$message.warning('请输入以http开头的地址！');\n        }\n        this.spinShow = true;\n        this.artFrom.url = this.soure_link;\n        crawlFromApi(this.artFrom)\n          .then((res) => {\n            let info = res.data.info;\n            this.columns = info.info.header;\n            this.formValidate = info;\n            this.formValidate.soure_link = this.soure_link;\n            this.formValidate.attrs = info.info.value;\n            if (this.formValidate.image) {\n              this.oneFormBatch[0].pic = this.formValidate.image;\n            }\n            this.items = this.formValidate.attrs;\n            this.isData = true;\n            this.spinShow = false;\n          })\n          .catch((res) => {\n            this.spinShow = false;\n            this.$message.error(res.msg);\n          });\n      } else {\n        this.$message.warning('请输入链接地址！');\n      }\n    },\n    // 提交\n    handleSubmit(name) {\n      this.formValidate.description = this.content;\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.modal_loading = true;\n          // this.formValidate.attrs = [\n          //     {\n          //         pic: this.images,\n          //         price: this.formValidate.price,\n          //         cost: this.formValidate.cost,\n          //         ot_price: this.formValidate.ot_price,\n          //         stock: this.formValidate.stock,\n          //         bar_code: this.formValidate.bar_code,\n          //         weight: this.formValidate.weight,\n          //         volume: this.formValidate.volume\n          //     }\n          // ];\n          // this.formValidate.items = [];\n          crawlSaveApi(this.formValidate)\n            .then((res) => {\n              this.$message.success('商品默认为不上架状态请手动上架商品!');\n              setTimeout(() => {\n                this.modal_loading = false;\n              }, 500);\n              setTimeout(() => {\n                this.$emit('on-close');\n              }, 600);\n            })\n            .catch((res) => {\n              this.modal_loading = false;\n              this.$message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.cate_id) {\n            this.$message.warning('请填写商品分类！');\n          }\n        }\n      });\n    },\n    // 点击商品图\n    modalPicTap(tit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      if (this.tableIndex === 'duopi') {\n        this.oneFormBatch[0].pic = pc.att_dir;\n      } else {\n        this.formValidate.attrs[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    // 首先把div变成可以放置的元素，即重写dragenter/dragover\n    handleDragOver(e) {\n      // e.dataTransfer.dropEffect=\"move\";//在dragenter中针对放置目标来设置!\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      // 为需要移动的元素设置dragstart事件\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.slider_image];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.slider_image = newItems;\n    },\n    // 添加自定义弹窗\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        'test-dialog',\n        function (editor, uiName) {\n          // 创建 dialog\n          let dialog = new window.UE.ui.Dialog({\n            iframeUrl: this.$routeProStr + '/widget.images/index.html?fodder=dialog',\n            editor: editor,\n            name: uiName,\n            title: '上传图片',\n            cssRules: 'width:960px;height:550px;padding:20px;',\n          });\n          this.dialog = dialog;\n          let btn = new window.UE.ui.Button({\n            name: 'dialog-button',\n            title: '上传图片',\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n          return btn;\n        },\n        37,\n      );\n      // window.UE.registerUI('test-dialog', function (editor, uiName) {\n      //     let dialog = new window.UE.ui.Dialog({\n      //         iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n      //         editor: editor,\n      //         name: uiName,\n      //         title: '上传图片',\n      //         cssRules: 'width:960px;height:550px;padding:20px;'\n      //     })\n      //     this.dialog = dialog\n      //     var btn = new window.UE.ui.Button({\n      //         name: 'dialog-button',\n      //         title: '上传图片',\n      //         cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n      //         onclick: function () {\n      //             dialog.render()\n      //             dialog.open()\n      //         }\n      //     })\n      //     return btn\n      // }, 37)\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n::v-deep .ivu-form-item-content {\n  line-height: unset !important;\n}\n\n.Box .ivu-radio-wrapper {\n  margin-right: 25px;\n}\n\n.Box .numPut {\n  width: 100% !important;\n}\n.add{\n  color: #2D8cF0;\n  cursor pointer\n}\n.lunBox {\n  /* width 80px */\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #0bb20c;\n}\n\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrue {\n  width: 85px;\n  height: 85px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.pictrueTab {\n  width: 40px !important;\n  height: 40px !important;\n}\n\n.upLoad {\n  width: 40px;\n  height: 40px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.ft {\n  color: red;\n}\n</style>\n"]}]}