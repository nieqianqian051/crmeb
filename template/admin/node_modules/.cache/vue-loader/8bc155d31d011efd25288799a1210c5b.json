{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navMenu/horizontal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navMenu/horizontal.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBTdWJJdGVtIGZyb20gJ0AvbGF5b3V0L25hdk1lbnUvc3ViSXRlbS52dWUnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ25hdk1lbnVIb3Jpem9udGFsJywKICBjb21wb25lbnRzOiB7IFN1Ykl0ZW0gfSwKICBwcm9wczogewogICAgbWVudUxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLAogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnbWVudScsIFsnYWN0aXZlUGF0aCddKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0QWN0aXZlOiBudWxsLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRFbE1lbnVPZmZzZXRMZWZ0KCk7CiAgICB0aGlzLnNldEN1cnJlbnRSb3V0ZXJIaWdobGlnaHQodGhpcy4kcm91dGUucGF0aCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDorr7nva7mqKrlkJHmu5rliqjmnaHlj6/ku6XpvKDmoIfmu5rova7mu5rliqgKICAgIG9uRWxNZW51SG9yaXpvbnRhbFNjcm9sbChlKSB7CiAgICAgIGNvbnN0IGV2ZW50RGVsdGEgPSBlLndoZWVsRGVsdGEgfHwgLWUuZGVsdGFZICogNDA7CiAgICAgIHRoaXMuJHJlZnMuZWxNZW51SG9yaXpvbnRhbFNjcm9sbFJlZi4kcmVmcy53cmFwLnNjcm9sbExlZnQgPQogICAgICAgIHRoaXMuJHJlZnMuZWxNZW51SG9yaXpvbnRhbFNjcm9sbFJlZi4kcmVmcy53cmFwLnNjcm9sbExlZnQgKyBldmVudERlbHRhIC8gNDsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbmlbDmja7vvIzpobXpnaLliLfmlrDml7bvvIzmu5rliqjmnaHmu5rliqjliLDlr7nlupTkvY3nva4KICAgIGluaXRFbE1lbnVPZmZzZXRMZWZ0KCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IGVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbC1tZW51LmVsLW1lbnUtLWhvcml6b250YWwgbGkuaXMtYWN0aXZlJyk7CiAgICAgICAgaWYgKCFlbHMpIHJldHVybiBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLmVsTWVudUhvcml6b250YWxTY3JvbGxSZWYuJHJlZnMud3JhcC5zY3JvbGxMZWZ0ID0gZWxzLm9mZnNldExlZnQ7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi3r+eUsei/h+a7pOmAkuW9kuWHveaVsAogICAgZmlsdGVyUm91dGVzRnVuKGFycikgewogICAgICByZXR1cm4gYXJyCiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uaXNIaWRlKQogICAgICAgIC5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgIGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTsKICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSBpdGVtLmNoaWxkcmVuID0gdGhpcy5maWx0ZXJSb3V0ZXNGdW4oaXRlbS5jaGlsZHJlbik7CiAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkvKDpgIHlvZPliY3lrZDnuqfmlbDmja7liLDoj5zljZXkuK0KICAgIHNldFNlbmRDbGFzc2ljQ2hpbGRyZW4ocGF0aCkgewogICAgICBjb25zdCBjdXJyZW50UGF0aFNwbGl0ID0gcGF0aC5zcGxpdCgnLycpOwogICAgICBsZXQgY3VycmVudERhdGEgPSB7fTsKICAgICAgdGhpcy5maWx0ZXJSb3V0ZXNGdW4odGhpcy4kc3RvcmUuc3RhdGUucm91dGVzTGlzdC5yb3V0ZXNMaXN0KS5tYXAoKHYsIGspID0+IHsKICAgICAgICBpZiAodi5wYXRoID09PSBgLyR7Y3VycmVudFBhdGhTcGxpdFsxXX1gKSB7CiAgICAgICAgICB2WydrJ10gPSBrOwogICAgICAgICAgY3VycmVudERhdGFbJ2l0ZW0nXSA9IFt7IC4uLnYgfV07CiAgICAgICAgICBjdXJyZW50RGF0YVsnY2hpbGRyZW4nXSA9IFt7IC4uLnYgfV07CiAgICAgICAgICBpZiAodi5jaGlsZHJlbikgY3VycmVudERhdGFbJ2NoaWxkcmVuJ10gPSB2LmNoaWxkcmVuOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBjdXJyZW50RGF0YTsKICAgIH0sCiAgICAvLyDoj5zljZXmv4DmtLvlm57osIMKICAgIG9uSG9yaXpvbnRhbFNlbGVjdChwYXRoKSB7CiAgICAgIHRoaXMuYnVzLiRlbWl0KCdzZXRTZW5kQ2xhc3NpY0NoaWxkcmVuJywgdGhpcy5zZXRTZW5kQ2xhc3NpY0NoaWxkcmVuKHBhdGgpKTsKICAgIH0sCiAgICAvLyDorr7nva7pobXpnaLlvZPliY3ot6/nlLHpq5jkuq4KICAgIHNldEN1cnJlbnRSb3V0ZXJIaWdobGlnaHQocGF0aCkgewogICAgICBjb25zdCBjdXJyZW50UGF0aFNwbGl0ID0gcGF0aC5zcGxpdCgnLycpOwogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWcubGF5b3V0ID09PSAnY2xhc3NpYycpIHsKICAgICAgICB0aGlzLmRlZmF1bHRBY3RpdmUgPSBgLyR7Y3VycmVudFBhdGhTcGxpdFsxXX1gOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGVmYXVsdEFjdGl2ZSA9IHBhdGg7CiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs6Lev55Sx55qE5Y+Y5YyWCiAgICAkcm91dGU6IHsKICAgICAgaGFuZGxlcih0bykgewogICAgICAgIHRoaXMuc2V0Q3VycmVudFJvdXRlckhpZ2hsaWdodCh0by5wYXRoKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["horizontal.vue"],"names":[],"mappings":";AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"horizontal.vue","sourceRoot":"src/layout/navMenu","sourcesContent":["<template>\n  <div class=\"el-menu-horizontal-warp\">\n    <el-scrollbar @wheel.native.prevent=\"onElMenuHorizontalScroll\" ref=\"elMenuHorizontalScrollRef\">\n      <el-menu\n        router\n        :default-active=\"activePath || defaultActive\"\n        background-color=\"transparent\"\n        mode=\"horizontal\"\n        @select=\"onHorizontalSelect\"\n      >\n        <template v-for=\"val in menuList\">\n          <el-submenu\n            :index=\"val.path\"\n            v-if=\"val.is_show && val.children && val.children.length > 0\"\n            :key=\"val.path\"\n          >\n            <template slot=\"title\">\n              <!-- <i class=\"ivu-icon\" :class=\"val.icon ? 'el-icon-' + val.icon : ''\"></i> -->\n              <span>{{ $t(val.title) }}</span>\n            </template>\n            <SubItem :chil=\"val.children\" />\n          </el-submenu>\n          <template v-else-if=\"val.is_show\">\n            <el-menu-item :index=\"val.path\" :key=\"val.path\">\n              <template slot=\"title\" v-if=\"!val.isLink || (val.isLink && val.isIframe)\">\n                <!-- <i class=\"ivu-icon\" :class=\"val.icon ? 'el-icon-' + val.icon : ''\"></i> -->\n                {{ $t(val.title) }}\n              </template>\n              <template slot=\"title\" v-else>\n                <a :href=\"val.isLink\" target=\"_blank\">\n                  <Icon :type=\"val.icon ? val.icon : ''\" />\n                  {{ $t(val.title) }}\n                </a>\n              </template>\n            </el-menu-item>\n          </template>\n        </template>\n      </el-menu>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport SubItem from '@/layout/navMenu/subItem.vue';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'navMenuHorizontal',\n  components: { SubItem },\n  props: {\n    menuList: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  computed: {\n    ...mapState('menu', ['activePath']),\n  },\n  data() {\n    return {\n      defaultActive: null,\n    };\n  },\n  mounted() {\n    this.initElMenuOffsetLeft();\n    this.setCurrentRouterHighlight(this.$route.path);\n  },\n  methods: {\n    // 设置横向滚动条可以鼠标滚轮滚动\n    onElMenuHorizontalScroll(e) {\n      const eventDelta = e.wheelDelta || -e.deltaY * 40;\n      this.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft =\n        this.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft + eventDelta / 4;\n    },\n    // 初始化数据，页面刷新时，滚动条滚动到对应位置\n    initElMenuOffsetLeft() {\n      this.$nextTick(() => {\n        let els = document.querySelector('.el-menu.el-menu--horizontal li.is-active');\n        if (!els) return false;\n        this.$refs.elMenuHorizontalScrollRef.$refs.wrap.scrollLeft = els.offsetLeft;\n      });\n    },\n    // 路由过滤递归函数\n    filterRoutesFun(arr) {\n      return arr\n        .filter((item) => !item.isHide)\n        .map((item) => {\n          item = Object.assign({}, item);\n          if (item.children) item.children = this.filterRoutesFun(item.children);\n          return item;\n        });\n    },\n    // 传送当前子级数据到菜单中\n    setSendClassicChildren(path) {\n      const currentPathSplit = path.split('/');\n      let currentData = {};\n      this.filterRoutesFun(this.$store.state.routesList.routesList).map((v, k) => {\n        if (v.path === `/${currentPathSplit[1]}`) {\n          v['k'] = k;\n          currentData['item'] = [{ ...v }];\n          currentData['children'] = [{ ...v }];\n          if (v.children) currentData['children'] = v.children;\n        }\n      });\n      return currentData;\n    },\n    // 菜单激活回调\n    onHorizontalSelect(path) {\n      this.bus.$emit('setSendClassicChildren', this.setSendClassicChildren(path));\n    },\n    // 设置页面当前路由高亮\n    setCurrentRouterHighlight(path) {\n      const currentPathSplit = path.split('/');\n      if (this.$store.state.themeConfig.themeConfig.layout === 'classic') {\n        this.defaultActive = `/${currentPathSplit[1]}`;\n      } else {\n        this.defaultActive = path;\n      }\n    },\n  },\n  watch: {\n    // 监听路由的变化\n    $route: {\n      handler(to) {\n        this.setCurrentRouterHighlight(to.path);\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n::v-deep .el-scrollbar__bar.is-horizontal {\n  height: 0;\n}\n.el-menu-horizontal-warp {\n  flex: 1;\n  overflow: hidden;\n  margin-right: 30px;\n  ::v-deep .el-scrollbar__bar.is-vertical {\n    display: none;\n  }\n  ::v-deep .el-scrollbar__wrap {\n    overflow-y: hidden !important;\n  }\n  ::v-deepa {\n    width: 100%;\n  }\n  .el-menu.el-menu--horizontal {\n    display: flex;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n  }\n}\n</style>\n"]}]}