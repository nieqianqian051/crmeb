{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/product/components/productRanking.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/product/components/productRanking.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHN0YXRpc3RpY1Byb2R1Y3RMaXN0QXBpIH0gZnJvbSAnQC9hcGkvc3RhdGlzdGljJzsKaW1wb3J0IGdvb2RzRGV0YWlsIGZyb20gJy4uL2NvbXBvbmVudHMvZ29vZHNEZXRhaWwnOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQC91dGlscy92YWxpZGF0ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdFJhbmtpbmcnLAogIGNvbXBvbmVudHM6IHsKICAgIGdvb2RzRGV0YWlsLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkYXRlRnVuOiB0aGlzLiR2YWxpZGF0ZUZ1biwKICAgICAgb3B0aW9uczogdGhpcy4kdGltZU9wdGlvbnMsCiAgICAgIG5hbWU6ICfov5EzMOWkqScsCiAgICAgIHRpbWVWYWw6IFtdLAogICAgICBkYXRhVGltZTogJycsCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGxpbWl0OiAxMCwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNvcnQ6ICd2aXNpdCcsCiAgICAgICAgZGF0YTogJycsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0YWJMaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGdvb2RzSWQ6ICcnLAogICAgICBpc1Byb2R1Y3RCb3g6IGZhbHNlLAogICAgICBsaXN0OiBbCiAgICAgICAgewogICAgICAgICAgdmFsOiAndmlzaXQnLAogICAgICAgICAgbmFtZTogJ+a1j+iniOmHjycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWw6ICd1c2VyJywKICAgICAgICAgIG5hbWU6ICforr/lrqLmlbAnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsOiAnY2FydCcsCiAgICAgICAgICBuYW1lOiAn5Yqg6LSt5Lu25pWwJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ29yZGVycycsCiAgICAgICAgICBuYW1lOiAn5LiL5Y2V5Lu25pWwJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ3ByaWNlJywKICAgICAgICAgIG5hbWU6ICfmlK/ku5jph5Hpop0nLAogICAgICAgIH0sCiAgICAgICAgLy8gewogICAgICAgIC8vICAgdmFsOiAncHJvZml0JywKICAgICAgICAvLyAgIG5hbWU6ICfmr5vliKnnjocnLAogICAgICAgIC8vIH0sCiAgICAgICAgewogICAgICAgICAgdmFsOiAnY29sbGVjdCcsCiAgICAgICAgICBuYW1lOiAn5pS26JeP5pWwJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ2NoYW5nZXMnLAogICAgICAgICAgbmFtZTogJ+iuv+Wuoi3mlK/ku5jovazljJbnjocnLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7CiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LnNldFRpbWUobmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBuZXcgRGF0ZSgpLmdldE1vbnRoKCksIG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMjkpKSk7CiAgICB0aGlzLnRpbWVWYWwgPSBbc3RhcnQsIGVuZF07CiAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhID0gZm9ybWF0RGF0ZShzdGFydCwgJ3l5eXkvTU0vZGQnKSArICctJyArIGZvcm1hdERhdGUoZW5kLCAneXl5eS9NTS9kZCcpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLnRpbWVWYWwgPSBlOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhID0gdGhpcy50aW1lVmFsID8gdGhpcy50aW1lVmFsLmpvaW4oJy0nKSA6ICcnOwogICAgICB0aGlzLm5hbWUgPSB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhOwogICAgfSwKICAgIGNoYW5nZU1lbnUobmFtZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5zb3J0ID0gbmFtZTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLy8g5YiX6KGoCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBzdGF0aXN0aWNQcm9kdWN0TGlzdEFwaSh0aGlzLmZvcm1WYWxpZGF0ZSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50YWJMaXN0ID0gZGF0YTsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBsb29rKHJvdykgewogICAgICB0aGlzLmdvb2RzSWQgPSByb3cucHJvZHVjdF9pZDsKICAgICAgdGhpcy5pc1Byb2R1Y3RCb3ggPSB0cnVlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["productRanking.vue"],"names":[],"mappings":";AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"productRanking.vue","sourceRoot":"src/pages/statistic/product/components","sourcesContent":["<template>\n  <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt-16\">\n    <div class=\"acea-row row-between-wrapper mb20\">\n      <h4 class=\"statics-header-title\">商品排行</h4>\n      <div class=\"acea-row\">\n        <el-select v-model=\"formValidate.sort\" style=\"width: 200px\" class=\"mr20\" @change=\"changeMenu\">\n          <el-option v-for=\"item in list\" :value=\"item.val\" :key=\"item.val\" :label=\"item.name\"></el-option>\n        </el-select>\n        <el-date-picker\n          :editable=\"false\"\n          clearable\n          @change=\"onchangeTime\"\n          v-model=\"timeVal\"\n          format=\"yyyy/MM/dd\"\n          type=\"datetimerange\"\n          value-format=\"yyyy/MM/dd\"\n          range-separator=\"-\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          class=\"mr20\"\n        ></el-date-picker>\n        <el-button type=\"primary\" class=\"mr20\" @click=\"getList\">查询</el-button>\n      </div>\n    </div>\n    <el-table ref=\"selection\" :data=\"tabList\" v-loading=\"loading\" empty-text=\"暂无数据\" highlight-current-row>\n      <el-table-column label=\"ID\" min-width=\"80\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.product_id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品图片\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <div class=\"tabBox_img\" v-viewer>\n            <img v-lazy=\"scope.row.image\" />\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品名称\" min-width=\"130\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.store_name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"浏览量\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.visit }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"访客数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.user }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"加购件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.cart }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"下单件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.orders }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.pay }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付金额\" min-width=\"110\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.price }}</span>\n        </template>\n      </el-table-column>\n      <!-- <el-table-column label=\"毛利率(%)\" min-width=\"130\">\n        <template slot-scope=\"scope\">\n          <span v-text=\"$tools.accMul(scope.row.profit, 100).toFixed(2) + '%'\"></span>\n        </template>\n      </el-table-column> -->\n      <el-table-column label=\"收藏数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.collect }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"访客-支付转化率(%)\" min-width=\"140\">\n        <template slot-scope=\"scope\">\n          <span>{{ $tools.accMul(scope.row.changes, 100) + '%' }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 商品弹窗 -->\n    <div v-if=\"isProductBox\">\n      <div class=\"bg\" @click=\"isProductBox = false\"></div>\n      <goodsDetail :goodsId=\"goodsId\"></goodsDetail>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport { statisticProductListApi } from '@/api/statistic';\nimport goodsDetail from '../components/goodsDetail';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'productRanking',\n  components: {\n    goodsDetail,\n  },\n  data() {\n    return {\n      validateFun: this.$validateFun,\n      options: this.$timeOptions,\n      name: '近30天',\n      timeVal: [],\n      dataTime: '',\n      formValidate: {\n        limit: 10,\n        page: 1,\n        sort: 'visit',\n        data: '',\n      },\n      loading: false,\n      tabList: [],\n      total: 0,\n      goodsId: '',\n      isProductBox: false,\n      list: [\n        {\n          val: 'visit',\n          name: '浏览量',\n        },\n        {\n          val: 'user',\n          name: '访客数',\n        },\n        {\n          val: 'cart',\n          name: '加购件数',\n        },\n        {\n          val: 'orders',\n          name: '下单件数',\n        },\n        {\n          val: 'price',\n          name: '支付金额',\n        },\n        // {\n        //   val: 'profit',\n        //   name: '毛利率',\n        // },\n        {\n          val: 'collect',\n          name: '收藏数',\n        },\n        {\n          val: 'changes',\n          name: '访客-支付转化率',\n        },\n      ],\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formValidate.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.data = this.timeVal ? this.timeVal.join('-') : '';\n      this.name = this.formValidate.data;\n    },\n    changeMenu(name) {\n      this.formValidate.sort = name;\n      this.getList();\n    },\n    // 列表\n    getList() {\n      this.loading = true;\n      statisticProductListApi(this.formValidate)\n        .then(async (res) => {\n          let data = res.data;\n          this.tabList = data;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    look(row) {\n      this.goodsId = row.product_id;\n      this.isProductBox = true;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.header {\n  &-title {\n    font-size: 16px;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  &-time {\n    font-size: 12px;\n    color: #000000;\n    opacity: 0.45;\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n.bg\n    position fixed\n    left 0\n    top 0\n    width 100%\n    height 100%\n    background rgba(0,0,0,0.5)\n    z-index: 11;\n::v-deep .happy-scroll-content\n    width 100%\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-col{\n        height: 100px;\n        position: relative;\n        border: 1px solid #eee;\n    }\n</style>\n"]}]}