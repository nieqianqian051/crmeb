{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/cms/addArticle/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/cms/addArticle/index.vue","mtime":1721751096000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB1cGxvYWRQaWN0dXJlcyBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkUGljdHVyZXMnOwppbXBvcnQgV2FuZ0VkaXRvciBmcm9tICdAL2NvbXBvbmVudHMvd2FuZ0VkaXRvci9pbmRleC52dWUnOwppbXBvcnQgeyBjbXNBZGRBcGksIGNyZWF0ZUFwaSwgZmluZEFsbExhYmVsQnlTb3VyY2VBcGksIHVwbG9hZEFydGljbGVJbWFnZXNBcGkgfSBmcm9tICdAL2FwaS9jbXMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2FkZEFydGljbGUnLAogIGNvbXBvbmVudHM6IHsgdXBsb2FkUGljdHVyZXMsIFdhbmdFZGl0b3IgfSwKICBkYXRhKCkgewogICAgY29uc3QgdmFsaWRhdGVVcGxvYWQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZUlkKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+S4iuS8oOWbvuaWh+WwgemdoicpKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHZhbGlkYXRlVXBsb2FkMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmxhYmVsSWRzLmxlbmd0aD09PTApIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+mAieaLqeaWh+eroOWIhuexuycpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nOiB7fSwKICAgICAgaXNDaG9pY2U6ICfljZXpgIknLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDgsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWRQaWM6IHsKICAgICAgICB4bDogNiwKICAgICAgICBsZzogOCwKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDEyLAogICAgICAgIHhzOiAxMiwKICAgICAgfSwKICAgICAgZ3JpZEJ0bjogewogICAgICAgIHhsOiA0LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiA4LAogICAgICAgIHNtOiA4LAogICAgICAgIHhzOiA4LAogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICB0aXRsZTogJycsCgkJaW1hZ2VJZDogJycsCiAgICAgICAgY29udGVudDogJycsCiAgICAgICAgZGVzYzogJycsCiAgICAgICAgbGFiZWxJZHM6IFtdLAogICAgICB9LAoJICBtYWlqaUFydGljbGVJbWFnZXM6IFtdLAogICAgICBjb250ZW50OiAnJywKICAgICAgcnVsZVZhbGlkYXRlOiB7CiAgICAgICAgdGl0bGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIGxhYmVsSWRzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlVXBsb2FkMiwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGltYWdlSWQ6IFt7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IHZhbGlkYXRlVXBsb2FkLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICBjb250ZW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+eroOWGheWuuScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICB9LAogICAgICB2YWx1ZTogJycsCiAgICAgIG1vZGFsUGljOiBmYWxzZSwKICAgICAgdGVtcGxhdGU6IGZhbHNlLAogICAgICB0cmVlRGF0YTogW10sCiAgICAgIGZvcm1WYWxpZGF0ZTI6IHsKICAgICAgICB0eXBlOiAxLAogICAgICB9LAogICAgICBteUNvbmZpZzogewogICAgICAgIGF1dG9IZWlnaHRFbmFibGVkOiBmYWxzZSwgLy8g57yW6L6R5Zmo5LiN6Ieq5Yqo6KKr5YaF5a655pKR6auYCiAgICAgICAgaW5pdGlhbEZyYW1lSGVpZ2h0OiA1MDAsIC8vIOWIneWni+WuueWZqOmrmOW6pgogICAgICAgIGluaXRpYWxGcmFtZVdpZHRoOiAnMTAwJScsIC8vIOWIneWni+WuueWZqOWuveW6pgogICAgICAgIFVFRElUT1JfSE9NRV9VUkw6ICcvVUVkaXRvci8nLAogICAgICAgIHNlcnZlclVybDogJycsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSksCiAgICBsYWJlbFdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6ICcxMDBweCc7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdGhpcy5nZXREZXRhaWxzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSB7CiAgICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgaW1hZ2VJZDogJycsCiAgICAgICAgICBpbWc6ICcnLAogICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICBkZXNjOiAnJywKICAgICAgICAgIGxhYmVsSWRzOiBbXSwKICAgICAgICB9OwogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RWRpdG9yQ29udGVudChkYXRhKSB7CiAgICAgIHRoaXMuY29udGVudCA9IGRhdGE7CiAgICB9LAogICAgLy8g6YCJ5oup5Zu+54mHCiAgICBtb2RhbFBpY1RhcCgpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICB9LAogICAgLy8g6YCJ5Lit5Zu+54mHCiAgICBnZXRQaWMocGMpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1nID0gcGMuYXR0X2RpcjsKICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIhuexuwogICAgZ2V0Q2xhc3MoKSB7CgkJZmluZEFsbExhYmVsQnlTb3VyY2VBcGkoe3NvdXJjZTogIum6puWQieeugOS7iyJ9KS50aGVuKHJlcz0+ewoJCSAgdGhpcy50cmVlRGF0YSA9IHJlcy5kYXRhLmZpbHRlcihsYWJlbCA9PiBsYWJlbC5saXN0U2hvdyA9PSAzKS5tYXAobGFiZWwgPT4gewoJCQkJY29uc3QgbmV3TGFiZWwgPSB7dmFsdWU6IGxhYmVsLnV1SWQsIGxhYmVsOiBsYWJlbC5uYW1lfQoJCQkJbmV3TGFiZWwuY2hpbGRyZW4gPSByZXMuZGF0YS5maWx0ZXIoY2wgPT4gY2wub3JkZXJObyA9PSBsYWJlbC5vcmRlck5vKQoJCQkJCS5tYXAoY2wgPT4gewoJCQkJCSAgaWYgKGNsLm5hbWUgPT0gJ+e9rumhtuaOqOiNkCcpIGNsLm5hbWUgKz0gJ++8iOWwgemdojcwMCoyNzXvvIknCgkJCQkJICBlbHNlIGNsLm5hbWUgKz0gJ++8iOWwgemdojM3OCoyNzjvvIknCgkJCQkJICByZXR1cm4gT2JqZWN0LmFzc2lnbih7dmFsdWU6IGNsLnV1SWQsIGxhYmVsOiBjbC5uYW1lID09IGxhYmVsLm5hbWUgJiYgJ+aZrumAmuaWh+eroO+8iOWwgemdojI4MCoxNzbvvIknIHx8IGNsLm5hbWV9KQoJCQkJCX0pCgkJCQlyZXR1cm4gbmV3TGFiZWwKCQkJfSkKCSAgICB9KQogICAgfSwKICAgIC8vIOaPkOS6pOaVsOaNrgogICAgb25zdWJtaXQobmFtZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb250ZW50ID0gdGhpcy5jb250ZW50OwogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY21zQWRkQXBpKHRoaXMuZm9ybVZhbGlkYXRlKQogICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvY21zL2FydGljbGUvaW5kZXgnIH0pOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCS8vIOS4iuS8oOaWh+eroOWwgemdouWbvueJhwoJYXN5bmMgYWRkTWFpamlBcnRpY2xlSW1hZ2UocGFyYW0pIHsKCSAgICBjb25zdCBpbWFnZURhdGEgPSBuZXcgRm9ybURhdGEoKQoJICAgIGltYWdlRGF0YS5hcHBlbmQoJ3VwbG9hZEZpbGVzJywgcGFyYW0uZmlsZSkKCSAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRBcnRpY2xlSW1hZ2VzQXBpKGltYWdlRGF0YSkKCSAgICBpZiAocmVzdWx0LmNvZGUgIT0gMjAwKSB0aGlzLiRtZXNzYWdlLmVycm9yKGDkuIrkvKDmlofnq6DlsIHpnaLlpLHotKXvvIzor7fnqI3lkI7ph43or5XvvIFgKQoJICAgIHRoaXMubWFpamlBcnRpY2xlSW1hZ2VzID0gW09iamVjdC5hc3NpZ24ocmVzdWx0LmRhdGFbMF0sIHtpc01haW46IDF9KV0KCSAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZUlkID0gcmVzdWx0LmRhdGFbMF0udXVJZAoJfSwKICAgIC8vIOaWh+eroOivpuaDhQogICAgZ2V0RGV0YWlscygpIHsKICAgICAgY3JlYXRlQXBpKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA/IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA6IHVuZGVmaW5lZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSBkYXRhOwoJCSAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VJZCA9IGRhdGEuaW1nLnV1SWQKCQkgIHRoaXMubWFpamlBcnRpY2xlSW1hZ2VzID0gW09iamVjdC5hc3NpZ24oZGF0YS5pbWcsIHtpc01haW46IDF9KV0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgdGhpcy5nZXREZXRhaWxzKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDbGFzcygpOwogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/cms/addArticle","sourcesContent":["<template>\n  <div class=\"article-manager\">\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.params.id ? '编辑文章' : '添加文章'\"\n      :backUrl=\"$routeProStr + '/cms/article/index'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\">\n      <el-form\n        class=\"form\"\n        ref=\"formValidate\"\n        :model=\"formValidate\"\n        :rules=\"ruleValidate\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        @submit.native.prevent\n      >\n        <div class=\"goodsTitle acea-row\">\n          <div class=\"title\">文章信息</div>\n        </div>\n        <div class=\"grid_box\">\n          <el-form-item label=\"标题：\" prop=\"title\" label-for=\"title\">\n            <el-input v-model=\"formValidate.title\" placeholder=\"请输入\" class=\"content_width\" />\n          </el-form-item>\n          <el-form-item label=\"文章标签：\" label-for=\"labelIds\" prop=\"labelIds\">\n\t\t\t<el-cascader \n\t\t\t\tclass=\"content_width\" \n\t\t\t\tsize=\"small\" \n\t\t\t\tv-model=\"formValidate.labelIds\" \n\t\t\t\t:options=\"treeData\" \n\t\t\t\tplaceholder=\"请选择文章标签\"\n\t\t\t\t/>\n          </el-form-item>\n          <el-form-item label=\"文章描述：\" prop=\"desc\" label-for=\"desc\">\n            <el-input v-model=\"formValidate.desc\" type=\"textarea\" :rows=\"8\" placeholder=\"请输入文章描述\" class=\"content_width\" />\n          </el-form-item>\n\t\t  <el-form-item label=\"文章封面\" prop=\"imageId\">\n\t\t      <div class=\"picBox\">\n\t\t\t\t  <el-upload action=\"\" list-type=\"picture-card\" :limit=\"1\"\n\t\t\t\t\t :http-request=\"addMaijiArticleImage\"\n\t\t\t\t\t :file-list=\"maijiArticleImages\"\n\t\t\t\t\t :on-exceed=\"() => $message.warning(`只能上传1张文章封面`)\">\n\t\t\t\t\t <div class=\"upLoad acea-row row-center-wrapper\">\n\t\t\t\t\t   <i class=\"el-icon-plus\" style=\"font-size: 24px\"></i>\n\t\t\t\t\t </div>\n\t\t\t\t </el-upload>\n\t\t      </div>\n\t\t\t  <div class=\"tip\">建议尺寸：230 x 160 </div>\n\t\t  </el-form-item>\n        </div>\n        <div class=\"goodsTitle acea-row\">\n          <div class=\"title\">文章内容</div>\n        </div>\n        <el-form-item label=\"文章内容：\" prop=\"content\">\n          <WangEditor style=\"width: 90%\" :content=\"formValidate.content\" @editorContent=\"getEditorContent\"></WangEditor>\n        </el-form-item>\n        <el-button type=\"primary\" class=\"submission\" @click=\"onsubmit('formValidate')\">提交</el-button>\n      </el-form>\n      <el-dialog :visible.sync=\"modalPic\" width=\"950px\" title=\"上传商品图\" :close-on-click-modal=\"false\">\n        <uploadPictures\n          :isChoice=\"isChoice\"\n          @getPic=\"getPic\"\n          :gridBtn=\"gridBtn\"\n          :gridPic=\"gridPic\"\n          v-if=\"modalPic\"\n        ></uploadPictures>\n      </el-dialog>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport uploadPictures from '@/components/uploadPictures';\nimport WangEditor from '@/components/wangEditor/index.vue';\nimport { cmsAddApi, createApi, findAllLabelBySourceApi, uploadArticleImagesApi } from '@/api/cms';\nexport default {\n  name: 'addArticle',\n  components: { uploadPictures, WangEditor },\n  data() {\n    const validateUpload = (rule, value, callback) => {\n      if (this.formValidate.imageId) {\n        callback();\n      } else {\n        callback(new Error('请上传图文封面'));\n      }\n    };\n    const validateUpload2 = (rule, value, callback) => {\n      if (this.formValidate.labelIds.length===0) {\n        callback(new Error('请选择文章分类'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      dialog: {},\n      isChoice: '单选',\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      loading: false,\n      formValidate: {\n        id: undefined,\n        title: '',\n\t\timageId: '',\n        content: '',\n        desc: '',\n        labelIds: [],\n      },\n\t  maijiArticleImages: [],\n      content: '',\n      ruleValidate: {\n        title: [{ required: true, message: '请输入标题', trigger: 'blur' }],\n        labelIds: [\n          {\n            required: true,\n            validator: validateUpload2,\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n        imageId: [{ required: true, validator: validateUpload, trigger: 'change' }],\n        content: [{ required: true, message: '请输入文章内容', trigger: 'change' }],\n      },\n      value: '',\n      modalPic: false,\n      template: false,\n      treeData: [],\n      formValidate2: {\n        type: 1,\n      },\n      myConfig: {\n        autoHeightEnabled: false, // 编辑器不自动被内容撑高\n        initialFrameHeight: 500, // 初始容器高度\n        initialFrameWidth: '100%', // 初始容器宽度\n        UEDITOR_HOME_URL: '/UEditor/',\n        serverUrl: '',\n      },\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '100px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  watch: {\n    $route(to, from) {\n      if (this.$route.params.id) {\n        this.getDetails();\n      } else {\n        this.formValidate = {\n          id: undefined,\n          title: '',\n          imageId: '',\n          img: '',\n          content: '',\n          desc: '',\n          labelIds: [],\n        };\n      }\n    },\n  },\n  methods: {\n    getEditorContent(data) {\n      this.content = data;\n    },\n    // 选择图片\n    modalPicTap() {\n      this.modalPic = true;\n    },\n    // 选中图片\n    getPic(pc) {\n      this.formValidate.img = pc.att_dir;\n      this.modalPic = false;\n    },\n    // 分类\n    getClass() {\n\t\tfindAllLabelBySourceApi({source: \"麦吉简介\"}).then(res=>{\n\t\t  this.treeData = res.data.filter(label => label.listShow == 3).map(label => {\n\t\t\t\tconst newLabel = {value: label.uuId, label: label.name}\n\t\t\t\tnewLabel.children = res.data.filter(cl => cl.orderNo == label.orderNo)\n\t\t\t\t\t.map(cl => {\n\t\t\t\t\t  if (cl.name == '置顶推荐') cl.name += '（封面700*275）'\n\t\t\t\t\t  else cl.name += '（封面378*278）'\n\t\t\t\t\t  return Object.assign({value: cl.uuId, label: cl.name == label.name && '普通文章（封面280*176）' || cl.name})\n\t\t\t\t\t})\n\t\t\t\treturn newLabel\n\t\t\t})\n\t    })\n    },\n    // 提交数据\n    onsubmit(name) {\n      this.formValidate.content = this.content;\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          cmsAddApi(this.formValidate)\n            .then(async (res) => {\n              this.$message.success(res.msg);\n              setTimeout(() => {\n                this.$router.push({ path: this.$routeProStr + '/cms/article/index' });\n              }, 500);\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n\t// 上传文章封面图片\n\tasync addMaijiArticleImage(param) {\n\t    const imageData = new FormData()\n\t    imageData.append('uploadFiles', param.file)\n\t    const result = await uploadArticleImagesApi(imageData)\n\t    if (result.code != 200) this.$message.error(`上传文章封面失败，请稍后重试！`)\n\t    this.maijiArticleImages = [Object.assign(result.data[0], {isMain: 1})]\n\t    this.formValidate.imageId = result.data[0].uuId\n\t},\n    // 文章详情\n    getDetails() {\n      createApi(this.$route.params.id ? this.$route.params.id : undefined)\n        .then(async (res) => {\n          let data = res.data;\n          this.formValidate = data;\n\t\t  this.formValidate.imageId = data.img.uuId\n\t\t  this.maijiArticleImages = [Object.assign(data.img, {isMain: 1})]\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n  },\n  mounted() {\n    if (this.$route.params.id) {\n      this.getDetails();\n    }\n  },\n  created() {\n    this.getClass();\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n.grid_box {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows: auto;\n  grid-gap: 0;\n}\n.content_width {\n  width: 414px;\n}\n::v-deep .ivu-form-item-content {\n  line-height: unset !important;\n}\n.picBox {\n  display: inline-block;\n  cursor: pointer;\n}\n\n.form .goodsTitle {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n  margin-bottom: 25px;\n}\n\n.form .goodsTitle ~ .goodsTitle {\n  margin-top: 20px;\n}\n\n.form .goodsTitle .title {\n  border-bottom: 2px solid var(--prev-color-primary);\n  padding: 0 8px 12px 5px;\n  color: #000;\n  font-size: 14px;\n}\n\n.form .goodsTitle .icons {\n  font-size: 15px;\n  margin-right: 8px;\n  color: #999;\n}\n\n.form .add {\n  font-size: 12px;\n  color: var(--prev-color-primary);\n  padding: 0 12px;\n  cursor: pointer;\n}\n\n.form .radio {\n  margin-right: 20px;\n}\n\n.form .submission {\n  width: 10%;\n  margin-left: 27px;\n}\n\n.form .upLoad {\n  display: contents;\n  justify-items: center;\n  align-items: center;\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n}\n\n.form .iconfont {\n  color: #898989;\n}\n\n.form .pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 10px;\n}\n\n.form .pictrue img {\n  width: 100%;\n  height: 100%;\n}\n\n.Modals .address {\n  width: 90%;\n}\n\n.Modals .address .iconfont {\n  font-size: 20px;\n}\n.tip {\n  margin-top: 10px;\n  color: #bbb;\n  font-size: 12px;\n}\n</style>\n"]}]}