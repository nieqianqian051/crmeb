{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue?vue&type=style&index=0&id=4f4fb64e&scoped=true&lang=stylus","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/index.js","mtime":1746465207601},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cjo6di1kZWVwIC5lbC10YWJzX19pdGVtIHsKICBoZWlnaHQ6IDU0cHggIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogNTRweCAhaW1wb3J0YW50Owp9CgouY29udGVudF93aWR0aCB7CiAgd2lkdGg6IDQ2MHB4Owp9CgoubGlzdC1ncm91cCB7CiAgbWFyZ2luLWxlZnQ6IC04cHg7Cn0KCi5ib3JkZXJTdHlsZSB7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBwYWRkaW5nOiA4cHg7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgouZHJhZyB7CiAgY3Vyc29yOiBtb3ZlOwogIG1hcmdpbjogM3B4IDAKfQoKLm1vdmUtaWNvbiB7CiAgd2lkdGg6IDMwcHg7CiAgY3Vyc29yOiBtb3ZlOwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoKLm1vdmUtaWNvbiAuaWNvbmRyYWcyIHsKICBmb250LXNpemU6IDI2cHg7CiAgY29sb3I6ICNkOGQ4ZDg7Cn0KCi5tYXhXIDo6di1kZWVwIC5pdnUtc2VsZWN0LWRyb3Bkb3duIHsKICBtYXgtd2lkdGg6IDYwMHB4Owp9Cgojc2hvcHAtbWFuYWdlciAuaXZ1LXRhYmxlLXdyYXBwZXIgewogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2RjZGVlMjsKICBib3JkZXItdG9wOiAxcHggc29saWQgI2RjZGVlMjsKfQoKLm5vTGVmdCB7CiAgOjp2LWRlZXAgLml2dS1mb3JtLWl0ZW0tY29udGVudCB7CiAgICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50OwogIH0KfQoKI3Nob3BwLW1hbmFnZXIgLml2dS1mb3JtLWl0ZW0gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKI3Nob3BwLW1hbmFnZXIgLml2dS1mb3JtLWl0ZW0gLnRpcHMgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBjb2xvcjogIzk5OTsKICB0b3A6IDI5cHg7CiAgbGVmdDogLTc3cHg7CiAgZm9udC1zaXplOiAxMnB4Owp9CgouYm94LXZpZGVvLXN0eWxlIHsKICB3aWR0aDogMzc1cHg7IAogIGhlaWdodDogMjExcHg7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzA3MDcwOwogIG1hcmdpbi10b3A6IDEwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5ib3gtdmlkZW8tc3R5bGUgLmljb252IHsKICBjb2xvcjogI2ZmZjsKICBsaW5lLWhlaWdodDogMTgwcHg7CiAgd2lkdGg6IDUwcHg7CiAgaGVpZ2h0OiA1MHB4OwogIGRpc3BsYXk6IGluaGVyaXQ7CiAgZm9udC1zaXplOiAyNnB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IC03NHB4OwogIGxlZnQ6IDUwJTsKICBtYXJnaW4tbGVmdDogLTI1cHg7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouYm94LXZpZGVvLXN0eWxlIC5tYXJrIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAzMHB4OwogIHRvcDogMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cgouc3VibWlzc2lvbiB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KCi5jb2xvci1saXN0IC50aXAgewogIGNvbG9yOiAjYzljOWM5OwogIGZvbnQtc2l6ZTogMTJweDsKfQoKLmNvbG9yLWxpc3QgLmNvbG9yLWl0ZW0gewogIGhlaWdodDogMzBweDsKICBsaW5lLWhlaWdodDogMzBweDsKICBwYWRkaW5nOiAwIDEwcHg7CiAgY29sb3I6ICNmZmY7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogIGZvbnQtc2l6ZTogMTJweDsKCn0KCi5jb2xvci1saXN0IC5jb2xvci1pdGVtLmJsdWUgewogIGJhY2tncm91bmQtY29sb3I6ICMxRTlGRkY7Cn0KCi5jb2xvci1saXN0IC5jb2xvci1pdGVtLnllbGxvdyB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NCwgMTg1LCAwKTsKfQoKLmNvbG9yLWxpc3QgLmNvbG9yLWl0ZW0uZ3JlZW4gewogIGJhY2tncm91bmQtY29sb3I6ICMwMDk2ODg7Cn0KCi5jb2xvci1saXN0IC5jb2xvci1pdGVtLnJlZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VkNDAxNDsKfQoKLmNvbHVtbnNCb3ggewogIG1hcmdpbi1yaWdodDogMTBweDsKICB3aWR0aDogMjAwcHg7Cn0KCi5wcmljZUJveCB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5ydWxlc0JveCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IHdyYXA7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAuaXRlbXsKICAgIGRpc3BsYXk6ZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICB9Cn0KCi5waWN0cnVlQm94IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5waWN0cnVlVGFiIHsKICB3aWR0aDogNDBweCAhaW1wb3J0YW50OwogIGhlaWdodDogNDBweCAhaW1wb3J0YW50Owp9CgoucGljdHJ1ZSB7CiAgd2lkdGg6IDYwcHg7CiAgaGVpZ2h0OiA2MHB4OwogIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgbWFyZ2luLXJpZ2h0OiAxNXB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwoKICBpbWcgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgfQoKICAuYnRuZGVsIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHotaW5kZXg6IDE7CiAgICB3aWR0aDogMjBweCAhaW1wb3J0YW50OwogICAgaGVpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7CiAgICBsZWZ0OiA0NnB4OwogICAgdG9wOiAtNHB4OwogIH0KfQoKLnVwTG9hZCB7CiAgd2lkdGg6IDU4cHg7CiAgaGVpZ2h0OiA1OHB4OwogIGxpbmUtaGVpZ2h0OiA1OHB4OwogIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wMik7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouY3VycyB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouaW5wV2l0aCB7CiAgd2lkdGg6IDYwJTsKfQoKLmxhYmVsdG9wIHsKICA6OnYtZGVlcCAuaXZ1LWZvcm0taXRlbS1sYWJlbCB7CiAgICBmbG9hdDogbm9uZSAhaW1wb3J0YW50OwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7CiAgICBtYXJnaW4tbGVmdDogMTIwcHggIWltcG9ydGFudDsKICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgfQp9CgoudmlkZW8taWNvbiB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdodHRwczovL2Nkbi5vc3MuOWd0Lm5ldC9wcm92MS4xLzEvaWNvbnMucG5nJyk7IC8vIGNkbi5vc3MuOWd0Lm5ldC9wcm92MS4xLzEvaWNvbnMucG5nKTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJhY2tncm91bmQtcG9zaXRpb246IC05OTk5cHg7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKfQoKLnNlZSB7CiAgY29sb3I6ICMyZDhjZjA7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoudHJpcCB7CiAgY29sb3I6ICNiYmI7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBmb250LXNpemU6IDEycHg7Cn0KCgoudmlydHVhbC1kYXRhIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCi5hZGQtbW9yZSB7CiAgbWFyZ2luLXRvcDogMjBweDsKICBkaXNwbGF5OiBmbGV4Owp9CgoudmlydHVhbC10aXRsZSB7CiAgd2lkdGg6IDYwcHg7Cn0KCi5zY3JvbGwtdmlydHVhbCB7CiAgbWF4LWhlaWdodDogNDAwcHg7CiAgb3ZlcmZsb3cteTogYXV0bzsKICBtYXJnaW4tdG9wOiAxMHB4Owp9CgouZm9vdGVyIHsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgbWFyZ2luLXRvcDogMzBweDsKCiAgLmNsZWFyLCAuc3VibWl0IHsKICAgIHBhZGRpbmc6IDEwcHggMjBweDsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGNvbG9yOiAjZmZmOwogICAgY3Vyc29yOiBwb2ludGVyOwogIH0KCiAgLmNsZWFyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2M7CiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7CiAgfQoKICAuc3VibWl0IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMyZDhjZjA7CiAgfQp9CgoucGljQm94IHsKICBkaXNwbGF5OiBmbGV4Owp9CgouYnRuZGVsIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgei1pbmRleDogOTsKICB3aWR0aDogMjBweCAhaW1wb3J0YW50OwogIGhlaWdodDogMjBweCAhaW1wb3J0YW50OwogIGxlZnQ6IDQ2cHg7CiAgdG9wOiAtNHB4Owp9CgouaWZhbSB7CiAgd2lkdGg6IDM0NHB4OwogIGhlaWdodDogNjQ0cHg7CiAgYmFja2dyb3VuZDogdXJsKCcuLi8uLi8uLi9hc3NldHMvaW1hZ2VzL3Bob25lYmcucG5nJykgbm8tcmVwZWF0IGNlbnRlciB0b3A7CiAgYmFja2dyb3VuZC1zaXplOiAzNDRweCA2NDRweDsKICBwYWRkaW5nOiA0MHB4IDIwcHg7CiAgcGFkZGluZy10b3A6IDUwcHg7CiAgbWFyZ2luOiAwIGF1dG87CgogIC5jb250ZW50IHsKICAgIGhlaWdodDogNTYwcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOyAvKiBmaXJlZm94ICovCiAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8qIElFIDEwKyAqLwogICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICB9CgogIC5jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhciB7CiAgICBkaXNwbGF5OiBub25lOyAvKiBDaHJvbWUgU2FmYXJpICovCiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAw9FA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/product/productAdd","sourcesContent":["<template>\n  <div class=\"\" id=\"shopp-manager\" v-loading=\"spinShow\">\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.params.id ? '编辑商品' : '添加商品'\"\n      :backUrl=\"$routeProStr + '/product/product_list'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\" :body-style=\"{ padding: '0 20px 20px' }\">\n      <el-tabs v-model=\"currentTab\">\n        <el-tab-pane v-for=\"(item, index) in headTab\" :key=\"index\" :label=\"item.tit\" :name=\"item.name\"></el-tab-pane>\n      </el-tabs>\n      <el-form\n        class=\"formValidate mt20\"\n        ref=\"formValidate\"\n        :rules=\"ruleValidate\"\n        :model=\"formValidate\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        @submit.native.prevent\n      >\n        <!-- 基础信息-->\n        <el-row :gutter=\"24\" v-show=\"currentTab === '1'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品类型：\" props=\"is_virtual\">\n              <div\n                class=\"virtual\"\n                :class=\"formValidate.virtual_type == item.id ? 'virtual_boder' : 'virtual_boder2'\"\n                v-for=\"(item, index) in virtual\"\n                :key=\"index\"\n                @click=\"virtualbtn(item.id, 2)\"\n              >\n                <div class=\"virtual_top\">{{ item.tit }}</div>\n                <div class=\"virtual_bottom\">({{ item.tit2 }})</div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_san\"></div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_dui\">✓</div>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品分类：\" prop=\"cate_id\">\n              <!-- {{ formValidate.cate_id }}\n              <el-select v-model=\"formValidate.cate_id\" placeholder=\"请选择商品分类\" multiple class=\"content_width\">\n                <el-option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{\n                  item.html + item.cate_name\n                }}</el-option>\n              </el-select>\n              {{ formValidate.cate_id }} -->\n              <el-cascader\n                class=\"content_width\"\n                v-model=\"formValidate.cate_id\"\n                size=\"small\"\n                :options=\"treeSelect\"\n                :props=\"{ multiple: true, checkStrictly: true, emitPath: false }\"\n                clearable\n              ></el-cascader>\n              <span class=\"addfont\" @click=\"addCate\">新增分类</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品名称：\" prop=\"store_name\">\n              <el-input class=\"content_width\" v-model.trim=\"formValidate.store_name\" placeholder=\"请输入商品名称\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"单位：\" prop=\"unit_name\">\n              <el-input class=\"content_width\" v-model=\"formValidate.unit_name\" placeholder=\"请输入单位\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品轮播图：\" prop=\"slider_image\">\n              <div class=\"acea-row\">\n                <div\n                  class=\"pictrue\"\n                  v-for=\"(item, index) in formValidate.slider_image\"\n                  :key=\"index\"\n                  draggable=\"true\"\n                  @dragstart=\"handleDragStart($event, item)\"\n                  @dragover.prevent=\"handleDragOver($event, item)\"\n                  @dragenter=\"handleDragEnter($event, item)\"\n                  @dragend=\"handleDragEnd($event, item)\"\n                >\n                  <img v-lazy=\"item\" />\n                  <i class=\"el-icon-error btndel\" @click=\"handleRemove(index)\"></i>\n                </div>\n                <div\n                  v-if=\"formValidate.slider_image.length < 10\"\n                  class=\"upLoad acea-row row-center-wrapper\"\n                  @click=\"modalPicTap('duo')\"\n                >\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n                <el-input v-model=\"formValidate.slider_image[0]\" style=\"display: none\"></el-input>\n              </div>\n\n              <div class=\"titTip\">建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传10张</div>\n\n              <!-- <div class=\"tips\">(最多10张<br />750*750)</div> -->\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"添加视频：\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.video_open\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.video_open && !formValidate.video_link\">\n            <el-form-item label=\"视频类型：\">\n              <el-radio-group v-model=\"seletVideo\" @input=\"changeVideo\">\n                <el-radio :label=\"0\" class=\"radio\">上传视频</el-radio>\n                <el-radio :label=\"1\">视频链接</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.video_open\" id=\"selectvideo\">\n            <el-form-item label=\"\" prop=\"video_link\">\n              <el-input\n                v-if=\"seletVideo == 1 && !formValidate.video_link\"\n                class=\"content_width\"\n                v-model=\"videoLink\"\n                placeholder=\"请输入视频链接\"\n              />\n              <input type=\"file\" ref=\"refid\" @change=\"zh_uploadFile_change\" style=\"display: none\" />\n              <div\n                v-if=\"seletVideo == 0 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                class=\"ml10 videbox\"\n                @click=\"zh_uploadFile\"\n              >\n                +\n              </div>\n              <el-button\n                v-if=\"seletVideo == 1 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                type=\"primary\"\n                class=\"ml10\"\n                @click=\"zh_uploadFile\"\n                >确认添加</el-button\n              >\n              <el-upload\n                v-if=\"upload_type === '1' && !videoLink && !formValidate.video_link\"\n                :show-file-list=\"false\"\n                :action=\"fileUrl2\"\n                :before-upload=\"videoSaveToUrl\"\n                :data=\"uploadData\"\n                :headers=\"header\"\n                :multiple=\"false\"\n                style=\"display: inline-block\"\n                accept=\".mp4\"\n              >\n                <div v-if=\"seletVideo === 0 && !formValidate.video_link\" class=\"videbox\">+</div>\n              </el-upload>\n              <div class=\"box-video-style\" v-if=\"formValidate.video_link\">\n                <video\n                  style=\"width: 100%; height: 100%;\"\n                  :src=\"formValidate.video_link\"\n                  controls=\"controls\"\n                >\n                  您的浏览器不支持 video 标签。\n                </video>\n                <div class=\"mark\"></div>\n                <i class=\"el-icon-delete iconv\" @click=\"delVideo\"></i>\n              </div>\n              <Progress class=\"progress\" :percent=\"progress\" :stroke-width=\"5\" v-if=\"upload.videoIng || videoIng\" />\n              <div class=\"titTip\">建议时长：9～30秒，视频宽高比16:9</div>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid\">\n            <el-form-item label=\"商品状态：\">\n              <el-radio-group v-model=\"formValidate.is_show\">\n                <el-radio :label=\"1\" class=\"radio\">上架</el-radio>\n                <el-radio :label=\"0\">下架</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n\n          <!-- <el-col :span=\"24\">\n                        <el-form-item label=\"商品标签：\" prop=\"label_id\">\n                            <el-select v-model=\"formValidate.label_id\" multiple v-width=\"'50%'\">\n                                <el-option v-for=\"item in dataLabel\" :value=\"item.id\" :key=\"item.id\">{{ item.label_name }}</el-option>\n                            </el-select>\n                        </el-form-item>\n                    </el-col> -->\n        </el-row>\n        <!-- 规格库存-->\n        <el-row :gutter=\"24\" v-show=\"currentTab === '2'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品规格：\" props=\"spec_type\">\n              <el-radio-group v-model=\"formValidate.spec_type\" @input=\"changeSpec\">\n                <el-radio :label=\"0\" class=\"radio\">单规格</el-radio>\n                <el-radio :label=\"1\">多规格</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <!-- 多规格添加-->\n          <el-col :span=\"24\" v-if=\"formValidate.spec_type === 1\" class=\"noForm\">\n            <el-form-item label=\"选择规格：\" prop=\"\">\n              <div class=\"acea-row row-middle\">\n                <el-select v-model=\"formValidate.selectRule\" class=\"content_width mr14\">\n                  <el-option\n                    v-for=\"(item, index) in ruleList\"\n                    :value=\"item.rule_name\"\n                    :key=\"index\"\n                    :label=\"item.rule_name\"\n                  ></el-option>\n                </el-select>\n                <el-button type=\"primary\" @click=\"confirm\">确认</el-button>\n                <el-button @click=\"addRule\">添加规格模板</el-button>\n              </div>\n            </el-form-item>\n\n            <el-form-item v-if=\"attrs.length !== 0\">\n              <draggable\n                class=\"dragArea list-group\"\n                :list=\"attrs\"\n                group=\"peoples\"\n                handle=\".move-icon\"\n                :move=\"checkMove\"\n                @end=\"end\"\n              >\n                <div v-for=\"(item, index) in attrs\" :key=\"index\" class=\"acea-row row-middle mb10\">\n                  <div class=\"move-icon\">\n                    <span class=\"iconfont icondrag2\"></span>\n                  </div>\n                  <div style=\"width: 90%\" :class=\"moveIndex === index ? 'borderStyle' : ''\">\n                    <div class=\"acea-row row-middle\">\n                      <span class=\"mr5\">{{ item.value }}</span>\n                      <i size=\"14\" class=\"curs el-icon-error\" @click=\"handleRemoveRole(index)\" />\n                    </div>\n                    <div class=\"rulesBox\">\n                      <draggable class=\"item\" :list=\"item.detail\" handle=\".drag\">\n                        <el-tag\n                          closable\n                          color=\"primary\"\n                          v-for=\"(j, indexn) in item.detail\"\n                          :key=\"indexn\"\n                          class=\"mr20 drag\"\n                          @close=\"handleRemove2(item.detail, indexn)\"\n                          >{{ j }}</el-tag\n                        >\n                      </draggable>\n                      <el-input\n                        placeholder=\"请输入属性名称\"\n                        v-model=\"item.detail.attrsVal\"\n                        @keyup.enter.native=\"createAttr(item.detail.attrsVal, index)\"\n                        style=\"width: 190px\"\n                      >\n                        <template slot=\"append\"\n                          ><el-button type=\"primary\" @click=\"createAttr(item.detail.attrsVal, index)\"\n                            >添加</el-button\n                          ></template\n                        >\n                      </el-input>\n                    </div>\n                  </div>\n                </div>\n              </draggable>\n              <!-- <div  v-for=\"(item, index) in attrs\" :key=\"index\">\n                                    <div class=\"acea-row row-middle\"><span class=\"mr5\">{{item.value}}</span><Icon type=\"ios-close-circle\" size=\"14\" class=\"curs\" @click=\"handleRemoveRole(index)\"/></div>\n                                    <div class=\"rulesBox\">\n                                        <el-tag type=\"dot\" closable color=\"primary\" v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" :name=\"j\" class=\"mr20\" @on-close=\"handleRemove2(item.detail,indexn)\">{{j}}</el-tag>\n                                        <el-input search enter-button=\"添加\" placeholder=\"请输入属性名称\" v-model=\"item.detail.attrsVal\" @on-search=\"createAttr(item.detail.attrsVal,index)\" style=\"width: 150px\"/>\n                                    </div>\n                                </div> -->\n            </el-form-item>\n            <!-- <el-col :span=\"24\" v-if=\"createBnt\"> -->\n            <el-form-item v-if=\"createBnt\">\n              <el-button type=\"primary\" @click=\"addBtn\">添加新规格</el-button>\n              <el-button type=\"success\" @click=\"generate(1)\">立即生成</el-button>\n            </el-form-item>\n            <!-- </el-col> -->\n            <el-col :span=\"24\" v-if=\"showIput\">\n              <el-col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <el-form-item label=\"规格：\">\n                  <el-input placeholder=\"请输入规格\" v-model=\"formDynamic.attrsName\" />\n                </el-form-item>\n              </el-col>\n              <el-col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <el-form-item label=\"规格值：\">\n                  <el-input v-model=\"formDynamic.attrsVal\" placeholder=\"请输入规格值\" />\n                </el-form-item>\n              </el-col>\n              <el-col :xl=\"6\" :lg=\"5\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <div class=\"df-n-warp\">\n                  <el-button type=\"primary\" @click=\"createAttrName\">确定</el-button>\n                  <el-button @click=\"offAttrName\">取消</el-button>\n                </div>\n              </el-col>\n            </el-col>\n            <!-- 多规格设置-->\n            <el-col\n              :xl=\"24\"\n              :lg=\"24\"\n              :md=\"24\"\n              :sm=\"24\"\n              :xs=\"24\"\n              v-if=\"manyFormValidate.length && formValidate.header.length !== 0 && attrs.length !== 0\"\n            >\n              <!-- 批量设置-->\n              <el-col :span=\"24\" v-if=\"[0, 3].includes(formValidate.virtual_type)\">\n                <el-form-item label=\"批量设置：\" class=\"labeltop\">\n                  <el-table :data=\"oneFormBatch\" border>\n                    <el-table-column\n                      :label=\"item.title\"\n                      :min-width=\"item.minWidth\"\n                      v-for=\"(item, index) in formValidate.is_virtual ? columns3 : columns2\"\n                      :key=\"index\"\n                    >\n                      <template slot-scope=\"scope\">\n                        <template v-if=\"item.key\">\n                          <div>\n                            <span>{{ scope.row[item.key] }}</span>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'pic'\">\n                          <div\n                            class=\"acea-row row-middle row-center-wrapper\"\n                            @click=\"modalPicTap('dan', 'duopi', scope.$index)\"\n                          >\n                            <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                              <img v-lazy=\"oneFormBatch[0].pic\" />\n                            </div>\n                            <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                              <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                            </div>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'cost'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].cost\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'ot_price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].ot_price\"\n                            :min=\"0\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'stock'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].stock\"\n                            :disabled=\"formValidate.virtual_type == 1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'fictitious'\">\n                          <el-button\n                            v-if=\"!scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"addGoodsCoupon(scope.$index, 'oneFormBatch')\"\n                            >添加优惠券</el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"formValidate.virtual_type == 2 && scope.row.coupon_id\"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            >{{ scope.row.coupon_name }}</span\n                          >\n                          <el-button\n                            v-else-if=\"!scope.row.virtual_list.length && formValidate.virtual_type == 1\"\n                            @click=\"addVirtual(scope.$index, 'oneFormBatch')\"\n                            >添加卡密</el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"scope.row.virtual_list.length && formValidate.virtual_type == 1\"\n                            @click=\"see(scope.row, 'oneFormBatch', scope.$index)\"\n                            >已设置</span\n                          >\n                        </template>\n                        <template v-else-if=\"item.slot === 'bar_code'\">\n                          <el-input v-model=\"oneFormBatch[0].bar_code\"></el-input>\n                        </template>\n                        <template v-else-if=\"item.slot === 'weight'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].weight\"\n                            :step=\"0.1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'volume'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"oneFormBatch[0].volume\"\n                            :step=\"0.1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'action'\">\n                          <a @click=\"batchAdd\">批量添加</a>\n                          <el-divider direction=\"vertical\"></el-divider>\n                          <a @click=\"batchDel\">清空</a>\n                        </template>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-form-item>\n              </el-col>\n              <!-- 多规格表格-->\n              <el-col :span=\"24\">\n                <el-form-item label=\"商品属性：\" class=\"labeltop\">\n                  <el-table :data=\"manyFormValidate\" border>\n                    <el-table-column\n                      :label=\"item.title\"\n                      :min-width=\"item.minWidth\"\n                      v-for=\"(item, index) in formValidate.header\"\n                      :key=\"index\"\n                    >\n                      <template slot-scope=\"scope\">\n                        <template v-if=\"item.key\">\n                          <div>\n                            <span>{{ scope.row[item.key] }}</span>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'pic'\">\n                          <div\n                            class=\"acea-row row-middle row-center-wrapper\"\n                            @click=\"modalPicTap('dan', 'duoTable', scope.$index)\"\n                          >\n                            <div class=\"pictrue pictrueTab\" v-if=\"manyFormValidate[scope.$index].pic\">\n                              <img v-lazy=\"manyFormValidate[scope.$index].pic\" />\n                            </div>\n                            <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                              <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                            </div>\n                          </div>\n                        </template>\n                        <template v-else-if=\"item.slot === 'price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'cost'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].cost\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'ot_price'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].ot_price\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'stock'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].stock\"\n                            :disabled=\"formValidate.virtual_type == 1\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            :precision=\"0\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'bar_code'\">\n                          <el-input v-model=\"manyFormValidate[scope.$index].bar_code\"></el-input>\n                        </template>\n                        <template v-else-if=\"item.slot === 'weight'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].weight\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'volume'\">\n                          <el-input-number\n                            :controls=\"false\"\n                            v-model=\"manyFormValidate[scope.$index].volume\"\n                            :min=\"0\"\n                            :max=\"9999999999\"\n                            class=\"priceBox\"\n                          ></el-input-number>\n                        </template>\n                        <template v-else-if=\"item.slot === 'fictitious'\">\n                          <el-button\n                            v-if=\"!scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"addGoodsCoupon(scope.$index, 'manyFormValidate')\"\n                            >添加优惠券</el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"scope.row.coupon_id && formValidate.virtual_type == 2\"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            >{{ scope.row.coupon_name }}</span\n                          >\n                          <el-button\n                            v-else-if=\"!scope.row.virtual_list && !scope.row.stock && formValidate.virtual_type == 1\"\n                            @click=\"addVirtual(scope.$index, 'manyFormValidate')\"\n                            >添加卡密</el-button\n                          >\n                          <span\n                            class=\"see\"\n                            v-else-if=\"\n                              (scope.row.virtual_list.length || scope.row.stock) && formValidate.virtual_type == 1\n                            \"\n                            @click=\"see(scope.row, 'manyFormValidate', scope.$index)\"\n                            >已设置</span\n                          >\n                        </template>\n                        <template v-else-if=\"item.slot === 'action'\">\n                          <a @click=\"delAttrTable(scope.$index)\">删除</a>\n                        </template>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-form-item>\n              </el-col>\n            </el-col>\n          </el-col>\n          <!-- 单规格表格-->\n          <div v-if=\"formValidate.spec_type === 0\">\n            <el-col :span=\"24\">\n              <el-form-item label=\"图片：\">\n                <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'danTable', 0)\">\n                  <div class=\"pictrue\" v-if=\"oneFormValidate[0].pic\">\n                    <img v-lazy=\"oneFormValidate[0].pic\" />\n                    <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n                  </div>\n                  <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                    <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n                    <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                  </div>\n                </div>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"售价：\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].price\"\n                  :min=\"0\"\n                  :precision=\"2\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                  :active-change=\"false\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"成本价：\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].cost\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"原价：\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].ot_price\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"库存：\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].stock\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  :disabled=\"formValidate.virtual_type == 1\"\n                  :precision=\"0\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"商品编号：\">\n                <el-input v-model.trim=\"oneFormValidate[0].bar_code\" class=\"content_width\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n              <el-form-item label=\"重量(KG)：\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].weight\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item label=\"体积(m³)：\" v-if=\"formValidate.virtual_type == 0\">\n                <el-input-number\n                  :controls=\"false\"\n                  v-model=\"oneFormValidate[0].volume\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"content_width\"\n                ></el-input-number>\n              </el-form-item>\n            </el-col>\n\n            <el-col :span=\"24\">\n              <el-form-item label=\"虚拟商品：\" v-if=\"formValidate.virtual_type == 1 || formValidate.virtual_type == 2\">\n                <el-button\n                  v-if=\"!oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"addGoodsCoupon(0, 'oneFormValidate')\"\n                  >添加优惠券</el-button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  >{{ oneFormValidate[0].coupon_name }}</span\n                >\n                <el-button\n                  v-if=\"\n                    !oneFormValidate[0].virtual_list.length &&\n                    !oneFormValidate[0].stock &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"addVirtual(0, 'oneFormValidate')\"\n                  >添加卡密</el-button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"\n                    (oneFormValidate[0].virtual_list.length || oneFormValidate[0].stock > 0) &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  >已设置</span\n                >\n              </el-form-item>\n            </el-col>\n          </div>\n        </el-row>\n        <!-- 商品详情-->\n        <el-row v-show=\"currentTab === '3'\">\n          <el-col :span=\"16\">\n            <el-form-item label=\"商品详情：\">\n              <WangEditor style=\"width: 100%\" :content=\"contents\" @editorContent=\"getEditorContent\"></WangEditor>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\" style=\"width: 33%\">\n            <div class=\"ifam\">\n              <div class=\"content\" v-html=\"content\"></div>\n            </div>\n          </el-col>\n        </el-row>\n\n        <!-- 物流设置-->\n        <el-row v-show=\"headTab.length === 6 ? currentTab === '4' : false\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"物流方式：\" prop=\"logistics\">\n              <el-checkbox-group v-model=\"formValidate.logistics\" @change=\"logisticsBtn\">\n                <el-checkbox label=\"1\">快递</el-checkbox>\n                <el-checkbox label=\"2\">到店核销</el-checkbox>\n              </el-checkbox-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"运费设置：\">\n              <el-radio-group v-model=\"formValidate.freight\">\n                <!-- <el-radio :label=\"1\">包邮</el-radio> -->\n                <el-radio :label=\"2\">固定邮费</el-radio>\n                <el-radio :label=\"3\">运费模板</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.freight != 3 && formValidate.freight != 1\">\n            <el-form-item label=\"\" :prop=\"formValidate.freight != 1 ? 'freight' : ''\">\n              <div class=\"acea-row\">\n                <el-input-number\n                  :controls=\"false\"\n                  :min=\"0\"\n                  v-model=\"formValidate.postage\"\n                  placeholder=\"请输入金额\"\n                  class=\"content_width maxW\"\n                />\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.freight == 3\">\n            <el-form-item label=\"\" prop=\"temp_id\">\n              <div class=\"acea-row\">\n                <el-select\n                  v-model=\"formValidate.temp_id\"\n                  clearable\n                  placeholder=\"请选择运费模板\"\n                  class=\"content_width maxW\"\n                >\n                  <el-option\n                    v-for=\"(item, index) in templateList\"\n                    :value=\"item.id\"\n                    :key=\"index\"\n                    :label=\"item.name\"\n                  ></el-option>\n                </el-select>\n                <span class=\"addfont\" @click=\"addTemp\">新增运费模板</span>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <!-- 营销设置-->\n        <el-row :gutter=\"24\" v-show=\"headTab.length === 6 ? currentTab === '5' : currentTab === '4'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"已售数量：\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                v-model=\"formValidate.ficti\"\n                placeholder=\"请输入虚拟销量\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"排序：\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                v-model=\"formValidate.sort\"\n                placeholder=\"请输入排序\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"购买送积分：\" prop=\"give_integral\">\n              <el-input-number\n                :controls=\"false\"\n                v-model=\"formValidate.give_integral\"\n                :min=\"0\"\n                :max=\"9999999999\"\n                placeholder=\"请输入积分\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"购买送优惠券：\">\n              <div v-if=\"couponName.length\" class=\"mb20\">\n                <el-tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @close=\"handleClose(item)\">{{\n                  item.title\n                }}</el-tag>\n              </div>\n              <el-button type=\"primary\" @click=\"addCoupon\">添加优惠券</el-button>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"关联用户标签：\" prop=\"label_id\">\n              <div style=\"display: flex\">\n                <div class=\"labelInput acea-row row-between-wrapper\" @click=\"openLabel\">\n                  <div style=\"width: 90%\">\n                    <div v-if=\"dataLabel.length\">\n                      <el-tag closable v-for=\"(item, index) in dataLabel\" @close=\"closeLabel(item)\" :key=\"index\">{{\n                        item.label_name\n                      }}</el-tag>\n                    </div>\n                    <span class=\"span\" v-else>选择用户关联标签</span>\n                  </div>\n                  <div class=\"iconfont iconxiayi\"></div>\n                </div>\n                <span class=\"addfont\" @click=\"addLabel\">新增标签</span>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"付费会员专属：\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.vip_product\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n              <div class=\"titTip\">开启后仅付费会员可以看见并购买此商品</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"单独设置：\">\n              <el-checkbox-group v-model=\"formValidate.is_sub\" @change=\"checkAllGroupChange\">\n                <el-checkbox :label=\"1\">佣金设置（数字即返佣金额）</el-checkbox>\n                <el-checkbox :label=\"0\">付费会员价</el-checkbox>\n              </el-checkbox-group>\n              <!-- <el-radio-group v-model=\"formValidate.is_sub\">\n                                <el-radio :label=\"1\" class=\"radio\">佣金设置</el-radio>\n                                <el-radio :label=\"0\">会员价</el-radio>\n                            </el-radio-group> -->\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.is_sub.length\">\n            <!--单规格返佣-->\n            <el-form-item label=\"商品属性：\" v-if=\"formValidate.spec_type === 0\">\n              <el-table :data=\"oneFormValidate\" border>\n                <el-table-column\n                  :label=\"item.title\"\n                  :min-width=\"item.minWidth\"\n                  v-for=\"(item, index) in columnsInstall\"\n                  :key=\"index\"\n                >\n                  <template slot-scope=\"scope\">\n                    <template v-if=\"item.key\">\n                      <div>\n                        <span>{{ scope.row[item.key] }}</span>\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'pic'\">\n                      <div class=\"pictrue pictrueTab\">\n                        <img v-lazy=\"oneFormValidate[0].pic\" />\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'price'\">\n                      <span>{{ oneFormValidate[0].price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'cost'\">\n                      <span>{{ oneFormValidate[0].cost }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'ot_price'\">\n                      <span>{{ oneFormValidate[0].ot_price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'stock'\">\n                      <span>{{ oneFormValidate[0].stock }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'bar_code'\">\n                      <span>{{ oneFormValidate[0].bar_code }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'weight'\">\n                      <span>{{ oneFormValidate[0].weight }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'fictitious'\">\n                      <el-button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(scope.$index, 'oneFormValidate')\"\n                        >添加优惠券</el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <el-button\n                        v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(scope.$index, 'oneFormValidate')\"\n                        >添加卡密</el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'oneFormValidate', scope.$index)\"\n                        >已设置</span\n                      >\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].brokerage\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage_two'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].brokerage_two\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'vip_price'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"oneFormValidate[0].vip_price\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n            <!--多规格返佣-->\n            <el-form-item label=\"批量设置：\" v-if=\"formValidate.spec_type === 1\">\n              <span v-if=\"formValidate.is_sub.indexOf(1) > -1\">\n                <span class=\"brokerage\">一级返佣：</span\n                ><el-input\n                  type=\"number\"\n                  :controls=\"false\"\n                  placeholder=\"请输入一级返佣\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyBrokerage\"\n                >\n                </el-input>\n                <span class=\"brokerage\">二级返佣：</span\n                ><el-input\n                  type=\"number\"\n                  :controls=\"false\"\n                  placeholder=\"请输入二级返佣\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyBrokerageTwo\"\n                  ></el-input\n                >\n              </span>\n              <span v-if=\"formValidate.is_sub.indexOf(0) > -1\">\n                会员价：<el-input-number\n                  :controls=\"false\"\n                  placeholder=\"请输入会员价\"\n                  :min=\"0\"\n                  :max=\"9999999999\"\n                  class=\"columnsBox content_width\"\n                  v-model=\"manyVipPrice\"\n                ></el-input-number>\n              </span>\n              <el-button type=\"primary\" @click=\"brokerageSetUp\">批量设置</el-button>\n              <!-- <template v-if=\"formValidate.is_sub\">\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"请输入一级返佣\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerage\"></el-input-number>\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"请输入二级返佣\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerageTwo\"></el-input-number>\n                                <el-button type=\"primary\" @click=\"brokerageSetUp\">批量设置</el-button>\n                            </template>\n                            <template v-else>\n                                <el-input-number controls-position=\"right\" v-width=\"'20%'\" placeholder=\"请输入会员价\" :min=\"0\" class=\"columnsBox\" v-model=\"manyVipPrice\"></el-input-number>\n                                <el-button type=\"primary\" @click=\"vipPriceSetUp\">批量设置</el-button>\n                            </template> -->\n            </el-form-item>\n            <el-form-item label=\"商品属性：\" v-if=\"formValidate.spec_type === 1 && manyFormValidate.length\">\n              <el-table v-if=\"formValidate.is_sub\" :data=\"manyFormValidate\" border>\n                <el-table-column\n                  :label=\"item.title\"\n                  :min-width=\"item.minWidth\"\n                  v-for=\"(item, index) in columnsInstal2\"\n                  :key=\"index\"\n                >\n                  <template slot-scope=\"scope\">\n                    <template v-if=\"item.key\">\n                      <div>\n                        <span>{{ scope.row[item.key] }}</span>\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'pic'\">\n                      <div class=\"pictrue pictrueTab\">\n                        <img v-lazy=\"manyFormValidate[scope.$index].pic\" />\n                      </div>\n                    </template>\n                    <template v-else-if=\"item.slot === 'price'\">\n                      <span>{{ manyFormValidate[scope.$index].price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'cost'\">\n                      <span>{{ manyFormValidate[scope.$index].cost }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'ot_price'\">\n                      <span>{{ manyFormValidate[scope.$index].ot_price }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'stock'\">\n                      <span>{{ manyFormValidate[scope.$index].stock }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'bar_code'\">\n                      <span>{{ manyFormValidate[scope.$index].bar_code }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'weight'\">\n                      <span>{{ manyFormValidate[index].weight }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'fictitious'\">\n                      <el-button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(scope.$index, 'manyFormValidate')\"\n                        >添加优惠券</el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <el-button\n                        v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(scope.$index, 'manyFormValidate')\"\n                        >添加卡密</el-button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'manyFormValidate', scope.$index)\"\n                        >已设置</span\n                      >\n                    </template>\n                    <template v-else-if=\"item.slot === 'volume'\">\n                      <span>{{ manyFormValidate[scope.$index].volume }}</span>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].brokerage\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'brokerage_two'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].brokerage_two\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                    <template v-else-if=\"item.slot === 'vip_price'\">\n                      <el-input-number\n                        :controls=\"false\"\n                        v-model=\"manyFormValidate[scope.$index].vip_price\"\n                        :min=\"0\"\n                        :max=\"9999999999\"\n                        class=\"priceBox\"\n                      ></el-input-number>\n                    </template>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div class=\"line\"></div>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"起购数量：\">\n              <el-input-number\n                :controls=\"false\"\n                :min=\"1\"\n                :max=\"9999999999\"\n                :precision=\"0\"\n                v-model=\"formValidate.min_qty\"\n                placeholder=\"请输入起购数量\"\n                class=\"content_width\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"是否限购：\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.is_limit\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"限购类型：\" v-if=\"formValidate.is_limit\">\n              <el-radio-group v-model=\"formValidate.limit_type\">\n                <el-radio :label=\"1\">单次限购</el-radio>\n                <el-radio :label=\"2\">单人限购</el-radio>\n              </el-radio-group>\n              <div class=\"titTip\">单次限购是限制每次下单最多购买的数量，单人限购是限制一个用户总共可以购买的数量</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.is_limit\">\n            <el-form-item label=\"限购数量：\" prop=\"limit_num\">\n              <div class=\"acea-row row-middle\">\n                <el-input-number\n                  :controls=\"false\"\n                  placeholder=\"请输入限购数量\"\n                  :precision=\"0\"\n                  :min=\"1\"\n                  v-model=\"formValidate.limit_num\"\n                  class=\"content_width\"\n                />\n                <span class=\"ml10\"> 件 </span>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.virtual_type == 0 || formValidate.virtual_type == 3\">\n            <el-form-item label=\"预售商品：\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.presale\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.presale\">\n            <el-form-item label=\"预售活动时间：\" prop=\"presale_time\">\n              <div class=\"acea-row row-middle\">\n                <el-date-picker\n                  clearable\n                  :editable=\"false\"\n                  type=\"datetimerange\"\n                  format=\"yyyy-MM-dd HH:mm\"\n                  value-format=\"yyyy-MM-dd HH:mm\"\n                  range-separator=\"-\"\n                  start-placeholder=\"开始日期\"\n                  end-placeholder=\"结束日期\"\n                  @change=\"onchangeTime\"\n                  v-model=\"formValidate.presale_time\"\n                ></el-date-picker>\n              </div>\n              <div class=\"titTip\">设置活动开启结束时间，用户可以在设置时间内发起参与预售</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\" v-if=\"formValidate.presale\">\n            <el-form-item label=\"发货时间：\" prop=\"presale_day\">\n              <div class=\"acea-row row-middle\">\n                <span class=\"mr10\">预售活动结束后</span>\n                <el-input-number\n                  class=\"w-80\"\n                  :controls=\"false\"\n                  placeholder=\"请输入发货时间\"\n                  :precision=\"0\"\n                  :min=\"1\"\n                  v-model=\"formValidate.presale_day\"\n                />\n                <span class=\"ml10\"> 天之内 </span>\n              </div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品推荐：\">\n              <el-checkbox-group v-model=\"formValidate.recommend\">\n                <el-checkbox label=\"is_hot\">热卖单品</el-checkbox>\n                <el-checkbox label=\"is_benefit\">促销单品</el-checkbox>\n                <el-checkbox label=\"is_best\">精品推荐</el-checkbox>\n                <el-checkbox label=\"is_new\">首发新品</el-checkbox>\n                <el-checkbox label=\"is_good\">优品推荐</el-checkbox>\n              </el-checkbox-group>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"活动优先级：\">\n              <div class=\"color-list acea-row row-middle\">\n                <div\n                  class=\"color-item\"\n                  :class=\"activity[color]\"\n                  v-for=\"color in formValidate.activity\"\n                  v-dragging=\"{\n                    item: color,\n                    list: formValidate.activity,\n                    group: 'color',\n                  }\"\n                  :key=\"color\"\n                >\n                  {{ color }}\n                </div>\n              </div>\n              <div class=\"titTip\">可拖动按钮调整活动的优先展示顺序</div>\n            </el-form-item>\n          </el-col>\n          <el-col v-bind=\"grid3\">\n            <el-form-item label=\"选择优品推荐商品：\">\n              <div class=\"picBox\">\n                <div class=\"pictrue\" v-for=\"(item, index) in formValidate.recommend_list\" :key=\"index\">\n                  <img v-lazy=\"item.image\" />\n                  <i class=\"el-icon-error btndel\" @click=\"handleRemoveRecommend(index)\"></i>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" @click=\"changeGoods\">\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <!-- 其他设置-->\n        <el-row justify=\"space-between\" v-show=\"headTab.length === 6 ? currentTab === '6' : currentTab === '5'\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品关键字：\">\n              <el-input class=\"content_width\" v-model.trim=\"formValidate.keyword\" placeholder=\"请输入商品关键字\" />\n              <div class=\"titTip\">PC端的SEO优化以及可以根据关键字进行商品搜索</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品简介：\">\n              <el-input\n                class=\"content_width\"\n                v-model.trim=\"formValidate.store_info\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请输入商品简介\"\n              />\n              <div class=\"titTip\">公众号分享商品以及PC端SEO优化使用</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品口令：\">\n              <el-input\n                v-model.trim=\"formValidate.command_word\"\n                placeholder=\"请输入商品口令\"\n                type=\"textarea\"\n                :rows=\"3\"\n                class=\"content_width\"\n              />\n              <div class=\"titTip\">将其他平台的商品口令填写保存，移动端进入商品详情的时候自动复制</div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"商品推荐图：\">\n              <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'recommend_image')\">\n                <div class=\"pictrue\" v-if=\"formValidate.recommend_image\">\n                  <img v-lazy=\"formValidate.recommend_image\" />\n                  <el-input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></el-input>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                  <el-input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></el-input>\n                  <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                </div>\n                <div class=\"titTip\">移动端分类样式3显示的长方形图片，建议比例：5:2</div>\n              </div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"自定义表单：\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"customBtn\" @change=\"customMessBtn\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n              <div class=\"addCustom_content\" v-if=\"customBtn\">\n                <div v-for=\"(item, index) in formValidate.custom_form\" :key=\"index\" class=\"custom_box\">\n                  <el-input\n                    v-model.trim=\"item.title\"\n                    :placeholder=\"'表单标题' + (index + 1)\"\n                    style=\"width: 150px; margin-right: 10px\"\n                    :maxlength=\"10\"\n                  />\n                  <el-select v-model=\"item.label\" style=\"width: 200px; margin-left: 6px; margin-right: 10px\">\n                    <el-option\n                      v-for=\"items in CustomList\"\n                      :value=\"items.value\"\n                      :key=\"items.value\"\n                      :label=\"items.label\"\n                    ></el-option>\n                  </el-select>\n                  <el-checkbox v-model=\"item.status\">必填</el-checkbox>\n                  <div class=\"addfont\" @click=\"delcustom()\">删除</div>\n                </div>\n              </div>\n              <div class=\"addCustomBox\" v-show=\"customBtn\">\n                <div class=\"btn\" @click=\"addcustom\">+ 添加表单</div>\n                <div class=\"titTip\">用户下单时需填写的信息，最多可设置10条，设置了自定义表单的商品不能加入购物车</div>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-form-item>\n          <el-button v-if=\"currentTab !== '1'\" @click=\"upTab\">上一步</el-button>\n          <el-button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '6' && formValidate.virtual_type == 0\"\n            @click=\"downTab\"\n            >下一步</el-button\n          >\n          <el-button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '5' && formValidate.virtual_type != 0\"\n            @click=\"downTab\"\n            >下一步</el-button\n          >\n          <el-button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '6') && formValidate.virtual_type == 0\"\n            >保存</el-button\n          >\n          <el-button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '5') && formValidate.virtual_type != 0\"\n            >保存</el-button\n          >\n        </el-form-item>\n      </el-form>\n      <el-dialog :visible.sync=\"modalPic\" width=\"950px\" scrollable title=\"上传商品图\" :close-on-click-modal=\"false\">\n        <uploadPictures\n          :isChoice=\"isChoice\"\n          @getPic=\"getPic\"\n          @getPicD=\"getPicD\"\n          :gridBtn=\"gridBtn\"\n          :gridPic=\"gridPic\"\n          v-if=\"modalPic\"\n        ></uploadPictures>\n      </el-dialog>\n      <el-dialog\n        :visible.sync=\"addVirtualModel\"\n        width=\"720px\"\n        title=\"添加卡密\"\n        :show-close=\"true\"\n        :close-on-click-modal=\"false\"\n        @closed=\"initVirtualData\"\n      >\n        <div class=\"trip\"></div>\n        <div class=\"type-radio\">\n          <el-form label-width=\"85px\">\n            <el-form-item label=\"卡密类型：\">\n              <el-radio-group v-model=\"disk_type\" size=\"large\">\n                <el-radio :label=\"1\">固定卡密</el-radio>\n                <el-radio :label=\"2\">一次性卡密</el-radio>\n              </el-radio-group>\n              <div v-if=\"disk_type == 1\">\n                <div class=\"stock-disk\">\n                  <el-input v-model=\"disk_info\" size=\"large\" type=\"textarea\" :rows=\"4\" placeholder=\"填写卡密信息\" />\n                </div>\n                <div class=\"stock-input\">\n                  <!-- <el-input type=\"number\" v-model=\"stock\" size=\"large\" :min='0' placeholder=\"填写库存数量\">\n                    <span slot=\"append\">件</span>\n                  </el-input> -->\n                  <el-input-number :controls=\"false\" :max=\"100000\" :min=\"1\" :step=\"1\" :precision=\"0\" v-model=\"stock\" />\n                  <span class=\"pl10\">件</span>\n                </div>\n              </div>\n              <div class=\"scroll-virtual\" v-if=\"disk_type == 2\">\n                <div class=\"virtual-data mb10\" v-for=\"(item, index) in virtualList\" :key=\"index\">\n                  <span class=\"mr10 virtual-title\">卡号{{ index + 1 }}：</span>\n                  <el-input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.key\"\n                    style=\"width: 150px\"\n                    placeholder=\"请输入卡号(非必填)\"\n                  ></el-input>\n                  <span class=\"mr10 virtual-title\">卡密{{ index + 1 }}：</span>\n                  <el-input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.value\"\n                    style=\"width: 150px\"\n                    placeholder=\"请输入卡密\"\n                  ></el-input>\n                  <span class=\"deteal-btn\" @click=\"removeVirtual(index)\">删除</span>\n                </div>\n              </div>\n              <div class=\"add-more\" v-if=\"disk_type == 2\">\n                <el-button class=\"h-33\" type=\"primary\" @click=\"handleAdd\">新增</el-button>\n                <el-upload class=\"ml10\" :action=\"cardUrl\" :data=\"uploadData\" :headers=\"header\" :on-success=\"upFile\" :before-upload=\"beforeUpload\"\n >\n                  <el-button>导入卡密</el-button>\n                </el-upload>\n              </div>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"closeVirtual\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"upVirtual\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </el-card>\n    <freightTemplate :template=\"template\" v-on:changeTemplate=\"changeTemplate\" ref=\"templates\"></freightTemplate>\n    <add-attr ref=\"addattr\" @getList=\"userSearchs\"></add-attr>\n    <coupon-list\n      ref=\"couponTemplates\"\n      @nameId=\"nameId\"\n      :couponids=\"formValidate.coupon_ids\"\n      :updateIds=\"updateIds\"\n      :updateName=\"updateName\"\n    ></coupon-list>\n    <coupon-list ref=\"goodsCoupon\" many=\"one\" :luckDraw=\"true\" @getCouponId=\"goodsCouponId\"></coupon-list>\n    <!-- 生成淘宝京东表单-->\n    <el-dialog\n      :visible.sync=\"modals\"\n      @closed=\"cancel\"\n      class=\"Box\"\n      title=\"复制淘宝、天猫、京东、苏宁、1688\"\n      :close-on-click-modal=\"false\"\n      width=\"720px\"\n    >\n      <tao-bao ref=\"taobaos\" v-if=\"modals\" @on-close=\"onClose\"></tao-bao>\n    </el-dialog>\n    <el-dialog :visible.sync=\"goods_modals\" title=\"商品列表\" footerHide class=\"paymentFooter\" scrollable width=\"1000px\">\n      <goods-list v-if=\"goods_modals\" ref=\"goodslist\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </el-dialog>\n    <!-- 用户标签 -->\n    <el-dialog\n      :visible.sync=\"labelShow\"\n      title=\"请选择用户标签\"\n      :show-close=\"true\"\n      width=\"540px\"\n      :close-on-click-modal=\"false\"\n    >\n      <userLabel ref=\"userLabel\" @activeData=\"activeData\" @close=\"labelClose\"></userLabel>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport userLabel from '@/components/labelList';\nimport { mapState } from 'vuex';\nimport vuedraggable from 'vuedraggable';\nimport uploadPictures from '@/components/uploadPictures';\nimport freightTemplate from '@/components/freightTemplate';\nimport couponList from '@/components/couponList';\nimport addAttr from '../productAttr/addAttr';\nimport goodsList from '@/components/goodsList/index';\nimport taoBao from './taoBao';\nimport WangEditor from '@/components/wangEditor/index.vue';\nimport { userLabelAddApi } from '@/api/user';\nimport {\n  productInfoApi,\n  cascaderListApi,\n  productAddApi,\n  generateAttrApi,\n  productGetRuleApi,\n  productGetTemplateApi,\n  productGetTempKeysApi,\n  checkActivityApi,\n  productCache,\n  cacheDelete,\n  uploadType,\n  importCard,\n  productCreateApi,\n} from '@/api/product';\nimport Setting from '@/setting';\nimport { getCookies } from '@/libs/util';\nimport { uploadByPieces } from '@/utils/upload'; //引入uploadByPieces方法\nimport { isFileUpload, isVideoUpload } from '@/utils';\nimport checkArray from '@/libs/permission';\n\nexport default {\n  name: 'product_productAdd',\n  components: {\n    // VueUeditorWrap,\n    uploadPictures,\n    freightTemplate,\n    addAttr,\n    couponList,\n    taoBao,\n    draggable: vuedraggable,\n    goodsList,\n    WangEditor,\n    userLabel,\n  },\n  data() {\n    return {\n      labelShow: false,\n      dataLabel: [],\n      headTab: [\n        { tit: '基础信息', name: '1' },\n        { tit: '规格库存', name: '2' },\n        { tit: '商品详情', name: '3' },\n        { tit: '物流设置', name: '4' },\n        { tit: '营销设置', name: '5' },\n        { tit: '其他设置', name: '6' },\n      ],\n      virtual: [\n        { tit: '普通商品', id: 0, tit2: '物流发货' },\n        { tit: '卡密/网盘', id: 1, tit2: '自动发货' },\n        { tit: '优惠券', id: 2, tit2: '自动发货' },\n        { tit: '虚拟商品', id: 3, tit2: '虚拟发货' },\n      ],\n      seletVideo: 0, //选择视频类型\n      customBtn: false, //自定义留言开关\n      content: '',\n      contents: '',\n      fileUrl: Setting.apiBaseURL + '/file/upload',\n      fileUrl2: Setting.apiBaseURL + '/file/video_upload',\n      cardUrl: Setting.apiBaseURL + '/file/upload/1',\n      upload_type: '', //视频上传类型 1 本地上传 2 3 4 OSS上传\n      uploadData: {}, // 上传参数\n      header: {},\n\n      type: 0,\n      modals: false,\n      goods_modals: false,\n      spinShow: false,\n      openSubimit: false,\n      virtualData: '',\n      virtualList: [\n        {\n          key: '',\n          value: '',\n        },\n      ],\n      grid2: {\n        xl: 10,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      grid3: {\n        xl: 18,\n        lg: 18,\n        md: 20,\n        sm: 24,\n        xs: 24,\n      },\n      // 批量设置表格data\n      oneFormBatch: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          virtual_list: [],\n        },\n      ],\n      // 规格数据\n      formDynamic: {\n        attrsName: '',\n        attrsVal: '',\n      },\n      disk_type: 1, //卡密类型\n      tabIndex: 0,\n      tabName: '',\n      formDynamicNameData: [],\n      isBtn: false,\n      columns2: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '重量（KG）',\n          slot: 'weight',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '体积(m³)',\n          slot: 'volume',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 120,\n        },\n      ],\n      columns3: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 120,\n        },\n      ],\n      columns: [],\n      columnsInstall: [],\n      columnsInstal2: [],\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      //自定义留言下拉选择\n      CustomList: [\n        {\n          value: 'text',\n          label: '文本框',\n        },\n        {\n          value: 'number',\n          label: '数字',\n        },\n        {\n          value: 'email',\n          label: '邮件',\n        },\n        {\n          value: 'data',\n          label: '日期',\n        },\n        {\n          value: 'time',\n          label: '时间',\n        },\n        {\n          value: 'id',\n          label: '身份证',\n        },\n        {\n          value: 'phone',\n          label: '手机号',\n        },\n        {\n          value: 'img',\n          label: '图片',\n        },\n      ],\n      customess: {\n        content: [],\n      }, //自定义留言内容\n\n      formValidate: {\n        disk_info: '', //卡密类型\n        logistics: ['1'], //选择物流方式\n        freight: 2, //运费设置\n        postage: 0, //设置运费金额\n        recommend: [], //商品推荐\n        presale_day: 1, //预售发货时间-结束\n        presale: false, //预售商品开关\n        is_limit: false,\n        limit_type: 0,\n        limit_num: 0,\n        video_open: false, //视频按钮是否显示\n        vip_product: false, //付费会员专属开关\n        custom_form: [], //自定义留言\n        store_name: '',\n        cate_id: [],\n        label_id: [],\n        keyword: '',\n        unit_name: '',\n        store_info: '',\n        image: '',\n        recommend_image: '',\n        slider_image: [],\n        description: '',\n        ficti: 0,\n        give_integral: 0,\n        sort: 0,\n        is_show: 1,\n        is_hot: 0,\n        is_benefit: 0,\n        is_best: 0,\n        is_new: 0,\n        is_good: 0,\n        is_postage: 0,\n        is_sub: [],\n        recommend_list: [],\n        virtual_type: 0,\n        // is_sub: 0,\n        id: 0,\n        spec_type: 0,\n        is_virtual: 0,\n        video_link: '',\n        // postage: 0,\n        temp_id: '',\n        attrs: [],\n        items: [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n          },\n        ],\n        activity: ['默认', '秒杀', '砍价', '拼团'],\n        couponName: [],\n        header: [],\n        selectRule: '',\n        coupon_ids: [],\n        command_word: '',\n        min_qty: 1,\n      },\n      ruleList: [],\n      templateList: [],\n      createBnt: true,\n      showIput: false,\n      manyFormValidate: [],\n      // 单规格表格data\n      oneFormValidate: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          brokerage: 0,\n          brokerage_two: 0,\n          vip_price: 0,\n          virtual_list: [],\n          coupon_id: 0,\n        },\n      ],\n      images: [],\n      imagesTable: '',\n      currentTab: '1',\n      isChoice: '',\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      modalPic: false,\n      addVirtualModel: false,\n      template: false,\n      uploadList: [],\n      treeSelect: [],\n      picTit: '',\n      tableIndex: 0,\n      ruleValidate: {\n        store_name: [{ required: true, message: '请输入商品名称', trigger: 'blur' }],\n        cate_id: [\n          {\n            required: true,\n            message: '请选择商品分类',\n            trigger: 'change',\n            type: 'array',\n            min: '1',\n          },\n        ],\n        unit_name: [{ required: true, message: '请输入单位', trigger: 'blur' }],\n        // image: [{ required: true, message: \"请上传商品图\", trigger: \"change\" }],\n        slider_image: [\n          {\n            required: true,\n            message: '请上传商品轮播图',\n            type: 'array',\n            trigger: 'change',\n          },\n        ],\n        spec_type: [{ required: true, message: '请选择商品规格', trigger: 'change' }],\n        is_virtual: [{ required: true, message: '请选择商品类型', trigger: 'change' }],\n        selectRule: [{ required: true, message: '请选择商品规格属性', trigger: 'change' }],\n        temp_id: [\n          {\n            required: true,\n            message: '请选择运费模板',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n        presale_time: [\n          {\n            required: true,\n            type: 'array',\n            message: '请选择活动时间',\n            trigger: 'change',\n          },\n        ],\n        logistics: [\n          {\n            required: true,\n            type: 'array',\n            min: 1,\n            message: '请选择物流方式',\n            trigger: 'change',\n          },\n          {\n            type: 'array',\n            max: 2,\n            message: '请选择物流方式',\n            trigger: 'change',\n          },\n        ],\n        give_integral: [{ type: 'integer', message: '请输入整数' }],\n      },\n      manyBrokerage: 0,\n      manyBrokerageTwo: 0,\n      manyVipPrice: 0,\n      upload: {\n        videoIng: false, // 是否显示进度条；\n      },\n      videoIng: false, // 是否显示进度条；\n      progress: 0, // 进度条默认0\n      stock: 0,\n      disk_info: '',\n      videoLink: '',\n      attrs: [],\n      activity: { 默认: 'red', 秒杀: 'blue', 砍价: 'green', 拼团: 'yellow' },\n      couponName: [],\n      updateIds: [],\n      updateName: [],\n      couponIds: '',\n      couponNames: [],\n      rakeBack: [\n        {\n          title: '一级返佣',\n          slot: 'brokerage',\n          align: 'center',\n          width: 95,\n        },\n        {\n          title: '二级返佣',\n          slot: 'brokerage_two',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      member: [\n        {\n          title: '会员价',\n          slot: 'vip_price',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      columnsInstalM: [],\n      moveIndex: ''\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '120px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n    labelBottom() {\n      return this.isMobile ? undefined : '15px';\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.bus.$emit('onTagsViewRefreshRouterView', this.$route.path);\n    next();\n  },\n  created() {\n    this.columns = this.columns2.slice(0, 8);\n    this.getToken();\n\n    // this.columnsInstall = this.columns2.slice(0, 4).concat(this.columnsInstall);\n    // this.columnsInsta8 = this.columns2.slice(0, 4).concat(this.columnsInsta8);\n  },\n  mounted() {\n    if (this.$route.params.id !== '0' && this.$route.params.id) {\n      this.getInfo();\n    } else if (this.$route.params.id === '0') {\n      productCache()\n        .then((res) => {\n          let data = res.data.info;\n          if (!Array.isArray(data)) {\n            let cate_id = data.cate_id.map(Number);\n            let label_id = data.label_id.map(Number);\n            this.attrs = data.items || [];\n            let ids = [];\n            // let names = [];\n            if (data.coupons) {\n              data.coupons.map((item) => {\n                ids.push(item.id);\n                // names.push(item.title);\n              });\n              this.couponName = data.coupons;\n            }\n\n            this.formValidate = data;\n            // this.couponName = data.coupons;\n            // that.couponName = names;\n            this.dataLabel = data.label_id;\n            this.formValidate.coupon_ids = ids;\n            this.updateIds = ids;\n            this.updateName = data.coupons;\n            this.formValidate.cate_id = cate_id;\n            // this.formValidate.label_id = label_id;\n            this.oneFormValidate = data.attrs;\n            this.formValidate.logistics = data.logistics || ['1'];\n            this.formValidate.header = [];\n            this.generate(0);\n            this.manyFormValidate = data.attrs;\n            this.spec_type = data.spec_type;\n            this.formValidate.is_virtual = data.is_virtual;\n            this.formValidate.custom_form = data.custom_form || [];\n            if (this.formValidate.custom_form.length != 0) {\n              this.customBtn = true;\n            }\n            this.virtualbtn(data.virtual_type, 1);\n            if (data.spec_type === 0) {\n              this.manyFormValidate = [];\n            } else {\n              this.createBnt = true;\n              this.oneFormValidate = [\n                {\n                  pic: data.image,\n                  price: 0,\n                  cost: 0,\n                  ot_price: 0,\n                  stock: 0,\n                  bar_code: '',\n                  weight: 0,\n                  volume: 0,\n                  brokerage: 0,\n                  brokerage_two: 0,\n                  vip_price: 0,\n                  virtual_list: [],\n                  coupon_id: 0,\n                },\n              ];\n            }\n            this.watchActivity()\n            this.spinShow = false;\n          }\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n        });\n    }\n    if (this.$route.query.type) {\n      this.modals = true;\n      this.type = this.$route.query.type;\n    } else {\n      this.type = 0;\n    }\n    this.goodsCategory();\n    this.productGetRule();\n    this.productGetTemplate();\n    // this.userLabel();\n    this.uploadType();\n    this.watchActivity()\n  },\n  methods: {\n    beforeUpload(file) {\n      return isFileUpload(file)\n    },\n    // 分片上传\n    videoSaveToUrl(file) {\n      if(isVideoUpload(file)){\n        uploadByPieces({\n          file: file, // 视频实体\n          pieceSize: 3, // 分片大小\n          success: (data) => {\n            this.formValidate.video_link = data.file_path;\n            this.progress = 100;\n          },\n          error: (e) => {\n            this.$message.error(e.msg);\n          },\n          uploading: (chunk, allChunk) => {\n            this.videoIng = true;\n            let st = Math.floor((chunk / allChunk) * 100);\n            this.progress = st;\n          },\n        });\n      }\n      return false;\n    },\n    // 类型选择/填入内容判断\n    virtualbtn(index, type) {\n      if (type != 1) {\n        this.formValidate.is_sub = [];\n        let id = this.$route.params.id;\n        if (id) {\n          checkActivityApi(id)\n            .then((res) => {})\n            .catch((res) => {\n              this.formValidate.spec_type = this.spec_type;\n              this.$message.error(res.msg);\n            });\n        } else {\n          if (this.formValidate.spec_type == 1) {\n            this.generate(1);\n          }\n        }\n      }\n      switch (index) {\n        case 0:\n          this.formValidate.virtual_type = 0;\n          this.formValidate.is_virtual = 0;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            { tit: '物流设置', name: '4' },\n            { tit: '营销设置', name: '5' },\n            { tit: '其他设置', name: '6' },\n          ];\n          break;\n        case 1:\n          this.formValidate.virtual_type = 1;\n          this.formValidate.postage = 0;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n        case 2:\n          this.formValidate.virtual_type = 2;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n        case 3:\n          this.formValidate.virtual_type = 3;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n      }\n    },\n    // 新增分类\n    addCate() {\n      this.$modalForm(productCreateApi()).then(() => this.goodsCategory());\n    },\n    // 物流方式选择\n    logisticsBtn(e) {\n      this.formValidate.logistics = e;\n    },\n    // 新增标签\n    addLabel() {\n      this.$modalForm(userLabelAddApi(0)).then(() => this.userLabel());\n    },\n    // 自定义留言 开启关闭\n    customMessBtn(e) {\n      if (!e) {\n        this.formValidate.custom_form = [];\n      }\n    },\n    // 自定义留言 新增表单\n    addcustom() {\n      if (this.formValidate.custom_form.length > 9) {\n        this.$message.warning('最多添加10条');\n      } else {\n        this.formValidate.custom_form.push({\n          title: '',\n          label: 'text',\n          value: '',\n          status: false,\n        });\n      }\n    },\n    // 删除\n    delcustom(index) {\n      this.formValidate.custom_form.splice(index, 1);\n    },\n    // 预售具体日期\n    onchangeTime(e) {\n      this.formValidate.presale_time = e;\n    },\n    // 商品详情\n    getEditorContent(data) {\n      this.content = data;\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 上传头部token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    // 导入卡密\n    upFile(res) {\n      importCard({ file: res.data.src }).then((res) => {\n        this.virtualList = this.virtualList.concat(res.data);\n      });\n    },\n    //获取视频上传类型\n    uploadType() {\n      uploadType().then((res) => {\n        this.upload_type = res.data.upload_type;\n      });\n    },\n    // 初始化数据展示\n    infoData(data, isCopy) {\n      let cate_id = data.cate_id.map(Number);\n      let label_id = data.label_id.map(Number);\n      this.attrs = data.items || [];\n      let ids = [];\n      data.coupons.map((item) => {\n        ids.push(item.id);\n      });\n      this.formValidate = data;\n      this.seletVideo = data.seletVideo;\n      this.contents = data.description;\n      this.couponName = data.coupons;\n      this.formValidate.coupon_ids = ids;\n      this.updateIds = ids;\n      this.dataLabel = data.label_id;\n      this.updateName = data.coupons;\n      this.virtualbtn(data.virtual_type, 1);\n      this.formValidate.logistics = data.logistics || ['1'];\n      this.formValidate.custom_form = data.custom_form || [];\n      if (this.formValidate.custom_form.length != 0) {\n        this.customBtn = true;\n      }\n      this.formValidate.cate_id = cate_id;\n      if (data.attr) {\n        this.oneFormValidate = [data.attr];\n      }\n      this.formValidate.header = [];\n      this.generate(0, isCopy, data.attrs);\n      // this.manyFormValidate = data.attrs;\n      // this.$set(this, 'manyFormValidate', data.attrs);\n      this.spec_type = data.spec_type;\n      this.formValidate.is_virtual = data.is_virtual;\n      if (data.spec_type === 0) {\n        this.manyFormValidate = [];\n      } else {\n        this.createBnt = true;\n        this.oneFormValidate = [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n            weight: 0,\n            volume: 0,\n            brokerage: 0,\n            brokerage_two: 0,\n            vip_price: 0,\n            virtual_list: [],\n            coupon_id: 0,\n          },\n        ];\n      }\n      this.watchActivity()\n    },\n    //关闭淘宝弹窗并生成数据；\n    onClose(data) {\n      this.modals = false;\n      this.infoData(data, 1);\n    },\n\n    checkMove(evt) {\n      this.moveIndex = evt.draggedContext.index;\n    },\n    end() {\n      this.moveIndex = '';\n      this.generate(1);\n    },\n    // 单独设置会员设置\n    checkAllGroupChange(data) {\n      this.checkAllGroup(data);\n    },\n    checkAllGroup(data) {\n      if (this.formValidate.spec_type === 0) {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstall = this.columns2.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      } else {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      }\n    },\n    // 添加优惠券\n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    // 规格中优惠券查看\n    see(data, name, index) {\n      this.tabName = name;\n      this.tabIndex = index;\n\n      if (this.formValidate.virtual_type === 1) {\n        if (data.disk_info != '') {\n          this.disk_type = 1;\n          this.disk_info = data.disk_info;\n          this.stock = data.stock;\n        } else if (data.virtual_list.length) {\n          this.disk_type = 2;\n          this.virtualList = data.virtual_list;\n        }\n        this.addVirtualModel = true;\n      } else {\n        this.$refs.goodsCoupon.isTemplate = true;\n        this.$refs.goodsCoupon.tableList(3);\n      }\n    },\n    // 添加优惠券\n    addGoodsCoupon(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.$refs.goodsCoupon.isTemplate = true;\n      this.$refs.goodsCoupon.tableList(3);\n    },\n    addVirtual(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.addVirtualModel = true;\n    },\n    // 提交卡密信息\n    upVirtual() {\n      if (this.disk_type == 2) {\n        for (let i = 0; i < this.virtualList.length; i++) {\n          const element = this.virtualList[i];\n          if (!element.value) {\n            this.$message.error('请输入所有卡密');\n            return;\n          }\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', this.virtualList);\n        this.$set(this[this.tabName][this.tabIndex], 'stock', this.virtualList.length);\n        this.virtualList = [\n          {\n            key: '',\n            value: '',\n          },\n        ];\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', '');\n      } else {\n        if (!this.disk_info.length) {\n          return this.$message.error('请填写卡密信息');\n        }\n        if (!this.stock) {\n          return this.$message.error('请填写库存数量');\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', this.disk_info);\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', []);\n      }\n      this.addVirtualModel = false;\n      this.closeVirtual();\n    },\n    //  初始化卡密数据信息\n    closeVirtual() {\n      this.addVirtualModel = false;\n      this.virtualList = [\n        {\n          key: '',\n          value: '',\n        },\n      ];\n      this.disk_info = '';\n      this.stock = 0;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    // 获取优惠券id数据\n    nameId(id, names) {\n      this.formValidate.coupon_ids = id;\n      this.couponName = this.unique(names);\n    },\n    // 获取优惠券信息\n    goodsCouponId(data) {\n      // this[this.tabName][this.tabIndex].coupon_id = data.id;\n      // this[this.tabName][this.tabIndex].coupon_name = data.title;\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_id', data.id);\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_name', data.title);\n      this.$refs.goodsCoupon.isTemplate = false;\n    },\n    handleClose(name) {\n      let index = this.couponName.indexOf(name);\n      this.couponName.splice(index, 1);\n      let couponIds = this.formValidate.coupon_ids;\n      couponIds.splice(index, 1);\n      this.updateIds = couponIds;\n      this.updateName = this.couponName;\n    },\n    // 运费模板\n    getList() {\n      this.productGetTemplate();\n    },\n    // 添加运费模板\n    addTemp() {\n      this.$refs.templates.isTemplate = true;\n    },\n    // 删除视频；\n    delVideo() {\n      let that = this;\n      that.$set(that.formValidate, 'video_link', '');\n      that.$set(that, 'progress', 0);\n      that.videoIng = false;\n      that.upload.videoIng = false;\n    },\n    zh_uploadFile() {\n      if (this.seletVideo == 1) {\n        this.formValidate.video_link = this.videoLink;\n      } else {\n        this.$refs.refid.click();\n      }\n    },\n    // 上传视频\n    zh_uploadFile_change(evfile) {\n      let that = this;\n      let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'));\n      if (suffix.indexOf('.mp4') === -1) {\n        return that.$message.error('只能上传MP4文件');\n      }\n      let types = {\n        key: evfile.target.files[0].name,\n        contentType: evfile.target.files[0].type,\n      };\n      productGetTempKeysApi(types)\n        .then((res) => {\n          that.$videoCloud\n            .videoUpload({\n              type: res.data.type,\n              evfile: evfile,\n              res: res,\n              uploading(status, progress) {\n                that.upload.videoIng = status;\n                if (res.status == 200) {\n                  that.progress = 100;\n                }\n              },\n            })\n            .then((res) => {\n              that.formValidate.video_link = res.url;\n              that.$message.success('视频上传成功');\n              that.upload.videoIng = false;\n            })\n            .catch((res) => {\n              that.$message.error(res);\n            });\n        })\n        .catch((res) => {\n          that.$message.error(res.msg);\n        });\n    },\n    // 上一页；\n    upTab() {\n      this.currentTab = (Number(this.currentTab) - 1).toString();\n    },\n    // 下一页；\n    downTab() {\n      this.currentTab = (Number(this.currentTab) + 1).toString();\n    },\n    // 属性弹窗回调函数；\n    userSearchs() {\n      this.productGetRule();\n    },\n    // 添加规则；\n    addRule() {\n      this.$refs.addattr.modal = true;\n    },\n    // 批量设置分佣；\n    brokerageSetUp() {\n      let that = this;\n      if (that.formValidate.is_sub.indexOf(1) > -1) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0) {\n          return that.$message.error('请填写返佣金额后进行批量添加');\n        }\n      } else if (that.formValidate.is_sub.indexOf(0) > -1) {\n        if (that.manyVipPrice <= 0) {\n          return that.$message.error('请填写会员价后进行批量添加');\n        }\n      }\n      if (this.formValidate.is_sub.length === 2) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0 || that.manyVipPrice <= 0) {\n          return that.$message.error('请填写完金额后进行批量添加');\n        }\n      }\n      for (let val of that.manyFormValidate) {\n        this.$set(val, 'brokerage', that.manyBrokerage);\n        this.$set(val, 'brokerage_two', that.manyBrokerageTwo);\n        this.$set(val, 'vip_price', that.manyVipPrice);\n      }\n    },\n    // 批量设置会员价\n    vipPriceSetUp() {\n      let that = this;\n      if (that.manyVipPrice <= 0) {\n        return that.$message.error('请填写会员价在进行批量添加');\n      } else {\n        for (let val of that.manyFormValidate) {\n          this.$set(val, 'vip_price', that.manyVipPrice);\n        }\n      }\n    },\n    // 新增卡密\n    handleAdd() {\n      this.virtualList.push({\n        key: '',\n        value: '',\n      });\n    },\n    // 初始化卡密信息\n    initVirtualData(status) {\n      this.virtualList = [\n        {\n          key: '',\n          value: '',\n        },\n      ];\n    },\n    removeVirtual(index) {\n      this.virtualList.splice(index, 1);\n    },\n    // 清空批量规格信息\n    batchDel() {\n      this.oneFormBatch = [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          virtual_list: [],\n        },\n      ];\n    },\n    confirm() {\n      let that = this;\n      that.createBnt = true;\n      if (that.formValidate.selectRule.trim().length <= 0) {\n        return that.$message.error('请选择属性');\n      }\n      that.ruleList.forEach(function (item, index) {\n        if (item.rule_name === that.formValidate.selectRule) {\n          that.attrs = item.rule_value;\n        }\n      });\n    },\n    // 获取商品属性模板；\n    productGetRule() {\n      productGetRuleApi().then((res) => {\n        this.ruleList = res.data;\n      });\n    },\n    // 获取运费模板；\n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    // 删除表格中的属性\n    delAttrTable(index) {\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {\n            this.manyFormValidate.splice(index, 1);\n            this.$message.success(res.msg);\n          })\n          .catch((res) => {\n            this.$message.error(res.msg);\n          });\n      } else {\n        this.manyFormValidate.splice(index, 1);\n      }\n    },\n    // 批量添加\n    batchAdd() {\n      for (let val of this.manyFormValidate) {\n        if (this.oneFormBatch[0].pic) {\n          this.$set(val, 'pic', this.oneFormBatch[0].pic);\n        }\n        if (this.oneFormBatch[0].price > 0) {\n          this.$set(val, 'price', this.oneFormBatch[0].price);\n        }\n        if (this.oneFormBatch[0].cost > 0) {\n          this.$set(val, 'cost', this.oneFormBatch[0].cost);\n        }\n        if (this.oneFormBatch[0].ot_price > 0) {\n          this.$set(val, 'ot_price', this.oneFormBatch[0].ot_price);\n        }\n        if (this.oneFormBatch[0].stock > 0) {\n          this.$set(val, 'stock', this.oneFormBatch[0].stock);\n        }\n        if (this.oneFormBatch[0].bar_code !== '') {\n          this.$set(val, 'bar_code', this.oneFormBatch[0].bar_code);\n        }\n        if (this.oneFormBatch[0].weight > 0) {\n          this.$set(val, 'weight', this.oneFormBatch[0].weight);\n        }\n        if (this.oneFormBatch[0].volume > 0) {\n          this.$set(val, 'volume', this.oneFormBatch[0].volume);\n        }\n      }\n    },\n    // 添加按钮\n    addBtn() {\n      this.clearAttr();\n      this.createBnt = false;\n      this.showIput = true;\n    },\n    // 立即生成\n    generate(type, isCopy, arr) {\n      generateAttrApi(\n        {\n          attrs: this.attrs,\n          is_virtual: [1, 2].includes(this.formValidate.virtual_type) ? 1 : 0,\n          virtual_type: this.formValidate.virtual_type,\n        },\n        this.formValidate.id,\n        type,\n      )\n        .then((res) => {\n          let info = res.data.info,\n            header1 = JSON.parse(JSON.stringify(info.header));\n          if (this.$route.params.id !== '0' && (this.$route.query.type != -1 || type) && !isCopy) {\n            this.manyFormValidate = info.value;\n          }\n          if (isCopy) {\n            this.manyFormValidate = arr;\n          }\n          let header = info.header;\n          if ([1, 2].includes(this.formValidate.virtual_type)) {\n            this.columnsInstalM = header;\n            this.formValidate.header = header;\n          } else {\n            this.formValidate.header = header1;\n            this.columnsInstalM = info.header;\n          }\n          this.checkAllGroup(this.formValidate.is_sub);\n          if (!this.$route.params.id && this.formValidate.spec_type === 1 && !isCopy) {\n            this.manyFormValidate.map((item) => {\n              item.pic = this.formValidate.image;\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          } else if (this.$route.params.id) {\n            this.manyFormValidate.map((item) => {\n              if (!item.pic) {\n                item.pic = this.formValidate.image;\n              }\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 取消\n    offAttrName() {\n      this.showIput = false;\n      this.createBnt = true;\n    },\n    clearAttr() {\n      this.formDynamic.attrsName = '';\n      this.formDynamic.attrsVal = '';\n    },\n    // 删除规格\n    handleRemoveRole(index) {\n      this.attrs.splice(index, 1);\n      this.manyFormValidate.splice(index, 1);\n    },\n    // 删除属性\n    handleRemove2(item, index) {\n      item.splice(index, 1);\n    },\n    // 添加规则名称\n    createAttrName() {\n      if (this.formDynamic.attrsName && this.formDynamic.attrsVal) {\n        let data = {\n          value: this.formDynamic.attrsName,\n          detail: [this.formDynamic.attrsVal],\n        };\n        this.attrs.push(data);\n        var hash = {};\n        this.attrs = this.attrs.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next.value] ? '' : (hash[next.value] = true && item.push(next));\n          return item;\n        }, []);\n        this.clearAttr();\n        this.showIput = false;\n        this.createBnt = true;\n      } else {\n        this.$message.warning('请添加完整的规格！');\n      }\n    },\n    // 添加属性\n    createAttr(num, idx) {\n      if (num) {\n        this.attrs[idx].detail.push(num);\n        var hash = {};\n        this.attrs[idx].detail = this.attrs[idx].detail.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next] ? '' : (hash[next] = true && item.push(next));\n          return item;\n        }, []);\n      } else {\n        this.$message.warning('请添加属性');\n      }\n    },\n    // 商品分类；\n    goodsCategory() {\n      cascaderListApi(1)\n        .then((res) => {\n          this.treeSelect = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    //视视上传类型\n    changeVideo(e) {\n      this.formValidate.video_link = '';\n      this.videoLink = '';\n    },\n    // 改变规格\n    changeSpec() {\n      this.formValidate.is_sub = [];\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {})\n          .catch((res) => {\n            this.formValidate.spec_type = this.spec_type;\n            this.$message.error(res.msg);\n          });\n      }\n    },\n    // 详情\n    getInfo() {\n      let that = this;\n      that.spinShow = true;\n      productInfoApi(that.$route.params.id)\n        .then(async (res) => {\n          let data = res.data.productInfo;\n          this.infoData(data);\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$message.error(res.msg);\n        });\n    },\n    handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.slider_image.splice(i, 1);\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n    },\n    // 关闭图片上传模态框\n    changeCancel(msg) {\n      this.modalPic = false;\n    },\n    // 点击商品图\n    modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          if (!this.$route.params.id) {\n            if (this.formValidate.spec_type === 0) {\n              this.oneFormValidate[0].pic = pc.att_dir;\n            } else {\n              this.manyFormValidate.map((item) => {\n                item.pic = pc.att_dir;\n              });\n              this.oneFormBatch[0].pic = pc.att_dir;\n            }\n          }\n          break;\n        case 'danTable':\n          this.oneFormValidate[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'duopi':\n          this.oneFormBatch[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'recommend_image':\n          this.formValidate.recommend_image = pc.att_dir;\n          break;\n        default:\n          this.manyFormValidate[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    // 获取多张图信息\n    getPicD(pc) {\n      this.images = pc;\n      this.images.map((item) => {\n        this.formValidate.slider_image.push(item.att_dir);\n        this.formValidate.slider_image = this.formValidate.slider_image.splice(0, 10);\n      });\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n      this.modalPic = false;\n    },\n    // 提交\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.formValidate.type = this.type;\n          if (this.formValidate.spec_type === 0) {\n            this.formValidate.attrs = this.oneFormValidate;\n            this.formValidate.header = [];\n            this.formValidate.items = [];\n            this.formValidate.is_copy = 0;\n          } else {\n            this.formValidate.items = this.attrs;\n            this.formValidate.attrs = this.manyFormValidate;\n            this.formValidate.is_copy = 1;\n          }\n          if (this.formValidate.spec_type === 1 && this.manyFormValidate.length === 0) {\n            return this.$message.warning('商品信息-请点击生成多规格');\n            // return this.$message.warning('请点击生成规格！');\n          }\n          let item = this.formValidate.attrs;\n          for (let i = 0; i < item.length; i++) {\n            if (item[i].stock > 1000000) {\n              return this.$message.error('规格库存-库存超出系统范围(1000000)');\n            }\n          }\n          if (this.formValidate.is_sub[0] === 1) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null) {\n                return this.$message.error('营销设置- 一二级返佣不能为空');\n              }\n            }\n          } else {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].vip_price === null) {\n                return this.$message.error('营销设置-会员价不能为空');\n              }\n            }\n          }\n          if (this.formValidate.is_sub.length === 2) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null || item[i].vip_price === null) {\n                return this.$message.error('营销设置- 一二级返佣和会员价不能为空');\n              }\n            }\n          }\n          if (this.formValidate.freight == 3 && !this.formValidate.temp_id) {\n            return this.$message.warning('商品信息-运费模板不能为空');\n          }\n          let activeIds = [];\n          this.dataLabel.forEach((item) => {\n            activeIds.push(item.id);\n          });\n          this.formValidate.label_id = activeIds;\n          if (this.openSubimit) return;\n          this.openSubimit = true;\n          this.formValidate.description = this.formatRichText(this.content);\n          productAddApi(this.formValidate)\n            .then(async (res) => {\n              this.openSubimit = false;\n              this.$message.success(res.msg);\n              if (this.$route.params.id === '0') {\n                cacheDelete().catch((err) => {\n                  this.$message.error(err.msg);\n                });\n              }\n              setTimeout(() => {\n                this.openSubimit = false;\n                this.$router.push({ path: this.$routeProStr + '/product/product_list' });\n              }, 500);\n            })\n            .catch((res) => {\n              setTimeout((e) => {\n                this.openSubimit = false;\n              }, 1000);\n              this.$message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.store_name) {\n            return this.$message.warning('商品信息-商品名称不能为空');\n          } else if (!this.formValidate.cate_id.length) {\n            return this.$message.warning('商品信息-商品分类不能为空');\n          } else if (!this.formValidate.unit_name) {\n            return this.$message.warning('商品信息-商品单位不能为空');\n          } else if (!this.formValidate.slider_image.length) {\n            return this.$message.warning('商品信息-商品轮播图不能为空');\n          } else if (!this.formValidate.logistics.length && !this.formValidate.virtual_type) {\n            return this.$message.warning('物流设置-至少选择一种物流方式');\n          } else if (!this.formValidate.temp_id && this.formValidate.freight == 3) {\n            return this.$message.warning('商品信息-运费模板不能为空');\n          }\n        }\n      });\n    },\n    changeTemplate(msg) {\n      this.template = msg;\n    },\n    // 表单验证\n    validate(prop, status, error) {\n      if (status === false) {\n        this.$message.warning(error);\n      }\n    },\n    // 移动\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.slider_image];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.slider_image = newItems;\n    },\n    // 过滤详情内容\n    formatRichText(html) {\n      let newContent = html.replace(/<img[^>]*>/gi, function (match, capture) {\n        match = match.replace(/style=\"[^\"]+\"/gi, '').replace(/style='[^']+'/gi, '');\n        match = match.replace(/width=\"[^\"]+\"/gi, '').replace(/width='[^']+'/gi, '');\n        match = match.replace(/height=\"[^\"]+\"/gi, '').replace(/height='[^']+'/gi, '');\n        return match;\n      });\n      newContent = newContent.replace(/style=\"[^\"]+\"/gi, function (match, capture) {\n        match = match.replace(/width:[^;]+;/gi, 'max-width:100%;').replace(/max-max-width:[^;]+;/gi, 'max-width:100%;')\n        return match;\n      });\n      newContent = newContent.replace(/<br[^>]*\\/>/gi, '');\n      newContent = newContent.replace(\n        /\\<img/gi,\n        '<img style=\"max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;\"',\n      );\n      return newContent;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.product_id) && res.set(arr.product_id, 1));\n    },\n    // 商品id\n    getProductId(data) {\n      this.goods_modals = false;\n      this.formValidate.recommend_list = this.unique(this.formValidate.recommend_list.concat(data));\n    },\n    // 选择推荐商品\n    changeGoods() {\n      this.goods_modals = true;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    // 选择用户标签\n    activeData(dataLabel) {\n      this.labelShow = false;\n      this.dataLabel = dataLabel;\n    },\n    // 标签弹窗关闭\n    labelClose() {\n      this.labelShow = false;\n    },\n    // 删除用户标签\n    closeLabel(label) {\n      let index = this.dataLabel.indexOf(this.dataLabel.filter((d) => d.id == label.id)[0]);\n      this.dataLabel.splice(index, 1);\n    },\n    // 打开选择用户标签\n    openLabel(row) {\n      this.labelShow = true;\n      this.$nextTick((e) => {\n        // this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)));\n      });\n    },\n    uniques(songs) {\n      let result = {};\n      let finalResult = [];\n      for (let i = 0; i < songs.length; i++) {\n        result[songs[i].product_id] = songs[i];\n      }\n      for (let item in result) {\n        finalResult.push(result[item]);\n      }\n      return finalResult;\n    },\n    handleRemoveRecommend(i) {\n      this.formValidate.recommend_list.splice(i, 1);\n    },\n    watchActivity() {\n      let marketing = []\n       this.formValidate.activity.map((el) => {\n        if (el == '默认') {\n          marketing.push(el);\n        }\n        if (el == '秒杀' && checkArray('seckill')) {\n          marketing.push(el);\n        } \n         if (el == '砍价' && checkArray('bargain')) {\n          marketing.push(el);\n        } \n         if (el == '拼团' && checkArray('combination')) {\n          marketing.push(el);\n        } \n      });\n      this.formValidate.activity = marketing\n    },\n  },\n};\n</script>\n<style scoped lang=\"stylus\">\n::v-deep .el-tabs__item {\n  height: 54px !important;\n  line-height: 54px !important;\n}\n\n.content_width {\n  width: 460px;\n}\n\n.list-group {\n  margin-left: -8px;\n}\n\n.borderStyle {\n  border: 1px solid #ccc;\n  padding: 8px;\n  border-radius: 4px;\n}\n\n.drag {\n  cursor: move;\n  margin: 3px 0\n}\n\n.move-icon {\n  width: 30px;\n  cursor: move;\n  margin-right: 10px;\n}\n\n.move-icon .icondrag2 {\n  font-size: 26px;\n  color: #d8d8d8;\n}\n\n.maxW ::v-deep .ivu-select-dropdown {\n  max-width: 600px;\n}\n\n#shopp-manager .ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.noLeft {\n  ::v-deep .ivu-form-item-content {\n    margin-left: 0 !important;\n  }\n}\n\n#shopp-manager .ivu-form-item {\n  position: relative;\n}\n\n#shopp-manager .ivu-form-item .tips {\n  position: absolute;\n  color: #999;\n  top: 29px;\n  left: -77px;\n  font-size: 12px;\n}\n\n.box-video-style {\n  width: 375px; \n  height: 211px;\n  border-radius: 10px;\n  background-color: #707070;\n  margin-top: 10px;\n  position: relative;\n  overflow: hidden;\n}\n\n.box-video-style .iconv {\n  color: #fff;\n  line-height: 180px;\n  width: 50px;\n  height: 50px;\n  display: inherit;\n  font-size: 26px;\n  position: absolute;\n  top: -74px;\n  left: 50%;\n  margin-left: -25px;\n  cursor: pointer;\n}\n\n.box-video-style .mark {\n  position: absolute;\n  width: 100%;\n  height: 30px;\n  top: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n}\n\n.submission {\n  margin-left: 10px;\n}\n\n.color-list .tip {\n  color: #c9c9c9;\n  font-size: 12px;\n}\n\n.color-list .color-item {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 10px;\n  color: #fff;\n  margin-right: 10px;\n  font-size: 12px;\n\n}\n\n.color-list .color-item.blue {\n  background-color: #1E9FFF;\n}\n\n.color-list .color-item.yellow {\n  background-color: rgb(254, 185, 0);\n}\n\n.color-list .color-item.green {\n  background-color: #009688;\n}\n\n.color-list .color-item.red {\n  background-color: #ed4014;\n}\n\n.columnsBox {\n  margin-right: 10px;\n  width: 200px;\n}\n\n.priceBox {\n  width: 100%;\n}\n\n.rulesBox {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  .item{\n    display:flex;\n    flex-wrap: wrap;\n  }\n}\n\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrueTab {\n  width: 40px !important;\n  height: 40px !important;\n}\n\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.curs {\n  cursor: pointer;\n}\n\n.inpWith {\n  width: 60%;\n}\n\n.labeltop {\n  ::v-deep .ivu-form-item-label {\n    float: none !important;\n    display: inline-block !important;\n    margin-left: 120px !important;\n    width: auto !important;\n  }\n}\n\n.video-icon {\n  background-image: url('https://cdn.oss.9gt.net/prov1.1/1/icons.png'); // cdn.oss.9gt.net/prov1.1/1/icons.png);\n  background-color: #fff;\n  background-position: -9999px;\n  background-repeat: no-repeat;\n}\n\n.see {\n  color: #2d8cf0;\n  cursor: pointer;\n}\n\n.trip {\n  color: #bbb;\n  margin-bottom: 10px;\n  font-size: 12px;\n}\n\n\n.virtual-data {\n  display: flex;\n  align-items: center;\n}\n\n.add-more {\n  margin-top: 20px;\n  display: flex;\n}\n\n.virtual-title {\n  width: 60px;\n}\n\n.scroll-virtual {\n  max-height: 400px;\n  overflow-y: auto;\n  margin-top: 10px;\n}\n\n.footer {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 30px;\n\n  .clear, .submit {\n    padding: 10px 20px;\n    border-radius: 5px;\n    color: #fff;\n    cursor: pointer;\n  }\n\n  .clear {\n    background-color: #ccc;\n    margin-right: 20px;\n  }\n\n  .submit {\n    background-color: #2d8cf0;\n  }\n}\n\n.picBox {\n  display: flex;\n}\n\n.btndel {\n  position: absolute;\n  z-index: 9;\n  width: 20px !important;\n  height: 20px !important;\n  left: 46px;\n  top: -4px;\n}\n\n.ifam {\n  width: 344px;\n  height: 644px;\n  background: url('../../../assets/images/phonebg.png') no-repeat center top;\n  background-size: 344px 644px;\n  padding: 40px 20px;\n  padding-top: 50px;\n  margin: 0 auto;\n\n  .content {\n    height: 560px;\n    overflow: hidden;\n    scrollbar-width: none; /* firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n\n  .content::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n::v-deep .ivu-date-picker {\n  width: 300px;\n}\n\n.virtual_boder {\n  border: 1px solid var(--prev-color-primary);\n}\n\n.virtual_boder2 {\n  border: 1px solid #E7E7E7;\n}\n\n.virtual_san {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 0;\n  height: 0;\n  border-bottom: 26px solid var(--prev-color-primary);\n  border-left: 26px solid transparent;\n}\n\n.virtual_dui {\n  position: absolute;\n  bottom: -2px;\n  right: 2px;\n  color: #FFFFFF;\n  font-family: system-ui;\n}\n\n.virtual {\n  width: 120px;\n  height: 60px;\n  background: #FFFFFF;\n  border-radius: 3px;\n  // border: 1px solid #E7E7E7;\n  float: left;\n  text-align: center;\n  padding-top: 8px;\n  position: relative;\n  cursor: pointer;\n  line-height: 23px;\n\n  .virtual_top {\n    font-size: 14px;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.85);\n  }\n\n  .virtual_bottom {\n    font-size: 12px;\n    font-weight: 400;\n    color: #999999;\n  }\n}\n\n.virtual:nth-child(2n) {\n  margin: 0 12px;\n}\n\n.addfont {\n  display: inline-block;\n  font-size: 12px;\n  font-weight: 400;\n  color: var(--prev-color-primary);\n  margin-left: 14px;\n  cursor: pointer;\n}\n\n.titTip {\n  display: inline-bolck;\n  font-size: 12px;\n  line-height: 24px;\n  font-weight: 400;\n  color: #999999;\n}\n\n.videbox {\n  width: 60px;\n  height: 60px;\n  background: rgba(0, 0, 0, 0.02);\n  border-radius: 4px;\n  border: 1px dashed #DDDDDD;\n  line-height: 50px;\n  text-align: center;\n  color: #898989;\n  font-size: 30px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.addCustom_content {\n  margin-top: 20px;\n\n  .custom_box {\n    margin-bottom: 10px;\n  }\n}\n\n.addCustomBox {\n  margin-top: 12px;\n  font-size: 13px;\n  font-weight: 400;\n  color: var(--prev-color-primary);\n\n  .btn {\n    cursor: pointer;\n    width: max-content;\n  }\n}\n\n.type-radio {\n  margin-buttom: 10px;\n}\n\n.deteal-btn {\n  color: #5179ea;\n}\n\n.stock-disk {\n  margin: 10px 0;\n}\n\n.line {\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 20px;\n}\n\n.labelInput {\n  border: 1px solid #dcdee2;\n  width: 414px;\n  padding: 0 15px;\n  border-radius: 5px;\n  min-height: 30px;\n  cursor: pointer;\n  font-size: 12px;\n\n  .span {\n    color: #c5c8ce;\n  }\n\n  .iconxiayi {\n    font-size: 12px;\n  }\n}\n\n#shopp-manager ::v-deep .ivu-form-item-content {\n  line-height: 33px !important;\n}\n\n#selectvideo ::v-deep .ivu-form-item-content {\n  line-height: 0px !important;\n}\n\n.progress {\n  margin-top: 10px;\n}\n.labelInput ::v-deep .el-tag{\n  color: #606266;\n  background-color: #F0F2F5;\n  border-color: #F0F2F5;\n  margin-right: 6px;\n}\n.labelInput ::v-deep .el-tag .el-tag__close{\n  color: #909399;\n}\n.labelInput ::v-deep .el-tag .el-tag__close:hover{\n  color: #fff;\n  background-color: #909399;\n}\n.brokerage{\n  font-size: 12px;\n}\n</style>\n"]}]}