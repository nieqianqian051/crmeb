{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEFjY291bnRMb2dpbiwgbG9naW5JbmZvQXBpLCBnZXRTYW5Db2RlS2V5LCBzY2FuU3RhdHVzLCBrZWZ1Q29uZmlnIH0gZnJvbSAnQC9hcGkva2VmdSc7CmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vYWNjb3VudC9taXhpbnMnOwppbXBvcnQgU2V0dGluZyBmcm9tICdAL3NldHRpbmcnOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBRUkNvZGUgZnJvbSAncXJjb2RlanMyJzsKaW1wb3J0IHsgZ2V0Q29va2llcywgcmVtb3ZlQ29va2llcywgc2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW21peGluc10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZ1bGxXaWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLAogICAgICBzd2lwZXJPcHRpb246IHsKICAgICAgICBwYWdpbmF0aW9uOiAnLnN3aXBlci1wYWdpbmF0aW9uJywKICAgICAgICBhdXRvcGxheTogdHJ1ZSwKICAgICAgfSwKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgYXV0b0xvZ2luOiB0cnVlLAogICAgICBpbWdjb2RlOiAnJywKICAgICAgZm9ybUlubGluZTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgY29kZTogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVJbmxpbmU6IHsKICAgICAgICB1c2VybmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIGNvZGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aqM6K+B56CBJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICB9LAogICAgICBlcnJvck51bTogMCwKICAgICAgamlnc2F3OiBudWxsLAogICAgICBsb2dpbl9sb2dvOiAnJywKICAgICAgc3dpcGVyTGlzdDogW10sCiAgICAgIGRlZmF1bHRTd2lwZXJMaXN0OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvc3cuanBnJyksCiAgICAgIGxvZ2luVHlwZTogMCwgLy8gMCDotKblj7cgMSDmiavnoIEKICAgICAgY29kZUtleTogJycsCiAgICAgIHNjYW5UaW1lOiAnJywKICAgICAgcnhwaXJlZDogZmFsc2UsIC8vIOaJq+eggeaYr+WQpui/h+acnwogICAgICBpc01vYmlsZTogZmFsc2UsCiAgICAgIHZlcnNpb246ICcnLCAvL+eJiOacrOWPtwogICAgICBpc1NjYW46IGZhbHNlLAogICAgICB0aW1lTnVtOiAwLAogICAgICBjb3B5cmlnaHQ6ICcnLAogICAgICBjb3B5cmlnaHRJbWc6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9sb2dvLWRhcmsucG5nJyksCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGtlZnVDb25maWcoKS50aGVuKChyZXMpID0+IHsKICAgICAgdGhpcy52ZXJzaW9uID0gcmVzLmRhdGEudmVyc2lvbjsKICAgICAgdGhpcy5jb3B5cmlnaHQgPSByZXMuZGF0YS5jb3B5cmlnaHQ7CiAgICAgIGlmIChyZXMuZGF0YS5zaXRlX25hbWUpIHsKICAgICAgICBkb2N1bWVudC50aXRsZSA9IHJlcy5kYXRhLnNpdGVfbmFtZTsKICAgICAgfQogICAgICBpZiAocmVzLmRhdGEuY29weXJpZ2h0SW1nKSB7CiAgICAgICAgdGhpcy5jb3B5cmlnaHRJbWcgPSByZXMuZGF0YS5jb3B5cmlnaHRJbWc7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pc01vYmlsZSA9IHRoaXMuJHN0b3JlLnN0YXRlLm1lZGlhLmlzTW9iaWxlOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRvcCAhPSB3aW5kb3cgJiYgKHRvcC5sb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaHJlZik7CiAgICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX3RoaXMuJHJvdXRlLm5hbWUgPT09ICdsb2dpbicpIHsKICAgICAgICBsZXQga2V5ID0gd2luZG93LmV2ZW50LmtleUNvZGU7CiAgICAgICAgaWYgKGtleSA9PT0gMTMpIHsKICAgICAgICAgIF90aGlzLmhhbmRsZVN1Ym1pdCgnZm9ybUlubGluZScpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVJlc2l6ZSk7CiAgfSwKICB3YXRjaDogewogICAgZnVsbFdpZHRoKHZhbCkgewogICAgICAvLyDkuLrkuobpgb/lhY3popHnuYHop6blj5FyZXNpemXlh73mlbDlr7zoh7TpobXpnaLljaHpob/vvIzkvb/nlKjlrprml7blmagKICAgICAgaWYgKCF0aGlzLnRpbWVyKSB7CiAgICAgICAgLy8g5LiA5pem55uR5ZCs5Yiw55qEc2NyZWVuV2lkdGjlgLzmlLnlj5jvvIzlsLHlsIblhbbph43mlrDotYvnu5lkYXRh6YeM55qEc2NyZWVuV2lkdGgKICAgICAgICB0aGlzLnNjcmVlbldpZHRoID0gdmFsOwogICAgICAgIHRoaXMudGltZXIgPSB0cnVlOwogICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOaJk+WNsHNjcmVlbldpZHRo5Y+Y5YyW55qE5YC8CiAgICAgICAgICB0aGF0LnRpbWVyID0gZmFsc2U7CiAgICAgICAgfSwgNDAwKTsKICAgICAgfQogICAgfSwKICAgICRyb3V0ZShuKSB7CiAgICAgIHRoaXMuY2FwdGNoYXMoKTsKICAgIH0sCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7fSk7CgogICAgdGhpcy5jYXB0Y2hhcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YiH5o2i5omr56CBCiAgICBiaW5kU2NhbigpIHsKICAgICAgaWYgKCF0aGlzLmlzU2NhbikgewogICAgICAgIHRoaXMuaXNTY2FuID0gdHJ1ZTsKICAgICAgICB0aGlzLmdldFNhbkNvZGVLZXkoKTsKICAgICAgfQogICAgICB0aGlzLmxvZ2luVHlwZSA9IDE7CiAgICB9LAogICAgLy8g55Sf5oiQ5LqM57u056CBCiAgICBjcmVhdFFyQ29kZSgpIHsKICAgICAgbGV0IHVybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9L3BhZ2VzL3VzZXJzL3NjYW5fbG9naW4vaW5kZXg/a2V5PSR7dGhpcy5jb2RlS2V5fWA7CiAgICAgIHZhciBxcmNvZGUgPSBuZXcgUVJDb2RlKHRoaXMuJHJlZnMucXJDb2RlVXJsLCB7CiAgICAgICAgdGV4dDogdXJsLCAvLyDpnIDopoHovazmjaLkuLrkuoznu7TnoIHnmoTlhoXlrrkKICAgICAgICB3aWR0aDogMTYwLAogICAgICAgIGhlaWdodDogMTYwLAogICAgICAgIGNvbG9yRGFyazogJyMwMDAwMDAnLAogICAgICAgIGNvbG9yTGlnaHQ6ICcjZmZmZmZmJywKICAgICAgICBjb3JyZWN0TGV2ZWw6IFFSQ29kZS5Db3JyZWN0TGV2ZWwuSCwKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YWz6Zet5qih5oCB5qGGCiAgICBjbG9zZU1vZGVsKCkgewogICAgICBBY2NvdW50TG9naW4oewogICAgICAgIGFjY291bnQ6IHRoaXMuZm9ybUlubGluZS51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtSW5saW5lLnBhc3N3b3JkLAogICAgICAgIGltZ2NvZGU6IHRoaXMuZm9ybUlubGluZS5jb2RlLAogICAgICB9KQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCBleHBpcmVzID0gdGhpcy5nZXRFeHBpcmVzVGltZShyZXMuZGF0YS5leHBfdGltZSk7CiAgICAgICAgICAvLyDorrDlvZXnlKjmiLfnmbvpmYbkv6Hmga8KICAgICAgICAgIHNldENvb2tpZXMoJ2tlZnVfdXVpZCcsIHJlcy5kYXRhLmtlZnVJbmZvLnVpZCwgZXhwaXJlcyk7CiAgICAgICAgICBzZXRDb29raWVzKCdrZWZ1X3Rva2VuJywgcmVzLmRhdGEudG9rZW4sIGV4cGlyZXMpOwogICAgICAgICAgc2V0Q29va2llcygna2VmdV9leHBpcmVzX3RpbWUnLCByZXMuZGF0YS5leHBfdGltZSwgZXhwaXJlcyk7CiAgICAgICAgICBzZXRDb29raWVzKCdrZWZ1SW5mbycsIHJlcy5kYXRhLmtlZnVJbmZvLCBleHBpcmVzKTsKCiAgICAgICAgICAvLyDorrDlvZXnlKjmiLfkv6Hmga8KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgna2VmdS9zZXRJbmZvJywgcmVzLmRhdGEua2VmdUluZm8pOwoKICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5tZWRpYS5pc01vYmlsZSkgewogICAgICAgICAgICAvL+aJi+acuumhtemdogogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiB0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdCB8fCAnL2tlZnUvbW9iaWxlX2xpc3QnIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcGPpobXpnaIKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogdGhpcy4kcm91dGUucXVlcnkucmVkaXJlY3QgfHwgJy9rZWZ1L3BjX2xpc3QnIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzID09PSB1bmRlZmluZWQgPyB7fSA6IHJlczsKICAgICAgICAgIHRoaXMuZXJyb3JOdW0rKzsKICAgICAgICAgIHRoaXMuY2FwdGNoYXMoKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cgfHwgJ+eZu+W9leWksei0pScpOwogICAgICAgICAgaWYgKHRoaXMuamlnc2F3KSB0aGlzLmppZ3Nhdy5yZXNldCgpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldEV4cGlyZXNUaW1lKGV4cGlyZXNUaW1lKSB7CiAgICAgIGxldCBub3dUaW1lTnVtID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpIC8gMTAwMCk7CiAgICAgIGxldCBleHBpcmVzVGltZU51bSA9IGV4cGlyZXNUaW1lIC0gbm93VGltZU51bTsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocGFyc2VGbG9hdChwYXJzZUZsb2F0KGV4cGlyZXNUaW1lTnVtIC8gNjApIC8gNjApIC8gMjQpOwogICAgfSwKICAgIGNsb3NlZmFpbCgpIHsKICAgICAgaWYgKHRoaXMuamlnc2F3KSB0aGlzLmppZ3Nhdy5yZXNldCgpOwogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmoKHpqozplJnor68nKTsKICAgIH0sCiAgICBoYW5kbGVSZXNpemUoZXZlbnQpIHsKICAgICAgdGhpcy5mdWxsV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICB9LAogICAgY2FwdGNoYXM6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pbWdjb2RlID0gU2V0dGluZy5hcGlCYXNlVVJMICsgJy9jYXB0Y2hhX3Bybz8nICsgRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQobmFtZSkgewogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5jbG9zZU1vZGVsKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5blrqLmnI3miavnoIFrZXkKICAgIGdldFNhbkNvZGVLZXkoKSB7CiAgICAgIGdldFNhbkNvZGVLZXkoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuY29kZUtleSA9IHJlcy5kYXRhLmtleTsKICAgICAgICAgIHRoaXMuY3JlYXRRckNvZGUoKTsKICAgICAgICAgIHRoaXMuc2NhblRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMudGltZU51bSsrOwogICAgICAgICAgICBpZiAodGhpcy50aW1lTnVtID49IDYwKSB7CiAgICAgICAgICAgICAgdGhpcy50aW1lTnVtID0gMDsKICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNjYW5UaW1lKTsKICAgICAgICAgICAgICB0aGlzLnJ4cGlyZWQgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuZ2V0U2NhblN0YXR1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMudGltZU51bSA9IDA7CiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNjYW5UaW1lKTsKICAgICAgICAgIHRoaXMucnhwaXJlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5omr56CB55m75b2V5oOF5Ya1CiAgICBnZXRTY2FuU3RhdHVzKCkgewogICAgICBzY2FuU3RhdHVzKHRoaXMuY29kZUtleSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAvLyAwID0g5LqM57u056CB6L+H5pyf6ZyA6KaB6YeN5paw6I635Y+W5o6I5p2D5Yet6K+BCiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgdGhpcy50aW1lTnVtID0gMDsKICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zY2FuVGltZSk7CiAgICAgICAgICAgIHRoaXMucnhwaXJlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICAvLyAxPeato+WcqOaJq+aPjwogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICB9CiAgICAgICAgICAvLyAzIOaJq+aPj+aIkOWKn+ato+WcqOeZu+W9lQogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAzKSB7CiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpOwogICAgICAgICAgICBsZXQgZXhwaXJlcyA9IHRoaXMuZ2V0RXhwaXJlc1RpbWUocmVzLmRhdGEuZXhwX3RpbWUpOwogICAgICAgICAgICAvLyDorrDlvZXnlKjmiLfnmbvpmYbkv6Hmga8KICAgICAgICAgICAgc2V0Q29va2llcygna2VmdV91dWlkJywgcmVzLmRhdGEua2VmdUluZm8udWlkLCBleHBpcmVzKTsKICAgICAgICAgICAgc2V0Q29va2llcygna2VmdV90b2tlbicsIHJlcy5kYXRhLnRva2VuLCBleHBpcmVzKTsKICAgICAgICAgICAgc2V0Q29va2llcygna2VmdV9leHBpcmVzX3RpbWUnLCByZXMuZGF0YS5leHBfdGltZSwgZXhwaXJlcyk7CiAgICAgICAgICAgIHNldENvb2tpZXMoJ2tlZnVJbmZvJywgcmVzLmRhdGEua2VmdUluZm8sIGV4cGlyZXMpOwogICAgICAgICAgICAvLyDorrDlvZXnlKjmiLfkv6Hmga8KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdrZWZ1L3NldEluZm8nLCByZXMuZGF0YS5rZWZ1SW5mbyk7CiAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5tZWRpYS5pc01vYmlsZSkgewogICAgICAgICAgICAgIC8v5omL5py66aG16Z2iCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogdGhpcy4kcm91dGUucXVlcnkucmVkaXJlY3QgfHwgJy9rZWZ1L21vYmlsZV9saXN0JyB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBwY+mhtemdogogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICcva2VmdS9wY19saXN0JyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvci5tc2cpOwogICAgICAgICAgdGhpcy50aW1lTnVtID0gMDsKICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpOwogICAgICAgICAgdGhpcy5yeHBpcmVkID0gdHJ1ZTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDliLfmlrDkuoznu7TnoIEKICAgIGJpbmRSZWZyZXNoKCkgewogICAgICB0aGlzLiRyZWZzLnFyQ29kZVVybC5pbm5lckhUTUwgPSAnJzsKICAgICAgdGhpcy5yeHBpcmVkID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0U2FuQ29kZUtleSgpOwogICAgfSwKICB9LAogIGJlZm9yZUNyZWF0ZSgpIHt9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMudGltZU51bSA9IDA7CiAgICB0aGlzLiRyZWZzLnFyQ29kZVVybC5pbm5lckhUTUwgPSAnJzsKICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2NhblRpbWUpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTsKICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjYW52YXMnKVswXS5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJywgJ2luZGV4X2JnJyk7CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/kefu","sourcesContent":["<template>\n  <div class=\"wrapper-box\">\n    <div class=\"page-account kf\">\n      <div class=\"content\">\n        <img :src=\"copyrightImg\" alt=\"\" />\n        <div class=\"desc\">\n          <p class=\"tit\">让客户服务如此简单</p>\n          <p class=\"kefu\">专业客服系统<br />助力企业打造一流的服务体验</p>\n        </div>\n      </div>\n      <div class=\"container\" :class=\"[fullWidth > 768 ? 'containerSamll' : 'containerBig']\">\n        <div class=\"index_from page-account-container\">\n          <div :style=\"{ display: !loginType ? 'block' : 'none' }\">\n            <div class=\"page-account-top\">\n              <div class=\"page-account-top-logo\">客服登录</div>\n            </div>\n            <el-form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @keyup.enter=\"handleSubmit('formInline')\">\n              <el-form-item class=\"mb20\" prop=\"username\">\n                <el-input type=\"text\" v-model=\"formInline.username\" placeholder=\"请输入用户名\" size=\"large\" />\n              </el-form-item>\n              <el-form-item class=\"mb20\" prop=\"password\">\n                <el-input type=\"password\" v-model=\"formInline.password\" placeholder=\"请输入密码\" size=\"large\" />\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" size=\"large\" @click=\"handleSubmit('formInline')\" class=\"btn\">登录 </el-button>\n              </el-form-item>\n            </el-form>\n            <div class=\"qh_box\" v-if=\"!isMobile\" @click=\"bindScan\"><span class=\"iconfont iconerweima2\"></span></div>\n          </div>\n          <div :style=\"{ display: loginType ? 'block' : 'none' }\">\n            <div class=\"page-account-top\">\n              <div class=\"page-account-top-logo\">微信扫码登录</div>\n            </div>\n            <div class=\"code-box\">\n              <div class=\"qrcode\" ref=\"qrCodeUrl\"></div>\n              <div class=\"rxpired-box\" v-show=\"rxpired\">\n                <p>已过期</p>\n                <el-button type=\"primary\" @click=\"bindRefresh\">点击刷新</el-button>\n              </div>\n            </div>\n            <div class=\"qh_box\" @click=\"loginType = 0\"><span class=\"iconfont iconzhanghaomima\"></span></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"foot-box\" v-if=\"copyright\">{{ copyright }}</div>\n    <div class=\"foot-box\" v-else>\n      Copyright © 2014-2024 <a href=\"https://www.crmeb.com\" target=\"_blank\">{{ version }}</a>\n    </div>\n  </div>\n</template>\n<script>\nimport { AccountLogin, loginInfoApi, getSanCodeKey, scanStatus, kefuConfig } from '@/api/kefu';\nimport mixins from '../account/mixins';\nimport Setting from '@/setting';\nimport util from '@/libs/util';\nimport QRCode from 'qrcodejs2';\nimport { getCookies, removeCookies, setCookies } from '@/libs/util';\nexport default {\n  mixins: [mixins],\n  data() {\n    return {\n      fullWidth: document.documentElement.clientWidth,\n      swiperOption: {\n        pagination: '.swiper-pagination',\n        autoplay: true,\n      },\n      modals: false,\n      autoLogin: true,\n      imgcode: '',\n      formInline: {\n        username: '',\n        password: '',\n        code: '',\n      },\n      ruleInline: {\n        username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n        code: [{ required: true, message: '请输入验证码', trigger: 'blur' }],\n      },\n      errorNum: 0,\n      jigsaw: null,\n      login_logo: '',\n      swiperList: [],\n      defaultSwiperList: require('@/assets/images/sw.jpg'),\n      loginType: 0, // 0 账号 1 扫码\n      codeKey: '',\n      scanTime: '',\n      rxpired: false, // 扫码是否过期\n      isMobile: false,\n      version: '', //版本号\n      isScan: false,\n      timeNum: 0,\n      copyright: '',\n      copyrightImg: require('@/assets/images/logo-dark.png'),\n    };\n  },\n  created() {\n    kefuConfig().then((res) => {\n      this.version = res.data.version;\n      this.copyright = res.data.copyright;\n      if (res.data.site_name) {\n        document.title = res.data.site_name;\n      }\n      if (res.data.copyrightImg) {\n        this.copyrightImg = res.data.copyrightImg;\n      }\n    });\n    this.isMobile = this.$store.state.media.isMobile;\n    var _this = this;\n    top != window && (top.location.href = location.href);\n    document.onkeydown = function (e) {\n      if (_this.$route.name === 'login') {\n        let key = window.event.keyCode;\n        if (key === 13) {\n          _this.handleSubmit('formInline');\n        }\n      }\n    };\n    window.addEventListener('resize', this.handleResize);\n  },\n  watch: {\n    fullWidth(val) {\n      // 为了避免频繁触发resize函数导致页面卡顿，使用定时器\n      if (!this.timer) {\n        // 一旦监听到的screenWidth值改变，就将其重新赋给data里的screenWidth\n        this.screenWidth = val;\n        this.timer = true;\n        let that = this;\n        setTimeout(function () {\n          // 打印screenWidth变化的值\n          that.timer = false;\n        }, 400);\n      }\n    },\n    $route(n) {\n      this.captchas();\n    },\n  },\n  mounted: function () {\n    this.$nextTick(() => {});\n\n    this.captchas();\n  },\n  methods: {\n    // 切换扫码\n    bindScan() {\n      if (!this.isScan) {\n        this.isScan = true;\n        this.getSanCodeKey();\n      }\n      this.loginType = 1;\n    },\n    // 生成二维码\n    creatQrCode() {\n      let url = `${window.location.protocol}//${window.location.host}/pages/users/scan_login/index?key=${this.codeKey}`;\n      var qrcode = new QRCode(this.$refs.qrCodeUrl, {\n        text: url, // 需要转换为二维码的内容\n        width: 160,\n        height: 160,\n        colorDark: '#000000',\n        colorLight: '#ffffff',\n        correctLevel: QRCode.CorrectLevel.H,\n      });\n    },\n    // 关闭模态框\n    closeModel() {\n      AccountLogin({\n        account: this.formInline.username,\n        password: this.formInline.password,\n        imgcode: this.formInline.code,\n      })\n        .then(async (res) => {\n          let expires = this.getExpiresTime(res.data.exp_time);\n          // 记录用户登陆信息\n          setCookies('kefu_uuid', res.data.kefuInfo.uid, expires);\n          setCookies('kefu_token', res.data.token, expires);\n          setCookies('kefu_expires_time', res.data.exp_time, expires);\n          setCookies('kefuInfo', res.data.kefuInfo, expires);\n\n          // 记录用户信息\n          this.$store.commit('kefu/setInfo', res.data.kefuInfo);\n\n          if (this.$store.state.media.isMobile) {\n            //手机页面\n            return this.$router.replace({ path: this.$route.query.redirect || '/kefu/mobile_list' });\n          } else {\n            // pc页面\n            return this.$router.replace({ path: this.$route.query.redirect || '/kefu/pc_list' });\n          }\n        })\n        .catch((res) => {\n          let data = res === undefined ? {} : res;\n          this.errorNum++;\n          this.captchas();\n          this.$message.error(data.msg || '登录失败');\n          if (this.jigsaw) this.jigsaw.reset();\n        });\n    },\n    getExpiresTime(expiresTime) {\n      let nowTimeNum = Math.round(new Date() / 1000);\n      let expiresTimeNum = expiresTime - nowTimeNum;\n      return parseFloat(parseFloat(parseFloat(expiresTimeNum / 60) / 60) / 24);\n    },\n    closefail() {\n      if (this.jigsaw) this.jigsaw.reset();\n      this.$message.error('校验错误');\n    },\n    handleResize(event) {\n      this.fullWidth = document.documentElement.clientWidth;\n    },\n    captchas: function () {\n      this.imgcode = Setting.apiBaseURL + '/captcha_pro?' + Date.parse(new Date());\n    },\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.closeModel();\n        }\n      });\n    },\n    // 获取客服扫码key\n    getSanCodeKey() {\n      getSanCodeKey()\n        .then((res) => {\n          this.codeKey = res.data.key;\n          this.creatQrCode();\n          this.scanTime = setInterval(() => {\n            this.timeNum++;\n            if (this.timeNum >= 60) {\n              this.timeNum = 0;\n              window.clearInterval(this.scanTime);\n              this.rxpired = true;\n            } else {\n              this.getScanStatus();\n            }\n          }, 1000);\n        })\n        .catch((error) => {\n          this.timeNum = 0;\n          window.clearInterval(this.scanTime);\n          this.rxpired = true;\n          this.$message.error(error.msg);\n        });\n    },\n    // 扫码登录情况\n    getScanStatus() {\n      scanStatus(this.codeKey)\n        .then(async (res) => {\n          // 0 = 二维码过期需要重新获取授权凭证\n          if (res.data.status == 0) {\n            this.timeNum = 0;\n            window.clearInterval(this.scanTime);\n            this.rxpired = true;\n          }\n          // 1=正在扫描\n          if (res.data.status == 1) {\n          }\n          // 3 扫描成功正在登录\n          if (res.data.status == 3) {\n            window.clearInterval(this.scanTime);\n            let expires = this.getExpiresTime(res.data.exp_time);\n            // 记录用户登陆信息\n            setCookies('kefu_uuid', res.data.kefuInfo.uid, expires);\n            setCookies('kefu_token', res.data.token, expires);\n            setCookies('kefu_expires_time', res.data.exp_time, expires);\n            setCookies('kefuInfo', res.data.kefuInfo, expires);\n            // 记录用户信息\n            this.$store.commit('kefu/setInfo', res.data.kefuInfo);\n            if (this.$store.state.media.isMobile) {\n              //手机页面\n              return this.$router.replace({ path: this.$route.query.redirect || '/kefu/mobile_list' });\n            } else {\n              // pc页面\n              return this.$router.replace({ path: this.$route.query.redirect || '/kefu/pc_list' });\n            }\n          }\n        })\n        .catch((error) => {\n          this.$message.error(error.msg);\n          this.timeNum = 0;\n          window.clearInterval(this.scanTime);\n          this.rxpired = true;\n        });\n    },\n    // 刷新二维码\n    bindRefresh() {\n      this.$refs.qrCodeUrl.innerHTML = '';\n      this.rxpired = false;\n      this.getSanCodeKey();\n    },\n  },\n  beforeCreate() {},\n  beforeDestroy: function () {\n    this.timeNum = 0;\n    this.$refs.qrCodeUrl.innerHTML = '';\n    window.clearInterval(this.scanTime);\n    window.removeEventListener('resize', this.handleResize);\n    // document.getElementsByTagName('canvas')[0].removeAttribute('class', 'index_bg');\n  },\n};\n</script>\n<style scoped lang=\"stylus\">\n.page-account {\n  display: flex;\n  width: 100%;\n  background-image: url('~@/assets/images/kfbg_2.jpg');\n  background-size: cover;\n  background-position: center;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  overflow: auto;\n\n  .content {\n    height: 400px;\n    margin-right: 100px;\n\n    .desc {\n      color: #fff;\n\n      .tit {\n        font-size: 40px;\n        font-weight: 600;\n      }\n\n      .kefu {\n        margin-top: 30px;\n        font-weight: 500;\n        font-size: 20px;\n      }\n    }\n\n    img {\n      width: 360px;\n      margin-left: -100px;\n    }\n  }\n}\n\n.code-box {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .qrcode {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 180px;\n    height: 180px;\n    border: 1px solid #E5E5E6;\n  }\n\n  .rxpired-box {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 160px;\n    height: 160px;\n    background: rgba(0, 0, 0, 0.6);\n\n    p {\n      margin-bottom: 10px;\n      font-size: 15px;\n      color: #fff;\n    }\n  }\n}\n\n.page-account-top-logo {\n  color: #000000;\n  font-size: 21px;\n}\n\n.wrapper-box {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n\n  .foot-box {\n    padding: 20px 20px;\n    font-size: 14px;\n    color: #666666;\n    text-align: right;\n    box-sizing: border-box;\n\n    a {\n      margin-left: 0;\n      color: #666666;\n    }\n  }\n}\n\n.page-account {\n  display: flex;\n  flex: 1;\n}\n\n.page-account .code {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.page-account .code .pictrue {\n  height: 40px;\n}\n\n.swiperPross {\n  border-radius: 6px 0px 0px 6px;\n}\n\n.swiperPross, .swiperPic, .swiperPic img {\n  width: 510px;\n  height: 100%;\n}\n\n.swiperPic img {\n  width: 100%;\n  height: 100%;\n}\n\n.container {\n  height: 400px !important;\n  padding: 0 !important;\n  /* overflow: hidden; */\n  border-radius: 6px;\n  z-index: 1;\n  display: flex;\n}\n\n.containerSamll {\n  width: 384px !important;\n  // margin-left: 30%;\n  background: #fff !important;\n}\n\n.containerBig {\n  width: 90%;\n  padding-bottom: 20px;\n  margin-top: 84px;\n  background: #f7f7f7 !important;\n  height: auto !important;\n  box-shadow: 0px 3px 20px rgba(0, 20, 41, 0.06);\n}\n\n.index_from {\n  position: relative;\n  padding: 40px 40px 32px 40px;\n  height: 400px;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.containerBig .index_from {\n  padding: 20px;\n  height: auto !important;\n}\n\n.index_from .qh_box {\n  position: absolute;\n  right: 12px;\n  top: 0;\n  cursor: pointer;\n\n  .iconfont {\n    color: #265BED;\n    font-size: 36px;\n  }\n}\n\n.page-account-top {\n  padding: 20px 0 50px !important;\n  box-sizing: border-box !important;\n  display: flex;\n  justify-content: center;\n}\n\n.page-account-container {\n  border-radius: 0px 6px 6px 0px;\n}\n\n.btn {\n  width: 100%;\n  background: #265BED;\n}\n\n.captchaBox {\n  width: 310px;\n}\n\ninput {\n  display: block;\n  width: 290px;\n  line-height: 40px;\n  margin: 10px 0;\n  padding: 0 10px;\n  outline: none;\n  border: 1px solid #c8cccf;\n  border-radius: 4px;\n  color: #6a6f77;\n}\n\n#msg {\n  width: 100%;\n  line-height: 40px;\n  font-size: 14px;\n  text-align: center;\n}\n\na:link, a:visited, a:hover, a:active {\n  margin-left: 100px;\n  color: #0366D6;\n}\n\n.index_from ::v-deep .ivu-input-large {\n  font-size: 14px !important;\n}\n</style>\n<style>\n@media screen and (min-width: 320px) and (max-width: 960px) {\n  .page-account {\n    background-image: url('~@/assets/images/m_bg.png') !important;\n    background-size: 100% auto !important;\n    background-repeat: no-repeat;\n    background-position: left top !important;\n    display: flex;\n  }\n  .wrapper-box .foot-box {\n    text-align: center !important;\n  }\n  .content {\n    display: none;\n  }\n  .index_from {\n    box-shadow: 0px 3px 20px rgba(0, 20, 41, 0.06);\n    background: #fff;\n  }\n  .wrapper-box .foot-box {\n    padding: 20px 66px !important;\n    color: #adadad !important;\n    font-size: 0.22rem !important;\n  }\n  .containerBig {\n    width: 86% !important;\n    border-radius: 0.2rem !important;\n    overflow: hidden;\n  }\n  .btn {\n    background: linear-gradient(90deg, #3875ea 0%, #1890fc 100%) !important;\n\n    border-radius: 0.41rem;\n  }\n  .ivu-input {\n    border: 1px solid #dcdee2;\n    -webkit-appearance: none; /*去除阴影边框*/\n    outline: none;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); /*点击高亮的颜色*/\n  }\n}\n</style>\n"]}]}