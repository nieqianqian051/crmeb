{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/breadcrumb/breadcrumb.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/breadcrumb/breadcrumb.vue","mtime":1720247281000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IExvY2FsIH0gZnJvbSAnQC91dGlscy9zdG9yYWdlLmpzJzsKaW1wb3J0IHsgUiB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgZ2V0TWVudW9wZW4gfSBmcm9tICdAL2xpYnMvdXRpbCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2xheW91dEJyZWFkY3J1bWInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iTGlzdDogW10sCiAgICAgIHJvdXRlU3BsaXQ6IFtdLAogICAgICByb3V0ZVNwbGl0Rmlyc3Q6ICcnLAogICAgICByb3V0ZVNwbGl0SW5kZXg6IDEsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGJyZWFkQ3J1bWJMaXN0KCkgewogICAgICBsZXQgbWVudUxpc3QgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tZW51cy5tZW51c05hbWU7CiAgICAgIGxldCBvcGVuTWVudXMgPSBnZXRNZW51b3Blbih0aGlzLiRyb3V0ZSwgbWVudUxpc3QpOwogICAgICBsZXQgYWxsTWVudUxpc3QgPSBSKG1lbnVMaXN0LCBbXSk7CiAgICAgIGxldCBzZWxlY3RNZW51ID0gW107CiAgICAgIGlmIChhbGxNZW51TGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgb3Blbk1lbnVzLmZvckVhY2goKGkpID0+IHsKICAgICAgICAgIGFsbE1lbnVMaXN0LmZvckVhY2goKGEpID0+IHsKICAgICAgICAgICAgaWYgKGkgPT09IGEucGF0aCkgewogICAgICAgICAgICAgIHNlbGVjdE1lbnUucHVzaChhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNlbGVjdE1lbnU7CiAgICB9LAogICAgY3J1bWJQYXN0KCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGxldCBtZW51TGlzdCA9IHRoYXQuJHN0b3JlLnN0YXRlLm1lbnVzLm1lbnVzTmFtZTsKICAgICAgbGV0IGFsbE1lbnVMaXN0ID0gUihtZW51TGlzdCwgW10pOwogICAgICBsZXQgc2VsZWN0TWVudSA9IFtdOwogICAgICBpZiAoYWxsTWVudUxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIGFsbE1lbnVMaXN0LmZvckVhY2goKGEpID0+IHsKICAgICAgICAgIGlmICh0aGF0LiRyb3V0ZS5wYXRoID09PSBhLnBhdGgpIHsKICAgICAgICAgICAgc2VsZWN0TWVudS5wdXNoKGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBzZWxlY3RNZW51OwogICAgfSwKICAgIC8vIOiOt+WPluW4g+WxgOmFjee9ruS/oeaBrwogICAgZ2V0VGhlbWVDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS50aGVtZUNvbmZpZy50aGVtZUNvbmZpZzsKICAgIH0sCiAgICAvLyDliqjmgIHorr7nva7nu4/lhbjjgIHmqKrlkJHluIPlsYDkuI3mmL7npLoKICAgIGlzU2hvd0JyZWFkY3J1bWIoKSB7CiAgICAgIGNvbnN0IHsgbGF5b3V0LCBpc0JyZWFkY3J1bWIgfSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnOwogICAgICBpZiAobGF5b3V0ID09PSAndHJhbnN2ZXJzZScgfHwgbGF5b3V0ID09PSAnY2xhc3NpYycpIHsKICAgICAgICByZXR1cm4gJ25vbmUnOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpc0JyZWFkY3J1bWIgPyAnJyA6ICdub25lJzsKICAgICAgfQogICAgfSwKICAgIGlzU2hvd2NydW1iKCkgewogICAgICBjb25zdCB7IGxheW91dCB9ID0gdGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWc7CiAgICAgIGlmIChsYXlvdXQgPT09ICd0cmFuc3ZlcnNlJyB8fCBsYXlvdXQgPT09ICdjbGFzc2ljJykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGNvbGxhcHNlU2hvdygpIHsKICAgICAgcmV0dXJuICBbJ2RlZmF1bHRzJywnY29sdW1ucyddLmluY2x1ZGVzKHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnLmxheW91dCk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFJvdXRlU3BsaXQodGhpcy4kcm91dGUucGF0aCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBicmVhZGNydW1iIOW9k+WJjemhueeCueWHu+aXtgogICAgb25CcmVhZGNydW1iQ2xpY2sodikgewogICAgICBjb25zdCB7IHJlZGlyZWN0LCBwYXRoIH0gPSB2OwogICAgICBpZiAocmVkaXJlY3QpIHRoaXMuJHJvdXRlci5wdXNoKHJlZGlyZWN0KTsKICAgICAgZWxzZSB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgIH0sCiAgICAvLyBicmVhZGNydW1iIGljb24g54K55Ye76I+c5Y2V5bGV5byA5LiO5pS26LW3CiAgICBvblRoZW1lQ29uZmlnQ2hhbmdlKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWcubGF5b3V0ID09ICdjb2x1bW5zJyAmJgogICAgICAgICF0aGlzLiRzdG9yZS5zdGF0ZS5tZW51cy5jaGlsZE1lbnVMaXN0Lmxlbmd0aCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnLmlzQ29sbGFwc2UKICAgICAgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnLmlzQ29sbGFwc2UgPSAhdGhpcy4kc3RvcmUuc3RhdGUudGhlbWVDb25maWcudGhlbWVDb25maWcuaXNDb2xsYXBzZTsKICAgICAgdGhpcy5zZXRMb2NhbFRoZW1lQ29uZmlnKCk7CiAgICB9LAogICAgLy8g5a2Y5YKo5biD5bGA6YWN572uCiAgICBzZXRMb2NhbFRoZW1lQ29uZmlnKCkgewogICAgICBMb2NhbC5yZW1vdmUoJ3RoZW1lQ29uZmlnUHJldicpOwogICAgICBMb2NhbC5zZXQoJ3RoZW1lQ29uZmlnUHJldicsIHRoaXMuJHN0b3JlLnN0YXRlLnRoZW1lQ29uZmlnLnRoZW1lQ29uZmlnKTsKICAgIH0sCiAgICAvLyDpgJLlvZLorr7nva4gYnJlYWRjcnVtYgogICAgZ2V0QnJlYWRjcnVtYkxpc3QoYXJyKSB7CiAgICAgIGFyci5tYXAoKGl0ZW0pID0+IHsKICAgICAgICB0aGlzLnJvdXRlU3BsaXQubWFwKCh2LCBrLCBhcnJzKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5yb3V0ZVNwbGl0Rmlyc3QgPT09IGl0ZW0ucGF0aCkgewogICAgICAgICAgICB0aGlzLnJvdXRlU3BsaXRGaXJzdCArPSBgLyR7YXJyc1t0aGlzLnJvdXRlU3BsaXRJbmRleF19YDsKICAgICAgICAgICAgdGhpcy5icmVhZGNydW1iTGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICB0aGlzLnJvdXRlU3BsaXRJbmRleCsrOwogICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgdGhpcy5nZXRCcmVhZGNydW1iTGlzdChpdGVtLmNoaWxkcmVuKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5b2T5YmN6Lev55Sx5YiG5Ymy5aSE55CGCiAgICBpbml0Um91dGVTcGxpdChwYXRoKSB7CiAgICAgIHRoaXMuYnJlYWRjcnVtYkxpc3QgPSBbCiAgICAgICAgewogICAgICAgICAgcGF0aDogJy8nLAogICAgICAgICAgbWV0YTogewogICAgICAgICAgICB0aXRsZTogdGhpcy4kc3RvcmUuc3RhdGUucm91dGVzTGlzdC5yb3V0ZXNMaXN0WzBdLnRpdGxlLAogICAgICAgICAgICBpY29uOiB0aGlzLiRzdG9yZS5zdGF0ZS5yb3V0ZXNMaXN0LnJvdXRlc0xpc3RbMF0uaWNvbiwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgXTsKICAgICAgLy8gICB0aGlzLnJvdXRlU3BsaXQgPSBwYXRoLnNwbGl0KCcvJyk7CiAgICAgIC8vICAgdGhpcy5yb3V0ZVNwbGl0LnNoaWZ0KCk7CiAgICAgIHRoaXMucm91dGVTcGxpdEZpcnN0ID0gcGF0aDsKICAgICAgdGhpcy5yb3V0ZVNwbGl0SW5kZXggPSAxOwogICAgICB0aGlzLmdldEJyZWFkY3J1bWJMaXN0KHRoaXMuJHN0b3JlLnN0YXRlLnJvdXRlc0xpc3Qucm91dGVzTGlzdCk7CiAgICB9LAogIH0sCiAgLy8g55uR5ZCs6Lev55Sx55qE5Y+Y5YyWCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIC8vIHRoaXMuaW5pdFJvdXRlU3BsaXQobmV3VmFsLnBhdGgpOwogICAgICAgIGxldCBtZW51TGlzdCA9IHRoaXMuJHN0b3JlLnN0YXRlLm1lbnVzLm1lbnVzTmFtZTsKICAgICAgICBsZXQgb3Blbk1lbnVzID0gZ2V0TWVudW9wZW4obmV3VmFsLCBtZW51TGlzdCk7CiAgICAgICAgbGV0IGFsbE1lbnVMaXN0ID0gUihtZW51TGlzdCwgW10pOwogICAgICAgIGxldCBzZWxlY3RNZW51ID0gW107CiAgICAgICAgaWYgKGFsbE1lbnVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIG9wZW5NZW51cy5mb3JFYWNoKChpKSA9PiB7CiAgICAgICAgICAgIGFsbE1lbnVMaXN0LmZvckVhY2goKGEpID0+IHsKICAgICAgICAgICAgICBpZiAoaSA9PT0gYS5wYXRoKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RNZW51LnB1c2goYSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["breadcrumb.vue"],"names":[],"mappings":";AAiCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"breadcrumb.vue","sourceRoot":"src/layout/navBars/breadcrumb","sourcesContent":["<template>\n  <div class=\"layout-navbars-breadcrumb\">\n    <!-- {{[...breadCrumbList,...crumbPast]}} -->\n    <i\n      v-if=\"collapseShow\"\n      class=\"layout-navbars-breadcrumb-icon\"\n      :class=\"getThemeConfig.isCollapse ? 'el-icon-s-unfold' : 'el-icon-s-fold'\"\n      @click=\"onThemeConfigChange\"\n    ></i>\n    <el-breadcrumb class=\"layout-navbars-breadcrumb-hide\" v-if=\"isShowcrumb\" :style=\"{ display: isShowBreadcrumb }\">\n      <transition-group name=\"breadcrumb\" mode=\"out-in\">\n        <el-breadcrumb-item v-for=\"(v, k) in [...breadCrumbList, ...crumbPast]\" :key=\"v.path\">\n          <span v-if=\"k == 1\" class=\"layout-navbars-breadcrumb-span\">\n            <Icon\n              :type=\"v.icon\"\n              class=\"ivu-icon layout-navbars-breadcrumb-iconfont\"\n              v-if=\"getThemeConfig.isBreadcrumbIcon\"\n            />{{ $t(v.title) }}\n          </span>\n          <a v-else @click.prevent=\"onBreadcrumbClick(v)\">\n            <Icon\n              :type=\"v.icon\"\n              class=\"ivu-icon layout-navbars-breadcrumb-iconfont\"\n              v-if=\"getThemeConfig.isBreadcrumbIcon\"\n            />{{ $t(v.title) }}\n          </a>\n        </el-breadcrumb-item>\n      </transition-group>\n    </el-breadcrumb>\n  </div>\n</template>\n\n<script>\nimport { Local } from '@/utils/storage.js';\nimport { R } from '@/libs/util';\nimport { getMenuopen } from '@/libs/util';\n\nexport default {\n  name: 'layoutBreadcrumb',\n  data() {\n    return {\n      breadcrumbList: [],\n      routeSplit: [],\n      routeSplitFirst: '',\n      routeSplitIndex: 1,\n    };\n  },\n  computed: {\n    breadCrumbList() {\n      let menuList = this.$store.state.menus.menusName;\n      let openMenus = getMenuopen(this.$route, menuList);\n      let allMenuList = R(menuList, []);\n      let selectMenu = [];\n      if (allMenuList.length > 0) {\n        openMenus.forEach((i) => {\n          allMenuList.forEach((a) => {\n            if (i === a.path) {\n              selectMenu.push(a);\n            }\n          });\n        });\n      }\n      return selectMenu;\n    },\n    crumbPast() {\n      let that = this;\n      let menuList = that.$store.state.menus.menusName;\n      let allMenuList = R(menuList, []);\n      let selectMenu = [];\n      if (allMenuList.length > 0) {\n        allMenuList.forEach((a) => {\n          if (that.$route.path === a.path) {\n            selectMenu.push(a);\n          }\n        });\n      }\n      return selectMenu;\n    },\n    // 获取布局配置信息\n    getThemeConfig() {\n      return this.$store.state.themeConfig.themeConfig;\n    },\n    // 动态设置经典、横向布局不显示\n    isShowBreadcrumb() {\n      const { layout, isBreadcrumb } = this.$store.state.themeConfig.themeConfig;\n      if (layout === 'transverse' || layout === 'classic') {\n        return 'none';\n      } else {\n        return isBreadcrumb ? '' : 'none';\n      }\n    },\n    isShowcrumb() {\n      const { layout } = this.$store.state.themeConfig.themeConfig;\n      if (layout === 'transverse' || layout === 'classic') {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    collapseShow() {\n      return  ['defaults','columns'].includes(this.$store.state.themeConfig.themeConfig.layout);\n    },\n  },\n  mounted() {\n    this.initRouteSplit(this.$route.path);\n  },\n  methods: {\n    // breadcrumb 当前项点击时\n    onBreadcrumbClick(v) {\n      const { redirect, path } = v;\n      if (redirect) this.$router.push(redirect);\n      else this.$router.push(path);\n    },\n    // breadcrumb icon 点击菜单展开与收起\n    onThemeConfigChange() {\n      if (\n        this.$store.state.themeConfig.themeConfig.layout == 'columns' &&\n        !this.$store.state.menus.childMenuList.length &&\n        this.$store.state.themeConfig.themeConfig.isCollapse\n      ) {\n        return;\n      }\n      this.$store.state.themeConfig.themeConfig.isCollapse = !this.$store.state.themeConfig.themeConfig.isCollapse;\n      this.setLocalThemeConfig();\n    },\n    // 存储布局配置\n    setLocalThemeConfig() {\n      Local.remove('themeConfigPrev');\n      Local.set('themeConfigPrev', this.$store.state.themeConfig.themeConfig);\n    },\n    // 递归设置 breadcrumb\n    getBreadcrumbList(arr) {\n      arr.map((item) => {\n        this.routeSplit.map((v, k, arrs) => {\n          if (this.routeSplitFirst === item.path) {\n            this.routeSplitFirst += `/${arrs[this.routeSplitIndex]}`;\n            this.breadcrumbList.push(item);\n            this.routeSplitIndex++;\n            if (item.children) this.getBreadcrumbList(item.children);\n          }\n        });\n      });\n    },\n    // 当前路由分割处理\n    initRouteSplit(path) {\n      this.breadcrumbList = [\n        {\n          path: '/',\n          meta: {\n            title: this.$store.state.routesList.routesList[0].title,\n            icon: this.$store.state.routesList.routesList[0].icon,\n          },\n        },\n      ];\n      //   this.routeSplit = path.split('/');\n      //   this.routeSplit.shift();\n      this.routeSplitFirst = path;\n      this.routeSplitIndex = 1;\n      this.getBreadcrumbList(this.$store.state.routesList.routesList);\n    },\n  },\n  // 监听路由的变化\n  watch: {\n    $route: {\n      handler(newVal) {\n        // this.initRouteSplit(newVal.path);\n        let menuList = this.$store.state.menus.menusName;\n        let openMenus = getMenuopen(newVal, menuList);\n        let allMenuList = R(menuList, []);\n        let selectMenu = [];\n        if (allMenuList.length > 0) {\n          openMenus.forEach((i) => {\n            allMenuList.forEach((a) => {\n              if (i === a.path) {\n                selectMenu.push(a);\n              }\n            });\n          });\n        }\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.layout-navbars-breadcrumb {\n  // flex: 1;\n  height: inherit;\n  display: flex;\n  align-items: center;\n  padding-left: 15px;\n  .layout-navbars-breadcrumb-icon {\n    cursor: pointer;\n    font-size: 18px;\n    margin-right: 15px;\n    color: var(--prev-bg-topBarColor);\n    opacity: 0.8;\n    &:hover {\n      opacity: 1;\n    }\n  }\n  .layout-navbars-breadcrumb-span {\n    opacity: 0.7;\n    color: var(--prev-bg-topBarColor);\n  }\n  .layout-navbars-breadcrumb-iconfont {\n    font-size: 14px;\n    margin-right: 5px;\n  }\n}\n</style>\n"]}]}