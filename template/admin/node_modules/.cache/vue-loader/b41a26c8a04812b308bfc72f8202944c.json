{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/user/index.vue?vue&type=style&index=0&id=e6b1c09e&scoped=true&lang=css","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/user/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/css-loader/index.js","mtime":1746465018503},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1746465020031},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/postcss-loader/src/index.js","mtime":1746465019371},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5pdnUtZm9ybS1pdGVtIHsKICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICBtYXJnaW4tYm90dG9tOiAwOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAuHA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/statistic/user","sourcesContent":["<template>\n  <div class=\"article-manager\">\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mb-16\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form ref=\"formInline\" label-width=\"80px\" label-position=\"right\" :model=\"formInline\" inline>\n          <el-form-item label=\"用户渠道：\">\n            <el-select\n              clearable\n              v-model=\"channel_type\"\n              placeholder=\"请选择用户渠道\"\n              @change=\"changeTxt\"\n              class=\"form_content_width\"\n            >\n              <el-option value=\"all\" label=\"全部\"></el-option>\n              <el-option value=\"wechat\" label=\"公众号\"></el-option>\n              <el-option value=\"routine\" label=\"小程序\"></el-option>\n              <el-option value=\"h5\" label=\"H5\"></el-option>\n              <el-option value=\"pc\" label=\"PC\"></el-option>\n              <el-option value=\"app\" label=\"APP\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"选择时间:\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n              class=\"mr20\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleSubmit('formInline')\">查询</el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"excel\">导出</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <user-info :formInline=\"formInline\" ref=\"userInfos\" key=\"1\"></user-info>\n    <wechet-info :formInline=\"formInline\" ref=\"wechetInfos\" v-if=\"isShow\" key=\"2\"></wechet-info>\n    <user-region :formInline=\"formInline\" ref=\"userRegions\" key=\"3\"></user-region>\n  </div>\n</template>\n\n<script>\nimport userInfo from './components/userInfo';\nimport wechetInfo from './components/wechetInfo';\nimport userRegion from './components/userRegion';\nimport { statisticUserExcel } from '@/api/statistic';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'index',\n  components: {\n    userInfo,\n    wechetInfo,\n    userRegion,\n  },\n  data() {\n    return {\n      formInline: {\n        channel_type: '',\n        data: '',\n      },\n      channel_type: 'all',\n      timeVal: [],\n      isShow: false,\n      pickerOptions: this.$timeOptions,\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formInline.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  methods: {\n    changeTxt() {\n      this.formInline.channel_type = this.channel_type === 'all' ? '' : this.channel_type;\n    },\n    // 导出\n    excel() {\n      statisticUserExcel(this.formInline).then(async (res) => {\n        res.data.url.map((item) => {\n          window.location.href = item;\n        });\n      });\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formInline.data = this.timeVal ? this.timeVal.join('-') : '';\n    },\n    handleSubmit() {\n      this.$refs.userInfos.getStatistics();\n      this.$refs.userInfos.getTrend();\n      this.$refs.userRegions.getTrend();\n      this.$refs.userRegions.getSex();\n      if (this.formInline.channel_type === 'wechat') {\n        this.isShow = true;\n        this.$refs.wechetInfos.getStatistics();\n        this.$refs.wechetInfos.getTrend();\n      } else {\n        this.isShow = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ivu-form-item {\n  padding-bottom: 10px;\n  margin-bottom: 0;\n}\n</style>\n"]}]}