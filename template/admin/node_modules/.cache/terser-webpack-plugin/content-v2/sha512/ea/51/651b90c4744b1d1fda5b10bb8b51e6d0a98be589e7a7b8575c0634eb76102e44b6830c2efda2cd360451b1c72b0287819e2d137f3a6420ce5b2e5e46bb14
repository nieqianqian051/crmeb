{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-08ef960e\"],{1184:function(e,t,n){n.d(t,\"c\",(function(){return a})),n.d(t,\"d\",(function(){return r})),n.d(t,\"a\",(function(){return o})),n.d(t,\"b\",(function(){return l})),n.d(t,\"g\",(function(){return s})),n.d(t,\"f\",(function(){return d})),n.d(t,\"e\",(function(){return m})),n(\"99af\");var i=n(\"6b6c\");function a(e){return Object(i.a)({url:\"marketing/lottery/list\",method:\"get\",params:e})}function r(e){return Object(i.a)({url:\"marketing/lottery/factor_info/\".concat(e),method:\"get\"})}function o(e){return Object(i.a)({url:\"marketing/lottery/add\",method:\"post\",data:e})}function l(e,t){return Object(i.a)({url:\"marketing/lottery/edit/\".concat(e),method:\"put\",data:t})}function s(e){return Object(i.a)({url:\"marketing/lottery/set_status/\".concat(e.id,\"/\").concat(e.status),method:\"post\"})}function d(e){return Object(i.a)({url:\"marketing/lottery/record/list\",method:\"get\",params:e})}function m(e){return Object(i.a)({url:\"marketing/lottery/record/deliver\",method:\"post\",data:e})}},\"61f7\":function(e,t,n){n.d(t,\"a\",(function(){return r})),n.d(t,\"c\",(function(){return s})),n.d(t,\"b\",(function(){return d}));var i=n(\"ade3\"),a=n(\"5530\");function r(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+\"\").substr(4-RegExp.$1.length)));var n,i,a={\"M+\":e.getMonth()+1,\"d+\":e.getDate(),\"h+\":e.getHours(),\"m+\":e.getMinutes(),\"s+\":e.getSeconds()};for(n in a)new RegExp(\"(\".concat(n,\")\")).test(t)&&(i=a[n]+\"\",t=t.replace(RegExp.$1,1===RegExp.$1.length?i:(\"00\"+i).substr(i.length)));return t}n(\"99af\"),n(\"13d5\"),n(\"b64b\"),n(\"d3b7\"),n(\"4d63\"),n(\"c607\"),n(\"ac1f\"),n(\"2c3e\"),n(\"00b4\"),n(\"25f0\"),n(\"5319\"),n(\"498a\");var o={min:\"%s最小长度为:min\",max:\"%s最大长度为:max\",length:\"%s长度必须为:length\",range:\"%s长度为:range\",pattern:\"$s格式错误\"};function l(e,t){e.message=function(e){return t.replace(\"%s\",e||\"\")}}function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)({required:!0,message:e,type:\"string\"},t)}function d(e){return m.pattern(/(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/,e)}l(s,\"请输入%s\"),l(d,\"%s格式不正确\");var m=Object.keys(o).reduce((function(e,t){return e[t]=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=\"range\"===t?{min:e[0],max:e[1]}:Object(i.a)({},t,e);return Object(a.a)(Object(a.a)({message:n.replace(\":\".concat(t),\"range\"===t?\"\".concat(e[0],\"-\").concat(e[1]):e),type:\"string\"},o),r)},l(e[t],o[t]),e}),{})},a2a2:function(e,t,n){n(\"cd90\")},ca99:function(e,t,n){n.r(t),n(\"b0c0\");var i=n(\"c7eb\"),a=n(\"1da1\"),r=n(\"5530\"),o=(n(\"a15b\"),n(\"2f62\")),l=n(\"1184\"),s=n(\"61f7\"),d=n(\"f8b7\"),m={deliver_name:[{required:!0,type:\"string\",message:\"请选择快递公司\",trigger:\"select\"}],deliver_number:[{required:!0,message:\"请输入快递单号\",trigger:\"blur\"}]},u={mark:[{required:!0,message:\"请输入备注信息\",trigger:\"blur\"}]};r={name:\"lotteryRecordList\",filters:{formatDate:function(e){if(0!==e)return e=new Date(1e3*e),Object(s.a)(e,\"yyyy-MM-dd hh:mm\")}},data:function(){return{shipModel:!1,loading:!1,locationList:[],shipForm:{id:\"\",deliver_name:\"\",deliver_number:null},markForm:{id:\"\",mark:\"\"},ruleShip:m,ruleMark:u,pickerOptions:this.$timeOptions,typeList:[{text:\"全部\",val:\"\"},{text:\"未中奖\",val:\"1\"},{text:\"积分\",val:\"2\"},{text:\"余额\",val:\"3\"},{text:\"红包\",val:\"4\"},{text:\"优惠券\",val:\"5\"},{text:\"商品\",val:\"6\"}],tableList:[],grid:{xl:7,lg:10,md:12,sm:24,xs:24},tableFrom:{keyword:\"\",date:[],page:1,limit:15,factor:\"\"},total:0,timeVal:[],modelType:1,lottery_id:\"\",modelTitle:\"\"}},computed:Object(r.a)(Object(r.a)({},Object(o.e)(\"admin/layout\",[\"isMobile\"])),{},{labelWidth:function(){return this.isMobile?void 0:\"80px\"},labelPosition:function(){return this.isMobile?\"top\":\"right\"}}),created:function(){this.tableFrom.lottery_id=this.$route.query.id,this.lottery_id=this.$route.query.id,this.getList(),this.getExpressData()},methods:{deliver:function(e,t){this.markForm.id=e.id,this.shipForm.id=e.id,this.shipForm.deliver_name=\"\",this.shipForm.deliver_number=\"\",this.markForm.mark=e.deliver_info.mark,this.modelType=t,this.shipModel=!0},isDeliver:function(e){this.markForm.id=e.id,this.shipForm.id=e.id,this.modelType=1,this.modelTitle=\"配送信息\",this.shipModel=!0,this.shipForm.deliver_name=e.deliver_info.deliver_name,this.shipForm.deliver_number=e.deliver_info.deliver_number},ok:function(e){var t=this;this.$refs[e].validate((function(e){Object(l.e)(1==t.modelType?t.shipForm:t.markForm).then((function(e){t.$message.success(\"操作成功\"),t.shipModel=!1,t.getList(),t.shipForm={id:\"\",deliver_name:\"\",deliver_number:null},t.modelTitle=\"\",t.markForm={id:\"\",mark:\"\"}})).catch((function(e){t.$message.error(e.msg)}))}))},cancel:function(){this.modelType=1,this.modelTitle=\"\",this.shipModel=!1},getExpressData:function(){var e=this;Object(d.j)().then(function(){var t=Object(a.a)(Object(i.a)().mark((function t(n){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.locationList=n.data;case 1:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.msg)}))},onchangeTime:function(e){this.timeVal=e||[],this.tableFrom.data=this.timeVal[0]&&this.timeVal?this.timeVal.join(\"-\"):\"\",this.tableFrom.page=1,this.getList()},selectChange:function(e){this.tableFrom.page=1,this.tableFrom.date=e,this.timeVal=[],this.getList()},selectType:function(e){this.tableFrom.page=1,this.timeVal=[],this.getList()},selectChangeFactor:function(){this.tableFrom.page=1,this.timeVal=[],this.getList()},getList:function(){var e=this;this.loading=!0,Object(l.f)(this.tableFrom).then(function(){var t=Object(a.a)(Object(i.a)().mark((function t(n){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.data,e.tableList=a.list,e.total=n.data.count,e.loading=!1;case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},userSearchs:function(){this.tableFrom.page=1,this.getList()}}},n(\"a2a2\"),o=n(\"2877\"),n=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t(\"div\",[t(\"el-card\",{staticClass:\"ivu-mt\",attrs:{bordered:!1,shadow:\"never\",\"body-style\":{padding:0}}},[t(\"div\",{staticClass:\"padding-add\"},[t(\"el-form\",{ref:\"tableFrom\",attrs:{model:e.tableFrom,\"label-width\":e.labelWidth,\"label-position\":\"right\",inline:\"\"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(\"el-form-item\",{attrs:{label:\"活动类型：\",clearable:\"\"}},[t(\"el-select\",{staticClass:\"form_content_width\",attrs:{type:\"button\",clearable:\"\"},on:{change:e.selectChangeFactor},model:{value:e.tableFrom.factor,callback:function(t){e.$set(e.tableFrom,\"factor\",t)},expression:\"tableFrom.factor\"}},[t(\"el-option\",{attrs:{label:\"积分抽取\",value:1}}),t(\"el-option\",{attrs:{label:\"订单支付\",value:3}}),t(\"el-option\",{attrs:{label:\"订单评价\",value:4}})],1)],1),t(\"el-form-item\",{attrs:{label:\"时间选择：\"}},[t(\"el-date-picker\",{staticStyle:{width:\"250px\"},attrs:{clearable:\"\",type:\"daterange\",editable:!1,format:\"yyyy/MM/dd\",\"value-format\":\"yyyy/MM/dd\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":e.pickerOptions},on:{change:e.onchangeTime},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:\"timeVal\"}})],1),t(\"el-form-item\",{attrs:{label:\"奖品类型：\"}},[t(\"el-select\",{staticClass:\"form_content_width\",attrs:{type:\"button\",clearable:\"\"},on:{change:e.selectType},model:{value:e.tableFrom.type,callback:function(t){e.$set(e.tableFrom,\"type\",t)},expression:\"tableFrom.type\"}},e._l(e.typeList,(function(e,n){return t(\"el-option\",{key:n,attrs:{label:e.text,value:e.val}})})),1)],1),t(\"el-form-item\",{attrs:{label:\"搜索用户：\",\"label-for\":\"store_name\"}},[t(\"el-input\",{staticClass:\"form_content_width\",attrs:{clearable:\"\",placeholder:\"请输入用户信息\"},model:{value:e.tableFrom.keyword,callback:function(t){e.$set(e.tableFrom,\"keyword\",t)},expression:\"tableFrom.keyword\"}})],1),t(\"el-form-item\",[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.userSearchs}},[e._v(\"查询\")])],1)],1)],1)]),t(\"el-card\",{staticClass:\"ivu-mt mt16\",attrs:{bordered:!1,shadow:\"never\"}},[t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{data:e.tableList,\"highlight-current-row\":\"\",\"no-userFrom-text\":\"暂无数据\",\"no-filtered-userFrom-text\":\"暂无筛选结果\"}},[t(\"el-table-column\",{attrs:{label:\"ID\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[t(\"div\",[e._v(e._s(n.row.id))])]}}])}),t(\"el-table-column\",{attrs:{label:\"用户信息\",\"min-width\":\"90\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[t(\"span\",[e._v(e._s(n.row.user.nickname)+\" \")])]}}])}),t(\"el-table-column\",{attrs:{label:\"奖品信息\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[t(\"div\",{staticClass:\"prize\"},[t(\"img\",{attrs:{src:n.row.prize.image,alt:\"\"}}),t(\"span\",[e._v(e._s(n.row.prize.name))])])]}}])}),t(\"el-table-column\",{attrs:{label:\"抽奖时间\",\"min-width\":\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[t(\"div\",[e._v(e._s(n.row.add_time))])]}}])}),t(\"el-table-column\",{attrs:{label:\"收货信息\",\"min-width\":\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[n.row.receive_info.name?t(\"div\",[t(\"div\",[e._v(\"姓名：\"+e._s(n.row.receive_info.name))]),t(\"div\",[e._v(\"电话：\"+e._s(n.row.receive_info.phone))]),t(\"div\",[e._v(\"地址：\"+e._s(n.row.receive_info.address))]),n.row.receive_info.mark?t(\"div\",[e._v(\"备注：\"+e._s(n.row.receive_info.mark))]):e._e()]):e._e()]}}])}),t(\"el-table-column\",{attrs:{label:\"备注\",\"min-width\":\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[t(\"span\",[e._v(e._s(n.row.deliver_info.mark))])]}}])}),t(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(n){return[6==n.row.type&&0===n.row.is_deliver?t(\"a\",{on:{click:function(t){return e.deliver(n.row,1)}}},[e._v(\"发货\")]):6==n.row.type&&1===n.row.is_deliver?t(\"a\",{on:{click:function(t){return e.isDeliver(n.row)}}},[e._v(\"配送信息\")]):e._e(),6==n.row.type?t(\"el-divider\",{attrs:{direction:\"vertical\"}}):e._e(),t(\"a\",{on:{click:function(t){return e.deliver(n.row,2)}}},[e._v(\"备注\")])]}}])})],1),t(\"div\",{staticClass:\"acea-row row-right page\"},[e.total?t(\"pagination\",{attrs:{total:e.total,page:e.tableFrom.page,limit:e.tableFrom.limit},on:{\"update:page\":function(t){return e.$set(e.tableFrom,\"page\",t)},\"update:limit\":function(t){return e.$set(e.tableFrom,\"limit\",t)},pagination:e.getList}}):e._e()],1)],1),t(\"el-dialog\",{attrs:{visible:e.shipModel,width:\"540px\",title:e.modelTitle||(1===e.modelType?\"发货\":\"备注\"),\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.shipModel=t}}},[t(\"el-form\",{ref:1===e.modelType?\"shipForm\":\"markForm\",attrs:{model:1===e.modelType?e.shipForm:e.markForm,rules:1===e.modelType?e.ruleShip:e.ruleMark,\"label-width\":\"90px\"},model:{value:e.shipModel,callback:function(t){e.shipModel=t},expression:\"shipModel\"}},[1===e.modelType?t(\"el-form-item\",{attrs:{label:\"快递公司：\",prop:\"deliver_name\"}},[t(\"el-select\",{staticClass:\"w100\",model:{value:e.shipForm.deliver_name,callback:function(t){e.$set(e.shipForm,\"deliver_name\",t)},expression:\"shipForm.deliver_name\"}},e._l(e.locationList,(function(e){return t(\"el-option\",{key:e.id,attrs:{value:e.value,label:e.value}})})),1)],1):e._e(),1===e.modelType?t(\"el-form-item\",{attrs:{label:\"快递单号：\",prop:\"deliver_number\"}},[t(\"el-input\",{staticClass:\"w100\",attrs:{placeholder:\"请输入快递单号\"},model:{value:e.shipForm.deliver_number,callback:function(t){e.$set(e.shipForm,\"deliver_number\",t)},expression:\"shipForm.deliver_number\"}}),\"顺丰速运\"==e.shipForm.deliver_name?t(\"div\",{staticClass:\"tips-info\"},[t(\"p\",[e._v(\"顺丰请输入单号 :收件人或寄件人手机号后四位\")]),t(\"p\",[e._v(\"例如：SF000000000000:3941\")])]):e._e()],1):e._e(),2===e.modelType?t(\"el-form-item\",{attrs:{label:\"备注：\"}},[t(\"el-input\",{staticClass:\"w100\",attrs:{placeholder:\"请输入备注\"},model:{value:e.markForm.mark,callback:function(t){e.$set(e.markForm,\"mark\",t)},expression:\"markForm.mark\"}})],1):e._e(),t(\"el-form-item\",[t(\"div\",{staticClass:\"acea-row row-right\"},[t(\"el-button\",{on:{click:function(t){return e.cancel(\"formValidate\")}}},[e._v(\"关闭\")]),t(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.ok(1===e.modelType?\"shipForm\":\"markForm\")}}},[e._v(\"提交\")])],1)])],1)],1)],1)}),[],!1,null,\"75662a20\",null);t.default=n.exports},cd90:function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/stylus-loader/index.js):\\nTypeError: Class constructor Visitor cannot be invoked without 'new'\\n    at new ImportVisitor (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:10:11)\\n    at listImports (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:72:23)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/pathcache.js:295:15\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Fulfilled.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:590:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/webpack/lib/NormalModule.js:316:20\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:367:11\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:233:18\\n    at context.callback (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Rejected.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:623:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\")}}]);","extractedComments":[]}