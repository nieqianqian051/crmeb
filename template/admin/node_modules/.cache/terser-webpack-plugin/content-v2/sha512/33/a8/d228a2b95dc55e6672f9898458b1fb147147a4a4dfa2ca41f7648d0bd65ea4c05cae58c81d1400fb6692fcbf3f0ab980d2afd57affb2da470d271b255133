{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-02b3abe2\"],{\"1c39\":function(e,n,t){t(\"ff28\")},\"3dda\":function(e,n){},\"433f\":function(e,n,t){e.exports=t.p+\"system_static/img/sw.3ef10e8b.jpg\"},\"59da\":function(e,n,t){e.exports=t.p+\"system_static/img/logo-dark.b9962944.png\"},7143:function(e,n,t){t(\"985a\")},\"985a\":function(e,n){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/stylus-loader/index.js):\\nTypeError: Class constructor Visitor cannot be invoked without 'new'\\n    at new ImportVisitor (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:10:11)\\n    at listImports (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:72:23)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/pathcache.js:295:15\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Fulfilled.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:590:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/webpack/lib/NormalModule.js:316:20\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:367:11\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:233:18\\n    at context.callback (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Rejected.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:623:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\")},d666:function(e,n,t){t.r(n);var i=t(\"c7eb\"),a=t(\"1da1\"),s=(t(\"99af\"),t(\"b0c0\"),t(\"ac1f\"),t(\"5319\"),t(\"42e3\")),o=t(\"3dda\"),r=(o=t.n(o),t(\"d708\")),l=t(\"c276\"),c=t(\"d044\"),d=t.n(c);c={mixins:[o.a],data:function(){return{fullWidth:document.documentElement.clientWidth,swiperOption:{pagination:\".swiper-pagination\",autoplay:!0},modals:!1,autoLogin:!0,imgcode:\"\",formInline:{username:\"\",password:\"\",code:\"\"},ruleInline:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"}],code:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}]},errorNum:0,jigsaw:null,login_logo:\"\",swiperList:[],defaultSwiperList:t(\"433f\"),loginType:0,codeKey:\"\",scanTime:\"\",rxpired:!1,isMobile:!1,version:\"\",isScan:!1,timeNum:0,copyright:\"\",copyrightImg:t(\"59da\")}},created:function(){var e=this,n=(Object(s.p)().then((function(n){e.version=n.data.version,e.copyright=n.data.copyright,n.data.site_name&&(document.title=n.data.site_name),n.data.copyrightImg&&(e.copyrightImg=n.data.copyrightImg)})),this.isMobile=this.$store.state.media.isMobile,this);top!=window&&(top.location.href=location.href),document.onkeydown=function(e){\"login\"===n.$route.name&&13===window.event.keyCode&&n.handleSubmit(\"formInline\")},window.addEventListener(\"resize\",this.handleResize)},watch:{fullWidth:function(e){var n;this.timer||(this.screenWidth=e,this.timer=!0,n=this,setTimeout((function(){n.timer=!1}),400))},$route:function(e){this.captchas()}},mounted:function(){this.$nextTick((function(){})),this.captchas()},methods:{bindScan:function(){this.isScan||(this.isScan=!0,this.getSanCodeKey()),this.loginType=1},creatQrCode:function(){var e=\"\".concat(window.location.protocol,\"//\").concat(window.location.host,\"/pages/users/scan_login/index?key=\").concat(this.codeKey);new d.a(this.$refs.qrCodeUrl,{text:e,width:160,height:160,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:d.a.CorrectLevel.H})},closeModel:function(){var e=this;Object(s.a)({account:this.formInline.username,password:this.formInline.password,imgcode:this.formInline.code}).then(function(){var n=Object(a.a)(Object(i.a)().mark((function n(t){var a;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.getExpiresTime(t.data.exp_time),Object(l.o)(\"kefu_uuid\",t.data.kefuInfo.uid,a),Object(l.o)(\"kefu_token\",t.data.token,a),Object(l.o)(\"kefu_expires_time\",t.data.exp_time,a),Object(l.o)(\"kefuInfo\",t.data.kefuInfo,a),e.$store.commit(\"kefu/setInfo\",t.data.kefuInfo),e.$store.state.media.isMobile)return n.abrupt(\"return\",e.$router.replace({path:e.$route.query.redirect||\"/kefu/mobile_list\"}));n.next=10;break;case 10:return n.abrupt(\"return\",e.$router.replace({path:e.$route.query.redirect||\"/kefu/pc_list\"}));case 11:case\"end\":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){n=void 0===n?{}:n,e.errorNum++,e.captchas(),e.$message.error(n.msg||\"登录失败\"),e.jigsaw&&e.jigsaw.reset()}))},getExpiresTime:function(e){var n=Math.round(new Date/1e3);return parseFloat(parseFloat(parseFloat((e-n)/60)/60)/24)},closefail:function(){this.jigsaw&&this.jigsaw.reset(),this.$message.error(\"校验错误\")},handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},captchas:function(){this.imgcode=r.a.apiBaseURL+\"/captcha_pro?\"+Date.parse(new Date)},handleSubmit:function(e){var n=this;this.$refs[e].validate((function(e){e&&n.closeModel()}))},getSanCodeKey:function(){var e=this;Object(s.l)().then((function(n){e.codeKey=n.data.key,e.creatQrCode(),e.scanTime=setInterval((function(){e.timeNum++,60<=e.timeNum?(e.timeNum=0,window.clearInterval(e.scanTime),e.rxpired=!0):e.getScanStatus()}),1e3)})).catch((function(n){e.timeNum=0,window.clearInterval(e.scanTime),e.rxpired=!0,e.$message.error(n.msg)}))},getScanStatus:function(){var e=this;Object(s.H)(this.codeKey).then(function(){var n=Object(a.a)(Object(i.a)().mark((function n(t){var a;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0==t.data.status&&(e.timeNum=0,window.clearInterval(e.scanTime),e.rxpired=!0),t.data.status,3!=t.data.status)n.next=15;else{if(window.clearInterval(e.scanTime),a=e.getExpiresTime(t.data.exp_time),Object(l.o)(\"kefu_uuid\",t.data.kefuInfo.uid,a),Object(l.o)(\"kefu_token\",t.data.token,a),Object(l.o)(\"kefu_expires_time\",t.data.exp_time,a),Object(l.o)(\"kefuInfo\",t.data.kefuInfo,a),e.$store.commit(\"kefu/setInfo\",t.data.kefuInfo),e.$store.state.media.isMobile)return n.abrupt(\"return\",e.$router.replace({path:e.$route.query.redirect||\"/kefu/mobile_list\"}));n.next=14}break;case 14:return n.abrupt(\"return\",e.$router.replace({path:e.$route.query.redirect||\"/kefu/pc_list\"}));case 15:case\"end\":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){e.$message.error(n.msg),e.timeNum=0,window.clearInterval(e.scanTime),e.rxpired=!0}))},bindRefresh:function(){this.$refs.qrCodeUrl.innerHTML=\"\",this.rxpired=!1,this.getSanCodeKey()}},beforeCreate:function(){},beforeDestroy:function(){this.timeNum=0,this.$refs.qrCodeUrl.innerHTML=\"\",window.clearInterval(this.scanTime),window.removeEventListener(\"resize\",this.handleResize)}},t(\"7143\"),t(\"1c39\"),o=t(\"2877\"),o=Object(o.a)(c,(function(){var e=this,n=e._self._c;return n(\"div\",{staticClass:\"wrapper-box\"},[n(\"div\",{staticClass:\"page-account kf\"},[n(\"div\",{staticClass:\"content\"},[n(\"img\",{attrs:{src:e.copyrightImg,alt:\"\"}}),e._m(0)]),n(\"div\",{staticClass:\"container\",class:[768<e.fullWidth?\"containerSamll\":\"containerBig\"]},[n(\"div\",{staticClass:\"index_from page-account-container\"},[n(\"div\",{style:{display:e.loginType?\"none\":\"block\"}},[e._m(1),n(\"el-form\",{ref:\"formInline\",attrs:{model:e.formInline,rules:e.ruleInline},on:{keyup:function(n){return!n.type.indexOf(\"key\")&&e._k(n.keyCode,\"enter\",13,n.key,\"Enter\")?null:e.handleSubmit(\"formInline\")}}},[n(\"el-form-item\",{staticClass:\"mb20\",attrs:{prop:\"username\"}},[n(\"el-input\",{attrs:{type:\"text\",placeholder:\"请输入用户名\",size:\"large\"},model:{value:e.formInline.username,callback:function(n){e.$set(e.formInline,\"username\",n)},expression:\"formInline.username\"}})],1),n(\"el-form-item\",{staticClass:\"mb20\",attrs:{prop:\"password\"}},[n(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入密码\",size:\"large\"},model:{value:e.formInline.password,callback:function(n){e.$set(e.formInline,\"password\",n)},expression:\"formInline.password\"}})],1),n(\"el-form-item\",[n(\"el-button\",{staticClass:\"btn\",attrs:{type:\"primary\",size:\"large\"},on:{click:function(n){return e.handleSubmit(\"formInline\")}}},[e._v(\"登录 \")])],1)],1),e.isMobile?e._e():n(\"div\",{staticClass:\"qh_box\",on:{click:e.bindScan}},[n(\"span\",{staticClass:\"iconfont iconerweima2\"})])],1),n(\"div\",{style:{display:e.loginType?\"block\":\"none\"}},[e._m(2),n(\"div\",{staticClass:\"code-box\"},[n(\"div\",{ref:\"qrCodeUrl\",staticClass:\"qrcode\"}),n(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.rxpired,expression:\"rxpired\"}],staticClass:\"rxpired-box\"},[n(\"p\",[e._v(\"已过期\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.bindRefresh}},[e._v(\"点击刷新\")])],1)]),n(\"div\",{staticClass:\"qh_box\",on:{click:function(n){e.loginType=0}}},[n(\"span\",{staticClass:\"iconfont iconzhanghaomima\"})])])])])]),e.copyright?n(\"div\",{staticClass:\"foot-box\"},[e._v(e._s(e.copyright))]):n(\"div\",{staticClass:\"foot-box\"},[e._v(\"\\n    Copyright © 2014-2024 \"),n(\"a\",{attrs:{href:\"https://www.crmeb.com\",target:\"_blank\"}},[e._v(e._s(e.version))])])])}),[function(){var e=this._self._c;return e(\"div\",{staticClass:\"desc\"},[e(\"p\",{staticClass:\"tit\"},[this._v(\"让客户服务如此简单\")]),e(\"p\",{staticClass:\"kefu\"},[this._v(\"专业客服系统\"),e(\"br\"),this._v(\"助力企业打造一流的服务体验\")])])},function(){var e=this._self._c;return e(\"div\",{staticClass:\"page-account-top\"},[e(\"div\",{staticClass:\"page-account-top-logo\"},[this._v(\"客服登录\")])])},function(){var e=this._self._c;return e(\"div\",{staticClass:\"page-account-top\"},[e(\"div\",{staticClass:\"page-account-top-logo\"},[this._v(\"微信扫码登录\")])])}],!1,null,\"631b3cf6\",null);n.default=o.exports},ff28:function(e,n,t){}}]);","extractedComments":[]}