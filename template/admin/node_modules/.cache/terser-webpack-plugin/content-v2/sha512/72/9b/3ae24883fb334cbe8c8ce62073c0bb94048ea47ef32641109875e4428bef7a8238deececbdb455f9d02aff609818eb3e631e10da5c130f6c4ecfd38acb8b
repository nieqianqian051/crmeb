{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-aff1876e\"],{\"31b4\":function(e,t,s){s(\"a630\"),s(\"3ca3\");var i=s(\"5530\"),a=(s(\"d3b7\"),s(\"159b\"),s(\"30ba\")),l=(a=s.n(a),s(\"6b6c\"),s(\"2f62\"));a.a.$form(),Object(i.a)({},Object(l.e)(\"userLevel\",[\"taskId\",\"levelId\"])),Boolean,s(\"2877\"),a=new Error(\"Cannot find module './from.vue?vue&type=style&index=0&id=224af4d2&prod&scoped=true&lang=stylus'\");throw a.code=\"MODULE_NOT_FOUND\",a},\"5cbd\":function(e,t,s){s.r(t),s(\"b0c0\");var i=s(\"c7eb\"),a=s(\"1da1\"),l=(t=s(\"5530\"),s(\"a434\"),s(\"2f62\")),n=s(\"c24f\"),o={name:\"task\",components:{editFrom:s(\"31b4\").a},data:function(){return{grid:{xl:10,lg:10,md:12,sm:24,xs:24},modals:!1,levelFrom:{is_show:\"\",name:\"\",page:1,limit:20},total:0,levelLists:[],loading:!1,FromData:null,ids:0,modalTitleSs:\"\",titleType:\"task\"}},computed:Object(t.a)(Object(t.a)(Object(t.a)({},Object(l.e)(\"media\",[\"isMobile\"])),Object(l.e)(\"userLevel\",[\"levelId\"])),{},{labelWidth:function(){return this.isMobile?void 0:\"80px\"},labelPosition:function(){return this.isMobile?\"top\":\"right\"}}),methods:Object(t.a)(Object(t.a)({},Object(l.d)(\"userLevel\",[\"getTaskId\",\"getlevelId\"])),{},{add:function(){this.ids=\"\",this.getFrom()},getFrom:function(){var e=this,t={id:this.ids,level_id:this.levelId};this.$modalForm(Object(n.f)(t)).then((function(){return e.getList()}))},edit:function(e){this.ids=e.id,this.getFrom()},handleReset:function(){this.modals=!1},userSearchs:function(){this.getList()},getList:function(){var e=this;this.loading=!0,this.levelFrom.is_show=this.levelFrom.is_show||\"\",Object(n.P)(this.levelId,this.levelFrom).then(function(){var t=Object(a.a)(Object(i.a)().mark((function t(s){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.data,e.levelLists=a.list,e.total=s.data.count,e.loading=!1;case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},onchangeIsShow:function(e){var t=this;e={id:e.id,is_show:e.is_show};Object(n.N)(e).then(function(){var e=Object(a.a)(Object(i.a)().mark((function e(s){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$message.success(s.msg);case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))},onchangeIsMust:function(e){var t=this;e={id:e.id,is_must:e.is_must};Object(n.M)(e).then(function(){var e=Object(a.a)(Object(i.a)().mark((function e(s){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$message.success(s.msg);case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))},submitFail:function(){this.getList()},del:function(e,t,s){var i=this;t={title:t,num:s,url:\"user/user_level/delete_task/\".concat(e.id),method:\"DELETE\",ids:\"\"};this.$modalSure(t).then((function(e){i.$message.success(e.msg),i.levelLists.splice(s,1)})).catch((function(e){i.$message.error(e.msg)}))}})};s=s(\"2877\"),Object(s.a)(o,(function(){var e=this,t=e._self._c;return t(\"el-dialog\",{attrs:{visible:e.modals,title:\"等级任务\",\"close-on-click-modal\":!1,width:\"1000px\"},on:{\"update:visible\":function(t){e.modals=t},closed:e.handleReset}},[t(\"el-form\",{ref:\"levelFrom\",attrs:{model:e.levelFrom,\"label-width\":e.labelWidth,\"label-position\":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[t(\"el-row\",{attrs:{gutter:24}},[t(\"el-col\",e._b({},\"el-col\",e.grid,!1),[t(\"el-form-item\",{attrs:{label:\"等级状态：\"}},[t(\"el-select\",{attrs:{placeholder:\"是否显示\",clearable:\"\"},on:{change:e.userSearchs},model:{value:e.levelFrom.is_show,callback:function(t){e.$set(e.levelFrom,\"is_show\",t)},expression:\"levelFrom.is_show\"}},[t(\"el-option\",{attrs:{value:\"1\",label:\"显示\"}}),t(\"el-option\",{attrs:{value:\"0\",label:\"不显示\"}})],1)],1)],1),t(\"el-col\",e._b({},\"el-col\",e.grid,!1),[t(\"el-form-item\",{attrs:{label:\"等级名称：\",prop:\"status2\",\"label-for\":\"status2\"}},[t(\"el-input\",{staticStyle:{width:\"100%\"},attrs:{search:\"\",\"enter-button\":\"\",placeholder:\"请输入等级名称\"},on:{\"on-search\":e.userSearchs},model:{value:e.levelFrom.name,callback:function(t){e.$set(e.levelFrom,\"name\",t)},expression:\"levelFrom.name\"}})],1)],1)],1)],1),t(\"el-divider\",{attrs:{direction:\"vertical\",dashed:\"\"}}),t(\"el-row\",[t(\"el-col\",e._b({staticClass:\"mb15\"},\"el-col\",e.grid,!1),[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.add}},[e._v(\"添加等级任务\")])],1),t(\"el-col\",{staticClass:\"userAlert\",attrs:{span:24}},[t(\"el-alert\",{attrs:{\"show-icon\":\"\",closable:\"\"}},[t(\"template\",{slot:\"title\"},[t(\"div\",[e._v(\"添加等级任务,任务类型中的{$num}会自动替换成限定数量+系统预设的单位生成任务名\")])])],2)],1)],1),t(\"el-divider\",{attrs:{direction:\"vertical\",dashed:\"\"}}),t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",attrs:{data:e.levelLists,\"no-userFrom-text\":\"暂无数据\",\"no-filtered-userFrom-text\":\"暂无筛选结果\"}},[t(\"el-table-column\",{attrs:{label:\"ID\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"span\",[e._v(e._s(s.row.id))])]}}])}),t(\"el-table-column\",{attrs:{label:\"等级名称\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"span\",[e._v(e._s(s.row.level_name))])]}}])}),t(\"el-table-column\",{attrs:{label:\"任务名称\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"span\",[e._v(e._s(s.row.name))])]}}])}),t(\"el-table-column\",{attrs:{label:\"是否显示\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"el-switch\",{staticClass:\"defineSwitch\",attrs:{\"active-value\":1,\"inactive-value\":0,value:s.row.is_show,size:\"large\",\"active-text\":\"显示\",\"inactive-text\":\"隐藏\"},on:{change:function(t){return e.onchangeIsShow(s.row)}},model:{value:s.row.is_show,callback:function(t){e.$set(s.row,\"is_show\",t)},expression:\"scope.row.is_show\"}})]}}])}),t(\"el-table-column\",{attrs:{label:\"务必达成\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"el-switch\",{staticClass:\"defineSwitch\",attrs:{\"active-value\":1,\"inactive-value\":0,value:s.row.is_must,\"true-value\":1,\"false-value\":0,size:\"large\",\"active-text\":\"全部\",\"inactive-text\":\"其一\"},on:{change:function(t){return e.onchangeIsMust(s.row)}},model:{value:s.row.is_must,callback:function(t){e.$set(s.row,\"is_must\",t)},expression:\"scope.row.is_must\"}})]}}])}),t(\"el-table-column\",{attrs:{label:\"任务说明\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"span\",[e._v(e._s(s.row.illustrate))])]}}])}),t(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",width:\"170\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"a\",{on:{click:function(t){return e.edit(s.row)}}},[e._v(\"编辑 | \")]),t(\"a\",{on:{click:function(t){return e.del(s.row,\"删除等级任务\",e.index)}}},[e._v(\" 删除\")])]}}])})],1),t(\"div\",{staticClass:\"acea-row row-right page\"},[e.total?t(\"pagination\",{attrs:{total:e.total,page:e.levelFrom.page,limit:e.levelFrom.limit},on:{\"update:page\":function(t){return e.$set(e.levelFrom,\"page\",t)},\"update:limit\":function(t){return e.$set(e.levelFrom,\"limit\",t)},pagination:e.getList}}):e._e()],1),t(\"edit-from\",{ref:\"edits\",attrs:{FromData:e.FromData,titleType:e.titleType},on:{submitFail:e.submitFail}})],1)}),[],!1,null,\"3467de02\",null).exports,Object(t.a)(Object(t.a)({},Object(l.e)(\"media\",[\"isMobile\"])),{},{labelWidth:function(){return this.isMobile?void 0:\"80px\"},labelPosition:function(){return this.isMobile?\"top\":\"right\"}}),Object(t.a)(Object(t.a)({},Object(l.d)(\"userLevel\",[\"getlevelId\"])),{},{changeMenu:function(e,t,s){switch(this.levelId=e.id,t){case\"1\":this.getlevelId(this.levelId),this.$refs.tasks.modals=!0,this.$refs.tasks.getList();break;case\"3\":this.edit(e);break;default:this.del(e,\"删除等级\",s)}},del:function(e,t,s){var i=this;t={title:t,num:s,url:\"user/user_level/delete/\".concat(e.id),method:\"put\",ids:\"\"};this.$modalSure(t).then((function(e){i.$message.success(e.msg),i.levelLists.splice(s,1),i.total--})).catch((function(e){i.$message.error(e.msg)}))},onchangeIsShow:function(e){var t=this;e={id:e.id,is_show:e.is_show};Object(n.L)(e).then(function(){var e=Object(a.a)(Object(i.a)().mark((function e(s){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$message.success(s.msg);case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg)}))},getList:function(){var e=this;this.loading=!0,this.levelFrom.is_show=this.levelFrom.is_show||\"\",Object(n.t)(this.levelFrom).then(function(){var t=Object(a.a)(Object(i.a)().mark((function t(s){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.data,e.levelLists=a.list,e.total=s.data.count,e.loading=!1;case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},add:function(){var e=this;this.levelId=0,this.$modalForm(Object(n.e)({id:this.levelId})).then((function(){return e.getList()}))},edit:function(e){var t=this;this.levelId=e.id,this.$modalForm(Object(n.e)({id:this.levelId})).then((function(){return t.getList()})),this.getlevelId(this.levelId)},userSearchs:function(){this.levelFrom.page=1,this.getList()},submitFail:function(){this.getList()}}),s=new Error(\"Cannot find module './index.vue?vue&type=style&index=0&id=2e4b0a78&prod&scoped=true&lang=stylus'\");throw s.code=\"MODULE_NOT_FOUND\",s}}]);","extractedComments":[]}