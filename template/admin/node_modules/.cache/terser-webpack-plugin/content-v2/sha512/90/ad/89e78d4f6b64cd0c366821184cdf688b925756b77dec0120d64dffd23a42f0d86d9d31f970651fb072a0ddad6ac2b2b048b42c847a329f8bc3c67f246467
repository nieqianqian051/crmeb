{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-a95fe086\"],{\"25a2\":function(t,e,a){a(\"56e3\")},\"4d92\":function(t,e,a){a.r(e),a(\"b0c0\");var i=a(\"c7eb\"),n=a(\"1da1\"),s=(a(\"a15b\"),a(\"d81d\"),a(\"14d9\"),a(\"a584\")),r=a(\"c71e\"),o=a(\"b7be\"),l=a(\"61f7\"),c=a(\"9901\"),d=a(\"fd73\");s={name:\"index\",components:{cardsData:s.a,echartsNew:r.a,echartsFrom:c.a,dateRadio:d.a},data:function(){return{timeVal:[],style:{height:\"400px\"},infoList:{},infoList2:{},echartLeft:!0,echartRight:!1,loading:!1,loading2:!1,formValidate:{time:\"\"},cardLists:[{col:8,count:0,name:\"当前积分\",className:\"icondangqianjifen\"},{col:8,count:0,name:\"累计总积分\",className:\"iconleijijifen\"},{col:8,count:0,name:\"累计消耗积分\",className:\"iconxiaohaojifen\"}],optionData:{},spinShow:!1,pickerOptions:this.$timeOptions,tabList:[],tabList2:[]}},created:function(){var t=new Date,e=new Date;e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),this.timeVal=[e,t],this.formValidate.time=Object(l.a)(e,\"yyyy/MM/dd\")+\"-\"+Object(l.a)(t,\"yyyy/MM/dd\"),this.onInit()},methods:{onInit:function(){this.getPointBasic(),this.getPointTrend(),this.getChannel(),this.getType()},onSelectDate:function(t){this.formValidate.time=t,this.onInit()},getPointBasic:function(){var t=this;Object(o.B)(this.formValidate).then((function(e){var a=[\"now_point\",\"all_point\",\"pay_point\"];t.cardLists.map((function(t,i){t.count=e.data[a[i]]}))}))},getChannel:function(){var t=this;this.loading=!0,Object(o.v)(this.formValidate).then((function(e){t.infoList=e.data,t.tabList=e.data.list,t.loading=!1}))},getType:function(){var t=this;this.loading2=!0,Object(o.D)(this.formValidate).then((function(e){t.infoList2=e.data,t.tabList2=e.data.list,t.loading2=!1}))},onchangeTime:function(t){this.timeVal=t,this.formValidate.time=this.timeVal?this.timeVal.join(\"-\"):\"\",this.name=this.formValidate.time,this.getPointBasic(),this.getPointTrend()},getPointTrend:function(){var t=this;this.spinShow=!0,Object(o.C)(this.formValidate).then(function(){var e=Object(n.a)(Object(i.a)().mark((function e(a){var n,s,r,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.data.series.map((function(t){return t.name})),s=a.data.xAxis,r=[\"#5B8FF9\",\"#5AD8A6\",\"#FFAB2B\",\"#5D7092\"],o=[],a.data.series.map((function(t,e){o.push({name:t.name,type:\"line\",data:t.data,itemStyle:{normal:{color:r[e]}},smooth:0})})),t.optionData={tooltip:{trigger:\"axis\",axisPointer:{type:\"cross\",label:{backgroundColor:\"#6a7985\"}}},legend:{x:\"center\",data:n},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:\"category\",boundaryGap:!0,axisLabel:{interval:0,rotate:40,textStyle:{color:\"#000000\"}},data:s},yAxis:{type:\"value\",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:\"#7F8B9C\"}},splitLine:{show:!0,lineStyle:{color:\"#F5F7F9\"}}},series:o},t.spinShow=!1;case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.msg),t.spinShow=!1}))}}},a(\"25a2\"),r=a(\"2877\"),c=Object(r.a)(s,(function(){var t=this,e=t._self._c;return e(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.spinShow,expression:\"spinShow\"}]},[e(\"el-card\",{staticClass:\"ivu-mb-16\",attrs:{bordered:!1,shadow:\"never\"}},[e(\"div\",{staticClass:\"acea-row row-middle\"},[e(\"span\",{staticClass:\"label_text\"},[t._v(\"时间选择：\")]),e(\"el-date-picker\",{staticClass:\"mr20\",staticStyle:{width:\"250px\"},attrs:{clearable:\"\",type:\"daterange\",editable:!1,format:\"yyyy/MM/dd\",\"value-format\":\"yyyy/MM/dd\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":t.pickerOptions},on:{change:t.onchangeTime},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:\"timeVal\"}})],1)]),0<=t.cardLists.length?e(\"cards-data\",{attrs:{cardLists:t.cardLists}}):t._e(),e(\"el-card\",{attrs:{bordered:!1,shadow:\"never\"}},[e(\"h4\",[t._v(\"积分使用趋势\")]),t.optionData?e(\"echarts-new\",{attrs:{\"option-data\":t.optionData,styles:t.style,height:\"100%\",width:\"100%\"}}):t._e()],1),e(\"div\",{staticClass:\"code-row-bg\"},[e(\"el-card\",{staticClass:\"ivu-mt mt10 mr10\",attrs:{bordered:!1,shadow:\"never\"}},[e(\"div\",{staticClass:\"acea-row row-between-wrapper\"},[e(\"h4\",{staticClass:\"statics-header-title\"},[t._v(\"积分来源分析\")]),e(\"div\",{staticClass:\"change-style\",on:{click:function(e){t.echartLeft=!t.echartLeft}}},[t._v(\"切换样式\")])]),e(\"div\",{staticClass:\"ech-box\"},[t.echartLeft?e(\"echarts-from\",{ref:\"visitChart\",attrs:{infoList:t.infoList,echartsTitle:\"circle\"}}):t._e(),e(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.echartLeft,expression:\"!echartLeft\"},{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"selection\",attrs:{data:t.tabList,\"empty-text\":\"暂无数据\",\"highlight-current-row\":\"\"}},[e(\"el-table-column\",{attrs:{type:\"index\",width:\"60\"}}),e(\"el-table-column\",{attrs:{label:\"来源\",\"min-width\":\"80\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"span\",[t._v(t._s(a.row.name))])]}}])}),e(\"el-table-column\",{attrs:{label:\"金额\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"span\",[t._v(t._s(a.row.value))])]}}])}),e(\"el-table-column\",{attrs:{label:\"占比率\",\"min-width\":\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"div\",{staticClass:\"percent-box\"},[e(\"div\",{staticClass:\"line\"},[e(\"div\",{staticClass:\"bg\"}),e(\"div\",{staticClass:\"percent\",style:\"width:\"+a.row.percent+\"%;\"})]),e(\"div\",{staticClass:\"num\"},[t._v(t._s(a.row.percent)+\"%\")])])]}}])})],1)],1)]),e(\"el-card\",{staticClass:\"ivu-mt mt10\",attrs:{bordered:!1,shadow:\"never\"}},[e(\"div\",{staticClass:\"acea-row row-between-wrapper\"},[e(\"h4\",{staticClass:\"statics-header-title\"},[t._v(\"积分消耗\")]),e(\"div\",{staticClass:\"change-style\",on:{click:function(e){t.echartRight=!t.echartRight}}},[t._v(\"切换样式\")])]),e(\"div\",{staticClass:\"ech-box\"},[t.echartRight?e(\"echarts-from\",{ref:\"visitChart\",attrs:{infoList:t.infoList2,echartsTitle:\"circle\"}}):t._e(),e(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.echartRight,expression:\"!echartRight\"},{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"selection\",attrs:{data:t.tabList,\"empty-text\":\"暂无数据\",\"highlight-current-row\":\"\"}},[e(\"el-table-column\",{attrs:{type:\"index\",width:\"60\"}}),e(\"el-table-column\",{attrs:{label:\"来源\",\"min-width\":\"80\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"span\",[t._v(t._s(a.row.name))])]}}])}),e(\"el-table-column\",{attrs:{label:\"金额\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"span\",[t._v(t._s(a.row.value))])]}}])}),e(\"el-table-column\",{attrs:{label:\"占比率\",\"min-width\":\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(a){return[e(\"div\",{staticClass:\"percent-box\"},[e(\"div\",{staticClass:\"line\"},[e(\"div\",{staticClass:\"bg\"}),e(\"div\",{staticClass:\"percent\",style:\"width:\"+a.row.percent+\"%;\"})]),e(\"div\",{staticClass:\"num\"},[t._v(t._s(a.row.percent)+\"%\")])])]}}])})],1)],1)])],1)],1)}),[],!1,null,\"1901b596\",null);e.default=c.exports},\"56e3\":function(t,e,a){},\"61f7\":function(t,e,a){a.d(e,\"a\",(function(){return s})),a.d(e,\"c\",(function(){return l})),a.d(e,\"b\",(function(){return c}));var i=a(\"ade3\"),n=a(\"5530\");function s(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+\"\").substr(4-RegExp.$1.length)));var a,i,n={\"M+\":t.getMonth()+1,\"d+\":t.getDate(),\"h+\":t.getHours(),\"m+\":t.getMinutes(),\"s+\":t.getSeconds()};for(a in n)new RegExp(\"(\".concat(a,\")\")).test(e)&&(i=n[a]+\"\",e=e.replace(RegExp.$1,1===RegExp.$1.length?i:(\"00\"+i).substr(i.length)));return e}a(\"99af\"),a(\"13d5\"),a(\"b64b\"),a(\"d3b7\"),a(\"4d63\"),a(\"c607\"),a(\"ac1f\"),a(\"2c3e\"),a(\"00b4\"),a(\"25f0\"),a(\"5319\"),a(\"498a\");var r={min:\"%s最小长度为:min\",max:\"%s最大长度为:max\",length:\"%s长度必须为:length\",range:\"%s长度为:range\",pattern:\"$s格式错误\"};function o(t,e){t.message=function(t){return e.replace(\"%s\",t||\"\")}}function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)({required:!0,message:t,type:\"string\"},e)}function c(t){return d.pattern(/(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/,t)}o(l,\"请输入%s\"),o(c,\"%s格式不正确\");var d=Object.keys(r).reduce((function(t,e){return t[e]=function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=\"range\"===e?{min:t[0],max:t[1]}:Object(i.a)({},e,t);return Object(n.a)(Object(n.a)({message:a.replace(\":\".concat(e),\"range\"===e?\"\".concat(t[0],\"-\").concat(t[1]):t),type:\"string\"},r),s)},o(t[e],r[e]),t}),{})},9901:function(t,e,a){var i=a(\"313e\"),n=a.n(i);i={name:\"index\",props:{infoList:{type:Object,default:null},series:Array,echartsTitle:{type:String,default:\"\"},yAxisData:{type:Array,default:function(){return[]}},bingXdata:Array},data:function(){return{infoLists:this.infoList,seriesArray:this.series}},watch:{infoList:{handler:function(t,e){this.infoLists=t,this.handleSetVisitChart()},deep:!0},series:{handler:function(t,e){this.seriesArray=t,this.handleSetVisitChart()},deep:!0}},computed:{echarts:function(){return\"echarts\"+Math.ceil(100*Math.random())}},mounted:function(){var t=this,e=this;e.$nextTick((function(){e.handleSetVisitChart(),window.addEventListener(\"resize\",t.wsFunc)}))},methods:{wsFunc:function(){this.myChart.resize()},handleSetVisitChart:function(){this.myChart=n.a.init(document.getElementById(this.echarts));var t=null;t=\"circle\"===this.echartsTitle?{tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{orient:\"vertical\",left:\"right\",data:this.infoLists.bing_xdata||[]},series:[{name:\"访问来源\",type:\"pie\",radius:\"70%\",center:[\"50%\",\"60%\"],data:this.infoLists.bing_data||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:\"rgba(0, 0, 0, 0.5)\"}}}]}:{tooltip:{trigger:\"axis\"},toolbox:{},legend:{data:this.infoLists.legend||[]},color:[\"#1495EB\",\"#00CC66\",\"#F9D249\",\"#ff9900\",\"#9860DF\"],grid:{left:16,right:25,bottom:10,top:40,containLabel:!0},xAxis:[{type:\"category\",axisLine:{lineStyle:{color:\"#D7DDE4\"}},axisTick:{alignWithLabel:!0,lineStyle:{color:\"#D7DDE4\"}},splitLine:{show:!1,lineStyle:{color:\"#F5F7F9\"}},axisLabel:{interval:0,rotate:40,textStyle:{color:\"#7F8B9C\"}},data:this.infoLists.xAxis}],yAxis:this.yAxisData.length?this.yAxisData:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:\"#7F8B9C\"}},splitLine:{show:!0,lineStyle:{color:\"#F5F7F9\"}},type:\"value\"},series:this.seriesArray};this.myChart.setOption(t,!0)},handleResize:function(){this.myChart.resize()}},beforeDestroy:function(){window.removeEventListener(\"resize\",this.wsFunc),this.myChart&&(this.myChart.dispose(),this.myChart=null)}},a=a(\"2877\"),a=Object(a.a)(i,(function(){var t=this._self._c;return t(\"div\",[t(\"div\",{staticStyle:{height:\"300px\"},attrs:{id:this.echarts}})])}),[],!1,null,\"00217dc6\",null);e.a=a.exports},a584:function(t,e,a){throw a(\"b0c0\"),a(\"2877\"),a=new Error(\"Cannot find module './cards.vue?vue&type=style&index=0&id=50f2a66a&prod&scoped=true&lang=stylus'\"),a.code=\"MODULE_NOT_FOUND\",a},c71e:function(t,e,a){var i=a(\"313e\"),n=a.n(i);i={name:\"Index\",props:{styles:{type:Object,default:null},optionData:{type:Object,default:null}},data:function(){return{myChart:null}},computed:{echarts:function(){return\"echarts\"+Math.ceil(100*Math.random())}},watch:{optionData:{handler:function(t,e){this.handleSetVisitChart()},deep:!0}},mounted:function(){var t=this,e=this;e.$nextTick((function(){e.handleSetVisitChart(),window.addEventListener(\"resize\",t.wsFunc)}))},beforeDestroy:function(){window.removeEventListener(\"resize\",this.wsFunc),this.myChart&&(this.myChart.dispose(),this.myChart=null)},methods:{wsFunc:function(){this.myChart.resize()},handleSetVisitChart:function(){this.myChart=n.a.init(document.getElementById(this.echarts));var t=this.optionData;this.myChart.setOption(t,!0)}}},a=a(\"2877\"),a=Object(a.a)(i,(function(){var t=this._self._c;return t(\"div\",[t(\"div\",{style:this.styles,attrs:{id:this.echarts}})])}),[],!1,null,\"4a0d7a27\",null);e.a=a.exports},fd73:function(t,e,a){a(\"a15b\");var i=a(\"61f7\"),n={filters:{formatDate:function(t){if(0!==t)return t=new Date(t),Object(i.a)(t,\"yyyy/MM/dd\")}},data:function(){return{timeVal:[],options:this.$timeOptions,selectIndexTime:\"\"}},methods:{onSelectTime:function(t){var e=[this.$options.filters.formatDate(this.dateToMs(this.$timeOptions.shortcuts[this.selectIndexTime].value()[0])),this.$options.filters.formatDate(this.dateToMs(this.$timeOptions.shortcuts[this.selectIndexTime].value()[1]))];this.$emit(\"selectDate\",e.join(\"-\"))},dateToMs:function(t){return new Date(t).getTime()}}};a=a(\"2877\"),a=Object(a.a)(n,(function(){var t=this,e=t._self._c;return e(\"el-radio-group\",{attrs:{type:\"button\"},on:{input:t.onSelectTime},model:{value:t.selectIndexTime,callback:function(e){t.selectIndexTime=e},expression:\"selectIndexTime\"}},t._l(t.options.shortcuts,(function(a,i){return e(\"el-radio-button\",{key:i,attrs:{label:i}},[t._v(t._s(a.text))])})),1)}),[],!1,null,null,null);e.a=a.exports}}]);","extractedComments":[]}