{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-02077a46\"],{\"358b\":function(t,e,s){s(\"4531\")},4531:function(t,e,s){},d7d0:function(t,e,s){s.r(e);var i=s(\"5530\"),o=(s(\"99af\"),s(\"4de4\"),s(\"c740\"),s(\"d81d\"),s(\"14d9\"),s(\"a434\"),s(\"4ec9\"),s(\"d3b7\"),s(\"3ca3\"),s(\"ddb0\"),s(\"2f62\")),a=s(\"c4ad\"),n=s(\"47c5\");a={name:\"add_goods\",components:{goodsList:a.default},computed:Object(i.a)(Object(i.a)({},Object(o.e)(\"media\",[\"isMobile\"])),{},{labelWidth:function(){return this.isMobile?void 0:\"100px\"},labelPosition:function(){return this.isMobile?\"top\":\"right\"}}),data:function(){return{isShowBox:!1,loading:!1,modals:!1,goodsList:[],tempGoods:{},formValidate:{},tabList:[],disabled:!1,loadings:!1,selectIds:[]}},methods:{selectGoods:function(){this.modals=!0},liveGoods:function(){var t=this,e=[];this.goodsList.map((function(t){e.push(t.product_id)})),Object(n.g)({product_id:e}).then((function(e){t.tabList=e.data,t.isShowBox=!0})).catch((function(e){t.$message.error(e.msg)}))},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.product_id)&&e.set(t.product_id,1)}))},getProductId:function(t){this.modals=!1,this.goodsList=this.unique(this.goodsList.concat(t))},bindDelete:function(t,e){this.goodsList.splice(t,1),t=this.tabList.findIndex((function(t){return t.id==e.product_id})),this.tabList.splice(t,1),this.goodsList.length||(this.isShowBox=!1)},del:function(t,e){this.tabList.splice(e,1),e=this.goodsList.findIndex((function(e){return e.product_id==t.id})),this.goodsList.splice(e,1),this.tabList.length||(this.isShowBox=!1)},bindSub:function(){var t=this;this.disabled=!0,this.loadings=!0,Object(n.f)({goods_info:this.tabList}).then((function(e){t.$message.success(\"添加成功\"),t.disabled=!1,setTimeout((function(){t.$router.push({path:t.$routeProStr+\"/marketing/live/live_goods\"})}),500)})).catch((function(e){t.disabled=!1,t.$message.error(e.msg)}))}}},s(\"358b\"),i=s(\"2877\"),o=Object(i.a)(a,(function(){var t=this,e=t._self._c;return e(\"div\",[e(\"pages-header\",{ref:\"pageHeader\",attrs:{title:t.$route.meta.title,backUrl:t.$routeProStr+\"/marketing/live/live_goods\"}}),e(\"el-card\",{staticClass:\"mt16\",attrs:{bordered:!1,shadow:\"never\"}},[e(\"el-form\",{ref:\"formValidate\",staticClass:\"tabform\",attrs:{model:t.formValidate,\"label-width\":t.labelWidth,\"label-position\":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[e(\"el-row\",{attrs:{gutter:24}},[e(\"el-col\",{attrs:{span:24}},[e(\"el-form-item\",{attrs:{label:\"选择商品：\"}},[e(\"div\",{staticClass:\"box\"},[t._l(t.goodsList,(function(s,i){return e(\"div\",{key:i,staticClass:\"box-item\"},[e(\"img\",{attrs:{src:s.image,alt:\"\"}}),e(\"i\",{staticClass:\"el-icon-error\",staticStyle:{\"font-size\":\"16px\"},on:{click:function(e){return t.bindDelete(i,s)}}})])})),e(\"div\",{staticClass:\"upload-box acea-row row-center-wrapper\",on:{click:t.selectGoods}},[e(\"i\",{staticClass:\"el-icon-goods\",staticStyle:{\"font-size\":\"24px\"}})])],2)])],1)],1)],1),0<t.goodsList.length?e(\"div\",{staticClass:\"active-btn\"},[e(\"el-button\",{attrs:{type:\"success\"},on:{click:t.liveGoods}},[t._v(\"生成直播商品\")])],1):t._e(),t.isShowBox?e(\"div\",{staticClass:\"table-box\"},[e(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"table\",staticClass:\"mt14\",attrs:{data:t.tabList,\"no-userFrom-text\":\"暂无数据\",\"no-filtered-userFrom-text\":\"暂无筛选结果\"}},[e(\"el-table-column\",{attrs:{label:\"商品ID\",width:\"80\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[e(\"span\",[t._v(t._s(s.row.id))])]}}],null,!1,773642443)}),e(\"el-table-column\",{attrs:{label:\"商品信息\",\"min-width\":\"90\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[e(\"div\",{staticClass:\"product_box\"},[e(\"img\",{attrs:{src:s.row.image,alt:\"\"}}),e(\"span\",[t._v(t._s(s.row.store_name))])])]}}],null,!1,1809256286)}),e(\"el-table-column\",{attrs:{label:\"直播售价\",\"min-width\":\"130\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[e(\"span\",[t._v(t._s(s.row.price))])]}}],null,!1,1691062027)}),e(\"el-table-column\",{attrs:{label:\"库存\",\"min-width\":\"130\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[e(\"span\",[t._v(t._s(s.row.stock))])]}}],null,!1,2684418342)}),e(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",width:\"80\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[e(\"a\",{on:{click:function(e){return t.del(s.row,s.$index)}}},[t._v(\"删除\")])]}}],null,!1,1960015606)})],1),e(\"div\",{staticClass:\"sub_btn\"},[e(\"el-button\",{staticStyle:{width:\"8%\"},attrs:{type:\"primary\",disabled:t.disabled,loading:t.loadings},on:{click:t.bindSub}},[t._v(\"提交\")])],1)],1):t._e()],1),e(\"el-dialog\",{staticClass:\"paymentFooter\",attrs:{visible:t.modals,title:\"商品列表\",width:\"1000px\"},on:{\"update:visible\":function(e){t.modals=e}}},[e(\"goods-list\",{ref:\"goodslist\",attrs:{selectIds:t.selectIds,ischeckbox:!0},on:{getProductId:t.getProductId}})],1)],1)}),[],!1,null,\"4e564aa2\",null);e.default=o.exports}}]);","extractedComments":[]}