{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-624387ce\"],{\"61f7\":function(e,t,r){r.d(t,\"a\",(function(){return s})),r.d(t,\"c\",(function(){return p})),r.d(t,\"b\",(function(){return c}));var i=r(\"ade3\"),a=r(\"5530\");function s(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+\"\").substr(4-RegExp.$1.length)));var r,i,a={\"M+\":e.getMonth()+1,\"d+\":e.getDate(),\"h+\":e.getHours(),\"m+\":e.getMinutes(),\"s+\":e.getSeconds()};for(r in a)new RegExp(\"(\".concat(r,\")\")).test(t)&&(i=a[r]+\"\",t=t.replace(RegExp.$1,1===RegExp.$1.length?i:(\"00\"+i).substr(i.length)));return t}r(\"99af\"),r(\"13d5\"),r(\"b64b\"),r(\"d3b7\"),r(\"4d63\"),r(\"c607\"),r(\"ac1f\"),r(\"2c3e\"),r(\"00b4\"),r(\"25f0\"),r(\"5319\"),r(\"498a\");var o={min:\"%s最小长度为:min\",max:\"%s最大长度为:max\",length:\"%s长度必须为:length\",range:\"%s长度为:range\",pattern:\"$s格式错误\"};function n(e,t){e.message=function(e){return t.replace(\"%s\",e||\"\")}}function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)({required:!0,message:e,type:\"string\"},t)}function c(e){return d.pattern(/(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/,e)}n(p,\"请输入%s\"),n(c,\"%s格式不正确\");var d=Object.keys(o).reduce((function(e,t){return e[t]=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\",s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=\"range\"===t?{min:e[0],max:e[1]}:Object(i.a)({},t,e);return Object(a.a)(Object(a.a)({message:r.replace(\":\".concat(t),\"range\"===t?\"\".concat(e[0],\"-\").concat(e[1]):e),type:\"string\"},o),s)},n(e[t],o[t]),e}),{})},\"88de\":function(e,t,r){},afa3:function(e,t,r){e.exports=r.p+\"system_static/img/line.05bf1c84.jpg\"},c7b8:function(e,t,r){r.r(t);var i=[function(){var e=this._self._c;return e(\"div\",{staticClass:\"line\"},[e(\"img\",{attrs:{src:r(\"afa3\")}})])}],a=r(\"c7eb\"),s=r(\"1da1\"),o=(r(\"d81d\"),r(\"14d9\"),r(\"f8b7\"),r(\"42e3\")),n=r(\"61f7\"),p=r(\"69ae\"),c=r(\"161e\"),d=(c={name:\"GoodsDeliver\",components:{vuePickers:r.n(c).a},props:{},data:function(){return{pickerVisible:!1,types:[{type:1,title:\"发货\"},{type:2,title:\"送货\"},{type:3,title:\"无需发货\"}],expressType:[{title:\"手动填写\",key:1},{title:\"电子面单打印\",key:2}],active:0,activeExpTpe:0,orderId:\"\",delivery:null,pickData:[],type:\"1\",result:{},expFrom:{type:1,delivery_name:\"\",delivery_id:\"\",delivery_code:\"\",express_record_type:1,express_temp_id:\"\",to_name:\"\",to_tel:\"\",to_addr:\"\",sh_delivery_name:\"\",sh_delivery_id:\"\",sh_delivery_uid:\"\",fictitious_content:\"\"},expTemp:[],pickerVisibleName:!1,pickerVisibleExpTemp:!1,expTempData:[],tempName:\"\",tempImg:\"\",deliveryList:[]}},watch:{\"$route.params.orderId\":function(e){null!=e&&(this.orderId=e,this.getIndex())}},created:function(){},mounted:function(){this.orderId=this.$route.params.orderId,this.getIndex(),this.getLogistics()},methods:{showName:function(){this.pickerVisibleName=!0},getDelivery:function(){var e=this;Object(o.r)().then((function(t){var r=[];t.data.map((function(e){r.push({label:e.nickname,value:e.uid,phone:e.phone})})),e.deliveryList=[r],e.expFrom.sh_delivery_name=r[0].label,e.expFrom.sh_delivery_id=r[0].phone,e.expFrom.sh_delivery_uid=r[0].value,2===e.expFrom.express_record_type&&e.getTemp()}))},confirmName:function(e){this.expFrom.sh_delivery_name=e[0].label,this.expFrom.sh_delivery_id=e[0].phone,this.expFrom.sh_delivery_uid=e[0].value},orderDeliveryInfo:function(){var e=this;Object(o.m)().then((function(t){e.expFrom.to_name=t.data.to_name,e.expFrom.to_tel=t.data.to_tel,e.expFrom.to_addr=t.data.to_add}))},cancel:function(){},changeExpTpe:function(e,t){this.expFrom.express_record_type=e.key,this.activeExpTpe=t,2===e.key?(this.orderDeliveryInfo(),this.getTemp()):this.expTemp=[]},getTemp:function(){var e=this;Object(o.y)({com:this.expFrom.delivery_code}).then((function(t){e.expTemp=t.data.data;var r=[];e.expTemp.length&&(e.expTemp.map((function(e){r.push({label:e.title,value:e.temp_id,id:e.id,pic:e.pic,code:e.code})})),e.expTempData=[r],e.expFrom.express_temp_id=r[0].value,e.tempName=r[0].label,e.tempImg=r[0].pic)}))},confirmExpTemp:function(e){this.expFrom.express_temp_id=e[0].value,this.tempName=e[0].label,this.tempImg=e[0].pic},confirm:function(e){this.expFrom.delivery_name=e[0].label,this.expFrom.delivery_code=e[0].value,2===this.expFrom.express_record_type&&this.getTemp()},show:function(){this.pickerVisible=!0},showExpTemp:function(){this.pickerVisibleExpTemp=!0},changeType:function(e,t){this.active=t,this.expFrom.type=e.type,1===t&&this.getDelivery()},getIndex:function(){var e=this;Object(o.u)(this.$route.params.id).then((function(t){e.delivery=t.data})).catch((function(t){e.$dialog.error(t.msg)}))},getLogistics:function(){var e=this;Object(o.t)().then(function(){var t=Object(s.a)(Object(a.a)().mark((function t(r){var i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],r.data.map((function(e){i.push({label:e.value,value:e.code,id:e.id})})),e.pickData=[i],e.expFrom.delivery_name=i[0].label,e.expFrom.delivery_code=i[0].value,2===e.expFrom.express_record_type&&e.getTemp();case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},saveInfo:function(){var e=this;return Object(s.a)(Object(a.a)().mark((function t(){var r,i,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(r=e).type,s={},t.t0=i,t.next=\"1\"===t.t0?4:\"2\"===t.t0?12:\"3\"===t.t0?24:26;break;case 4:if(1!==e.expFrom.type||r.expFrom.delivery_name){t.next=6;break}return t.abrupt(\"return\",r.$dialog.error(\"请输入快递公司\"));case 6:if(1!==e.expFrom.type||1!==e.expFrom.express_record_type||r.expFrom.delivery_id){t.next=8;break}return t.abrupt(\"return\",r.$dialog.error(\"请输入快递单号\"));case 8:if(1!==e.expFrom.type||r.expFrom.express_temp_id||2!==e.expFrom.express_record_type){t.next=10;break}return t.abrupt(\"return\",r.$dialog.error(\"请选择电子面单\"));case 10:return r.setInfo(r.expFrom),t.abrupt(\"break\",26);case 12:return t.prev=12,t.next=15,e.$validator({expressId:[Object(n.c)(n.c.message(\"发货人姓名\"))],expressCode:[Object(n.c)(n.c.message(\"发货人电话\"))]}).validate({expressId:expressId,expressCode:expressCode});case 15:t.next=20;break;case 17:return t.prev=17,t.t1=t.catch(12),t.abrupt(\"return\",Object(p.b)(t.t1));case 20:return s.expressId=expressId,s.expressCode=expressCode,r.setInfo(s),t.abrupt(\"break\",26);case 24:return r.setInfo(s),t.abrupt(\"break\",26);case 26:case\"end\":return t.stop()}}),t,null,[[12,17]])})))()},setInfo:function(e){var t=this;Object(o.q)(t.$route.params.id,e).then((function(e){t.$dialog.success(\"发送货成功\"),t.$router.go(-1)}),(function(e){t.$dialog.error(e.msg)}))}}},r(\"cfd4\"),r(\"2877\"));d=Object(d.a)(c,(function(){var e=this,t=e._self._c;return e.delivery?t(\"div\",{staticClass:\"deliver-goods\"},[t(\"header\",[t(\"div\",{staticClass:\"order-num acea-row row-between-wrapper\"},[t(\"div\",{staticClass:\"num line1\"},[e._v(\"订单号：\"+e._s(e.orderId))]),t(\"div\",{staticClass:\"name line1\"},[t(\"span\",{staticClass:\"iconfontYI icon-yonghu2\"}),e._v(e._s(e.delivery.userInfo?e.delivery.userInfo.nickname:\"\")+\"\\n      \")])]),t(\"div\",{staticClass:\"address\"},[t(\"div\",{staticClass:\"name\"},[e._v(\"\\n        \"+e._s(e.delivery.orderInfo.real_name)),t(\"span\",{staticClass:\"phone\"},[e._v(e._s(e.delivery.orderInfo.phone))])]),t(\"div\",[e._v(e._s(e.delivery.orderInfo.user_address))])]),e._m(0)]),t(\"div\",{staticClass:\"wrapper\"},[t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"发货方式\")]),t(\"div\",{staticClass:\"mode acea-row row-middle row-right\"},e._l(e.types,(function(r,i){return t(\"div\",{key:i,staticClass:\"goods\",class:e.active===i?\"on\":\"\",on:{click:function(t){return e.changeType(r,i)}}},[e._v(\"\\n          \"+e._s(r.title)),t(\"span\",{staticClass:\"iconfontYI icon-xuanzhong2\"})])})),0)]),0===e.active?t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"发货类型\")]),t(\"div\",{staticClass:\"mode acea-row row-middle row-right\"},e._l(e.expressType,(function(r,i){return t(\"div\",{key:i,staticClass:\"goods\",class:e.activeExpTpe===i?\"on\":\"\",on:{click:function(t){return e.changeExpTpe(r,i)}}},[e._v(\"\\n          \"+e._s(r.title)),t(\"span\",{staticClass:\"iconfontYI icon-xuanzhong2\"})])})),0)]):e._e(),0===e.active?t(\"div\",{staticClass:\"list\"},[t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"快递公司\")]),t(\"span\",{staticClass:\"checkName\",domProps:{textContent:e._s(e.expFrom.delivery_name)},on:{click:e.show}}),t(\"vue-pickers\",{attrs:{data:e.pickData,showToolbar:!0,maskClick:!0,defaultIndex:0,visible:e.pickerVisible},on:{cancel:e.cancel,confirm:e.confirm,\"update:visible\":function(t){e.pickerVisible=t}}})],1),1===e.expFrom.express_record_type?t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"快递单号\")]),t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.delivery_id,expression:\"expFrom.delivery_id\"}],staticClass:\"mode input-input\",attrs:{type:\"text\",placeholder:\"填写快递单号\"},domProps:{value:e.expFrom.delivery_id},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"delivery_id\",t.target.value)}}})]):e._e(),1===e.expFrom.express_record_type?t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",{staticClass:\"tip\"},[e._v(\"顺丰请输入单号：收件人或寄件人手机号后四位,\")]),t(\"div\",{staticClass:\"tip\"},[e._v(\"例如：SF000000000000:3941\")])]):e._e()]):e._e(),e.expTemp.length&&0===e.active?t(\"div\",{staticClass:\"list\"},[t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"电子面单\")]),t(\"div\",{staticClass:\"acea-row\"},[t(\"span\",{staticClass:\"checkName\",domProps:{textContent:e._s(e.expFrom.delivery_name)},on:{click:e.showExpTemp}}),t(\"vue-pickers\",{attrs:{data:e.expTempData,showToolbar:!0,maskClick:!0,defaultIndex:0,visible:e.pickerVisibleExpTemp},on:{confirm:e.confirmExpTemp,\"update:visible\":function(t){e.pickerVisibleExpTemp=t}}}),t(\"div\",{staticClass:\"look\"},[t(\"span\",[e._v(\"预览\")]),t(\"viewer\",{ref:\"viewer\",staticClass:\"viewer\"},[t(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:e.tempImg,expression:\"tempImg\"}],staticClass:\"image\"})])],1)],1)])]):e._e(),2===e.expFrom.express_record_type&&0===e.active?t(\"div\",{staticClass:\"list\"},[t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"寄件人姓名\")]),t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.to_name,expression:\"expFrom.to_name\"}],staticClass:\"mode input-input\",attrs:{type:\"text\",placeholder:\"填写寄件人姓名\"},domProps:{value:e.expFrom.to_name},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"to_name\",t.target.value)}}})]),t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"寄件人电话\")]),t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.to_tel,expression:\"expFrom.to_tel\"}],staticClass:\"mode input-input\",attrs:{type:\"text\",placeholder:\"填写寄件人电话\"},domProps:{value:e.expFrom.to_tel},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"to_tel\",t.target.value)}}})]),t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"寄件人地址\")]),t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.to_addr,expression:\"expFrom.to_addr\"}],staticClass:\"mode input-input\",attrs:{type:\"text\",placeholder:\"填写寄件人地址\"},domProps:{value:e.expFrom.to_addr},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"to_addr\",t.target.value)}}})])]):e._e(),1===e.active?t(\"div\",{staticClass:\"list\"},[t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"送货人\")]),t(\"span\",{staticClass:\"checkName\",domProps:{textContent:e._s(e.expFrom.sh_delivery_name)},on:{click:e.showName}}),t(\"vue-pickers\",{attrs:{data:e.deliveryList,showToolbar:!0,maskClick:!0,defaultIndex:0,visible:e.pickerVisibleName},on:{confirm:e.confirmName,\"update:visible\":function(t){e.pickerVisibleName=t}}})],1),t(\"div\",{staticClass:\"item acea-row row-between-wrapper\"},[t(\"div\",[e._v(\"送货人电话\")]),t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.sh_delivery_id,expression:\"expFrom.sh_delivery_id\"}],staticClass:\"mode input-input\",attrs:{type:\"text\",placeholder:\"填写送货人电话\"},domProps:{value:e.expFrom.sh_delivery_id},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"sh_delivery_id\",t.target.value)}}})])]):e._e(),2===e.active?t(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.expFrom.fictitious_content,expression:\"expFrom.fictitious_content\"}],staticClass:\"textarea\",attrs:{placeholder:\"备注\",maxlength:500},domProps:{value:e.expFrom.fictitious_content},on:{input:function(t){t.target.composing||e.$set(e.expFrom,\"fictitious_content\",t.target.value)}}}):e._e()]),t(\"div\",{staticStyle:{height:\"1.2rem\"}}),t(\"div\",{staticClass:\"confirm\",on:{click:e.saveInfo}},[e._v(\"确认提交\")])]):e._e()}),i,!1,null,\"016c5085\",null);t.default=d.exports},cfd4:function(e,t,r){r(\"88de\")}}]);","extractedComments":[]}