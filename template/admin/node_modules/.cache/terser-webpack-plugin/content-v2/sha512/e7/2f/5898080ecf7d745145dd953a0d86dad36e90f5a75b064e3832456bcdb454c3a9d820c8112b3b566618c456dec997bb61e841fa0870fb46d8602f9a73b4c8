{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-30595b4a\"],{\"0538\":function(e,t,a){},\"192c\":function(e,t,a){a.d(t,\"h\",(function(){return r})),a.d(t,\"c\",(function(){return n})),a.d(t,\"f\",(function(){return o})),a.d(t,\"e\",(function(){return s})),a.d(t,\"i\",(function(){return l})),a.d(t,\"a\",(function(){return c})),a.d(t,\"d\",(function(){return d})),a.d(t,\"g\",(function(){return u})),a.d(t,\"b\",(function(){return p}));var i=a(\"6b6c\");function r(e){return Object(i.a)({url:\"/recipe/recipe\",method:\"get\",params:e})}function n(e){return Object(i.a)({url:\"/recipe/recipe/\".concat(e),method:\"get\"})}function o(e){return Object(i.a)({url:\"/recipe/recipe/findAllLabelsBySource\",method:\"post\",data:e})}function s(e){return Object(i.a)({url:\"/recipe/recipe/findAllFoodTypes\",method:\"post\",params:e})}function l(e){return Object(i.a)({url:\"/recipe/recipe/uploadRecipeImages\",method:\"post\",file:!0,data:e})}function c(e){return Object(i.a)({url:\"/recipe/recipe/add\",method:\"post\",data:e})}function d(e){return Object(i.a)({url:\"/recipe/recipe/edit\",method:\"post\",data:e})}function u(e){return Object(i.a)({url:\"/recipe/recipe/remove\",method:\"post\",params:e})}function p(e){return Object(i.a)({url:\"/recipe/recipe/cancelRecommend\",method:\"post\",params:e})}},\"4e82\":function(e,t,a){var i=a(\"23e7\"),r=a(\"e330\"),n=a(\"59ed\"),o=a(\"7b0b\"),s=a(\"07fa\"),l=a(\"083a\"),c=a(\"577e\"),d=a(\"d039\"),u=a(\"addb\"),p=a(\"a640\"),m=a(\"04d1\"),f=a(\"d998\"),b=a(\"2d00\"),h=a(\"512ce\"),g=[],v=r(g.sort),y=r(g.push),I=(a=d((function(){g.sort(void 0)})),r=d((function(){g.sort(null)})),p=p(\"sort\"),!d((function(){if(b)return b<70;if(!(m&&3<m)){if(f)return!0;if(h)return h<603;for(var e,t,a,i=\"\",r=65;r<76;r++){switch(e=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(a=0;a<47;a++)g.push({k:e+a,v:t})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)e=g[a].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return\"DGBEFHACIJK\"!==i}})));i({target:\"Array\",proto:!0,forced:a||!r||!p||!I},{sort:function(e){void 0!==e&&n(e);var t=o(this);if(I)return void 0===e?v(t):v(t,e);for(var a,i,r=[],d=s(t),p=0;p<d;p++)p in t&&y(r,t[p]);for(u(r,(i=e,function(e,t){return void 0===t?-1:void 0===e?1:void 0!==i?+i(e,t)||0:c(e)>c(t)?1:-1})),a=s(r),p=0;p<a;)t[p]=r[p++];for(;p<d;)l(t,p++);return t}})},ab84:function(e,t,a){a.r(t),a(\"b0c0\");var i=a(\"c7eb\"),r=a(\"1da1\"),n=(a(\"ac1f\"),a(\"5319\"),a(\"192c\")),o=(a(\"14d9\"),a(\"a434\"),a(\"2909\")),s=(a(\"99af\"),a(\"4de4\"),a(\"c740\"),a(\"caad\"),a(\"a15b\"),a(\"d81d\"),a(\"4e82\"),a(\"e9c4\"),a(\"b64b\"),a(\"d3b7\"),a(\"2532\"),a(\"159b\"),a(\"a069\")),l=a(\"ed08\"),c=(s={name:\"recipeDetails\",components:{WangEditor:s.a},data:function(){return{activeName:\"食谱详情\",modals:!1,loading:!1,foodTypes:[],foodAreaLabels:[],rateColors:[\"#F7DB4D\",\"#F7DB4D\"],rateColorss:[\"#F7DB4D\",\"#F7DB4D\",\"#F7DB4D\"],threeMeals:[\"早餐\",\"午餐\",\"晚餐\"],options:[{value:1,label:\"不辣\"},{value:2,label:\"辣\"}],options1:[{value:1,label:\"易\"},{value:2,label:\"难\"}],recipe:{name:\"\",alias:\"\",mainImageId:\"\",mainFoodId:\"\",mainFoodConsumption:\"\",foodId:\"\",labels:[],foodConsumption:\"\",detailsText:\"\",note:\"\",maijiStageLabelIds:[],areaLabelIds:[],recipeLabelIds:[],spicy:0,economy:0,threeMeal:[],difficultyLevel:0,gear:0},aliases:[\"\"],mainFoods:[{foodId:\"\",foodName:\"\",consumption:\"\",main:!0,cascaderStr:\"\",cascader:[]}],foods:[{foodId:\"\",foodName:\"\",consumption:\"\",main:!1,cascaderStr:\"\",cascader:[]}],allMaijiStageLabels:[],foodLabels:[],recipeMainImage:null,content:\"\",rules:{name:[{required:!0,message:\"食谱名称不能为空\",trigger:\"blur\"}],mainImageId:[{required:!0,message:\"食谱主图不能为空\",trigger:\"change\"}],mainFoodId:[{required:!0,message:\"请选择主料食材\",trigger:\"change\"}],spicy:[{required:!0,message:\"请选择辣度\",trigger:\"change\"}],difficultyLevel:[{required:!0,message:\"请选择难易程度\",trigger:\"change\"}],gear:[{required:!0,message:\"请选择搭配情况\",trigger:\"change\"}],threeMeal:[{type:\"array\",required:!0,message:\"请至少选择一个三餐归属\",trigger:\"change\"}],maijiStageLabelIds:[{type:\"array\",required:!0,message:\"请至少选择一个食谱麦吉阶段\",trigger:\"change\"}],detailsText:[{required:!0,message:\"食谱详情不能为空\",trigger:\"blur\"}]}}},created:function(){},mounted:function(){},methods:{draChange:function(){this.recipe={name:\"\",alias:\"\",mainImageId:\"\",mainFoodId:\"\",mainFoodConsumption:\"\",foodId:\"\",labels:[],foodConsumption:\"\",detailsText:\"\",note:\"\",maijiStageLabelIds:[],areaLabelIds:[],recipeLabelIds:[],spicy:0,economy:0,threeMeal:[],difficultyLevel:0,gear:0},this.aliases=[\"\"],this.recipeMainImage=null,this.mainFoods=[{foodId:\"\",foodName:\"\",consumption:\"\",main:!0,cascaderStr:\"\",cascader:[]}],this.foods=[{foodId:\"\",foodName:\"\",consumption:\"\",main:!1,cascaderStr:\"\",cascader:[]}],this.content=\"\"},editSave:function(){var e=this;return Object(r.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.recipe.detailsText=e.content,e.$refs.recipeFrom.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt(\"return\",e.$message({type:\"error\",message:\"编辑食谱失败，请确认编辑规范！\",duration:1e3}));case 2:return e.recipe.maijiStageLabelIds&&0<e.recipe.maijiStageLabelIds.length&&e.recipe.maijiStageLabelIds.forEach((function(t){e.recipe.labels.push({labelId:t})})),e.recipe.areaLabelIds&&0<e.recipe.areaLabelIds.length&&e.recipe.areaLabelIds.forEach((function(t){e.recipe.labels.push({labelId:t})})),e.recipe.recipeLabelIds&&0<e.recipe.recipeLabelIds.length&&e.recipe.recipeLabelIds.forEach((function(t){e.recipe.labels.push({labelId:t})})),null!=e.aliases&&(e.recipe.alias=e.aliases.join(\"、\")),e.recipe.foods=[].concat(Object(o.a)(e.mainFoods),Object(o.a)(e.foods)),r=e.recipe.foods.findIndex((function(e){return\"\"===e.foodId})),e.recipe.foods.splice(r,1),e.recipe.detailsText=Object(l.a)(e.recipe.detailsText),e.recipe.threeMeal=JSON.stringify(e.recipe.threeMeal),e.loading=!0,t.next=15,Object(n.d)(e.recipe);case 15:200==t.sent.code?(e.$message({type:\"success\",message:\"保存成功！\",duration:1e3}),setTimeout((function(){e.getDetails(e.recipe.uuId),e.loading=!1}),2e3)):(e.loading=!1,e.$message({type:\"error\",message:\"编辑食谱失败！\",duration:1e3}));case 17:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case\"end\":return t.stop()}}),t)})))()},getEditorContent:function(e){this.content=e},getDetails:function(e){var t=this;this.draChange(),Object(n.f)({source:\"食谱\"}).then(function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.code&&(t.foodAreaLabels=a.data.filter((function(e){return 2==e.listShow})).sort((function(e,t){return e.name.length-t.name.length})),t.allMaijiStageLabels=a.data.filter((function(e){return 1==e.listShow})).sort((function(e,t){return e.orderNo-t.orderNo})),t.foodLabels=a.data.filter((function(e){return 0==e.listShow})).sort((function(e,t){return e.orderNo-t.orderNo})));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message({type:\"error\",message:e,duration:1e3})})),Object(n.e)({isFindFoods:!0}).then(function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.code&&(t.foodTypes=a.data.map((function(e){return e.children&&1<e.children.length&&e.children.sort((function(e,t){return e.label.length-t.label.length})),e})).sort((function(e,t){return e.label.length-t.label.length})));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message({type:\"error\",message:e,duration:1e3})})),Object(n.c)(e).then(function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.code?(t.recipe.uuId=a.data.uuId,t.recipe.name=a.data.name,t.recipe.note=a.data.note,t.recipe.spicy=a.data.spicy,t.recipe.economy=a.data.economy,t.recipe.difficultyLevel=a.data.difficultyLevel,t.recipe.gear=a.data.gear,a.data.mainFoods&&(t.mainFoods=a.data.mainFoods.map((function(e){return Object.assign(e,{cascader:null!=e.cascaderStr?e.cascaderStr.split(\",\"):[]})})),t.recipe.mainFoodId=t.mainFoods[0].foodId,t.recipe.mainFoodConsumption=t.mainFoods[0].consumption),a.data.foods&&(t.foods=a.data.foods.map((function(e){return Object.assign(e,{cascader:null!=e.cascaderStr?e.cascaderStr.split(\",\"):[]})})),t.recipe.foodId=t.foods[0].foodId,t.recipe.foodConsumption=t.foods[0].consumption),a.data.areaLabelIds&&(t.recipe.areaLabelIds=a.data.areaLabelIds.filter((function(e){return 2==e.listShow})).map((function(e){return e.uuId})),t.recipe.maijiStageLabelIds=a.data.areaLabelIds.filter((function(e){return 1==e.listShow})).map((function(e){return e.uuId})),t.recipe.recipeLabelIds=a.data.areaLabelIds.filter((function(e){return 0==e.listShow})).map((function(e){return e.uuId}))),t.aliases=a.data.aliases,t.recipeMainImage=a.data.mainImage,t.recipe.mainImageId=a.data.mainImage.uuId,t.recipe.detailsText=a.data.detailsText,t.recipe.threeMeal=JSON.parse(a.data.threeMeal)):t.$message({type:\"error\",message:a.msg,duration:1e3});case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message({type:\"error\",message:e,duration:1e3})}))},querySearch:function(e,t){var a=[{value:\"若干\"},{value:\"适量\"},{value:\"少许\"},{value:\"或输入具体数值(克)\"}];t(e?a.filter((function(t){return t.value.includes(e)})):a)},addRecipeImage:function(e){var t=this;return Object(r.a)(Object(i.a)().mark((function a(){var r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=new FormData).append(\"uploadFiles\",e.file),a.next=4,Object(n.i)(r);case 4:200!=(r=a.sent).code&&t.$message.error(\"上传食谱主图失败，请稍后重试！\"),t.recipeMainImage=Object.assign(r.data[0],{isMain:1}),t.recipe.mainImageId=t.recipeMainImage.uuId;case 8:case\"end\":return a.stop()}}),a)})))()},ElCascaderChange:function(e,t,a){a?(a=this.$refs.myMainElCascader[t].suggestions[0].label,this.mainFoods[t].foodId=e[2],this.mainFoods[t].foodName=a,this.mainFoods[t].cascaderStr=e.join(\",\"),this.recipe.mainFoodId=e[2]):(a=this.$refs.myElCascader[t].suggestions[0].label,this.foods[t].foodId=e[2],this.foods[t].foodName=a,this.foods[t].cascaderStr=e.join(\",\"),this.recipe.foodId=e[2])},handleFilterMethod:function(e,t){return-1!==e.label.indexOf(t)},handleFilterMethod1:function(e,t){return-1!==e.label.indexOf(t)}}},a(\"f72e\"),a(\"2877\"));s={name:\"recipe_list\",components:{recipeDetails:Object(c.a)(s,(function(){var e=this,t=e._self._c;return t(\"div\",{staticStyle:{width:\"100%\",padding:\"25px\"}},[t(\"el-drawer\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.modals,title:e.activeName,wrapperClosable:!1,size:1100,\"destroy-on-close\":\"\"},on:{\"update:visible\":function(t){e.modals=t},close:e.draChange}},[t(\"div\",{staticClass:\"acea-row head\"},[t(\"div\",{staticClass:\"edit-btn\"},[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.editSave}},[e._v(\"保存\")])],1)]),t(\"el-form\",{ref:\"recipeFrom\",attrs:{model:e.recipe,rules:e.rules,\"label-width\":\"100px\",\"label-position\":\"right\"}},[t(\"el-form-item\",{attrs:{label:\"食谱名称\",prop:\"name\"}},[t(\"el-input\",{attrs:{size:\"mini\",placeholder:\"请输入食谱名称\"},model:{value:e.recipe.name,callback:function(t){e.$set(e.recipe,\"name\",t)},expression:\"recipe.name\"}})],1),e._l(e.aliases,(function(a,i){return t(\"el-form-item\",{attrs:{label:\"食谱别名\"}},[t(\"el-input\",{attrs:{size:\"mini\",placeholder:\"请输入食谱别名\"},model:{value:e.aliases[i],callback:function(t){e.$set(e.aliases,i,t)},expression:\"aliases[index]\"}},[t(\"template\",{slot:\"append\"},[t(\"el-tooltip\",{attrs:{content:\"增加别名\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(t){return e.aliases.push(\"\")}}},[t(\"i\",{staticClass:\"el-icon-plus\"})])],1),t(\"el-tooltip\",{directives:[{name:\"show\",rawName:\"v-show\",value:1<e.aliases.length,expression:\"aliases.length > 1\"}],attrs:{content:\"减少别名\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(t){return e.aliases.splice(i,1)}}},[t(\"i\",{staticClass:\"el-icon-minus\"})])],1)],1)],2)],1)})),t(\"el-form-item\",{attrs:{label:\"食谱主图\",prop:\"mainImageId\"}},[t(\"span\",{staticStyle:{color:\"gray\"}},[e._v(\"建议图片尺寸：345 * 345\")]),t(\"el-upload\",{attrs:{size:\"mini\",action:\"\",\"list-type\":\"picture-card\",limit:1,accept:\"jpg\",\"http-request\":e.addRecipeImage,\"file-list\":e.recipeMainImage?[e.recipeMainImage]:[],\"on-exceed\":function(){return e.$message.warning(\"只能上传1张食谱主图\")}}},[t(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"}},[e._v(\"点击上传\")])],1)],1),e._l(e.mainFoods,(function(a,i){return t(\"div\",[t(\"el-form-item\",{attrs:{label:\"食谱主料\",size:\"mini\",prop:\"mainFoodId\",required:\"\"}},[t(\"el-cascader\",{ref:\"myMainElCascader\",refInFor:!0,staticStyle:{width:\"80%\"},attrs:{options:e.foodTypes,placeholder:\"试试搜索: 请选择食谱主料\",filterable:!0,\"filter-method\":e.handleFilterMethod},on:{change:function(t){return e.ElCascaderChange(t,i,!0)}},model:{value:a.cascader,callback:function(t){e.$set(a,\"cascader\",t)},expression:\"food.cascader\"}}),t(\"el-tooltip\",{attrs:{content:\"增加主料\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.mainFoods.push({foodId:\"\",consumption:\"\",main:!0,cascader:[]})}}},[t(\"i\",{staticClass:\"el-icon-plus\"})])],1),t(\"el-tooltip\",{directives:[{name:\"show\",rawName:\"v-show\",value:1<e.mainFoods.length,expression:\"mainFoods.length > 1\"}],attrs:{content:\"减少主料\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.mainFoods.splice(i,1)}}},[t(\"i\",{staticClass:\"el-icon-minus\"})])],1)],1),t(\"el-form-item\",{attrs:{label:\"主料用量\",size:\"mini\"}},[t(\"el-autocomplete\",{staticStyle:{width:\"80%\"},attrs:{\"fetch-suggestions\":e.querySearch,placeholder:\"请输入主料用量\"},model:{value:e.mainFoods[i].consumption,callback:function(t){e.$set(e.mainFoods[i],\"consumption\",t)},expression:\"mainFoods[index].consumption\"}})],1)],1)})),e._l(e.foods,(function(a,i){return t(\"div\",[t(\"el-form-item\",{attrs:{label:\"食谱配料\"}},[t(\"el-cascader\",{ref:\"myElCascader\",refInFor:!0,staticStyle:{width:\"80%\"},attrs:{size:\"mini\",options:e.foodTypes,placeholder:\"试试搜索: 请选择食谱配料\",filterable:!0,\"filter-method\":e.handleFilterMethod1},on:{change:function(t){return e.ElCascaderChange(t,i,!1)}},model:{value:a.cascader,callback:function(t){e.$set(a,\"cascader\",t)},expression:\"food.cascader\"}}),t(\"el-tooltip\",{attrs:{size:\"mini\",content:\"增加配料\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(t){return e.foods.push({foodId:\"\",consumption:\"\",main:!1,cascader:[]})}}},[t(\"i\",{staticClass:\"el-icon-plus\"})])],1),t(\"el-tooltip\",{directives:[{name:\"show\",rawName:\"v-show\",value:1<e.foods.length,expression:\"foods.length > 1\"}],attrs:{size:\"mini\",content:\"减少配料\",placement:\"top\",effect:\"light\"}},[t(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(t){return e.foods.splice(i,1)}}},[t(\"i\",{staticClass:\"el-icon-minus\"})])],1)],1),t(\"el-form-item\",{attrs:{label:\"配料用量\"}},[t(\"el-autocomplete\",{staticStyle:{width:\"80%\"},attrs:{size:\"mini\",\"fetch-suggestions\":e.querySearch,placeholder:\"请输入配料用量\"},model:{value:e.foods[i].consumption,callback:function(t){e.$set(e.foods[i],\"consumption\",t)},expression:\"foods[index].consumption\"}})],1)],1)})),t(\"el-form-item\",{attrs:{label:\"食谱地区\"}},[t(\"el-select\",{staticStyle:{width:\"80%\"},attrs:{multiple:\"\",placeholder:\"全国范围\",size:\"mini\"},model:{value:e.recipe.areaLabelIds,callback:function(t){e.$set(e.recipe,\"areaLabelIds\",t)},expression:\"recipe.areaLabelIds\"}},e._l(e.foodAreaLabels,(function(e,a){return t(\"el-option\",{key:a,attrs:{label:e.name,value:e.uuId}})})),1)],1),t(\"el-form-item\",{attrs:{label:\"辣度\",prop:\"spicy\"}},[t(\"el-radio-group\",{model:{value:e.recipe.spicy,callback:function(t){e.$set(e.recipe,\"spicy\",t)},expression:\"recipe.spicy\"}},e._l(e.options,(function(a){return t(\"el-radio\",{key:a.value,attrs:{value:a.value,label:a.value}},[e._v(e._s(a.label))])})),1)],1),t(\"el-form-item\",{attrs:{label:\"难易程度\",prop:\"difficultyLevel\"}},[t(\"el-radio-group\",{model:{value:e.recipe.difficultyLevel,callback:function(t){e.$set(e.recipe,\"difficultyLevel\",t)},expression:\"recipe.difficultyLevel\"}},e._l(e.options1,(function(a){return t(\"el-radio\",{key:a.value,attrs:{value:a.value,label:a.value}},[e._v(e._s(a.label))])})),1)],1),t(\"el-form-item\",{attrs:{label:\"搭配情况\",prop:\"gear\"}},[t(\"el-rate\",{attrs:{texts:[\"纯素\",\"纯荤\",\"荤素搭配\"],\"show-text\":\"\",max:3,\"text-color\":\"#666666\",colors:e.rateColorss},model:{value:e.recipe.gear,callback:function(t){e.$set(e.recipe,\"gear\",t)},expression:\"recipe.gear\"}})],1),t(\"el-form-item\",{attrs:{label:\"三餐归属\",prop:\"threeMeal\"}},[t(\"el-checkbox-group\",{staticStyle:{width:\"350px\"},attrs:{size:\"mini\"},model:{value:e.recipe.threeMeal,callback:function(t){e.$set(e.recipe,\"threeMeal\",t)},expression:\"recipe.threeMeal\"}},e._l(e.threeMeals,(function(a,i){return t(\"el-checkbox\",{key:i,attrs:{label:a}},[e._v(e._s(a))])})),1)],1),t(\"el-form-item\",{attrs:{label:\"麦吉阶段\",prop:\"maijiStageLabelIds\"}},[t(\"el-checkbox-group\",{staticStyle:{width:\"350px\"},attrs:{size:\"mini\"},model:{value:e.recipe.maijiStageLabelIds,callback:function(t){e.$set(e.recipe,\"maijiStageLabelIds\",t)},expression:\"recipe.maijiStageLabelIds\"}},e._l(e.allMaijiStageLabels,(function(a,i){return t(\"el-checkbox\",{attrs:{label:a.uuId}},[e._v(e._s(a.name))])})),1)],1),t(\"el-form-item\",{attrs:{label:\"食谱标签\"}},[t(\"el-checkbox-group\",{staticStyle:{width:\"350px\"},attrs:{size:\"mini\"},model:{value:e.recipe.recipeLabelIds,callback:function(t){e.$set(e.recipe,\"recipeLabelIds\",t)},expression:\"recipe.recipeLabelIds\"}},[e._l(e.foodLabels,(function(a,i){return t(\"el-checkbox\",{key:i,attrs:{label:a.uuId}},[e._v(e._s(a.name))])})),t(\"el-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{icon:\"el-icon-plus\",circle:\"\",size:\"mini\"},on:{click:function(t){return e.addLabelShow(!0)}}})],2)],1),t(\"el-form-item\",{attrs:{label:\"注意事项\"}},[t(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入食谱的注意事项\"},model:{value:e.recipe.note,callback:function(t){e.$set(e.recipe,\"note\",t)},expression:\"recipe.note\"}})],1),t(\"el-form-item\",{attrs:{label:\"食谱详情\",prop:\"detailsText\",\"label-position\":\"top\"}},[t(\"WangEditor\",{staticStyle:{width:\"100%\"},attrs:{content:e.recipe.detailsText},on:{editorContent:e.getEditorContent}})],1)],2)],1)],1)}),[],!1,null,\"2caffaa6\",null).exports},data:function(){return{recipeList:[],selectionList:[],labelId:\"全部\",recipeFrom:{labelId:\"全部\",name:\"\",page:1,limit:15,order:\"desc\",orderBy:\"update_time\"},loading:!1,total:0,modals:!1}},created:function(){this.getList()},methods:{recipeSearchs:function(){this.recipeFrom.page=1,this.getList()},getList:function(){var e=this;this.loading=!0,Object(n.h)(this.recipeFrom).then(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.data,e.recipeList=r.list,e.total=r.count,e.loading=!1;case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message({type:\"error\",message:t.msg,duration:1e3})}))},isSel:function(e){return!e.isDel},pageChange:function(){this.selectionList=[],this.getList()},onClickTab:function(){this.recipeFrom.page=1,this.recipeFrom.labelId=this.labelId,this.getList()},reset:function(e){this.recipeFrom={labelId:\"全部\",name:\"\",page:1,limit:15,order:\"desc\",orderBy:\"update_time\"},this.getList()},sortChanged:function(e,t,a){this.recipeFrom.orderBy=e.prop,this.recipeFrom.order=e.order.replace(\"ending\",\"\"),this.getList()},recipeDetail:function(e){this.$refs.recipeDetails.modals=!0,this.$refs.recipeDetails.getDetails(e.uuId)},delRecipe:function(e,t,a){var i=this,r=this.$createElement;this.$msgbox({title:\"提示\",message:r(\"p\",null,[r(\"div\",null,\"确定要\".concat(t,\"吗？\")),r(\"div\",null,\"\")]),showCancelButton:!0,cancelButtonText:\"取消\",confirmButtonText:\"确定\",iconClass:\"el-icon-warning\",confirmButtonClass:\"btn-custom-cancel\"}).then((function(){Object(n.g)({recipeId:e.uuId}).then((function(e){i.$message.success(e.msg),i.getList()})).catch((function(e){i.$message.error(e.msg)}))}))},cancelRecommendHadle:function(e,t,a){var i=this,r=this.$createElement;this.$msgbox({title:\"提示\",message:r(\"p\",null,[r(\"div\",null,\"确定要\".concat(t,\"吗？\")),r(\"div\",null,\"\")]),showCancelButton:!0,cancelButtonText:\"取消\",confirmButtonText:\"确定\",iconClass:\"el-icon-warning\",confirmButtonClass:\"btn-custom-cancel\"}).then((function(){Object(n.b)({recipeId:e.uuId}).then((function(e){i.$message.success(e.msg),i.getList()})).catch((function(e){i.$message.error(e.msg)}))}))}}},a(\"b8b0\"),a=Object(c.a)(s,(function(){var e=this,t=e._self._c;return t(\"div\",[t(\"el-card\",{staticClass:\"ivu-mt\",attrs:{bordered:!1,shadow:\"never\",\"body-style\":{padding:0}}},[t(\"div\",{staticClass:\"padding-add\"},[t(\"el-form\",{ref:\"recipeFrom\",attrs:{model:e.recipeFrom,\"label-width\":\"100px\",\"label-position\":\"right\",inline:\"\"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(\"div\",{staticClass:\"acea-row search-form\"},[t(\"div\",[t(\"el-form-item\",{attrs:{label:\"食谱名称：\",\"label-for\":\"name\"}},[t(\"el-input\",{staticClass:\"form_content_width\",staticStyle:{width:\"240px\"},attrs:{placeholder:\"食谱名称或别名关键字\"},model:{value:e.recipeFrom.name,callback:function(t){e.$set(e.recipeFrom,\"name\",t)},expression:\"recipeFrom.name\"}})],1)],1),t(\"el-form-item\",{staticClass:\"search-form-sub\"},[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.recipeSearchs}},[e._v(\"搜索\")]),t(\"el-button\",{staticClass:\"ResetSearch\",on:{click:function(t){return e.reset(\"recipeFrom\")}}},[e._v(\"重置\")])],1)],1)])],1)]),t(\"el-card\",{staticClass:\"ivu-mt mt16\",attrs:{bordered:!1,shadow:\"never\",\"body-style\":{padding:\"0 20px 20px\"}}},[t(\"el-tabs\",{on:{\"tab-click\":e.onClickTab},model:{value:e.labelId,callback:function(t){e.labelId=t},expression:\"labelId\"}},[t(\"el-tab-pane\",{attrs:{label:\"全部\",name:\"全部\"}}),t(\"el-tab-pane\",{attrs:{label:\"美食推荐\",name:\"美食推荐\"}}),t(\"el-tab-pane\",{attrs:{label:\"第一阶段\",name:\"6308160d8ee04bdcb100c4bb5858ef05\"}}),t(\"el-tab-pane\",{attrs:{label:\"第二阶段\",name:\"2dc29ab0c29443a38edd615fafef47510\"}})],1),t(\"el-row\",{attrs:{gutter:24,justify:\"space-between\"}},[t(\"el-col\",{attrs:{span:24}},[t(\"router-link\",{directives:[{name:\"auth\",rawName:\"v-auth\",value:[\"admin-recipe-save\"],expression:\"['admin-recipe-save']\"}],attrs:{to:e.$routeProStr+\"/recipe/add_recipe\"}},[t(\"el-button\",{attrs:{type:\"primary\"}},[e._v(\"添加食谱\")])],1)],1),e.selectionList.length?t(\"el-col\",{staticClass:\"userAlert\",attrs:{span:24}},[t(\"el-alert\",{attrs:{\"show-icon\":\"\"}},[t(\"template\",{slot:\"title\"},[e._v(\"\\n\\t\\t\\t\\t\\t\\t已选择\"),t(\"i\",{staticClass:\"userI\"},[e._v(\" \"+e._s(e.selectionList.length)+\" \")]),e._v(\"项\\n\\t\\t\\t\\t\\t\")])],2)],1):e._e()],1),t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticClass:\"mt16\",attrs:{data:e.recipeList,\"highlight-current-row\":\"\",\"empty-text\":\"暂无数据\",\"no-filtered-userFrom-text\":\"暂无筛选结果\"},on:{\"sort-change\":e.sortChanged}},[t(\"el-table-column\",{attrs:{type:\"selection\",selectable:e.isSel,width:\"55\"}}),t(\"el-table-column\",{attrs:{label:\"主图\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[a.row.mainImage?t(\"div\",{directives:[{name:\"viewer\",rawName:\"v-viewer\"}],staticClass:\"tabBox_img\"},[a.row.mainImage.smallUrl?t(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:a.row.mainImage.smallUrl,expression:\"scope.row.mainImage.smallUrl\"}]}):e._e()]):e._e()]}}])}),t(\"el-table-column\",{attrs:{label:\"食谱名称\",prop:\"name\"}}),t(\"el-table-column\",{attrs:{label:\"食谱别名\",prop:\"alias\"}}),t(\"el-table-column\",{attrs:{label:\"浏览次数\",prop:\"look_up_no\",sortable:\"custom\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.lookUpNo))])]}}])}),t(\"el-table-column\",{attrs:{label:\"收藏数量\",prop:\"collection_no\",sortable:\"custom\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.collectionNo))])]}}])}),t(\"el-table-column\",{attrs:{label:\"点赞数量\",prop:\"thumbs_up_no\",sortable:\"custom\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.thumbsUpNo))])]}}])}),t(\"el-table-column\",{attrs:{label:\"上传时间\",prop:\"upload_time\",sortable:\"custom\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.uploadTime))])]}}])}),t(\"el-table-column\",{attrs:{label:\"修改时间\",prop:\"update_time\",sortable:\"custom\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.updateTime))])]}}])}),\"美食推荐\"==e.labelId?t(\"el-table-column\",{attrs:{label:\"美食推荐\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:a.row.isRecommend,expression:\"scope.row.isRecommend\"}]},[e._v(\"推荐 \"),t(\"i\",{staticClass:\"el-icon-star-on\"})]),t(\"el-tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:!a.row.isRecommend,expression:\"!scope.row.isRecommend\"}],attrs:{type:\"info\"}},[e._v(\"未推荐\")])]}}],null,!1,984661158)}):e._e(),\"美食推荐\"==e.labelId?t(\"el-table-column\",{attrs:{label:\"推荐操作\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(a){var i=a.row,r=a.index;return[i.isRecommend?t(\"el-button\",{attrs:{type:\"danger\",size:\"small\"},on:{click:function(t){return e.cancelRecommendHadle(i,\"取消推荐\",r)}}},[e._v(\"取消推荐 \"),t(\"i\",{staticClass:\"el-icon-minus\"})]):e._e()]}}],null,!1,409040422)}):e._e(),t(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(a){var i=a.row,r=a.index;return[t(\"a\",{on:{click:function(t){return e.recipeDetail(i)}}},[e._v(\"详情\")]),t(\"el-divider\",{attrs:{direction:\"vertical\"}}),t(\"a\",{on:{click:function(t){return e.delRecipe(i,\"删除食谱\",r)}}},[e._v(\"删除\")])]}}])})],1),t(\"div\",{staticClass:\"acea-row row-right page\"},[e.total?t(\"pagination\",{attrs:{total:e.total,page:e.recipeFrom.page,limit:e.recipeFrom.limit},on:{\"update:page\":function(t){return e.$set(e.recipeFrom,\"page\",t)},\"update:limit\":function(t){return e.$set(e.recipeFrom,\"limit\",t)},pagination:e.pageChange}}):e._e()],1)],1),t(\"recipe-details\",{ref:\"recipeDetails\"})],1)}),[],!1,null,\"2bb2e444\",null);t.default=a.exports},ac6c:function(e,t,a){},b8b0:function(e,t,a){a(\"ac6c\")},f72e:function(e,t,a){a(\"0538\")}}]);","extractedComments":[]}