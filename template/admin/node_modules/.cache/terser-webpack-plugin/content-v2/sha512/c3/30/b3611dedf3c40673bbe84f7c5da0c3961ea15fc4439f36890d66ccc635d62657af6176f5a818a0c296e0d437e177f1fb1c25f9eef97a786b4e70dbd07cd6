{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-77190097\"],{\"318e\":function(t,e,i){i.r(e),i(\"5530\"),i(\"c7eb\"),i(\"1da1\"),i(\"14d9\"),i(\"b0c0\"),i(\"d3b7\"),i(\"159b\"),i(\"5723\"),i(\"42e3\"),i(\"c276\"),i(\"7daa\"),i(\"a15b\"),i(\"a9e3\"),i(\"25f0\"),i(\"e9c4\"),i(\"ac1f\"),i(\"5319\");e=i(\"3452\");var n=i.n(e);function s(t,e){return e=n.a.enc.Utf8.parse(1<arguments.length&&void 0!==e?e:\"XwKsGlMcdPMEhR1B\"),t=n.a.enc.Utf8.parse(t),n.a.AES.encrypt(t,e,{mode:n.a.mode.ECB,padding:n.a.pad.Pkcs7}).toString()}function o(t){var e=t.$el.parentNode.offsetWidth||window.offsetWidth,i=t.$el.parentNode.offsetHeight||window.offsetHeight,n=-1!=t.imgSize.width.indexOf(\"%\")?parseInt(this.imgSize.width)/100*e+\"px\":this.imgSize.width,s=-1!=t.imgSize.height.indexOf(\"%\")?parseInt(this.imgSize.height)/100*i+\"px\":this.imgSize.height;e=-1!=t.barSize.width.indexOf(\"%\")?parseInt(this.barSize.width)/100*e+\"px\":this.barSize.width,t=-1!=t.barSize.height.indexOf(\"%\")?parseInt(this.barSize.height)/100*i+\"px\":this.barSize.height;return{imgWidth:n,imgHeight:s,barWidth:e,barHeight:t}}e={name:\"VerifySlide\",props:{captchaType:{type:String},type:{type:String,default:\"1\"},mode:{type:String,default:\"fixed\"},vSpace:{type:Number,default:5},explain:{type:String,default:\"向右滑动完成验证\"},imgSize:{type:Object,default:function(){return{width:\"310px\",height:\"155px\"}}},blockSize:{type:Object,default:function(){return{width:\"50px\",height:\"50px\"}}},barSize:{type:Object,default:function(){return{width:\"310px\",height:\"40px\"}}},defaultImg:{type:String,default:\"\"}},data:function(){return{secretKey:\"\",passFlag:\"\",backImgBase:\"\",blockBackImgBase:\"\",backToken:\"\",startMoveTime:\"\",endMovetime:\"\",tipsBackColor:\"\",tipWords:\"\",text:\"\",finishText:\"\",setSize:{imgHeight:0,imgWidth:0,barHeight:0,barWidth:0},top:0,left:0,moveBlockLeft:void 0,leftBarWidth:void 0,moveBlockBackgroundColor:void 0,leftBarBorderColor:\"#ddd\",iconColor:void 0,iconClass:\"icon-right\",status:!1,isEnd:!1,showRefresh:!0,transitionLeft:\"\",transitionWidth:\"\"}},computed:{barArea:function(){return this.$el.querySelector(\".verify-bar-area\")},resetSize:function(){return o}},watch:{type:{immediate:!0,handler:function(){this.init()}}},mounted:function(){this.$el.onselectstart=function(){return!1}},methods:{init:function(){var t=this,e=(this.text=this.explain,this.getPictrue(),this.$nextTick((function(){var e,i=t.resetSize(t);for(e in i)t.$set(t.setSize,e,i[e]);t.$parent.$emit(\"ready\",t)})),this);window.removeEventListener(\"touchmove\",(function(t){e.move(t)})),window.removeEventListener(\"mousemove\",(function(t){e.move(t)})),window.removeEventListener(\"touchend\",(function(){e.end()})),window.removeEventListener(\"mouseup\",(function(){e.end()})),window.addEventListener(\"touchmove\",(function(t){e.move(t)})),window.addEventListener(\"mousemove\",(function(t){e.move(t)})),window.addEventListener(\"touchend\",(function(){e.end()})),window.addEventListener(\"mouseup\",(function(){e.end()}))},start:function(t){var e;e=(t=t||window.event).touches?t.touches[0].pageX:t.clientX,this.startLeft=Math.floor(e-this.barArea.getBoundingClientRect().left),this.startMoveTime=+new Date,0==this.isEnd&&(this.text=\"\",this.moveBlockBackgroundColor=\"#337ab7\",this.leftBarBorderColor=\"#337AB7\",this.iconColor=\"#fff\",t.stopPropagation(),this.status=!0)},move:function(t){t=t||window.event,this.status&&0==this.isEnd&&((t=(t=(t.touches?t.touches[0].pageX:t.clientX)-this.barArea.getBoundingClientRect().left)>=this.barArea.offsetWidth-parseInt(parseInt(this.blockSize.width)/2)-2?this.barArea.offsetWidth-parseInt(parseInt(this.blockSize.width)/2)-2:t)<=0&&(t=parseInt(parseInt(this.blockSize.width)/2)),this.moveBlockLeft=t-this.startLeft+\"px\",this.leftBarWidth=t-this.startLeft+\"px\")},end:function(){var t;this.endMovetime=+new Date,this.status&&0==this.isEnd&&(t=310*(t=parseInt((this.moveBlockLeft||\"\").replace(\"px\",\"\")))/parseInt(this.setSize.imgWidth),this.captchaType,this.secretKey?s(JSON.stringify({x:t,y:5}),this.secretKey):JSON.stringify({x:t,y:5}),this.backToken,this.status=!1)},refresh:function(){var t=this;this.showRefresh=!0,this.finishText=\"\",this.transitionLeft=\"left .3s\",this.moveBlockLeft=0,this.leftBarWidth=void 0,this.transitionWidth=\"width .3s\",this.leftBarBorderColor=\"#ddd\",this.moveBlockBackgroundColor=\"#fff\",this.iconColor=\"#000\",this.iconClass=\"icon-right\",this.isEnd=!1,this.getPictrue(),setTimeout((function(){t.transitionWidth=\"\",t.transitionLeft=\"\",t.text=t.explain}),300)},getPictrue:function(){this.captchaType,localStorage.getItem(\"slider\"),Date.now()}}};var r=i(\"2877\"),a=(e=Object(r.a)(e,(function(){var t=this,e=t._self._c;return e(\"div\",{staticStyle:{position:\"relative\"}},[\"2\"===t.type?e(\"div\",{staticClass:\"verify-img-out\",style:{height:parseInt(t.setSize.imgHeight)+t.vSpace+\"px\"}},[e(\"div\",{staticClass:\"verify-img-panel\",style:{width:t.setSize.imgWidth,height:t.setSize.imgHeight}},[e(\"img\",{staticStyle:{width:\"100%\",height:\"100%\",display:\"block\"},attrs:{src:t.backImgBase?\"data:image/png;base64,\"+t.backImgBase:t.defaultImg,alt:\"\"}}),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showRefresh,expression:\"showRefresh\"}],staticClass:\"verify-refresh\",on:{click:t.refresh}},[e(\"i\",{staticClass:\"iconfont icon-refresh\"})]),e(\"transition\",{attrs:{name:\"tips\"}},[t.tipWords?e(\"span\",{staticClass:\"verify-tips\",class:t.passFlag?\"suc-bg\":\"err-bg\"},[t._v(t._s(t.tipWords))]):t._e()])],1)]):t._e(),e(\"div\",{staticClass:\"verify-bar-area\",style:{width:t.setSize.imgWidth,height:t.barSize.height,\"line-height\":t.barSize.height}},[e(\"span\",{staticClass:\"verify-msg\",domProps:{textContent:t._s(t.text)}}),e(\"div\",{staticClass:\"verify-left-bar\",style:{width:void 0!==t.leftBarWidth?t.leftBarWidth:t.barSize.height,height:t.barSize.height,\"border-color\":t.leftBarBorderColor,transaction:t.transitionWidth}},[e(\"span\",{staticClass:\"verify-msg\",domProps:{textContent:t._s(t.finishText)}}),e(\"div\",{staticClass:\"verify-move-block\",style:{width:t.barSize.height,height:t.barSize.height,\"background-color\":t.moveBlockBackgroundColor,left:t.moveBlockLeft,transition:t.transitionLeft},on:{touchstart:t.start,mousedown:t.start}},[e(\"i\",{class:[\"verify-icon iconfont\",t.iconClass],style:{color:t.iconColor}}),\"2\"===t.type?e(\"div\",{staticClass:\"verify-sub-block\",style:{width:Math.floor(47*parseInt(t.setSize.imgWidth)/310)+\"px\",height:t.setSize.imgHeight,top:\"-\"+(parseInt(t.setSize.imgHeight)+t.vSpace)+\"px\",\"background-size\":t.setSize.imgWidth+\" \"+t.setSize.imgHeight}},[e(\"img\",{staticStyle:{width:\"100%\",height:\"100%\",display:\"block\"},attrs:{src:\"data:image/png;base64,\"+t.blockBackImgBase,alt:\"\"}})]):t._e()])])])])}),[],!1,null,null,null).exports,i(\"d81d\"),i(\"a434\"),i(\"2934\")),c={name:\"VerifyPoints\",props:{mode:{type:String,default:\"fixed\"},captchaType:{type:String},vSpace:{type:Number,default:5},imgSize:{type:Object,default:function(){return{width:\"310px\",height:\"155px\"}}},barSize:{type:Object,default:function(){return{width:\"310px\",height:\"40px\"}}},defaultImg:{type:String,default:\"\"}},data:function(){return{secretKey:\"\",checkNum:3,fontPos:[],checkPosArr:[],num:1,pointBackImgBase:\"\",poinTextList:[],backToken:\"\",setSize:{imgHeight:0,imgWidth:0,barHeight:0,barWidth:0},tempPoints:[],text:\"\",barAreaColor:void 0,barAreaBorderColor:void 0,showRefresh:!0,bindingClick:!0}},computed:{resetSize:function(){return o}},watch:{type:{immediate:!0,handler:function(){this.init()}}},mounted:function(){this.$el.onselectstart=function(){return!1}},methods:{init:function(){var t=this;this.fontPos.splice(0,this.fontPos.length),this.checkPosArr.splice(0,this.checkPosArr.length),this.num=1,this.getPictrue(),this.$nextTick((function(){t.setSize=t.resetSize(t),t.$parent.$emit(\"ready\",t)}))},canvasClick:function(t){var e=this;this.checkPosArr.push(this.getMousePos(this.$refs.canvas,t)),this.num==this.checkNum&&(this.num=this.createPoint(this.getMousePos(this.$refs.canvas,t)),this.checkPosArr=this.pointTransfrom(this.checkPosArr,this.setSize),setTimeout((function(){var t=e.secretKey?s(e.backToken+\"---\"+JSON.stringify(e.checkPosArr),e.secretKey):e.backToken+\"---\"+JSON.stringify(e.checkPosArr),i={captchaType:e.captchaType,pointJson:e.secretKey?s(JSON.stringify(e.checkPosArr),e.secretKey):JSON.stringify(e.checkPosArr),token:e.backToken};Object(a.ajCaptchaCheck)(i).then((function(i){\"0000\"==i.repCode?(e.barAreaColor=\"#4cae4c\",e.barAreaBorderColor=\"#5cb85c\",e.text=\"验证成功\",e.bindingClick=!1,\"pop\"==e.mode&&setTimeout((function(){e.$parent.clickShow=!1,e.refresh()}),1500),e.$parent.$emit(\"success\",{captchaVerification:t})):(e.$parent.$emit(\"error\",e),e.barAreaColor=\"#d9534f\",e.barAreaBorderColor=\"#d9534f\",e.text=\"验证失败\",setTimeout((function(){e.refresh()}),700))}))}),400)),this.num<this.checkNum&&(this.num=this.createPoint(this.getMousePos(this.$refs.canvas,t)))},getMousePos:function(t,e){return{x:e.offsetX,y:e.offsetY}},createPoint:function(t){return this.tempPoints.push(Object.assign({},t)),++this.num},refresh:function(){this.tempPoints.splice(0,this.tempPoints.length),this.barAreaColor=\"#000\",this.barAreaBorderColor=\"#ddd\",this.bindingClick=!0,this.fontPos.splice(0,this.fontPos.length),this.checkPosArr.splice(0,this.checkPosArr.length),this.num=1,this.getPictrue(),this.text=\"验证失败\",this.showRefresh=!0},getPictrue:function(){var t=this,e={captchaType:this.captchaType,clientUid:localStorage.getItem(\"point\"),ts:Date.now()};Object(a.ajCaptcha)(e).then((function(e){\"0000\"==e.repCode?(t.pointBackImgBase=e.repData.originalImageBase64,t.backToken=e.repData.token,t.secretKey=e.repData.secretKey,t.poinTextList=e.repData.wordList,t.text=\"请依次点击【\"+t.poinTextList.join(\",\")+\"】\"):t.text=e.repMsg,\"6201\"==e.repCode&&(t.pointBackImgBase=null)}))},pointTransfrom:function(t,e){return t.map((function(t){return{x:Math.round(310*t.x/parseInt(e.imgWidth)),y:Math.round(155*t.y/parseInt(e.imgHeight))}}))}}};e={name:\"Vue2Verify\",components:{VerifySlide:e,VerifyPoints:Object(r.a)(c,(function(){var t=this,e=t._self._c;return e(\"div\",{staticStyle:{position:\"relative\"}},[e(\"div\",{staticClass:\"verify-img-out\"},[e(\"div\",{staticClass:\"verify-img-panel\",style:{width:t.setSize.imgWidth,height:t.setSize.imgHeight,\"background-size\":t.setSize.imgWidth+\" \"+t.setSize.imgHeight,\"margin-bottom\":t.vSpace+\"px\"}},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showRefresh,expression:\"showRefresh\"}],staticClass:\"verify-refresh\",staticStyle:{\"z-index\":\"3\"},on:{click:t.refresh}},[e(\"i\",{staticClass:\"iconfont icon-refresh\"})]),e(\"img\",{ref:\"canvas\",staticStyle:{width:\"100%\",height:\"100%\",display:\"block\"},attrs:{src:t.pointBackImgBase?\"data:image/png;base64,\"+t.pointBackImgBase:t.defaultImg,alt:\"\"},on:{click:function(e){t.bindingClick&&t.canvasClick(e)}}}),t._l(t.tempPoints,(function(i,n){return e(\"div\",{key:n,staticClass:\"point-area\",style:{\"background-color\":\"#1abd6c\",color:\"#fff\",\"z-index\":9999,width:\"20px\",height:\"20px\",\"text-align\":\"center\",\"line-height\":\"20px\",\"border-radius\":\"50%\",position:\"absolute\",top:parseInt(i.y-10)+\"px\",left:parseInt(i.x-10)+\"px\"}},[t._v(\"\\n        \"+t._s(n+1)+\"\\n      \")])}))],2)]),e(\"div\",{staticClass:\"verify-bar-area\",style:{width:t.setSize.imgWidth,color:this.barAreaColor,\"border-color\":this.barAreaBorderColor,\"line-height\":this.barSize.height}},[e(\"span\",{staticClass:\"verify-msg\"},[t._v(t._s(t.text))])])])}),[],!1,null,null,null).exports},props:{locale:{require:!1,type:String,default:function(){return navigator.language||navigator.browserLanguage}},captchaType:{type:String,required:!0},figure:{type:Number},arith:{type:Number},mode:{type:String,default:\"pop\"},vSpace:{type:Number},explain:{type:String},imgSize:{type:Object,default:function(){return{width:\"310px\",height:\"155px\"}}},blockSize:{type:Object},barSize:{type:Object}},data:function(){return{clickShow:!1,verifyType:void 0,componentType:void 0,defaultImg:i(\"951a\")}},computed:{instance:function(){return this.$refs.instance||{}},showBox:function(){return\"pop\"!=this.mode||this.clickShow}},watch:{captchaType:{immediate:!0,handler:function(t){switch(t.toString()){case\"blockPuzzle\":this.verifyType=\"2\",this.componentType=\"VerifySlide\";break;case\"clickWord\":this.verifyType=\"\",this.componentType=\"VerifyPoints\"}}}},mounted:function(){this.uuid()},methods:{uuid:function(){for(var t=[],e=\"0123456789abcdef\",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);t[14]=\"4\",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]=\"-\";var n=\"slider-\"+t.join(\"\"),s=\"point-\"+t.join(\"\");localStorage.getItem(\"slider\")||localStorage.setItem(\"slider\",n),localStorage.getItem(\"point\")||localStorage.setItem(\"point\",s)},i18n:function(t){return this.$t?this.$t(t):(this.$options.i18n.messages[this.locale]||this.$options.i18n.messages[\"en-US\"])[t]},refresh:function(){this.instance.refresh&&this.instance.refresh()},closeBox:function(){this.clickShow=!1,this.refresh()},show:function(){\"pop\"==this.mode&&(this.clickShow=!0)}}},i(\"c617\"),Object(r.a)(e,(function(){var t=this,e=t._self._c;return e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showBox,expression:\"showBox\"}],class:\"pop\"==t.mode?\"mask\":\"\"},[e(\"div\",{class:\"pop\"==t.mode?\"verifybox\":\"\",style:{\"max-width\":parseInt(t.imgSize.width)+30+\"px\"}},[\"pop\"==t.mode?e(\"div\",{staticClass:\"verifybox-top\"},[t._v(\"\\n      请完成安全验证\\n      \"),e(\"span\",{staticClass:\"verifybox-close\",on:{click:t.closeBox}},[e(\"i\",{staticClass:\"iconfont icon-close\"})])]):t._e(),e(\"div\",{staticClass:\"verifybox-bottom\",style:{padding:\"pop\"==t.mode?\"15px\":\"0\"}},[t.componentType?e(t.componentType,{ref:\"instance\",tag:\"components\",attrs:{\"captcha-type\":t.captchaType,type:t.verifyType,figure:t.figure,arith:t.arith,mode:t.mode,\"v-space\":t.vSpace,explain:t.explain,\"img-size\":t.imgSize,\"block-size\":t.blockSize,\"bar-size\":t.barSize,\"default-img\":t.defaultImg}}):t._e()],1)])])}),[],!1,null,null,null).exports,i(\"3908\"),i(\"6987\"),i(\"5d2d\"),c=new Error(\"Cannot find module './index.vue?vue&type=style&index=0&id=e0d9f2c2&prod&scoped=true&lang=stylus'\");throw c.code=\"MODULE_NOT_FOUND\",c},\"433f\":function(t,e,i){t.exports=i.p+\"system_static/img/sw.3ef10e8b.jpg\"},\"7daa\":function(t,e,i){function n(t,e,i){return t.getAttribute(e)||i}function s(t){return document.getElementsByTagName(t)}function o(){a=h.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=h.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function r(){var t,e,i,n,s,o;(f+=1)<5||(f=0,p.clearRect(0,0,a,c),t=[g].concat(y),y.forEach((function(r){for(r.x+=r.xa,r.y+=r.ya,r.xa*=a<r.x||r.x<0?-1:1,r.ya*=c<r.y||r.y<0?-1:1,p.fillRect(r.x-.5,r.y-.5,2,2),p.fillStyle=\"#FFFFFF\",i=0;i<t.length;i++)r!==(e=t[i])&&null!==e.x&&null!==e.y&&(n=r.x-e.x,(o=n*n+(s=r.y-e.y)*s)<e.max)&&(e===g&&e.max/2<=o&&(r.x-=.03*n,r.y-=.03*s),n=(e.max-o)/e.max,p.beginPath(),p.lineWidth=n/2,p.strokeStyle=\"rgba(\"+d.c+\",\"+(.2+n)+\")\",p.moveTo(r.x,r.y),p.lineTo(e.x,e.y),p.stroke());t.splice(t.indexOf(r),1)}))),u(r)}i(\"99af\"),i(\"14d9\"),i(\"a434\"),i(\"d3b7\"),i(\"159b\");var a,c,h=document.createElement(\"canvas\"),d=(i=s(\"script\"),{l:l=i.length,z:n(i=i[l-1],\"zIndex\",-2),o:n(i,\"opacity\",.8),c:n(i,\"color\",\"255,255,255\"),n:n(i,\"count\",240)}),l=\"c_n\"+d.l,p=h.getContext(\"2d\"),f=0,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/45)},m=Math.random,g={x:null,y:null,max:2e4};h.id=l,h.style.cssText=\"position:fixed;top:0;left:0;z-index:\"+d.z+\";opacity:\"+d.o,s(\"body\")[0].appendChild(h),o(),window.onresize=o,window.onmousemove=function(t){t=t||window.event,g.x=t.clientX,g.y=t.clientY},window.onmouseout=function(){g.x=null,g.y=null};for(var y=[],v=0;v<d.n;v++){var b=m()*a,w=m()*c,x=2*m()-1,S=2*m()-1;y.push({x:b,y:w,xa:x,ya:S,max:6e3})}setTimeout((function(){r()}),100)},\"951a\":function(t,e,i){t.exports=i.p+\"system_static/img/default.6b914f9c.jpg\"},\"9d64\":function(t,e,i){t.exports=i.p+\"system_static/img/logo.eb6eba32.png\"},c617:function(t,e,i){i(\"d224\")},d224:function(t,e,i){}}]);","extractedComments":[]}