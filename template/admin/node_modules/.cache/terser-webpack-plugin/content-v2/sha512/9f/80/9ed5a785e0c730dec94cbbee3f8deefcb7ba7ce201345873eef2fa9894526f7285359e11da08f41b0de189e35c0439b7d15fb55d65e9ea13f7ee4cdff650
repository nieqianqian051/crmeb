{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-6b5275c2\"],{\"358b\":function(e,n,t){t(\"4531\")},4531:function(e,n){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/stylus-loader/index.js):\\nTypeError: Class constructor Visitor cannot be invoked without 'new'\\n    at new ImportVisitor (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:10:11)\\n    at listImports (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:72:23)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/pathcache.js:295:15\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Fulfilled.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:590:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/webpack/lib/NormalModule.js:316:20\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:367:11\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:233:18\\n    at context.callback (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Rejected.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:623:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\")},d7d0:function(e,n,t){t.r(n);var i=t(\"5530\"),s=(t(\"99af\"),t(\"4de4\"),t(\"c740\"),t(\"d81d\"),t(\"14d9\"),t(\"a434\"),t(\"4ec9\"),t(\"d3b7\"),t(\"3ca3\"),t(\"ddb0\"),t(\"2f62\")),a=t(\"c4ad\"),o=t(\"47c5\");a={name:\"add_goods\",components:{goodsList:a.default},computed:Object(i.a)(Object(i.a)({},Object(s.e)(\"media\",[\"isMobile\"])),{},{labelWidth:function(){return this.isMobile?void 0:\"100px\"},labelPosition:function(){return this.isMobile?\"top\":\"right\"}}),data:function(){return{isShowBox:!1,loading:!1,modals:!1,goodsList:[],tempGoods:{},formValidate:{},tabList:[],disabled:!1,loadings:!1,selectIds:[]}},methods:{selectGoods:function(){this.modals=!0},liveGoods:function(){var e=this,n=[];this.goodsList.map((function(e){n.push(e.product_id)})),Object(o.g)({product_id:n}).then((function(n){e.tabList=n.data,e.isShowBox=!0})).catch((function(n){e.$message.error(n.msg)}))},unique:function(e){var n=new Map;return e.filter((function(e){return!n.has(e.product_id)&&n.set(e.product_id,1)}))},getProductId:function(e){this.modals=!1,this.goodsList=this.unique(this.goodsList.concat(e))},bindDelete:function(e,n){this.goodsList.splice(e,1),e=this.tabList.findIndex((function(e){return e.id==n.product_id})),this.tabList.splice(e,1),this.goodsList.length||(this.isShowBox=!1)},del:function(e,n){this.tabList.splice(n,1),n=this.goodsList.findIndex((function(n){return n.product_id==e.id})),this.goodsList.splice(n,1),this.tabList.length||(this.isShowBox=!1)},bindSub:function(){var e=this;this.disabled=!0,this.loadings=!0,Object(o.f)({goods_info:this.tabList}).then((function(n){e.$message.success(\"添加成功\"),e.disabled=!1,setTimeout((function(){e.$router.push({path:e.$routeProStr+\"/marketing/live/live_goods\"})}),500)})).catch((function(n){e.disabled=!1,e.$message.error(n.msg)}))}}},t(\"358b\"),i=t(\"2877\"),s=Object(i.a)(a,(function(){var e=this,n=e._self._c;return n(\"div\",[n(\"pages-header\",{ref:\"pageHeader\",attrs:{title:e.$route.meta.title,backUrl:e.$routeProStr+\"/marketing/live/live_goods\"}}),n(\"el-card\",{staticClass:\"mt16\",attrs:{bordered:!1,shadow:\"never\"}},[n(\"el-form\",{ref:\"formValidate\",staticClass:\"tabform\",attrs:{model:e.formValidate,\"label-width\":e.labelWidth,\"label-position\":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[n(\"el-row\",{attrs:{gutter:24}},[n(\"el-col\",{attrs:{span:24}},[n(\"el-form-item\",{attrs:{label:\"选择商品：\"}},[n(\"div\",{staticClass:\"box\"},[e._l(e.goodsList,(function(t,i){return n(\"div\",{key:i,staticClass:\"box-item\"},[n(\"img\",{attrs:{src:t.image,alt:\"\"}}),n(\"i\",{staticClass:\"el-icon-error\",staticStyle:{\"font-size\":\"16px\"},on:{click:function(n){return e.bindDelete(i,t)}}})])})),n(\"div\",{staticClass:\"upload-box acea-row row-center-wrapper\",on:{click:e.selectGoods}},[n(\"i\",{staticClass:\"el-icon-goods\",staticStyle:{\"font-size\":\"24px\"}})])],2)])],1)],1)],1),0<e.goodsList.length?n(\"div\",{staticClass:\"active-btn\"},[n(\"el-button\",{attrs:{type:\"success\"},on:{click:e.liveGoods}},[e._v(\"生成直播商品\")])],1):e._e(),e.isShowBox?n(\"div\",{staticClass:\"table-box\"},[n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticClass:\"mt14\",attrs:{data:e.tabList,\"no-userFrom-text\":\"暂无数据\",\"no-filtered-userFrom-text\":\"暂无筛选结果\"}},[n(\"el-table-column\",{attrs:{label:\"商品ID\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.id))])]}}],null,!1,773642443)}),n(\"el-table-column\",{attrs:{label:\"商品信息\",\"min-width\":\"90\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"div\",{staticClass:\"product_box\"},[n(\"img\",{attrs:{src:t.row.image,alt:\"\"}}),n(\"span\",[e._v(e._s(t.row.store_name))])])]}}],null,!1,1809256286)}),n(\"el-table-column\",{attrs:{label:\"直播售价\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.price))])]}}],null,!1,1691062027)}),n(\"el-table-column\",{attrs:{label:\"库存\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.stock))])]}}],null,!1,2684418342)}),n(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"a\",{on:{click:function(n){return e.del(t.row,t.$index)}}},[e._v(\"删除\")])]}}],null,!1,1960015606)})],1),n(\"div\",{staticClass:\"sub_btn\"},[n(\"el-button\",{staticStyle:{width:\"8%\"},attrs:{type:\"primary\",disabled:e.disabled,loading:e.loadings},on:{click:e.bindSub}},[e._v(\"提交\")])],1)],1):e._e()],1),n(\"el-dialog\",{staticClass:\"paymentFooter\",attrs:{visible:e.modals,title:\"商品列表\",width:\"1000px\"},on:{\"update:visible\":function(n){e.modals=n}}},[n(\"goods-list\",{ref:\"goodslist\",attrs:{selectIds:e.selectIds,ischeckbox:!0},on:{getProductId:e.getProductId}})],1)],1)}),[],!1,null,\"4e564aa2\",null);n.default=s.exports}}]);","extractedComments":[]}