{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-70f78ffb\"],{\"33b6\":function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/stylus-loader/index.js):\\nTypeError: Class constructor Visitor cannot be invoked without 'new'\\n    at new ImportVisitor (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:10:11)\\n    at listImports (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/listimports.js:72:23)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/stylus-loader/lib/pathcache.js:295:15\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Fulfilled.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:590:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/webpack/lib/NormalModule.js:316:20\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:367:11\\n    at /Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:233:18\\n    at context.callback (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at tryCatchReject (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:840:30)\\n    at runContinuation1 (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:799:4)\\n    at Rejected.when (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:623:4)\\n    at Pending.run (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/makePromise.js:481:13)\\n    at Scheduler._drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:62:19)\\n    at Scheduler.drain (/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/when/lib/Scheduler.js:27:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\")},\"6fd3\":function(e,t,a){a(\"498a\"),a(\"14d9\"),a(\"13d5\"),a(\"a434\"),a(\"d3b7\");var n=a(\"c4c8\"),i={name:\"addAttr\",data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:\"请输入规格名称\",trigger:\"blur\"}]},formDynamic:{rule_name:\"\",spec:[]},attrsName:\"\",attrsVal:\"\",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},computed:{},methods:{onCancel:function(){this.ids=0,this.clear()},onClose:function(){this.ids=0,this.clear(),this.modal=!1},addBtn:function(){this.isBtn=!0},getIofo:function(e){var t=this;this.spinShow=!0,this.ids=e.id,Object(n.C)(e.id).then((function(e){t.formDynamic=e.data.info,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$message.error(e.msg)}))},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(0===t.formDynamic.spec.length?t.$message.warning(\"请至少添加一条商品规格！\"):(t.modal_loading=!0,void setTimeout((function(){Object(n.B)(t.formDynamic,t.ids).then((function(e){t.$message.success(e.msg),setTimeout((function(){t.modal=!1,t.modal_loading=!1}),500),setTimeout((function(){t.$emit(\"getList\"),t.clear()}),600)})).catch((function(e){t.modal_loading=!1,t.$message.error(e.msg)}))}),1200)))}))},clear:function(){this.$refs.formDynamic.resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.attrsName=\"\",this.attrsVal=\"\",this.ids=0},offAttrName:function(){this.isBtn=!1},handleRemove:function(e){this.formDynamic.spec.splice(e,1)},handleRemove2:function(e,t){e.splice(t,1)},createAttrName:function(){var e,t;this.attrsName&&this.attrsVal?(e={value:this.attrsName,detail:[this.attrsVal]},this.formDynamic.spec.push(e),t={},this.formDynamic.spec=this.formDynamic.spec.reduce((function(e,a){return t[a.value]||(t[a.value]=e.push(a)),e}),[]),this.attrsName=\"\",this.attrsVal=\"\",this.isBtn=!1):this.$message.warning(\"请添加规格名称或规格值\")},createAttr:function(e,t){var a;e?(this.formDynamic.spec[t].detail.push(e),a={},this.formDynamic.spec[t].detail=this.formDynamic.spec[t].detail.reduce((function(e,t){return a[t]||(a[t]=e.push(t)),e}),[])):this.$message.warning(\"请添加属性\")}}};a(\"71d8\"),a=a(\"2877\"),a=Object(a.a)(i,(function(){var e=this,t=e._self._c;return t(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.spinShow,expression:\"spinShow\"}],attrs:{visible:e.modal,title:\"商品规格\",width:\"1000px\"},on:{\"update:visible\":function(t){e.modal=t},closed:e.onCancel}},[t(\"el-form\",{ref:\"formDynamic\",staticClass:\"attrFrom\",attrs:{model:e.formDynamic,rules:e.rules,\"label-width\":\"110px\",\"label-position\":\"right\"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(\"el-row\",{attrs:{gutter:24}},[t(\"el-col\",{attrs:{span:24}},[t(\"el-col\",{attrs:{span:8}},[t(\"el-form-item\",{attrs:{label:\"规格模板名称：\",prop:\"rule_name\"}},[t(\"el-input\",{attrs:{placeholder:\"请输入标题名称\",maxlength:20},model:{value:e.formDynamic.rule_name,callback:function(t){e.$set(e.formDynamic,\"rule_name\",\"string\"==typeof t?t.trim():t)},expression:\"formDynamic.rule_name\"}})],1)],1)],1),e._l(e.formDynamic.spec,(function(a,n){return t(\"el-col\",{key:n,staticClass:\"noForm\",attrs:{span:23}},[t(\"el-form-item\",[t(\"div\",{staticClass:\"acea-row row-middle\"},[t(\"span\",{staticClass:\"mr5\"},[e._v(e._s(a.value))]),t(\"i\",{staticClass:\"el-icon-close\",staticStyle:{\"font-size\":\"14px\"},on:{click:function(t){return e.handleRemove(n)}}})]),t(\"div\",{staticClass:\"rulesBox\"},[e._l(a.detail,(function(n,i){return t(\"el-tag\",{key:i,staticClass:\"mr14 mb10\",attrs:{closable:\"\",color:\"primary\"},on:{close:function(t){return e.handleRemove2(a.detail,i)}}},[e._v(e._s(n))])})),t(\"el-input\",{staticClass:\"mb10 form_content_width\",attrs:{placeholder:\"请输入属性名称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.createAttr(a.detail.attrsVal,n)}},model:{value:a.detail.attrsVal,callback:function(t){e.$set(a.detail,\"attrsVal\",\"string\"==typeof t?t.trim():t)},expression:\"item.detail.attrsVal\"}},[t(\"template\",{slot:\"append\"},[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.createAttr(a.detail.attrsVal,n)}}},[e._v(\"确定\")])],1)],2)],2)])],1)})),e.isBtn?t(\"el-col\",{staticClass:\"mt10\",attrs:{span:24}},[t(\"el-col\",{staticClass:\"mr15\",attrs:{span:8}},[t(\"el-form-item\",{attrs:{label:\"规格名称：\"}},[t(\"el-input\",{attrs:{placeholder:\"请输入规格\"},model:{value:e.attrsName,callback:function(t){e.attrsName=t},expression:\"attrsName\"}})],1)],1),t(\"el-col\",{staticClass:\"mr20\",attrs:{span:8}},[t(\"el-form-item\",{attrs:{label:\"规格值：\"}},[t(\"el-input\",{attrs:{placeholder:\"请输入规格值\"},model:{value:e.attrsVal,callback:function(t){e.attrsVal=t},expression:\"attrsVal\"}})],1)],1),t(\"el-col\",{attrs:{span:2}},[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.createAttrName}},[e._v(\"确定\")])],1),t(\"el-col\",{attrs:{span:2}},[t(\"el-button\",{on:{click:e.offAttrName}},[e._v(\"取消\")])],1)],1):e._e()],2),e.isBtn?e._e():t(\"el-button\",{staticClass:\"add\",attrs:{type:\"primary\"},on:{click:e.addBtn}},[e._v(\"添加新规格\")])],1),t(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"el-button\",{on:{click:e.onClose}},[e._v(\"取消\")]),t(\"el-button\",{attrs:{type:\"primary\",loading:e.modal_loading},on:{click:function(t){return e.handleSubmit(\"formDynamic\")}}},[e._v(\"确定\")])],1)],1)}),[],!1,null,\"0fec9316\",null);t.a=a.exports},\"71d8\":function(e,t,a){a(\"33b6\")},\"7f08\":function(e,t,a){a.r(t);var n=a(\"2909\"),i=a(\"5530\"),s=(a(\"caad\"),a(\"a15b\"),a(\"14d9\"),a(\"d3b7\"),a(\"6062\"),a(\"3ca3\"),a(\"88e6\"),a(\"70cc\"),a(\"eb03\"),a(\"22e5\"),a(\"c01e\"),a(\"fa76\"),a(\"8306\"),a(\"159b\"),a(\"ddb0\"),a(\"2f62\")),l=a(\"6fd3\"),o=a(\"c4c8\");l={name:\"productAttr\",components:{addAttr:l.a},data:function(){return{loading:!1,artFrom:{page:1,limit:20,rule_name:\"\"},tableList:[],total:0,selectedIds:new Set,ids:[],multipleSelection:[]}},computed:Object(i.a)({},Object(s.e)(\"admin/order\",[\"orderChartType\"])),created:function(){this.getDataList()},methods:{getRowKey:function(e){return e.id},handleSelectAll:function(e){var t=this;0===e.length?this.$refs.table.data.forEach((function(e){t.selectedIds.has(e.id)&&t.selectedIds.delete(e.id)})):e.forEach((function(e){t.selectedIds.add(e.id)})),this.$nextTick((function(){t.setChecked()}))},handleSelectRow:function(e){for(var t=this,a=[],n=[],i=0;i<e.length;i++){var s=e[i];n.includes(s.id)||(a.push(s),n.push(s.id))}this.selectedIds=n,this.multipleSelection=a,this.$nextTick((function(e){t.setChecked()}))},setChecked:function(){this.ids=Object(n.a)(this.selectedIds).join(\",\")},del:function(e,t){var a=this,n={};if(\"批量删除规格\"===t){if(0===this.selectedIds.size)return this.$message.warning(\"请选择要删除的规格！\");n={ids:this.ids}}else n={ids:e.id};this.$modalSure({title:t,num:0,url:\"product/product/rule/delete\",method:\"DELETE\",ids:n}).then((function(e){a.$message.success(e.msg),a.getDataList()})).catch((function(e){a.$message.error(e.msg)}))},addAttr:function(){this.$refs.addattr.modal=!0},edit:function(e){this.$refs.addattr.modal=!0,this.$refs.addattr.getIofo(e)},getDataList:function(){var e=this;this.loading=!0,Object(o.D)(this.artFrom).then((function(t){var a=t.data;e.tableList=a.list,e.$nextTick((function(){e.setChecked()})),e.total=t.data.count,e.loading=!1})).catch((function(t){e.loading=!1,e.$message.error(t.msg)}))},userSearchs:function(){this.artFrom.page=1,this.getDataList()}}},i=a(\"2877\"),s=Object(i.a)(l,(function(){var e=this,t=e._self._c;return t(\"div\",[t(\"el-card\",{staticClass:\"ivu-mt\",attrs:{bordered:!1,shadow:\"never\",\"body-style\":{padding:0}}},[t(\"div\",{staticClass:\"padding-add\"},[t(\"el-form\",{ref:\"artFrom\",staticClass:\"tabform\",attrs:{model:e.artFrom,\"label-width\":\"80px\",\"label-position\":\"right\",inline:\"\"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(\"el-form-item\",{attrs:{label:\"规格搜索：\"}},[t(\"el-input\",{staticClass:\"form_content_width\",attrs:{clearable:\"\",placeholder:\"请输入规格名称\"},model:{value:e.artFrom.rule_name,callback:function(t){e.$set(e.artFrom,\"rule_name\",t)},expression:\"artFrom.rule_name\"}})],1),t(\"el-form-item\",[t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.userSearchs}},[e._v(\"查询\")])],1)],1)],1)]),t(\"el-card\",{staticClass:\"ivu-mt mt16\",attrs:{bordered:!1,shadow:\"never\"}},[t(\"el-button\",{directives:[{name:\"auth\",rawName:\"v-auth\",value:[\"product-rule-save\"],expression:\"['product-rule-save']\"}],attrs:{type:\"primary\"},on:{click:e.addAttr}},[e._v(\"添加商品规格\")]),t(\"el-button\",{directives:[{name:\"auth\",rawName:\"v-auth\",value:[\"product-product-rule-delete\"],expression:\"['product-product-rule-delete']\"}],on:{click:function(t){return e.del(null,\"批量删除规格\")}}},[e._v(\"批量删除\")]),t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticClass:\"mt14\",attrs:{data:e.tableList,\"highlight-current-row\":\"\",\"row-key\":e.getRowKey,\"empty-text\":\"暂无数据\"},on:{\"selection-change\":e.handleSelectRow}},[t(\"el-table-column\",{attrs:{type:\"selection\",width:\"60\",\"reserve-selection\":!0}}),t(\"el-table-column\",{attrs:{label:\"ID\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.id))])]}}])}),t(\"el-table-column\",{attrs:{label:\"规格名称\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.rule_name))])]}}])}),t(\"el-table-column\",{attrs:{label:\"商品规格\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"span\",[e._v(e._s(a.row.attr_name))])]}}])}),t(\"el-table-column\",{attrs:{label:\"商品属性\",\"min-width\":\"130\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return e._l(a.row.attr_value,(function(a,n){return t(\"span\",{key:n,staticStyle:{display:\"block\"},domProps:{textContent:e._s(a)}})}))}}])}),t(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"a\",{on:{click:function(t){return e.edit(a.row)}}},[e._v(\"编辑\")]),t(\"el-divider\",{attrs:{direction:\"vertical\"}}),t(\"a\",{on:{click:function(t){return e.del(a.row,\"删除规格\",a.$index)}}},[e._v(\"删除\")])]}}])})],1),t(\"div\",{staticClass:\"acea-row row-right page\"},[e.total?t(\"pagination\",{attrs:{total:e.total,page:e.artFrom.page,limit:e.artFrom.limit},on:{\"update:page\":function(t){return e.$set(e.artFrom,\"page\",t)},\"update:limit\":function(t){return e.$set(e.artFrom,\"limit\",t)},pagination:e.getDataList}}):e._e()],1)],1),t(\"add-attr\",{ref:\"addattr\",on:{getList:e.userSearchs}})],1)}),[],!1,null,\"403d239e\",null);t.default=s.exports}}]);","extractedComments":[]}