{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/user/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/user/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCB1c2VySW5mbyBmcm9tICcuL2NvbXBvbmVudHMvdXNlckluZm8nOwppbXBvcnQgd2VjaGV0SW5mbyBmcm9tICcuL2NvbXBvbmVudHMvd2VjaGV0SW5mbyc7CmltcG9ydCB1c2VyUmVnaW9uIGZyb20gJy4vY29tcG9uZW50cy91c2VyUmVnaW9uJzsKaW1wb3J0IHsgc3RhdGlzdGljVXNlckV4Y2VsIH0gZnJvbSAnQC9hcGkvc3RhdGlzdGljJzsKaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2luZGV4JywKICBjb21wb25lbnRzOiB7CiAgICB1c2VySW5mbzogdXNlckluZm8sCiAgICB3ZWNoZXRJbmZvOiB3ZWNoZXRJbmZvLAogICAgdXNlclJlZ2lvbjogdXNlclJlZ2lvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1JbmxpbmU6IHsKICAgICAgICBjaGFubmVsX3R5cGU6ICcnLAogICAgICAgIGRhdGE6ICcnCiAgICAgIH0sCiAgICAgIGNoYW5uZWxfdHlwZTogJ2FsbCcsCiAgICAgIHRpbWVWYWw6IFtdLAogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICBwaWNrZXJPcHRpb25zOiB0aGlzLiR0aW1lT3B0aW9ucwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgZW5kID0gbmV3IERhdGUoKTsKICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LnNldFRpbWUobmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBuZXcgRGF0ZSgpLmdldE1vbnRoKCksIG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMjkpKSk7CiAgICB0aGlzLnRpbWVWYWwgPSBbc3RhcnQsIGVuZF07CiAgICB0aGlzLmZvcm1JbmxpbmUuZGF0YSA9IGZvcm1hdERhdGUoc3RhcnQsICd5eXl5L01NL2RkJykgKyAnLScgKyBmb3JtYXREYXRlKGVuZCwgJ3l5eXkvTU0vZGQnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVR4dDogZnVuY3Rpb24gY2hhbmdlVHh0KCkgewogICAgICB0aGlzLmZvcm1JbmxpbmUuY2hhbm5lbF90eXBlID0gdGhpcy5jaGFubmVsX3R5cGUgPT09ICdhbGwnID8gJycgOiB0aGlzLmNoYW5uZWxfdHlwZTsKICAgIH0sCiAgICAvLyDlr7zlh7oKICAgIGV4Y2VsOiBmdW5jdGlvbiBleGNlbCgpIHsKICAgICAgc3RhdGlzdGljVXNlckV4Y2VsKHRoaXMuZm9ybUlubGluZSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXMpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcy5kYXRhLnVybC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBpdGVtOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIC8vIOWFt+S9k+aXpeacnwogICAgb25jaGFuZ2VUaW1lOiBmdW5jdGlvbiBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLnRpbWVWYWwgPSBlOwogICAgICB0aGlzLmZvcm1JbmxpbmUuZGF0YSA9IHRoaXMudGltZVZhbCA/IHRoaXMudGltZVZhbC5qb2luKCctJykgOiAnJzsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy51c2VySW5mb3MuZ2V0U3RhdGlzdGljcygpOwogICAgICB0aGlzLiRyZWZzLnVzZXJJbmZvcy5nZXRUcmVuZCgpOwogICAgICB0aGlzLiRyZWZzLnVzZXJSZWdpb25zLmdldFRyZW5kKCk7CiAgICAgIHRoaXMuJHJlZnMudXNlclJlZ2lvbnMuZ2V0U2V4KCk7CiAgICAgIGlmICh0aGlzLmZvcm1JbmxpbmUuY2hhbm5lbF90eXBlID09PSAnd2VjaGF0JykgewogICAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTsKICAgICAgICB0aGlzLiRyZWZzLndlY2hldEluZm9zLmdldFN0YXRpc3RpY3MoKTsKICAgICAgICB0aGlzLiRyZWZzLndlY2hldEluZm9zLmdldFRyZW5kKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["userInfo","wechetInfo","userRegion","statisticUserExcel","formatDate","name","components","data","formInline","channel_type","timeVal","isShow","pickerOptions","$timeOptions","created","end","Date","start","setTime","getFullYear","getMonth","getDate","methods","changeTxt","excel","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","url","map","item","window","location","href","stop","_x","apply","arguments","onchangeTime","e","join","handleSubmit","$refs","userInfos","getStatistics","getTrend","userRegions","getSex","wechetInfos"],"sources":["src/pages/statistic/user/index.vue"],"sourcesContent":["<template>\n  <div class=\"article-manager\">\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mb-16\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form ref=\"formInline\" label-width=\"80px\" label-position=\"right\" :model=\"formInline\" inline>\n          <el-form-item label=\"用户渠道：\">\n            <el-select\n              clearable\n              v-model=\"channel_type\"\n              placeholder=\"请选择用户渠道\"\n              @change=\"changeTxt\"\n              class=\"form_content_width\"\n            >\n              <el-option value=\"all\" label=\"全部\"></el-option>\n              <el-option value=\"wechat\" label=\"公众号\"></el-option>\n              <el-option value=\"routine\" label=\"小程序\"></el-option>\n              <el-option value=\"h5\" label=\"H5\"></el-option>\n              <el-option value=\"pc\" label=\"PC\"></el-option>\n              <el-option value=\"app\" label=\"APP\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"选择时间:\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n              class=\"mr20\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleSubmit('formInline')\">查询</el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"excel\">导出</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <user-info :formInline=\"formInline\" ref=\"userInfos\" key=\"1\"></user-info>\n    <wechet-info :formInline=\"formInline\" ref=\"wechetInfos\" v-if=\"isShow\" key=\"2\"></wechet-info>\n    <user-region :formInline=\"formInline\" ref=\"userRegions\" key=\"3\"></user-region>\n  </div>\n</template>\n\n<script>\nimport userInfo from './components/userInfo';\nimport wechetInfo from './components/wechetInfo';\nimport userRegion from './components/userRegion';\nimport { statisticUserExcel } from '@/api/statistic';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'index',\n  components: {\n    userInfo,\n    wechetInfo,\n    userRegion,\n  },\n  data() {\n    return {\n      formInline: {\n        channel_type: '',\n        data: '',\n      },\n      channel_type: 'all',\n      timeVal: [],\n      isShow: false,\n      pickerOptions: this.$timeOptions,\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formInline.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  methods: {\n    changeTxt() {\n      this.formInline.channel_type = this.channel_type === 'all' ? '' : this.channel_type;\n    },\n    // 导出\n    excel() {\n      statisticUserExcel(this.formInline).then(async (res) => {\n        res.data.url.map((item) => {\n          window.location.href = item;\n        });\n      });\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formInline.data = this.timeVal ? this.timeVal.join('-') : '';\n    },\n    handleSubmit() {\n      this.$refs.userInfos.getStatistics();\n      this.$refs.userInfos.getTrend();\n      this.$refs.userRegions.getTrend();\n      this.$refs.userRegions.getSex();\n      if (this.formInline.channel_type === 'wechat') {\n        this.isShow = true;\n        this.$refs.wechetInfos.getStatistics();\n        this.$refs.wechetInfos.getTrend();\n      } else {\n        this.isShow = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ivu-form-item {\n  padding-bottom: 10px;\n  margin-bottom: 0;\n}\n</style>\n"],"mappings":";;;;AAqDA,OAAAA,QAAA;AACA,OAAAC,UAAA;AACA,OAAAC,UAAA;AACA,SAAAC,kBAAA;AACA,SAAAC,UAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAN,QAAA,EAAAA,QAAA;IACAC,UAAA,EAAAA,UAAA;IACAC,UAAA,EAAAA;EACA;EACAK,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;QACAC,YAAA;QACAF,IAAA;MACA;MACAE,YAAA;MACAC,OAAA;MACAC,MAAA;MACAC,aAAA,OAAAC;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,IAAAC,GAAA,OAAAC,IAAA;IACA,IAAAC,KAAA,OAAAD,IAAA;IACAC,KAAA,CAAAC,OAAA,CAAAD,KAAA,CAAAC,OAAA,KAAAF,IAAA,KAAAA,IAAA,GAAAG,WAAA,QAAAH,IAAA,GAAAI,QAAA,QAAAJ,IAAA,GAAAK,OAAA;IACA,KAAAX,OAAA,IAAAO,KAAA,EAAAF,GAAA;IACA,KAAAP,UAAA,CAAAD,IAAA,GAAAH,UAAA,CAAAa,KAAA,wBAAAb,UAAA,CAAAW,GAAA;EACA;EACAO,OAAA;IACAC,SAAA,WAAAA,UAAA;MACA,KAAAf,UAAA,CAAAC,YAAA,QAAAA,YAAA,uBAAAA,YAAA;IACA;IACA;IACAe,KAAA,WAAAA,MAAA;MACArB,kBAAA,MAAAK,UAAA,EAAAiB,IAAA;QAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAAC,GAAA;UAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBACAL,GAAA,CAAAxB,IAAA,CAAA8B,GAAA,CAAAC,GAAA,WAAAC,IAAA;kBACAC,MAAA,CAAAC,QAAA,CAAAC,IAAA,GAAAH,IAAA;gBACA;cAAA;cAAA;gBAAA,OAAAL,QAAA,CAAAS,IAAA;YAAA;UAAA,GAAAb,OAAA;QAAA,CACA;QAAA,iBAAAc,EAAA;UAAA,OAAAlB,IAAA,CAAAmB,KAAA,OAAAC,SAAA;QAAA;MAAA;IACA;IACA;IACAC,YAAA,WAAAA,aAAAC,CAAA;MACA,KAAAtC,OAAA,GAAAsC,CAAA;MACA,KAAAxC,UAAA,CAAAD,IAAA,QAAAG,OAAA,QAAAA,OAAA,CAAAuC,IAAA;IACA;IACAC,YAAA,WAAAA,aAAA;MACA,KAAAC,KAAA,CAAAC,SAAA,CAAAC,aAAA;MACA,KAAAF,KAAA,CAAAC,SAAA,CAAAE,QAAA;MACA,KAAAH,KAAA,CAAAI,WAAA,CAAAD,QAAA;MACA,KAAAH,KAAA,CAAAI,WAAA,CAAAC,MAAA;MACA,SAAAhD,UAAA,CAAAC,YAAA;QACA,KAAAE,MAAA;QACA,KAAAwC,KAAA,CAAAM,WAAA,CAAAJ,aAAA;QACA,KAAAF,KAAA,CAAAM,WAAA,CAAAH,QAAA;MACA;QACA,KAAA3C,MAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}