{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/product/components/productRanking.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/statistic/product/components/productRanking.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgc3RhdGlzdGljUHJvZHVjdExpc3RBcGkgfSBmcm9tICdAL2FwaS9zdGF0aXN0aWMnOwppbXBvcnQgZ29vZHNEZXRhaWwgZnJvbSAnLi4vY29tcG9uZW50cy9nb29kc0RldGFpbCc7CmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9kdWN0UmFua2luZycsCiAgY29tcG9uZW50czogewogICAgZ29vZHNEZXRhaWw6IGdvb2RzRGV0YWlsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWRhdGVGdW46IHRoaXMuJHZhbGlkYXRlRnVuLAogICAgICBvcHRpb25zOiB0aGlzLiR0aW1lT3B0aW9ucywKICAgICAgbmFtZTogJ+i/kTMw5aSpJywKICAgICAgdGltZVZhbDogW10sCiAgICAgIGRhdGFUaW1lOiAnJywKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc29ydDogJ3Zpc2l0JywKICAgICAgICBkYXRhOiAnJwogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdGFiTGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBnb29kc0lkOiAnJywKICAgICAgaXNQcm9kdWN0Qm94OiBmYWxzZSwKICAgICAgbGlzdDogW3sKICAgICAgICB2YWw6ICd2aXNpdCcsCiAgICAgICAgbmFtZTogJ+a1j+iniOmHjycKICAgICAgfSwgewogICAgICAgIHZhbDogJ3VzZXInLAogICAgICAgIG5hbWU6ICforr/lrqLmlbAnCiAgICAgIH0sIHsKICAgICAgICB2YWw6ICdjYXJ0JywKICAgICAgICBuYW1lOiAn5Yqg6LSt5Lu25pWwJwogICAgICB9LCB7CiAgICAgICAgdmFsOiAnb3JkZXJzJywKICAgICAgICBuYW1lOiAn5LiL5Y2V5Lu25pWwJwogICAgICB9LCB7CiAgICAgICAgdmFsOiAncHJpY2UnLAogICAgICAgIG5hbWU6ICfmlK/ku5jph5Hpop0nCiAgICAgIH0sCiAgICAgIC8vIHsKICAgICAgLy8gICB2YWw6ICdwcm9maXQnLAogICAgICAvLyAgIG5hbWU6ICfmr5vliKnnjocnLAogICAgICAvLyB9LAogICAgICB7CiAgICAgICAgdmFsOiAnY29sbGVjdCcsCiAgICAgICAgbmFtZTogJ+aUtuiXj+aVsCcKICAgICAgfSwgewogICAgICAgIHZhbDogJ2NoYW5nZXMnLAogICAgICAgIG5hbWU6ICforr/lrqIt5pSv5LuY6L2s5YyW546HJwogICAgICB9XQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgZW5kID0gbmV3IERhdGUoKTsKICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LnNldFRpbWUobmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBuZXcgRGF0ZSgpLmdldE1vbnRoKCksIG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMjkpKSk7CiAgICB0aGlzLnRpbWVWYWwgPSBbc3RhcnQsIGVuZF07CiAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kYXRhID0gZm9ybWF0RGF0ZShzdGFydCwgJ3l5eXkvTU0vZGQnKSArICctJyArIGZvcm1hdERhdGUoZW5kLCAneXl5eS9NTS9kZCcpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWU6IGZ1bmN0aW9uIG9uY2hhbmdlVGltZShlKSB7CiAgICAgIHRoaXMudGltZVZhbCA9IGU7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmRhdGEgPSB0aGlzLnRpbWVWYWwgPyB0aGlzLnRpbWVWYWwuam9pbignLScpIDogJyc7CiAgICAgIHRoaXMubmFtZSA9IHRoaXMuZm9ybVZhbGlkYXRlLmRhdGE7CiAgICB9LAogICAgY2hhbmdlTWVudTogZnVuY3Rpb24gY2hhbmdlTWVudShuYW1lKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNvcnQgPSBuYW1lOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDliJfooagKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHN0YXRpc3RpY1Byb2R1Y3RMaXN0QXBpKHRoaXMuZm9ybVZhbGlkYXRlKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpcy50YWJMaXN0ID0gZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgbG9vazogZnVuY3Rpb24gbG9vayhyb3cpIHsKICAgICAgdGhpcy5nb29kc0lkID0gcm93LnByb2R1Y3RfaWQ7CiAgICAgIHRoaXMuaXNQcm9kdWN0Qm94ID0gdHJ1ZTsKICAgIH0KICB9Cn07"},{"version":3,"names":["statisticProductListApi","goodsDetail","formatDate","name","components","data","validateFun","$validateFun","options","$timeOptions","timeVal","dataTime","formValidate","limit","page","sort","loading","tabList","total","goodsId","isProductBox","list","val","created","end","Date","start","setTime","getFullYear","getMonth","getDate","mounted","getList","methods","onchangeTime","e","join","changeMenu","_this","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","stop","_x","apply","arguments","catch","$message","error","msg","look","row","product_id"],"sources":["src/pages/statistic/product/components/productRanking.vue"],"sourcesContent":["<template>\n  <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt-16\">\n    <div class=\"acea-row row-between-wrapper mb20\">\n      <h4 class=\"statics-header-title\">商品排行</h4>\n      <div class=\"acea-row\">\n        <el-select v-model=\"formValidate.sort\" style=\"width: 200px\" class=\"mr20\" @change=\"changeMenu\">\n          <el-option v-for=\"item in list\" :value=\"item.val\" :key=\"item.val\" :label=\"item.name\"></el-option>\n        </el-select>\n        <el-date-picker\n          :editable=\"false\"\n          clearable\n          @change=\"onchangeTime\"\n          v-model=\"timeVal\"\n          format=\"yyyy/MM/dd\"\n          type=\"datetimerange\"\n          value-format=\"yyyy/MM/dd\"\n          range-separator=\"-\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          class=\"mr20\"\n        ></el-date-picker>\n        <el-button type=\"primary\" class=\"mr20\" @click=\"getList\">查询</el-button>\n      </div>\n    </div>\n    <el-table ref=\"selection\" :data=\"tabList\" v-loading=\"loading\" empty-text=\"暂无数据\" highlight-current-row>\n      <el-table-column label=\"ID\" min-width=\"80\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.product_id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品图片\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <div class=\"tabBox_img\" v-viewer>\n            <img v-lazy=\"scope.row.image\" />\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品名称\" min-width=\"130\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.store_name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"浏览量\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.visit }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"访客数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.user }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"加购件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.cart }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"下单件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.orders }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付件数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.pay }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付金额\" min-width=\"110\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.price }}</span>\n        </template>\n      </el-table-column>\n      <!-- <el-table-column label=\"毛利率(%)\" min-width=\"130\">\n        <template slot-scope=\"scope\">\n          <span v-text=\"$tools.accMul(scope.row.profit, 100).toFixed(2) + '%'\"></span>\n        </template>\n      </el-table-column> -->\n      <el-table-column label=\"收藏数\" min-width=\"90\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.collect }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"访客-支付转化率(%)\" min-width=\"140\">\n        <template slot-scope=\"scope\">\n          <span>{{ $tools.accMul(scope.row.changes, 100) + '%' }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 商品弹窗 -->\n    <div v-if=\"isProductBox\">\n      <div class=\"bg\" @click=\"isProductBox = false\"></div>\n      <goodsDetail :goodsId=\"goodsId\"></goodsDetail>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport { statisticProductListApi } from '@/api/statistic';\nimport goodsDetail from '../components/goodsDetail';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'productRanking',\n  components: {\n    goodsDetail,\n  },\n  data() {\n    return {\n      validateFun: this.$validateFun,\n      options: this.$timeOptions,\n      name: '近30天',\n      timeVal: [],\n      dataTime: '',\n      formValidate: {\n        limit: 10,\n        page: 1,\n        sort: 'visit',\n        data: '',\n      },\n      loading: false,\n      tabList: [],\n      total: 0,\n      goodsId: '',\n      isProductBox: false,\n      list: [\n        {\n          val: 'visit',\n          name: '浏览量',\n        },\n        {\n          val: 'user',\n          name: '访客数',\n        },\n        {\n          val: 'cart',\n          name: '加购件数',\n        },\n        {\n          val: 'orders',\n          name: '下单件数',\n        },\n        {\n          val: 'price',\n          name: '支付金额',\n        },\n        // {\n        //   val: 'profit',\n        //   name: '毛利率',\n        // },\n        {\n          val: 'collect',\n          name: '收藏数',\n        },\n        {\n          val: 'changes',\n          name: '访客-支付转化率',\n        },\n      ],\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formValidate.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.data = this.timeVal ? this.timeVal.join('-') : '';\n      this.name = this.formValidate.data;\n    },\n    changeMenu(name) {\n      this.formValidate.sort = name;\n      this.getList();\n    },\n    // 列表\n    getList() {\n      this.loading = true;\n      statisticProductListApi(this.formValidate)\n        .then(async (res) => {\n          let data = res.data;\n          this.tabList = data;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    look(row) {\n      this.goodsId = row.product_id;\n      this.isProductBox = true;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.header {\n  &-title {\n    font-size: 16px;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  &-time {\n    font-size: 12px;\n    color: #000000;\n    opacity: 0.45;\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n.bg\n    position fixed\n    left 0\n    top 0\n    width 100%\n    height 100%\n    background rgba(0,0,0,0.5)\n    z-index: 11;\n::v-deep .happy-scroll-content\n    width 100%\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-col{\n        height: 100px;\n        position: relative;\n        border: 1px solid #eee;\n    }\n</style>\n"],"mappings":";;;;;AAiGA,SAAAA,uBAAA;AACA,OAAAC,WAAA;AACA,SAAAC,UAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAH,WAAA,EAAAA;EACA;EACAI,IAAA,WAAAA,KAAA;IACA;MACAC,WAAA,OAAAC,YAAA;MACAC,OAAA,OAAAC,YAAA;MACAN,IAAA;MACAO,OAAA;MACAC,QAAA;MACAC,YAAA;QACAC,KAAA;QACAC,IAAA;QACAC,IAAA;QACAV,IAAA;MACA;MACAW,OAAA;MACAC,OAAA;MACAC,KAAA;MACAC,OAAA;MACAC,YAAA;MACAC,IAAA,GACA;QACAC,GAAA;QACAnB,IAAA;MACA,GACA;QACAmB,GAAA;QACAnB,IAAA;MACA,GACA;QACAmB,GAAA;QACAnB,IAAA;MACA,GACA;QACAmB,GAAA;QACAnB,IAAA;MACA,GACA;QACAmB,GAAA;QACAnB,IAAA;MACA;MACA;MACA;MACA;MACA;MACA;QACAmB,GAAA;QACAnB,IAAA;MACA,GACA;QACAmB,GAAA;QACAnB,IAAA;MACA;IAEA;EACA;EACAoB,OAAA,WAAAA,QAAA;IACA,IAAAC,GAAA,OAAAC,IAAA;IACA,IAAAC,KAAA,OAAAD,IAAA;IACAC,KAAA,CAAAC,OAAA,CAAAD,KAAA,CAAAC,OAAA,KAAAF,IAAA,KAAAA,IAAA,GAAAG,WAAA,QAAAH,IAAA,GAAAI,QAAA,QAAAJ,IAAA,GAAAK,OAAA;IACA,KAAApB,OAAA,IAAAgB,KAAA,EAAAF,GAAA;IACA,KAAAZ,YAAA,CAAAP,IAAA,GAAAH,UAAA,CAAAwB,KAAA,wBAAAxB,UAAA,CAAAsB,GAAA;EACA;EACAO,OAAA,WAAAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACA;IACAC,YAAA,WAAAA,aAAAC,CAAA;MACA,KAAAzB,OAAA,GAAAyB,CAAA;MACA,KAAAvB,YAAA,CAAAP,IAAA,QAAAK,OAAA,QAAAA,OAAA,CAAA0B,IAAA;MACA,KAAAjC,IAAA,QAAAS,YAAA,CAAAP,IAAA;IACA;IACAgC,UAAA,WAAAA,WAAAlC,IAAA;MACA,KAAAS,YAAA,CAAAG,IAAA,GAAAZ,IAAA;MACA,KAAA6B,OAAA;IACA;IACA;IACAA,OAAA,WAAAA,QAAA;MAAA,IAAAM,KAAA;MACA,KAAAtB,OAAA;MACAhB,uBAAA,MAAAY,YAAA,EACA2B,IAAA;QAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAAC,GAAA;UAAA,IAAAxC,IAAA;UAAA,OAAAqC,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBACA7C,IAAA,GAAAwC,GAAA,CAAAxC,IAAA;gBACAiC,KAAA,CAAArB,OAAA,GAAAZ,IAAA;gBACAiC,KAAA,CAAAtB,OAAA;cAAA;cAAA;gBAAA,OAAAgC,QAAA,CAAAG,IAAA;YAAA;UAAA,GAAAP,OAAA;QAAA,CACA;QAAA,iBAAAQ,EAAA;UAAA,OAAAZ,IAAA,CAAAa,KAAA,OAAAC,SAAA;QAAA;MAAA,KACAC,KAAA,WAAAV,GAAA;QACAP,KAAA,CAAAtB,OAAA;QACAsB,KAAA,CAAAkB,QAAA,CAAAC,KAAA,CAAAZ,GAAA,CAAAa,GAAA;MACA;IACA;IACAC,IAAA,WAAAA,KAAAC,GAAA;MACA,KAAAzC,OAAA,GAAAyC,GAAA,CAAAC,UAAA;MACA,KAAAzC,YAAA;IACA;EACA;AACA","ignoreList":[]}]}