{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/maintain/systemFile/opendir.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/maintain/systemFile/opendir.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js","mtime":1746465018446},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvbmllcWlhbnFpYW4vRG93bmxvYWRzL3hpbnhpYW5nbXUvQ1JNRUIvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IHJlc29sdmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBvcGVuZGlyTGlzdEFwaSwgb3BlbmZpbGVBcGksIHNhdmVmaWxlQXBpLCBvcGVuZGlyTG9naW5BcGksIGNyZWF0ZUZvbGRlciwgY3JlYXRlRmlsZSwgZGVsRm9sZGVyLCByZW5hbWUsIGZpbGVNYXJrLCBtYXJrU2F2ZSB9IGZyb20gJ0AvYXBpL3N5c3RlbSc7CmltcG9ydCBDb2RlTWlycm9yIGZyb20gJ2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3InOwppbXBvcnQgbG9naW5Gcm9tIGZyb20gJy4vY29tcG9uZW50cy9sb2dpbkZyb20nOwppbXBvcnQgeyBzZXRDb29raWVzLCBnZXRDb29raWVzLCByZW1vdmVDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnOwovLyBpbXBvcnQgRnVsbHNjcmVlbiBmcm9tICdAL2xheW91dC9jb21wb25lbnRzL2Z1bGxzY3JlZW4nOwppbXBvcnQgKiBhcyBtb25hY28gZnJvbSAnbW9uYWNvLWVkaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnb3BlbmRpcicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIC8v57yW6L6R5Zmo5byA5YWzCiAgICAgIGVkaXRvcjogJycsCiAgICAgIC8v5b2T5YmN57yW6L6R5Zmo5a+56LGhCiAgICAgIGVkaXRvckluZGV4OiBbCiAgICAgIC8v6YCJ6aG55Y2h5pWw57uECiAgICAgIHsKICAgICAgICB0YWI6IHRydWUsCiAgICAgICAgaW5kZXg6ICcwJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgaWNvbjogJycKICAgICAgfV0sCiAgICAgIGVkaXRvckxpc3Q6IFtdLAogICAgICAvL+e8lui+keWZqOaVsOe7hAogICAgICBpbmRleEVkaXRvcjogMCwKICAgICAgLy/lvZPliY3nvJbovpHlmajntKLlvJUKICAgICAgY29kZTogJycsCiAgICAgIC8v5b2T5YmN5paH5Lu25omT5byA5pe255qE5YaF5a65CiAgICAgIG5hdkxpc3Q6IFtdLAogICAgICAvL+W3puS+p+WvvOiIquaVsOaNrgogICAgICBuYXZJdGVtOiB7fSwKICAgICAgLy/lt6bkvqflr7zoiKrngrnlh7vmmK/pgInkuK3nmoTmlbDmja4KICAgICAgY29udGV4dERhdGE6IG51bGwsCiAgICAgIC8v5bem5L6n5a+86Iiq5Y+z6ZSu54K55Ye75piv5Lqn55Sf55qE5pWw5o2u5a+56LGhCgogICAgICBmaWxlVHlwZTogJycsCiAgICAgIC8vIOaWh+S7tuaTjeS9nOexu+WeiyBjcmVhdGVGb2xkZXJ85Yib5bu65paH5Lu25aS5IGNyZWF0ZUZpbGV85Yib5bu65paH5Lu2IGRlbEZvbGRlcnzliKDpmaTmlofku7blpLnmiJbogIXmlofku7YKICAgICAgY2xhc3NOYW1lOiAnJywKICAgICAgLy/lhajlsY8gY2xhc3PlkI0KICAgICAgLy8gZnVsbHNjcmVlbjpmYWxzZSwgIC8vIOaYr+WQpuWFqOWxjwogICAgICBpc1NhdmU6IHRydWUsCiAgICAgIC8v5b2T5YmN5paH5Lu25piv5ZCm5L+d5a2YCgogICAgICBpc1Nob3dMb2duOiBmYWxzZSwKICAgICAgLy8g55m75b2VCiAgICAgIGlzU2hvd0xpc3Q6IGZhbHNlLAogICAgICAvLyDnmbvlvZXkuYvlkI7liJfooagKCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYkxpc3Q6IFtdLAogICAgICBmb3JtSXRlbTogewogICAgICAgIC8v6K6w5b2V5b2T5YmN6Lev5b6E5L+h5oGv77yM6I635Y+W5paH5Lu25YiX6KGo5pe25L2/55SoCiAgICAgICAgZGlyOiAnJywKICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICBmaWxlZGlyOiAnJywKICAgICAgICBmaWxlVG9rZW46IGdldENvb2tpZXMoJ2ZpbGVfdG9rZW4nKQogICAgICB9LAogICAgICBkaXI6ICcnLAogICAgICAvL+W9k+WJjeWujOaVtOaWh+S7tui3r+W+hAogICAgICAvLyByb3dzOiB7fSwgIC8vCiAgICAgIHBhdGhuYW1lOiAnJywKICAgICAgLy8g5b2T5YmN5paH5Lu26Lev5b6ECiAgICAgIHRpdGxlOiAnJywKICAgICAgLy/lvZPliY3mlofku7bmoIfpopgKCiAgICAgIGZvcm1GaWxlOiB7CiAgICAgICAgLy/ph43lkb3lkI3ooajljZUKICAgICAgICBmaWxlbmFtZTogJycKICAgICAgfSwKICAgICAgcnVsZUlubGluZTogewogICAgICAgIGZpbGVuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5paH5Lu25oiW5paH5Lu25aS555qE5ZCN5a2XJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZvcm1TaG93OiBmYWxzZSwKICAgICAgLy/ooajljZXlvIDlhbMKICAgICAgZm9ybVRpdGxlOiAnJywKICAgICAgLy/ooajljZXmoIfpopgKICAgICAgZmlsZVRva2VuOiBnZXRDb29raWVzKCdmaWxlX3Rva2VuJyksCiAgICAgIHJvdXRlTGlzdDogW10sCiAgICAgIC8vICDmiZPlvIDmlofku7bot6/lvoQKICAgICAgcHJvcHM6IHsKICAgICAgICBsYWJlbDogJ3RpdGxlJywKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBpc0xlYWY6ICdpc0xlYWYnCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBsb2dpbkZyb206IGxvZ2luRnJvbQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIHRoaXMuaW5pdEVkaXRvcigpOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHJlbW92ZUNvb2tpZXMoJ2ZpbGVfdG9rZW4nKTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7CiAgICAvLyDngrnlh7vooYwKICAgIGN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGN1cnJlbnRDaGFuZ2UoY3VycmVudFJvdykgewogICAgICBpZiAoY3VycmVudFJvdy5pc0RpcikgewogICAgICAgIHRoaXMub3BlbihjdXJyZW50Um93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVkaXQoY3VycmVudFJvdyk7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOaWh+S7tuWIl+ihqAogICAgICogQHBhcmFtIHtPYmplY3R9IHJlZnJlc2ggICAvLyDmmK/lkKbph43mlrDliqDovb0gYm9vbAogICAgICogQHBhcmFtIHtPYmplY3R9IGlzX2VkaXQgICAvLyDmmK/lkKbmmK/nvJbovpHlmajkuK3nmoTliLfmlrAgYm9vbAogICAgICovCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KHJlZnJlc2gsIGlzX2VkaXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHBhcmFtczsKICAgICAgaWYgKHJlZnJlc2gpIHsKICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICBkaXI6ICcnLAogICAgICAgICAgc3VwZXJpb3I6IDAsCiAgICAgICAgICBmaWxlZGlyOiAnJywKICAgICAgICAgIGZpbGVUb2tlbjogdGhpcy5maWxlVG9rZW4KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHBhcmFtcyA9IHRoaXMuZm9ybUl0ZW07CiAgICAgICAgcGFyYW1zLmZpbGVUb2tlbiA9IHRoaXMuZmlsZVRva2VuOwogICAgICB9CiAgICAgIGlmICghaXNfZWRpdCkgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgb3BlbmRpckxpc3RBcGkocGFyYW1zKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpcy5yb3V0ZUxpc3QgPSBkYXRhLnJvdXRlTGlzdDsKICAgICAgICAgICAgICAgIGlmIChpc19lZGl0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLm5hdkxpc3QgPSBkYXRhLm5hdkxpc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5uYXZMaXN0Rm9yVGFiID0gZGF0YS5uYXZMaXN0OwogICAgICAgICAgICAgICAgICBfdGhpcy50YWJMaXN0ID0gZGF0YS5saXN0OwogICAgICAgICAgICAgICAgICAvLyB0aGlzLm5hdkxpc3QgPSBkYXRhLm5hdkxpc3Q7CiAgICAgICAgICAgICAgICAgIF90aGlzLmlzU2hvd0xpc3QgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMuZGlyID0gZGF0YS5kaXI7CiAgICAgICAgICAgICAgICBfdGhpcy5pc1Nob3dMb2duID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5jYXRjaEZ1bihyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+aWsOW7uuaWh+S7tuWQjumHjeaWsOWKoOi9veW3puS+p+WvvOiIqgogICAgZ2V0TGlzdEl0ZW06IGZ1bmN0aW9uIGdldExpc3RJdGVtKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIG9wZW5kaXJMaXN0QXBpKGRhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXMpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIuY29udGV4dERhdGEsICdjaGlsZHJlbicsIHJlcy5kYXRhLm5hdkxpc3QpOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5jYXRjaEZ1bihyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDov5Tlm57kuIrnuqcKICAgIGdvQmFjazogZnVuY3Rpb24gZ29CYWNrKGlzX2VkaXQpIHsKICAgICAgdGhpcy5mb3JtSXRlbSA9IHsKICAgICAgICBkaXI6IHRoaXMuZGlyLAogICAgICAgIHN1cGVyaW9yOiAxLAogICAgICAgIGZpbGVkaXI6ICcnCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0TGlzdChmYWxzZSwgaXNfZWRpdCk7CiAgICB9LAogICAgLy8g5omT5byACiAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKHJvdykgewogICAgICAvLyB0aGlzLnJvd3MgPSByb3c7CiAgICAgIHRoaXMuZm9ybUl0ZW0gPSB7CiAgICAgICAgZGlyOiByb3cucGF0aCwKICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICBmaWxlZGlyOiByb3cuZmlsZW5hbWUsCiAgICAgICAgZmlsZVRva2VuOiB0aGlzLmZpbGVUb2tlbgogICAgICB9OwogICAgICB0aGlzLmdldExpc3QoZmFsc2UsIGZhbHNlKTsKICAgIH0sCiAgICBqdW1wUm91dGU6IGZ1bmN0aW9uIGp1bXBSb3V0ZShpdGVtKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHBhdGg6IGl0ZW0ucm91dGUsCiAgICAgICAgZmlsZW5hbWU6ICcnCiAgICAgIH07CiAgICAgIHRoaXMub3BlbihkYXRhKTsKICAgIH0sCiAgICByZWZyZXNoUm91dGU6IGZ1bmN0aW9uIHJlZnJlc2hSb3V0ZSgpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcGF0aDogdGhpcy5yb3V0ZUxpc3RbdGhpcy5yb3V0ZUxpc3QubGVuZ3RoIC0gMV0ucm91dGUsCiAgICAgICAgZmlsZW5hbWU6ICcnCiAgICAgIH07CiAgICAgIHRoaXMub3BlbihkYXRhKTsKICAgIH0sCiAgICAvLyDnvJbovpHDnwogICAgZWRpdDogZnVuY3Rpb24gZWRpdChyb3cpIHsKICAgICAgdGhpcy5uYXZJdGVtID0gcm93OwogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5wYXRobmFtZSA9IHJvdy5wYXRobmFtZTsKICAgICAgdGhpcy50aXRsZSA9IHJvdy5maWxlbmFtZTsKICAgICAgdGhpcy5lZGl0b3JJbmRleFswXS50aXRsZSA9IHJvdy5maWxlbmFtZTsKICAgICAgdGhpcy5lZGl0b3JJbmRleFswXS5wYXRobmFtZSA9IHJvdy5wYXRobmFtZTsKICAgICAgdGhpcy5uYXZMaXN0ID0gdGhpcy5uYXZMaXN0Rm9yVGFiOwogICAgICB0aGlzLmRpciA9IHJvdy5wYXRoOwogICAgICAvLyDliJvlu7rku6PnoIHlrrnlmagKICAgICAgaWYgKHRoaXMuZWRpdG9yTGlzdC5sZW5ndGggPD0gMCkgewogICAgICAgIC8vIHRoaXMuaW5pdEVkaXRvcigpOwogICAgICB9CiAgICAgIHRoaXMub3BlbmZpbGUocm93LnBhdGhuYW1lLCBmYWxzZSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlpIfms6gKICAgICAqLwogICAgbWFyazogZnVuY3Rpb24gbWFyayhyb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuJG1vZGFsRm9ybShmaWxlTWFyayh7CiAgICAgICAgcGF0aDogcm93LnBhdGhuYW1lLAogICAgICAgIGZpbGVUb2tlbjogdGhpcy5maWxlVG9rZW4KICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMuZ2V0TGlzdCh0cnVlLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5L+d5a2YCiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5kZXggICAvLyDlvZPliY3ntKLlvJUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlICAgIC8vIHRydWUg5LiN5pu05paw5b2T5YmN5pys5Zyw5pWw5o2u77yMZmFsc2XmiJbogIXkuLrnqbog5pu05paw5b2T5YmN5pWw5o2uCiAgICAgKi8KICAgIHNhdmVmaWxlOiBmdW5jdGlvbiBzYXZlZmlsZShpbmRleCwgdHlwZSkgewogICAgICB2YXIgY29kZSA9IHRoaXMuZWRpdG9yTGlzdFtpbmRleF0uZWRpdG9yLmdldFZhbHVlKCk7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGNvbW1lbnQ6IGNvZGUsCiAgICAgICAgZmlsZXBhdGg6IHRoaXMuZWRpdG9yTGlzdFtpbmRleF0ucGF0aCwKICAgICAgICBmaWxlVG9rZW46IHRoaXMuZmlsZVRva2VuCiAgICAgIH07CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgc2F2ZWZpbGVBcGkoZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHJlcykgewogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdHlwZSkgewogICAgICAgICAgICAgICAgICB0aGF0LmNvZGUgPSBjb2RlOwogICAgICAgICAgICAgICAgICB0aGF0LmlzU2F2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRoYXQuZWRpdG9ySW5kZXhbaW5kZXhdLmljb24gPSAnJzsKICAgICAgICAgICAgICAgICAgdGhhdC5lZGl0b3JMaXN0W2luZGV4XS5pc1NhdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgdGhhdC4kTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliLfmlrAKICAgIHJlZnJlc2hmaWxlOiBmdW5jdGlvbiByZWZyZXNoZmlsZSgpIHsKICAgICAgLy8g5Yi35paw57yW6L6R5ZmoCiAgICAgIGlmICh0aGlzLmVkaXRvckxpc3RbdGhpcy5pbmRleEVkaXRvcl0pIHRoaXMub3BlbmZpbGUodGhpcy5lZGl0b3JMaXN0W3RoaXMuaW5kZXhFZGl0b3JdLnBhdGgsIHRydWUpOwogICAgfSwKICAgIC8v6K6h566XdG9rZW7ov4fmnJ/ml7bpl7QKICAgIGdldEV4cGlyZXNUaW1lOiBmdW5jdGlvbiBnZXRFeHBpcmVzVGltZShleHBpcmVzVGltZSkgewogICAgICB2YXIgbm93VGltZU51bSA9IE1hdGgucm91bmQobmV3IERhdGUoKSAvIDEwMDApOwogICAgICB2YXIgZXhwaXJlc1RpbWVOdW0gPSBleHBpcmVzVGltZSAtIG5vd1RpbWVOdW07CiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGFyc2VGbG9hdChleHBpcmVzVGltZU51bSAvIDYwKSAvIDYwKSAvIDI0KTsKICAgIH0sCiAgICAvLyDkvqfovrnmoI/lvILmraXliqDovb0KICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YShpdGVtLCBjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgaWYgKCFpdGVtLmRhdGEuaXNMZWFmKSB7CiAgICAgICAgdGhpcy5mb3JtSXRlbSA9IHsKICAgICAgICAgIGRpcjogaXRlbS5kYXRhLnBhdGgsCiAgICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICAgIGZpbGVkaXI6IGl0ZW0uZGF0YS50aXRsZSwKICAgICAgICAgIGZpbGVUb2tlbjogdGhpcy5maWxlVG9rZW4KICAgICAgICB9OwogICAgICAgIG9wZW5kaXJMaXN0QXBpKHRoaXMuZm9ybUl0ZW0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHJlcykgewogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzLmRhdGEubmF2TGlzdCk7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDExMDAwOCkgewogICAgICAgICAgICBfdGhpczQuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIF90aGlzNC5pc1Nob3dMb2duID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM0LmlzU2hvd0xpc3QgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzNC5jYXRjaEZ1bihyZXMpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g6Ieq5a6a5LmJ5pi+56S6CiAgICByZW5kZXJDb250ZW50OiBmdW5jdGlvbiByZW5kZXJDb250ZW50KGgsIF9yZWY1KSB7CiAgICAgIHZhciBub2RlID0gX3JlZjUubm9kZSwKICAgICAgICBkYXRhID0gX3JlZjUuZGF0YSwKICAgICAgICByb290ID0gX3JlZjUucm9vdDsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXR1cm4gaCgnc3BhbicsIHsKICAgICAgICBzdHlsZTogX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoewogICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsCiAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJywKICAgICAgICAgIHVzZXJTZWxlY3Q6ICdudWxsJywKICAgICAgICAgIGNvbG9yOiAnI2NjY2NjYycKICAgICAgICB9LCAiZGlzcGxheSIsICdpbmxpbmUtYmxvY2snKSwgIndpZHRoIiwgJzEwMCUnKSwgImJvcmRlclJhZGlzIiwgJzVweCcpLAogICAgICAgIG9uOiB7CiAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIHRoYXQuY2xpY2tEaXIoZGF0YSwgcm9vdCwgbm9kZSk7CiAgICAgICAgICB9LAogICAgICAgICAgY29udGV4dG1lbnU6IGZ1bmN0aW9uIGNvbnRleHRtZW51KCkgewogICAgICAgICAgICAvLyB0aGF0LmhhbmRsZUNvbnRleHREZWxGb2xkZXIoZGF0YSxyb290LG5vZGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgW2goJ3NwYW4nLCBbaCgnSWNvbicsIHsKICAgICAgICBwcm9wczogewogICAgICAgICAgdHlwZTogIWRhdGEuaXNMZWFmID8gJ21kLWZvbGRlcicgOiAnaW9zLWRvY3VtZW50LW91dGxpbmUnCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWFyZ2luUmlnaHQ6ICc4cHgnCiAgICAgICAgfQogICAgICB9KSwgaCgnc3BhbicsIHsKICAgICAgICBhdHRyczogewogICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUKICAgICAgICB9CiAgICAgIH0sIGRhdGEudGl0bGUpXSldKTsKICAgIH0sCiAgICAvKioKICAgICAqIOS+p+i+ueagj+eCueWHu+S6i+S7tgogICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgICAqLwogICAgY2xpY2tEaXI6IGZ1bmN0aW9uIGNsaWNrRGlyKGRhdGEsIHJvb3QsIG5vZGUpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGF0Lm5hdkl0ZW0gPSBkYXRhOwogICAgICB0aGF0LnBhdGhuYW1lID0gZGF0YS5wYXRobmFtZTsKICAgICAgaWYgKCFkYXRhLmlzRGlyKSB7CiAgICAgICAgdmFyIGkgPSB0aGF0LmVkaXRvckluZGV4LmZpbmRJbmRleChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUucGF0aG5hbWUgPT09IGRhdGEucGF0aG5hbWU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGkgPiAtMSkgewogICAgICAgICAgdGhhdC5pbmRleEVkaXRvciA9IGkudG9TdHJpbmcoKTsKICAgICAgICAgIHRoYXQudG9nZ2xlRWRpdG9yKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBpbmRleCA9IHRoYXQuZWRpdG9ySW5kZXgubGVuZ3RoOwogICAgICAgICAgLy8g5Yib5bu6dGFicwogICAgICAgICAgdGhhdC5lZGl0b3JJbmRleC5wdXNoKHsKICAgICAgICAgICAgdGFiOiB0cnVlLAogICAgICAgICAgICBpbmRleDogaW5kZXgudG9TdHJpbmcoKSwKICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsCiAgICAgICAgICAgIGljb246ICcnLAogICAgICAgICAgICBwYXRobmFtZTogZGF0YS5wYXRobmFtZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGF0LmluZGV4RWRpdG9yID0gaW5kZXgudG9TdHJpbmcoKTsKICAgICAgICAgIC8vIOWIm+W7uuS7o+eggeWuueWZqAogICAgICAgICAgdGhhdC5pbml0RWRpdG9yKCk7CiAgICAgICAgICB0aGF0Lm9wZW5maWxlKGRhdGEucGF0aG5hbWUsIHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5L6n6L655qCP5Y+z6ZSu54K55Ye75LqL5Lu2CiAgICBoYW5kbGVDb250ZXh0TWVudTogZnVuY3Rpb24gaGFuZGxlQ29udGV4dE1lbnUoZGF0YSwgZXZlbnQsIHBvc2l0aW9uKSB7CiAgICAgIHBvc2l0aW9uLmxlZnQgPSBOdW1iZXIocG9zaXRpb24ubGVmdC5zbGljZSgwLCAtMikpICsgNzUgKyAncHgnOwogICAgICB0aGlzLmNvbnRleHREYXRhID0gZGF0YTsKICAgIH0sCiAgICAvLyDmlofku7bmk43kvZznsbvlnosgY3JlYXRlRm9sZGVyfOWIm+W7uuaWh+S7tuWkuSBjcmVhdGVGaWxlfOWIm+W7uuaWh+S7tiBkZWxGb2xkZXJ85Yig6Zmk5paH5Lu25aS55oiW6ICF5paH5Lu2IHJlbmFtZUZpbGV85paH5Lu26YeN5ZG95ZCNCiAgICAvL+WIm+W7uuaWh+S7tuWkuQogICAgaGFuZGxlQ29udGV4dENyZWF0ZUZvbGRlcjogZnVuY3Rpb24gaGFuZGxlQ29udGV4dENyZWF0ZUZvbGRlcigpIHsKICAgICAgdGhpcy5mb3JtRmlsZS5maWxlbmFtZSA9ICcnOwogICAgICB0aGlzLmZvcm1UaXRsZSA9ICfliJvlu7rmlofku7blpLknOwogICAgICB0aGlzLmZvcm1TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5maWxlVHlwZSA9ICdjcmVhdGVGb2xkZXInOwogICAgfSwKICAgIC8v5Yib5bu65paH5Lu2CiAgICBoYW5kbGVDb250ZXh0Q3JlYXRlRmlsZTogZnVuY3Rpb24gaGFuZGxlQ29udGV4dENyZWF0ZUZpbGUoKSB7CiAgICAgIHRoaXMuZm9ybUZpbGUuZmlsZW5hbWUgPSAnJzsKICAgICAgdGhpcy5mb3JtVGl0bGUgPSAn5Yib5bu65paH5Lu2JzsKICAgICAgdGhpcy5mb3JtU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZmlsZVR5cGUgPSAnY3JlYXRlRmlsZSc7CiAgICB9LAogICAgLy/liKDpmaTmlofku7YKICAgIGhhbmRsZUNvbnRleHREZWxGb2xkZXI6IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHREZWxGb2xkZXIoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJE1vZGFsLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAn5Yig6Zmk5paH5Lu25aS55ZKM5paH5Lu2JywKICAgICAgICBjb250ZW50OiAn5oKo56Gu5a6a6KaB5Yig6Zmk5pS55paH5Lu277yfJywKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgcGF0aDogdGhhdC5jb250ZXh0RGF0YS5wYXRobmFtZSwKICAgICAgICAgICAgZmlsZVRva2VuOiBfdGhpczUuZmlsZVRva2VuCiAgICAgICAgICB9OwogICAgICAgICAgZGVsRm9sZGVyKGRhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHRoYXQubG9vcERlbCh0aGF0Lm5hdkxpc3QsIHRoYXQuY29udGV4dERhdGEubm9kZUtleSk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NSkgewogICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHRoYXQuY2F0Y2hGdW4ocmVzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICAgICAgdGhhdC4kbWVzc2FnZS5pbmZvKCflj5bmtojliKDpmaQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v6YeN5ZG95ZCNCiAgICBoYW5kbGVDb250ZXh0UmVuYW1lOiBmdW5jdGlvbiBoYW5kbGVDb250ZXh0UmVuYW1lKCkgewogICAgICB0aGlzLmZvcm1GaWxlLmZpbGVuYW1lID0gdGhpcy5jb250ZXh0RGF0YS50aXRsZTsKICAgICAgdGhpcy5mb3JtVGl0bGUgPSAn6YeN5ZG95ZCN5paH5Lu2JzsKICAgICAgdGhpcy5mb3JtU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZmlsZVR5cGUgPSAncmVuYW1lRmlsZSc7CiAgICB9LAogICAgLy/miZPlvIDmlofku7YKICAgIG9wZW5maWxlOiBmdW5jdGlvbiBvcGVuZmlsZShwYXRoLCBpc19lZGl0KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgZmlsZXBhdGg6IHBhdGgsCiAgICAgICAgZmlsZVRva2VuOiB0aGlzLmZpbGVUb2tlbgogICAgICB9OwogICAgICBvcGVuZmlsZUFwaShwYXJhbXMpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWY3ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNihyZXMpIHsKICAgICAgICAgIHZhciBkYXRhOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghaXNfZWRpdCkgewogICAgICAgICAgICAgICAgICB0aGF0Lm1vZGFscyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRoYXQuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmluaXRFZGl0b3IoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIHRoYXQuY29kZSA9IGRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgIC8vIOS/neWtmOebuOWvueS/oeaBrwoKICAgICAgICAgICAgICAgIHRoYXQuZWRpdG9yTGlzdFt0aGF0LmluZGV4RWRpdG9yXS5vbGRDb2RlID0gdGhhdC5jb2RlOwogICAgICAgICAgICAgICAgX3RoaXM2LiRuZXh0VGljayhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvckxpc3RbdGhhdC5pbmRleEVkaXRvciB8fCAwXS5wYXRoID0gcGF0aDsKICAgICAgICAgICAgICAgICAgdGhhdC5lZGl0b3JMaXN0W3RoYXQuaW5kZXhFZGl0b3IgfHwgMF0ucGF0aG5hbWUgPSBwYXRoOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvL+aUueWPmOWxnuaApwogICAgICAgICAgICAgICAgdGhhdC5jaGFuZ2VNb2RlbChkYXRhLm1vZGUsIHRoYXQuY29kZSk7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NikgewogICAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIneWni+WMlue8lui+keWZqAogICAgICovCiAgICBpbml0RWRpdG9yOiBmdW5jdGlvbiBpbml0RWRpdG9yKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5Yid5aeL5YyW57yW6L6R5Zmo77yM56Gu5L+dZG9t5bey57uP5riy5p+TCiAgICAgICAgdGhhdC5lZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyXycgKyB0aGF0LmluZGV4RWRpdG9yKSwgewogICAgICAgICAgdmFsdWU6IHRoYXQuY29kZSwKICAgICAgICAgIC8v57yW6L6R5Zmo5Yid5aeL5pi+56S65paH5a2XCiAgICAgICAgICBsYW5ndWFnZTogJ3NxbCcsCiAgICAgICAgICAvL+ivreiogOaUr+aMgeiHquihjOafpemYhWRlbW8KICAgICAgICAgIGF1dG9tYXRpY0xheW91dDogdHJ1ZSwKICAgICAgICAgIC8v6Ieq5Yqo5biD5bGACiAgICAgICAgICB0aGVtZTogJ3ZzJywKICAgICAgICAgIC8v5a6Y5pa56Ieq5bim5LiJ56eN5Li76aKYdnMsIGhjLWJsYWNrLCBvciB2cy1kYXJrCiAgICAgICAgICBmb2xkaW5nU3RyYXRlZ3k6ICdpbmRlbnRhdGlvbicsCiAgICAgICAgICAvLyDku6PnoIHlj6/liIblsI/mrrXmipjlj6AKICAgICAgICAgIG92ZXJ2aWV3UnVsZXJCb3JkZXI6IGZhbHNlLAogICAgICAgICAgLy8g5LiN6KaB5rua5Yqo5p2h55qE6L655qGGCiAgICAgICAgICBzY3JvbGxiYXI6IHsKICAgICAgICAgICAgLy8g5rua5Yqo5p2h6K6+572uCiAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyU2l6ZTogNCwKICAgICAgICAgICAgLy8g56uW5rua5Yqo5p2hCiAgICAgICAgICAgIGhvcml6b250YWxTY3JvbGxiYXJTaXplOiAxMCAvLyDmqKrmu5rliqjmnaEKICAgICAgICAgIH0sCiAgICAgICAgICBhdXRvSW5kZW50OiB0cnVlLAogICAgICAgICAgLy8g6Ieq5Yqo5biD5bGACiAgICAgICAgICB0YWJTaXplOiA0LAogICAgICAgICAgLy8gdGFi57yp6L+b6ZW/5bqmCiAgICAgICAgICBhdXRvQ2xvc2luZ092ZXJ0eXBlOiAnYWx3YXlzJwogICAgICAgIH0pOwogICAgICAgIC8v5re75Yqg5oyJ6ZSu55uR5ZCsCiAgICAgICAgdGhhdC5lZGl0b3IuYWRkQ29tbWFuZChtb25hY28uS2V5TW9kLkN0cmxDbWQgfCBtb25hY28uS2V5Q29kZS5LRVlfUywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC5zYXZlZmlsZSh0aGF0LmluZGV4RWRpdG9yKTsKICAgICAgICB9KTsKICAgICAgICB0aGF0LmVkaXRvci5vbktleVVwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOW9k+mUruebmOaMieS4i++8jOWIpOaWreW9k+WJjee8lui+keWZqOaWh+acrOS4juW3suS/neWtmOeahOe8lui+keWZqOaWh+acrOaYr+WQpuS4gOiHtAogICAgICAgICAgaWYgKHRoYXQuZWRpdG9yLmdldFZhbHVlKCkgIT0gdGhhdC5jb2RlKSB7CiAgICAgICAgICAgIHRoYXQuaXNTYXZlID0gZmFsc2U7CiAgICAgICAgICAgIHRoYXQuZWRpdG9ySW5kZXhbdGhhdC5pbmRleEVkaXRvcl0uaWNvbiA9ICdtZC13YXJuaW5nJzsKICAgICAgICAgICAgdGhhdC5lZGl0b3JMaXN0W3RoYXQuaW5kZXhFZGl0b3JdLmlzU2F2ZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoYXQuZWRpdG9yTGlzdC5wdXNoKHsKICAgICAgICAgIGVkaXRvcjogdGhhdC5lZGl0b3IsCiAgICAgICAgICBvbGRDb2RlOiB0aGF0LmNvZGUsCiAgICAgICAgICBwYXRoOiBfdGhpczcucGF0aG5hbWUsCiAgICAgICAgICBpc1NhdmU6IHRydWUsCiAgICAgICAgICBpbmRleDogdGhhdC5pbmRleEVkaXRvcgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIh+aNouivreiogAogICAgICogQHBhcmFtIHtPYmplY3R9IG1vZGUKICAgICAqLwogICAgY2hhbmdlTW9kZWw6IGZ1bmN0aW9uIGNoYW5nZU1vZGVsKG1vZGUsIHZhbHVlKSB7CiAgICAgIHZhciBvbGRNb2RlbCA9IHRoaXMuZWRpdG9yTGlzdFt0aGlzLmluZGV4RWRpdG9yXS5lZGl0b3IuZ2V0TW9kZWwoKTsgLy/ojrflj5bml6fmqKHlnosKICAgICAgLy8gdmFyIHZhbHVlID0gdGhpcy5lZGl0b3IuZ2V0VmFsdWUoKTsvL+iOt+WPluaXp+eahOaWh+acrAogICAgICAvL+WIm+W7uuaWsOaooeWei++8jHZhbHVl5Li65pen5paH5pys77yMaWTkuLptb2RlSWTvvIzljbPor63oqIDvvIhsYW5ndWFnZS5pZO+8iQogICAgICAvL21vZGVzSWRz5Y2z5Li65pSv5oyB6K+t6KiACiAgICAgIC8vIHZhciBtb2Rlc0lkcyA9IG1vbmFjby5sYW5ndWFnZXMuZ2V0TGFuZ3VhZ2VzKCkubWFwKGZ1bmN0aW9uKGxhbmcpIHsgcmV0dXJuIGxhbmcuaWQ7IH0pOwogICAgICBpZiAoIW1vZGUpIG1vZGUgPSBvbGRNb2RlbC5nZXRMYW5ndWFnZUlkKCk7CiAgICAgIC8vIGlmKCF2YWx1ZSkgdmFsdWUgPSB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpOwoKICAgICAgdmFyIG5ld01vZGVsID0gbW9uYWNvLmVkaXRvci5jcmVhdGVNb2RlbCh2YWx1ZSwgbW9kZSk7CiAgICAgIC8v5bCG5pen5qih5Z6L6ZSA5q+BCiAgICAgIGlmIChvbGRNb2RlbCkgewogICAgICAgIG9sZE1vZGVsLmRpc3Bvc2UoKTsKICAgICAgfQogICAgICAvL+iuvue9ruaWsOaooeWeiwogICAgICB0aGlzLmVkaXRvckxpc3RbdGhpcy5pbmRleEVkaXRvcl0uZWRpdG9yLnNldE1vZGVsKG5ld01vZGVsKTsKICAgIH0sCiAgICAvLyDmlofku7bmk43kvZznsbvlnosgY3JlYXRlRm9sZGVyfOWIm+W7uuaWh+S7tuWkuSBjcmVhdGVGaWxlfOWIm+W7uuaWh+S7tiBkZWxGb2xkZXJ85Yig6Zmk5paH5Lu25aS55oiW6ICF5paH5Lu2CiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBkYXRhID0gJyc7CiAgICAgIHZhciBkYXRhSXRlbSA9ICcnOwogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgc3dpdGNoICh0aGF0LmZpbGVUeXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZUZvbGRlcic6CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHRoYXQuY29udGV4dERhdGEucGF0aG5hbWUsCiAgICAgICAgICAgICAgICBuYW1lOiB0aGF0LmZvcm1GaWxlLmZpbGVuYW1lLAogICAgICAgICAgICAgICAgZmlsZVRva2VuOiBfdGhpczguZmlsZVRva2VuCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBjcmVhdGVGb2xkZXIoZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcocmVzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkaXI6IHRoYXQuY29udGV4dERhdGEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlZGlyOiB0aGF0LmNvbnRleHREYXRhLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVUb2tlbjogX3RoaXM4LmZpbGVUb2tlbgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmdldExpc3RJdGVtKGRhdGFJdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuZm9ybVNob3cpIHRoYXQuZm9ybVNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfliJvlu7rmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdjcmVhdGVGaWxlJzoKICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgcGF0aDogdGhhdC5jb250ZXh0RGF0YS5wYXRobmFtZSwKICAgICAgICAgICAgICAgIG5hbWU6IHRoYXQuZm9ybUZpbGUuZmlsZW5hbWUsCiAgICAgICAgICAgICAgICBmaWxlVG9rZW46IF90aGlzOC5maWxlVG9rZW4KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGNyZWF0ZUZpbGUoZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgocmVzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkaXI6IHRoYXQuY29udGV4dERhdGEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlZGlyOiB0aGF0LmNvbnRleHREYXRhLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVUb2tlbjogX3RoaXM4LmZpbGVUb2tlbgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmdldExpc3RJdGVtKGRhdGFJdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuZm9ybVNob3cpIHRoYXQuZm9ybVNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfliJvlu7rmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyZW5hbWVGaWxlJzoKICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgbmV3bmFtZTogdGhhdC5jb250ZXh0RGF0YS5wYXRoICsgJ1xcJyArIHRoYXQuZm9ybUZpbGUuZmlsZW5hbWUsCiAgICAgICAgICAgICAgICBvbGRuYW1lOiB0aGF0LmNvbnRleHREYXRhLnBhdGhuYW1lLAogICAgICAgICAgICAgICAgZmlsZVRva2VuOiBfdGhpczguZmlsZVRva2VuCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICByZW5hbWUoZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KHJlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuY29udGV4dERhdGEsICd0aXRsZScsIHRoYXQuZm9ybUZpbGUuZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5mb3JtU2hvdykgdGhhdC5mb3JtU2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjEwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczguJG1lc3NhZ2UuZXJyb3IoJ0ZhaWwhJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOmAgOWHuuihqOWNlQogICAgICovCiAgICBmb3JtRXhpdDogZnVuY3Rpb24gZm9ybUV4aXQoKSB7CiAgICAgIHRoaXMuZm9ybVNob3cgPSBmYWxzZTsKICAgIH0sCiAgICAvKioKICAgICAqIOWkhOeQhuaOpeWPo+WbnuiwgwogICAgICogQHBhcmFtIHtPYmplY3R9IHJlcwogICAgICovCiAgICBjYXRjaEZ1bjogZnVuY3Rpb24gY2F0Y2hGdW4ocmVzKSB7CiAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gNDAwKSB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDExMDAwOCkgewogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIHRoaXMuaXNTaG93TG9nbiA9IHRydWU7CiAgICAgICAgICB0aGlzLmlzU2hvd0xpc3QgPSBmYWxzZTsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlofku7bnvJbnoIHkuI3ooqvlhbzlrrnvvIzml6Dms5XmraPnoa7or7vlj5bmlofku7YhJyk7CiAgICAgIH0KICAgICAgLy/lhbPpl63okpnniYjlsYIKICAgICAgaWYgKHRoaXMuc3BpblNob3cpIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgLy8g5YWz6Zet5paH5Lu25YiX6KGo5bGV56S6CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIGxvb3BEZWw6IGZ1bmN0aW9uIGxvb3BEZWwoZGF0YSwgbm9kZUtleSkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtLm5vZGVLZXkgPT09IG5vZGVLZXkpIHsKICAgICAgICAgIHJldHVybiBkYXRhLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfQogICAgICAgIGlmIChpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHJldHVybiBfdGhpczkubG9vcERlbChpdGVtLmNoaWxkcmVuLCBub2RlS2V5KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog56qX5Y+j5pyA5aSn5YyWCiAgICAgKi8KICAgIHdpbkNoYW5nZXM6IGZ1bmN0aW9uIHdpbkNoYW5nZXMoKSB7CiAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSkgewogICAgICAgIHRoaXMuY2xhc3NOYW1lID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSAnZGl5LWZ1bGxzY3JlZW4nOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDliIfmjaLpgInpobnljaEKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbmRleAogICAgICovCiAgICB0b2dnbGVFZGl0b3I6IGZ1bmN0aW9uIHRvZ2dsZUVkaXRvcigpIHsKICAgICAgdmFyIGluZGV4ID0gTnVtYmVyKHRoaXMuaW5kZXhFZGl0b3IpOwogICAgICB0aGlzLmNvZGUgPSB0aGlzLmVkaXRvckxpc3RbaW5kZXhdLm9sZENvZGU7IC8v6K6+572u5paH5Lu25omT5byA5pe255qE5Luj56CBCiAgICAgIHRoaXMuZWRpdG9yID0gdGhpcy5lZGl0b3JMaXN0W2luZGV4XS5lZGl0b3I7IC8v6K6+572u57yW6L6R5Zmo5a6e5L6LCiAgICB9LAogICAgaXNFZGl0TWFyazogZnVuY3Rpb24gaXNFZGl0TWFyayhyb3cpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB0cnkgewogICAgICAgIHJvdy5pc19lZGl0ID0gdHJ1ZTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXMxMC4kcmVmcy5tYXJrLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgaXNFZGl0Qmx1cjogZnVuY3Rpb24gaXNFZGl0Qmx1cihyb3cpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICByb3cuaXNfZWRpdCA9IGZhbHNlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBmdWxsX3BhdGg6IHJvdy5yZWFsX3BhdGgsCiAgICAgICAgbWFyazogcm93Lm1hcmsKICAgICAgfTsKICAgICAgbWFya1NhdmUodGhpcy5maWxlVG9rZW4sIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMTEuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVRhYlJlbW92ZTogZnVuY3Rpb24gaGFuZGxlVGFiUmVtb3ZlKGluZGV4KSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgIC8vIOWFs+mXremAiemhueWNoQogICAgICB0aGF0LmVkaXRvckluZGV4W2luZGV4XS50YWIgPSBmYWxzZTsgLy8g5YWz6Zet6YCJ6aG55Y2hCiAgICAgIC8vIOWIpOaWreW9k+WJjeaWh+S7tuacieayoeacieS/neWtmAogICAgICBpZiAoIXRoYXQuZWRpdG9yTGlzdFtpbmRleF0uaXNTYXZlKSB7CiAgICAgICAgdGhhdC4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgICB0aXRsZTogJ+aWh+S7tuacquS/neWtmCcsCiAgICAgICAgICBjb250ZW50OiAn5oKo5piv5ZCm6ZyA6KaB5L+d5a2Y5b2T5YmN5paH5Lu2JywKICAgICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgICAvLyDkv53lrZjmlofku7YKICAgICAgICAgICAgdGhhdC5zYXZlZmlsZShpbmRleCk7CiAgICAgICAgICB9LAogICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmluZm8oJ+WPlua2iOS/neWtmCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/nvJbovpHlmajnirbmgIHlj5jljJYKICAgIGVkaXRNb2RhbENoYW5nZTogZnVuY3Rpb24gZWRpdE1vZGFsQ2hhbmdlKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuZWRpdG9yTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICBpZiAodmFsdWUuaXNTYXZlID09PSBmYWxzZSkgewogICAgICAgICAgaWYgKGNvbmZpcm0oIiIuY29uY2F0KHRoYXQuZWRpdG9ySW5kZXhbaW5kZXhdLnRpdGxlLCAiXHU2NTg3XHU0RUY2XHU2NzJBXHU0RkREXHU1QjU4LFx1NjYyRlx1NTQyNlx1ODk4MVx1NEZERFx1NUI1OFx1OEJFNVx1NjU4N1x1NEVGNiIpKSkgewogICAgICAgICAgICAvLyDkv53lrZjlvZPliY3mlofku7YKICAgICAgICAgICAgdGhhdC5zYXZlZmlsZShpbmRleCwgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmluZm8oIlx1NURGMlx1NTNENlx1NkQ4OCIuY29uY2F0KHRoYXQuZWRpdG9ySW5kZXhbaW5kZXhdLnRpdGxlLCAiXHU2NTg3XHU0RUY2XHU0RkREXHU1QjU4IikpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDplIDmr4HlvZPliY3nvJbovpHlmagKICAgICAgICB0aGF0LmVkaXRvckxpc3RbaW5kZXhdLmVkaXRvci5kaXNwb3NlKCk7CiAgICAgICAgdGhhdC5lZGl0b3JMaXN0W2luZGV4XS5lZGl0b3IgPSBudWxsOwogICAgICB9KTsKICAgICAgLy8g5Yid5aeL6K+d5pWw5o2uCiAgICAgIHRoYXQubW9kYWxzID0gZmFsc2U7IC8v57yW6L6R5Zmo5byA5YWzCiAgICAgIHRoYXQuZWRpdG9yID0gJyc7IC8v5b2T5YmN57yW6L6R5Zmo5a+56LGhCiAgICAgIHRoYXQuZWRpdG9ySW5kZXggPSBbCiAgICAgIC8v6YCJ6aG55Y2h5pWw57uECiAgICAgIHsKICAgICAgICB0YWI6IHRydWUsCiAgICAgICAgaW5kZXg6ICcwJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgaWNvbjogJycKICAgICAgfV07CiAgICAgIHRoYXQuZWRpdG9yTGlzdCA9IFtdOyAvL+e8lui+keWZqOaVsOe7hAogICAgICB0aGF0LmluZGV4RWRpdG9yID0gJzAnOyAvL+W9k+WJjee8lui+keWZqOe0ouW8lQogICAgICB0aGF0LmNvZGUgPSAnJzsgLy/lvZPliY3mlofku7bmiZPlvIDml7bnmoTlhoXlrrkKICAgICAgdGhhdC5uYXZMaXN0ID0gW107IC8v5bem5L6n5a+86Iiq5pWw5o2uCiAgICAgIHRoYXQubmF2SXRlbSA9IHt9OyAvL+W3puS+p+WvvOiIqueCueWHu+aYr+mAieS4reeahOaVsOaNrgogICAgICB0aGF0LmNvbnRleHREYXRhID0gbnVsbDsgLy/lt6bkvqflr7zoiKrlj7PplK7ngrnlh7vmmK/kuqfnlJ/nmoTmlbDmja7lr7nosaEKICAgIH0KICB9Cn07"},null]}