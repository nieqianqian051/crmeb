{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/product/productAdd/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js","mtime":1746465018446},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvbmllcWlhbnFpYW4vRG93bmxvYWRzL3hpbnhpYW5nbXUvQ1JNRUIvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbmllcWlhbnFpYW4vRG93bmxvYWRzL3hpbnhpYW5nbXUvQ1JNRUIvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9uaWVxaWFucWlhbi9Eb3dubG9hZHMveGlueGlhbmdtdS9DUk1FQi90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9uaWVxaWFucWlhbi9Eb3dubG9hZHMveGlueGlhbmdtdS9DUk1FQi90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHVzZXJMYWJlbCBmcm9tICdAL2NvbXBvbmVudHMvbGFiZWxMaXN0JzsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHZ1ZWRyYWdnYWJsZSBmcm9tICd2dWVkcmFnZ2FibGUnOwppbXBvcnQgdXBsb2FkUGljdHVyZXMgZnJvbSAnQC9jb21wb25lbnRzL3VwbG9hZFBpY3R1cmVzJzsKaW1wb3J0IGZyZWlnaHRUZW1wbGF0ZSBmcm9tICdAL2NvbXBvbmVudHMvZnJlaWdodFRlbXBsYXRlJzsKaW1wb3J0IGNvdXBvbkxpc3QgZnJvbSAnQC9jb21wb25lbnRzL2NvdXBvbkxpc3QnOwppbXBvcnQgYWRkQXR0ciBmcm9tICcuLi9wcm9kdWN0QXR0ci9hZGRBdHRyJzsKaW1wb3J0IGdvb2RzTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvZ29vZHNMaXN0L2luZGV4JzsKaW1wb3J0IHRhb0JhbyBmcm9tICcuL3Rhb0Jhbyc7CmltcG9ydCBXYW5nRWRpdG9yIGZyb20gJ0AvY29tcG9uZW50cy93YW5nRWRpdG9yL2luZGV4LnZ1ZSc7CmltcG9ydCB7IHVzZXJMYWJlbEFkZEFwaSB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBwcm9kdWN0SW5mb0FwaSwgY2FzY2FkZXJMaXN0QXBpLCBwcm9kdWN0QWRkQXBpLCBnZW5lcmF0ZUF0dHJBcGksIHByb2R1Y3RHZXRSdWxlQXBpLCBwcm9kdWN0R2V0VGVtcGxhdGVBcGksIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSwgY2hlY2tBY3Rpdml0eUFwaSwgcHJvZHVjdENhY2hlLCBjYWNoZURlbGV0ZSwgdXBsb2FkVHlwZSBhcyBfdXBsb2FkVHlwZSwgaW1wb3J0Q2FyZCwgcHJvZHVjdENyZWF0ZUFwaSB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnOwppbXBvcnQgU2V0dGluZyBmcm9tICdAL3NldHRpbmcnOwppbXBvcnQgeyBnZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnOwppbXBvcnQgeyB1cGxvYWRCeVBpZWNlcyB9IGZyb20gJ0AvdXRpbHMvdXBsb2FkJzsgLy/lvJXlhaV1cGxvYWRCeVBpZWNlc+aWueazlQppbXBvcnQgeyBpc0ZpbGVVcGxvYWQsIGlzVmlkZW9VcGxvYWQgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IGNoZWNrQXJyYXkgZnJvbSAnQC9saWJzL3Blcm1pc3Npb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Byb2R1Y3RfcHJvZHVjdEFkZCcsCiAgY29tcG9uZW50czogewogICAgLy8gVnVlVWVkaXRvcldyYXAsCiAgICB1cGxvYWRQaWN0dXJlczogdXBsb2FkUGljdHVyZXMsCiAgICBmcmVpZ2h0VGVtcGxhdGU6IGZyZWlnaHRUZW1wbGF0ZSwKICAgIGFkZEF0dHI6IGFkZEF0dHIsCiAgICBjb3Vwb25MaXN0OiBjb3Vwb25MaXN0LAogICAgdGFvQmFvOiB0YW9CYW8sCiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSwKICAgIGdvb2RzTGlzdDogZ29vZHNMaXN0LAogICAgV2FuZ0VkaXRvcjogV2FuZ0VkaXRvciwKICAgIHVzZXJMYWJlbDogdXNlckxhYmVsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxTaG93OiBmYWxzZSwKICAgICAgZGF0YUxhYmVsOiBbXSwKICAgICAgaGVhZFRhYjogW3sKICAgICAgICB0aXQ6ICfln7rnoYDkv6Hmga8nLAogICAgICAgIG5hbWU6ICcxJwogICAgICB9LCB7CiAgICAgICAgdGl0OiAn6KeE5qC85bqT5a2YJywKICAgICAgICBuYW1lOiAnMicKICAgICAgfSwgewogICAgICAgIHRpdDogJ+WVhuWTgeivpuaDhScsCiAgICAgICAgbmFtZTogJzMnCiAgICAgIH0sIHsKICAgICAgICB0aXQ6ICfnianmtYHorr7nva4nLAogICAgICAgIG5hbWU6ICc0JwogICAgICB9LCB7CiAgICAgICAgdGl0OiAn6JCl6ZSA6K6+572uJywKICAgICAgICBuYW1lOiAnNScKICAgICAgfSwgewogICAgICAgIHRpdDogJ+WFtuS7luiuvue9ricsCiAgICAgICAgbmFtZTogJzYnCiAgICAgIH1dLAogICAgICB2aXJ0dWFsOiBbewogICAgICAgIHRpdDogJ+aZrumAmuWVhuWTgScsCiAgICAgICAgaWQ6IDAsCiAgICAgICAgdGl0MjogJ+eJqea1geWPkei0pycKICAgICAgfSwgewogICAgICAgIHRpdDogJ+WNoeWvhi/nvZHnm5gnLAogICAgICAgIGlkOiAxLAogICAgICAgIHRpdDI6ICfoh6rliqjlj5HotKcnCiAgICAgIH0sIHsKICAgICAgICB0aXQ6ICfkvJjmg6DliLgnLAogICAgICAgIGlkOiAyLAogICAgICAgIHRpdDI6ICfoh6rliqjlj5HotKcnCiAgICAgIH0sIHsKICAgICAgICB0aXQ6ICfomZrmi5/llYblk4EnLAogICAgICAgIGlkOiAzLAogICAgICAgIHRpdDI6ICfomZrmi5/lj5HotKcnCiAgICAgIH1dLAogICAgICBzZWxldFZpZGVvOiAwLAogICAgICAvL+mAieaLqeinhumikeexu+WeiwogICAgICBjdXN0b21CdG46IGZhbHNlLAogICAgICAvL+iHquWumuS5ieeVmeiogOW8gOWFswogICAgICBjb250ZW50OiAnJywKICAgICAgY29udGVudHM6ICcnLAogICAgICBmaWxlVXJsOiBTZXR0aW5nLmFwaUJhc2VVUkwgKyAnL2ZpbGUvdXBsb2FkJywKICAgICAgZmlsZVVybDI6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS92aWRlb191cGxvYWQnLAogICAgICBjYXJkVXJsOiBTZXR0aW5nLmFwaUJhc2VVUkwgKyAnL2ZpbGUvdXBsb2FkLzEnLAogICAgICB1cGxvYWRfdHlwZTogJycsCiAgICAgIC8v6KeG6aKR5LiK5Lyg57G75Z6LIDEg5pys5Zyw5LiK5LygIDIgMyA0IE9TU+S4iuS8oAogICAgICB1cGxvYWREYXRhOiB7fSwKICAgICAgLy8g5LiK5Lyg5Y+C5pWwCiAgICAgIGhlYWRlcjoge30sCiAgICAgIHR5cGU6IDAsCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGdvb2RzX21vZGFsczogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgb3BlblN1YmltaXQ6IGZhbHNlLAogICAgICB2aXJ0dWFsRGF0YTogJycsCiAgICAgIHZpcnR1YWxMaXN0OiBbewogICAgICAgIGtleTogJycsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH1dLAogICAgICBncmlkMjogewogICAgICAgIHhsOiAxMCwKICAgICAgICBsZzogMTIsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQKICAgICAgfSwKICAgICAgZ3JpZDM6IHsKICAgICAgICB4bDogMTgsCiAgICAgICAgbGc6IDE4LAogICAgICAgIG1kOiAyMCwKICAgICAgICBzbTogMjQsCiAgICAgICAgeHM6IDI0CiAgICAgIH0sCiAgICAgIC8vIOaJuemHj+iuvue9ruihqOagvGRhdGEKICAgICAgb25lRm9ybUJhdGNoOiBbewogICAgICAgIHBpYzogJycsCiAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgY29zdDogMCwKICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICBzdG9jazogMCwKICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgIHZvbHVtZTogMCwKICAgICAgICB2aXJ0dWFsX2xpc3Q6IFtdCiAgICAgIH1dLAogICAgICAvLyDop4TmoLzmlbDmja4KICAgICAgZm9ybUR5bmFtaWM6IHsKICAgICAgICBhdHRyc05hbWU6ICcnLAogICAgICAgIGF0dHJzVmFsOiAnJwogICAgICB9LAogICAgICBkaXNrX3R5cGU6IDEsCiAgICAgIC8v5Y2h5a+G57G75Z6LCiAgICAgIHRhYkluZGV4OiAwLAogICAgICB0YWJOYW1lOiAnJywKICAgICAgZm9ybUR5bmFtaWNOYW1lRGF0YTogW10sCiAgICAgIGlzQnRuOiBmYWxzZSwKICAgICAgY29sdW1uczI6IFt7CiAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgIHNsb3Q6ICdwaWMnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogODAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5ZSu5Lu3JywKICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5oiQ5pys5Lu3JywKICAgICAgICBzbG90OiAnY29zdCcsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgIHNsb3Q6ICdvdF9wcmljZScsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflupPlrZgnLAogICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfllYblk4HnvJblj7cnLAogICAgICAgIHNsb3Q6ICdiYXJfY29kZScsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiAxMjAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn6YeN6YeP77yIS0fvvIknLAogICAgICAgIHNsb3Q6ICd3ZWlnaHQnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5L2T56evKG3CsyknLAogICAgICAgIHNsb3Q6ICd2b2x1bWUnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICBzbG90OiAnYWN0aW9uJywKICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgbWluV2lkdGg6IDEyMAogICAgICB9XSwKICAgICAgY29sdW1uczM6IFt7CiAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgIHNsb3Q6ICdwaWMnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogODAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5ZSu5Lu3JywKICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBtaW5XaWR0aDogOTUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5oiQ5pys5Lu3JywKICAgICAgICBzbG90OiAnY29zdCcsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgIHNsb3Q6ICdvdF9wcmljZScsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflupPlrZgnLAogICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfllYblk4HnvJblj7cnLAogICAgICAgIHNsb3Q6ICdiYXJfY29kZScsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIG1pbldpZHRoOiAxMjAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICBzbG90OiAnYWN0aW9uJywKICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgbWluV2lkdGg6IDEyMAogICAgICB9XSwKICAgICAgY29sdW1uczogW10sCiAgICAgIGNvbHVtbnNJbnN0YWxsOiBbXSwKICAgICAgY29sdW1uc0luc3RhbDI6IFtdLAogICAgICBncmlkUGljOiB7CiAgICAgICAgeGw6IDYsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAxMiwKICAgICAgICB4czogMTIKICAgICAgfSwKICAgICAgZ3JpZEJ0bjogewogICAgICAgIHhsOiA0LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiA4LAogICAgICAgIHNtOiA4LAogICAgICAgIHhzOiA4CiAgICAgIH0sCiAgICAgIC8v6Ieq5a6a5LmJ55WZ6KiA5LiL5ouJ6YCJ5oupCiAgICAgIEN1c3RvbUxpc3Q6IFt7CiAgICAgICAgdmFsdWU6ICd0ZXh0JywKICAgICAgICBsYWJlbDogJ+aWh+acrOahhicKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnbnVtYmVyJywKICAgICAgICBsYWJlbDogJ+aVsOWtlycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnZW1haWwnLAogICAgICAgIGxhYmVsOiAn6YKu5Lu2JwogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdkYXRhJywKICAgICAgICBsYWJlbDogJ+aXpeacnycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAndGltZScsCiAgICAgICAgbGFiZWw6ICfml7bpl7QnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICBsYWJlbDogJ+i6q+S7veivgScKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAncGhvbmUnLAogICAgICAgIGxhYmVsOiAn5omL5py65Y+3JwogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdpbWcnLAogICAgICAgIGxhYmVsOiAn5Zu+54mHJwogICAgICB9XSwKICAgICAgY3VzdG9tZXNzOiB7CiAgICAgICAgY29udGVudDogW10KICAgICAgfSwKICAgICAgLy/oh6rlrprkuYnnlZnoqIDlhoXlrrkKCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGRpc2tfaW5mbzogJycsCiAgICAgICAgLy/ljaHlr4bnsbvlnosKICAgICAgICBsb2dpc3RpY3M6IFsnMSddLAogICAgICAgIC8v6YCJ5oup54mp5rWB5pa55byPCiAgICAgICAgZnJlaWdodDogMiwKICAgICAgICAvL+i/kOi0ueiuvue9rgogICAgICAgIHBvc3RhZ2U6IDAsCiAgICAgICAgLy/orr7nva7ov5DotLnph5Hpop0KICAgICAgICByZWNvbW1lbmQ6IFtdLAogICAgICAgIC8v5ZWG5ZOB5o6o6I2QCiAgICAgICAgcHJlc2FsZV9kYXk6IDEsCiAgICAgICAgLy/pooTllK7lj5HotKfml7bpl7Qt57uT5p2fCiAgICAgICAgcHJlc2FsZTogZmFsc2UsCiAgICAgICAgLy/pooTllK7llYblk4HlvIDlhbMKICAgICAgICBpc19saW1pdDogZmFsc2UsCiAgICAgICAgbGltaXRfdHlwZTogMCwKICAgICAgICBsaW1pdF9udW06IDAsCiAgICAgICAgdmlkZW9fb3BlbjogZmFsc2UsCiAgICAgICAgLy/op4bpopHmjInpkq7mmK/lkKbmmL7npLoKICAgICAgICB2aXBfcHJvZHVjdDogZmFsc2UsCiAgICAgICAgLy/ku5jotLnkvJrlkZjkuJPlsZ7lvIDlhbMKICAgICAgICBjdXN0b21fZm9ybTogW10sCiAgICAgICAgLy/oh6rlrprkuYnnlZnoqIAKICAgICAgICBzdG9yZV9uYW1lOiAnJywKICAgICAgICBjYXRlX2lkOiBbXSwKICAgICAgICBsYWJlbF9pZDogW10sCiAgICAgICAga2V5d29yZDogJycsCiAgICAgICAgdW5pdF9uYW1lOiAnJywKICAgICAgICBzdG9yZV9pbmZvOiAnJywKICAgICAgICBpbWFnZTogJycsCiAgICAgICAgcmVjb21tZW5kX2ltYWdlOiAnJywKICAgICAgICBzbGlkZXJfaW1hZ2U6IFtdLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBmaWN0aTogMCwKICAgICAgICBnaXZlX2ludGVncmFsOiAwLAogICAgICAgIHNvcnQ6IDAsCiAgICAgICAgaXNfc2hvdzogMSwKICAgICAgICBpc19ob3Q6IDAsCiAgICAgICAgaXNfYmVuZWZpdDogMCwKICAgICAgICBpc19iZXN0OiAwLAogICAgICAgIGlzX25ldzogMCwKICAgICAgICBpc19nb29kOiAwLAogICAgICAgIGlzX3Bvc3RhZ2U6IDAsCiAgICAgICAgaXNfc3ViOiBbXSwKICAgICAgICByZWNvbW1lbmRfbGlzdDogW10sCiAgICAgICAgdmlydHVhbF90eXBlOiAwLAogICAgICAgIC8vIGlzX3N1YjogMCwKICAgICAgICBpZDogMCwKICAgICAgICBzcGVjX3R5cGU6IDAsCiAgICAgICAgaXNfdmlydHVhbDogMCwKICAgICAgICB2aWRlb19saW5rOiAnJywKICAgICAgICAvLyBwb3N0YWdlOiAwLAogICAgICAgIHRlbXBfaWQ6ICcnLAogICAgICAgIGF0dHJzOiBbXSwKICAgICAgICBpdGVtczogW3sKICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICBwcmljZTogMCwKICAgICAgICAgIGNvc3Q6IDAsCiAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgIHN0b2NrOiAwLAogICAgICAgICAgYmFyX2NvZGU6ICcnCiAgICAgICAgfV0sCiAgICAgICAgYWN0aXZpdHk6IFsn6buY6K6kJywgJ+enkuadgCcsICfnoI3ku7cnLCAn5ou85ZuiJ10sCiAgICAgICAgY291cG9uTmFtZTogW10sCiAgICAgICAgaGVhZGVyOiBbXSwKICAgICAgICBzZWxlY3RSdWxlOiAnJywKICAgICAgICBjb3Vwb25faWRzOiBbXSwKICAgICAgICBjb21tYW5kX3dvcmQ6ICcnLAogICAgICAgIG1pbl9xdHk6IDEKICAgICAgfSwKICAgICAgcnVsZUxpc3Q6IFtdLAogICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICBjcmVhdGVCbnQ6IHRydWUsCiAgICAgIHNob3dJcHV0OiBmYWxzZSwKICAgICAgbWFueUZvcm1WYWxpZGF0ZTogW10sCiAgICAgIC8vIOWNleinhOagvOihqOagvGRhdGEKICAgICAgb25lRm9ybVZhbGlkYXRlOiBbewogICAgICAgIHBpYzogJycsCiAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgY29zdDogMCwKICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICBzdG9jazogMCwKICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgIHZvbHVtZTogMCwKICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgYnJva2VyYWdlX3R3bzogMCwKICAgICAgICB2aXBfcHJpY2U6IDAsCiAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICBjb3Vwb25faWQ6IDAKICAgICAgfV0sCiAgICAgIGltYWdlczogW10sCiAgICAgIGltYWdlc1RhYmxlOiAnJywKICAgICAgY3VycmVudFRhYjogJzEnLAogICAgICBpc0Nob2ljZTogJycsCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogOCwKICAgICAgICBsZzogOCwKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNAogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbW9kYWxQaWM6IGZhbHNlLAogICAgICBhZGRWaXJ0dWFsTW9kZWw6IGZhbHNlLAogICAgICB0ZW1wbGF0ZTogZmFsc2UsCiAgICAgIHVwbG9hZExpc3Q6IFtdLAogICAgICB0cmVlU2VsZWN0OiBbXSwKICAgICAgcGljVGl0OiAnJywKICAgICAgdGFibGVJbmRleDogMCwKICAgICAgcnVsZVZhbGlkYXRlOiB7CiAgICAgICAgc3RvcmVfbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjYXRlX2lkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB5YiG57G7JywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgIG1pbjogJzEnCiAgICAgICAgfV0sCiAgICAgICAgdW5pdF9uYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Y2V5L2NJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIC8vIGltYWdlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+S4iuS8oOWVhuWTgeWbviIsIHRyaWdnZXI6ICJjaGFuZ2UiIH1dLAogICAgICAgIHNsaWRlcl9pbWFnZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+S4iuS8oOWVhuWTgei9ruaSreWbvicsCiAgICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBzcGVjX3R5cGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nllYblk4Hop4TmoLwnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBpc192aXJ0dWFsOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB57G75Z6LJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgc2VsZWN0UnVsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvOWxnuaApycsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIHRlbXBfaWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nov5DotLnmqKHmnb8nLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB0eXBlOiAnbnVtYmVyJwogICAgICAgIH1dLAogICAgICAgIHByZXNhbGVfdGltZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nmtLvliqjml7bpl7QnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBsb2dpc3RpY3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICBtaW46IDEsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup54mp5rWB5pa55byPJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgIG1heDogMiwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnianmtYHmlrnlvI8nLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBnaXZlX2ludGVncmFsOiBbewogICAgICAgICAgdHlwZTogJ2ludGVnZXInLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaVtOaVsCcKICAgICAgICB9XQogICAgICB9LAogICAgICBtYW55QnJva2VyYWdlOiAwLAogICAgICBtYW55QnJva2VyYWdlVHdvOiAwLAogICAgICBtYW55VmlwUHJpY2U6IDAsCiAgICAgIHVwbG9hZDogewogICAgICAgIHZpZGVvSW5nOiBmYWxzZSAvLyDmmK/lkKbmmL7npLrov5vluqbmnaHvvJsKICAgICAgfSwKICAgICAgdmlkZW9Jbmc6IGZhbHNlLAogICAgICAvLyDmmK/lkKbmmL7npLrov5vluqbmnaHvvJsKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOi/m+W6puadoem7mOiupDAKICAgICAgc3RvY2s6IDAsCiAgICAgIGRpc2tfaW5mbzogJycsCiAgICAgIHZpZGVvTGluazogJycsCiAgICAgIGF0dHJzOiBbXSwKICAgICAgYWN0aXZpdHk6IHsKICAgICAgICDpu5jorqQ6ICdyZWQnLAogICAgICAgIOenkuadgDogJ2JsdWUnLAogICAgICAgIOegjeS7tzogJ2dyZWVuJywKICAgICAgICDmi7zlm6I6ICd5ZWxsb3cnCiAgICAgIH0sCiAgICAgIGNvdXBvbk5hbWU6IFtdLAogICAgICB1cGRhdGVJZHM6IFtdLAogICAgICB1cGRhdGVOYW1lOiBbXSwKICAgICAgY291cG9uSWRzOiAnJywKICAgICAgY291cG9uTmFtZXM6IFtdLAogICAgICByYWtlQmFjazogW3sKICAgICAgICB0aXRsZTogJ+S4gOe6p+i/lOS9oycsCiAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIHdpZHRoOiA5NQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfkuoznuqfov5TkvaMnLAogICAgICAgIHNsb3Q6ICdicm9rZXJhZ2VfdHdvJywKICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgd2lkdGg6IDk1CiAgICAgIH1dLAogICAgICBtZW1iZXI6IFt7CiAgICAgICAgdGl0bGU6ICfkvJrlkZjku7cnLAogICAgICAgIHNsb3Q6ICd2aXBfcHJpY2UnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB3aWR0aDogOTUKICAgICAgfV0sCiAgICAgIGNvbHVtbnNJbnN0YWxNOiBbXSwKICAgICAgbW92ZUluZGV4OiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSkpLCB7fSwgewogICAgbGFiZWxXaWR0aDogZnVuY3Rpb24gbGFiZWxXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiAnMTIwcHgnOwogICAgfSwKICAgIGxhYmVsUG9zaXRpb246IGZ1bmN0aW9uIGxhYmVsUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgfSwKICAgIGxhYmVsQm90dG9tOiBmdW5jdGlvbiBsYWJlbEJvdHRvbSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiAnMTVweCc7CiAgICB9CiAgfSksCiAgYmVmb3JlUm91dGVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB0aGlzLmJ1cy4kZW1pdCgnb25UYWdzVmlld1JlZnJlc2hSb3V0ZXJWaWV3JywgdGhpcy4kcm91dGUucGF0aCk7CiAgICBuZXh0KCk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA4KTsKICAgIHRoaXMuZ2V0VG9rZW4oKTsKCiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5jb2x1bW5zSW5zdGFsbCk7CiAgICAvLyB0aGlzLmNvbHVtbnNJbnN0YTggPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLmNvbHVtbnNJbnN0YTgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkICE9PSAnMCcgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgIHRoaXMuZ2V0SW5mbygpOwogICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcwJykgewogICAgICBwcm9kdWN0Q2FjaGUoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmluZm87CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICB2YXIgY2F0ZV9pZCA9IGRhdGEuY2F0ZV9pZC5tYXAoTnVtYmVyKTsKICAgICAgICAgIHZhciBsYWJlbF9pZCA9IGRhdGEubGFiZWxfaWQubWFwKE51bWJlcik7CiAgICAgICAgICBfdGhpcy5hdHRycyA9IGRhdGEuaXRlbXMgfHwgW107CiAgICAgICAgICB2YXIgaWRzID0gW107CiAgICAgICAgICAvLyBsZXQgbmFtZXMgPSBbXTsKICAgICAgICAgIGlmIChkYXRhLmNvdXBvbnMpIHsKICAgICAgICAgICAgZGF0YS5jb3Vwb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgIC8vIG5hbWVzLnB1c2goaXRlbS50aXRsZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5jb3Vwb25OYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgICAgIC8vIHRoaXMuY291cG9uTmFtZSA9IGRhdGEuY291cG9uczsKICAgICAgICAgIC8vIHRoYXQuY291cG9uTmFtZSA9IG5hbWVzOwogICAgICAgICAgX3RoaXMuZGF0YUxhYmVsID0gZGF0YS5sYWJlbF9pZDsKICAgICAgICAgIF90aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWRzOwogICAgICAgICAgX3RoaXMudXBkYXRlSWRzID0gaWRzOwogICAgICAgICAgX3RoaXMudXBkYXRlTmFtZSA9IGRhdGEuY291cG9uczsKICAgICAgICAgIF90aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkID0gY2F0ZV9pZDsKICAgICAgICAgIC8vIHRoaXMuZm9ybVZhbGlkYXRlLmxhYmVsX2lkID0gbGFiZWxfaWQ7CiAgICAgICAgICBfdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBkYXRhLmF0dHJzOwogICAgICAgICAgX3RoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGRhdGEubG9naXN0aWNzIHx8IFsnMSddOwogICAgICAgICAgX3RoaXMuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgX3RoaXMuZ2VuZXJhdGUoMCk7CiAgICAgICAgICBfdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gZGF0YS5hdHRyczsKICAgICAgICAgIF90aGlzLnNwZWNfdHlwZSA9IGRhdGEuc3BlY190eXBlOwogICAgICAgICAgX3RoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSBkYXRhLmlzX3ZpcnR1YWw7CiAgICAgICAgICBfdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0gPSBkYXRhLmN1c3RvbV9mb3JtIHx8IFtdOwogICAgICAgICAgaWYgKF90aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5sZW5ndGggIT0gMCkgewogICAgICAgICAgICBfdGhpcy5jdXN0b21CdG4gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXMudmlydHVhbGJ0bihkYXRhLnZpcnR1YWxfdHlwZSwgMSk7CiAgICAgICAgICBpZiAoZGF0YS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICAgICAgX3RoaXMubWFueUZvcm1WYWxpZGF0ZSA9IFtdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXMub25lRm9ybVZhbGlkYXRlID0gW3sKICAgICAgICAgICAgICBwaWM6IGRhdGEuaW1hZ2UsCiAgICAgICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICAgICAgY29zdDogMCwKICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICAgICAgYnJva2VyYWdlX3R3bzogMCwKICAgICAgICAgICAgICB2aXBfcHJpY2U6IDAsCiAgICAgICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgICAgICBjb3Vwb25faWQ6IDAKICAgICAgICAgICAgfV07CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpcy53YXRjaEFjdGl2aXR5KCk7CiAgICAgICAgICBfdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICB9KTsKICAgIH0KICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS50eXBlKSB7CiAgICAgIHRoaXMubW9kYWxzID0gdHJ1ZTsKICAgICAgdGhpcy50eXBlID0gdGhpcy4kcm91dGUucXVlcnkudHlwZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudHlwZSA9IDA7CiAgICB9CiAgICB0aGlzLmdvb2RzQ2F0ZWdvcnkoKTsKICAgIHRoaXMucHJvZHVjdEdldFJ1bGUoKTsKICAgIHRoaXMucHJvZHVjdEdldFRlbXBsYXRlKCk7CiAgICAvLyB0aGlzLnVzZXJMYWJlbCgpOwogICAgdGhpcy51cGxvYWRUeXBlKCk7CiAgICB0aGlzLndhdGNoQWN0aXZpdHkoKTsKICB9LAogIG1ldGhvZHM6IF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7CiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHJldHVybiBpc0ZpbGVVcGxvYWQoZmlsZSk7CiAgICB9LAogICAgLy8g5YiG54mH5LiK5LygCiAgICB2aWRlb1NhdmVUb1VybDogZnVuY3Rpb24gdmlkZW9TYXZlVG9VcmwoZmlsZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKGlzVmlkZW9VcGxvYWQoZmlsZSkpIHsKICAgICAgICB1cGxvYWRCeVBpZWNlcyh7CiAgICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgICAgLy8g6KeG6aKR5a6e5L2TCiAgICAgICAgICBwaWVjZVNpemU6IDMsCiAgICAgICAgICAvLyDliIbniYflpKflsI8KICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewogICAgICAgICAgICBfdGhpczIuZm9ybVZhbGlkYXRlLnZpZGVvX2xpbmsgPSBkYXRhLmZpbGVfcGF0aDsKICAgICAgICAgICAgX3RoaXMyLnByb2dyZXNzID0gMTAwOwogICAgICAgICAgfSwKICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihlLm1zZyk7CiAgICAgICAgICB9LAogICAgICAgICAgdXBsb2FkaW5nOiBmdW5jdGlvbiB1cGxvYWRpbmcoY2h1bmssIGFsbENodW5rKSB7CiAgICAgICAgICAgIF90aGlzMi52aWRlb0luZyA9IHRydWU7CiAgICAgICAgICAgIHZhciBzdCA9IE1hdGguZmxvb3IoY2h1bmsgLyBhbGxDaHVuayAqIDEwMCk7CiAgICAgICAgICAgIF90aGlzMi5wcm9ncmVzcyA9IHN0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvLyDnsbvlnovpgInmi6kv5aGr5YWl5YaF5a655Yik5patCiAgICB2aXJ0dWFsYnRuOiBmdW5jdGlvbiB2aXJ0dWFsYnRuKGluZGV4LCB0eXBlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAodHlwZSAhPSAxKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViID0gW107CiAgICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIGlmIChpZCkgewogICAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7fSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IF90aGlzMy5zcGVjX3R5cGU7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDA7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMDsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFt7CiAgICAgICAgICAgIHRpdDogJ+WfuuehgOS/oeaBrycsCiAgICAgICAgICAgIG5hbWU6ICcxJwogICAgICAgICAgfSwgewogICAgICAgICAgICB0aXQ6ICfop4TmoLzlupPlrZgnLAogICAgICAgICAgICBuYW1lOiAnMicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGl0OiAn5ZWG5ZOB6K+m5oOFJywKICAgICAgICAgICAgbmFtZTogJzMnCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpdDogJ+eJqea1geiuvue9ricsCiAgICAgICAgICAgIG5hbWU6ICc0JwogICAgICAgICAgfSwgewogICAgICAgICAgICB0aXQ6ICfokKXplIDorr7nva4nLAogICAgICAgICAgICBuYW1lOiAnNScKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGl0OiAn5YW25LuW6K6+572uJywKICAgICAgICAgICAgbmFtZTogJzYnCiAgICAgICAgICB9XTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDE7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wb3N0YWdlID0gMDsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSAxOwogICAgICAgICAgdGhpcy5oZWFkVGFiID0gW3sKICAgICAgICAgICAgdGl0OiAn5Z+656GA5L+h5oGvJywKICAgICAgICAgICAgbmFtZTogJzEnCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpdDogJ+inhOagvOW6k+WtmCcsCiAgICAgICAgICAgIG5hbWU6ICcyJwogICAgICAgICAgfSwgewogICAgICAgICAgICB0aXQ6ICfllYblk4Hor6bmg4UnLAogICAgICAgICAgICBuYW1lOiAnMycKICAgICAgICAgIH0sCiAgICAgICAgICAvLyB7IHRpdDogIueJqea1geiuvue9riIsIG5hbWU6ICI0IiB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXQ6ICfokKXplIDorr7nva4nLAogICAgICAgICAgICBuYW1lOiAnNCcKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGl0OiAn5YW25LuW6K6+572uJywKICAgICAgICAgICAgbmFtZTogJzUnCiAgICAgICAgICB9XTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDI7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMTsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFt7CiAgICAgICAgICAgIHRpdDogJ+WfuuehgOS/oeaBrycsCiAgICAgICAgICAgIG5hbWU6ICcxJwogICAgICAgICAgfSwgewogICAgICAgICAgICB0aXQ6ICfop4TmoLzlupPlrZgnLAogICAgICAgICAgICBuYW1lOiAnMicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGl0OiAn5ZWG5ZOB6K+m5oOFJywKICAgICAgICAgICAgbmFtZTogJzMnCiAgICAgICAgICB9LAogICAgICAgICAgLy8geyB0aXQ6ICLnianmtYHorr7nva4iLCBuYW1lOiAiNCIgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGl0OiAn6JCl6ZSA6K6+572uJywKICAgICAgICAgICAgbmFtZTogJzQnCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpdDogJ+WFtuS7luiuvue9ricsCiAgICAgICAgICAgIG5hbWU6ICc1JwogICAgICAgICAgfV07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAzOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDE7CiAgICAgICAgICB0aGlzLmhlYWRUYWIgPSBbewogICAgICAgICAgICB0aXQ6ICfln7rnoYDkv6Hmga8nLAogICAgICAgICAgICBuYW1lOiAnMScKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdGl0OiAn6KeE5qC85bqT5a2YJywKICAgICAgICAgICAgbmFtZTogJzInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpdDogJ+WVhuWTgeivpuaDhScsCiAgICAgICAgICAgIG5hbWU6ICczJwogICAgICAgICAgfSwKICAgICAgICAgIC8vIHsgdGl0OiAi54mp5rWB6K6+572uIiwgbmFtZTogIjQiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRpdDogJ+iQpemUgOiuvue9ricsCiAgICAgICAgICAgIG5hbWU6ICc0JwogICAgICAgICAgfSwgewogICAgICAgICAgICB0aXQ6ICflhbbku5borr7nva4nLAogICAgICAgICAgICBuYW1lOiAnNScKICAgICAgICAgIH1dOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlrDlop7liIbnsbsKICAgIGFkZENhdGU6IGZ1bmN0aW9uIGFkZENhdGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLiRtb2RhbEZvcm0ocHJvZHVjdENyZWF0ZUFwaSgpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM0Lmdvb2RzQ2F0ZWdvcnkoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g54mp5rWB5pa55byP6YCJ5oupCiAgICBsb2dpc3RpY3NCdG46IGZ1bmN0aW9uIGxvZ2lzdGljc0J0bihlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGU7CiAgICB9LAogICAgLy8g5paw5aKe5qCH562+CiAgICBhZGRMYWJlbDogZnVuY3Rpb24gYWRkTGFiZWwoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLiRtb2RhbEZvcm0odXNlckxhYmVsQWRkQXBpKDApKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LnVzZXJMYWJlbCgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDoh6rlrprkuYnnlZnoqIAg5byA5ZCv5YWz6ZetCiAgICBjdXN0b21NZXNzQnRuOiBmdW5jdGlvbiBjdXN0b21NZXNzQnRuKGUpIHsKICAgICAgaWYgKCFlKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0gPSBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOiHquWumuS5ieeVmeiogCDmlrDlop7ooajljZUKICAgIGFkZGN1c3RvbTogZnVuY3Rpb24gYWRkY3VzdG9tKCkgewogICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0ubGVuZ3RoID4gOSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pyA5aSa5re75YqgMTDmnaEnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5wdXNoKHsKICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgIGxhYmVsOiAndGV4dCcsCiAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgICBzdGF0dXM6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGRlbGN1c3RvbTogZnVuY3Rpb24gZGVsY3VzdG9tKGluZGV4KSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g6aKE5ZSu5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWU6IGZ1bmN0aW9uIG9uY2hhbmdlVGltZShlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnByZXNhbGVfdGltZSA9IGU7CiAgICB9LAogICAgLy8g5ZWG5ZOB6K+m5oOFCiAgICBnZXRFZGl0b3JDb250ZW50OiBmdW5jdGlvbiBnZXRFZGl0b3JDb250ZW50KGRhdGEpIHsKICAgICAgdGhpcy5jb250ZW50ID0gZGF0YTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDkuIrkvKDlpLTpg6h0b2tlbgogICAgZ2V0VG9rZW46IGZ1bmN0aW9uIGdldFRva2VuKCkgewogICAgICB0aGlzLmhlYWRlclsnQXV0aG9yaS16YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldENvb2tpZXMoJ3Rva2VuJyk7CiAgICB9LAogICAgLy8g5a+85YWl5Y2h5a+GCiAgICB1cEZpbGU6IGZ1bmN0aW9uIHVwRmlsZShyZXMpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIGltcG9ydENhcmQoewogICAgICAgIGZpbGU6IHJlcy5kYXRhLnNyYwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczYudmlydHVhbExpc3QgPSBfdGhpczYudmlydHVhbExpc3QuY29uY2F0KHJlcy5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5bop4bpopHkuIrkvKDnsbvlnosKICAgIHVwbG9hZFR5cGU6IGZ1bmN0aW9uIHVwbG9hZFR5cGUoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICBfdXBsb2FkVHlwZSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNy51cGxvYWRfdHlwZSA9IHJlcy5kYXRhLnVwbG9hZF90eXBlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbmlbDmja7lsZXnpLoKICAgIGluZm9EYXRhOiBmdW5jdGlvbiBpbmZvRGF0YShkYXRhLCBpc0NvcHkpIHsKICAgICAgdmFyIGNhdGVfaWQgPSBkYXRhLmNhdGVfaWQubWFwKE51bWJlcik7CiAgICAgIHZhciBsYWJlbF9pZCA9IGRhdGEubGFiZWxfaWQubWFwKE51bWJlcik7CiAgICAgIHRoaXMuYXR0cnMgPSBkYXRhLml0ZW1zIHx8IFtdOwogICAgICB2YXIgaWRzID0gW107CiAgICAgIGRhdGEuY291cG9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZHMucHVzaChpdGVtLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgdGhpcy5zZWxldFZpZGVvID0gZGF0YS5zZWxldFZpZGVvOwogICAgICB0aGlzLmNvbnRlbnRzID0gZGF0YS5kZXNjcmlwdGlvbjsKICAgICAgdGhpcy5jb3Vwb25OYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWRzOwogICAgICB0aGlzLnVwZGF0ZUlkcyA9IGlkczsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhLmxhYmVsX2lkOwogICAgICB0aGlzLnVwZGF0ZU5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgIHRoaXMudmlydHVhbGJ0bihkYXRhLnZpcnR1YWxfdHlwZSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGRhdGEubG9naXN0aWNzIHx8IFsnMSddOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybSA9IGRhdGEuY3VzdG9tX2Zvcm0gfHwgW107CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5sZW5ndGggIT0gMCkgewogICAgICAgIHRoaXMuY3VzdG9tQnRuID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkID0gY2F0ZV9pZDsKICAgICAgaWYgKGRhdGEuYXR0cikgewogICAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlID0gW2RhdGEuYXR0cl07CiAgICAgIH0KICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaGVhZGVyID0gW107CiAgICAgIHRoaXMuZ2VuZXJhdGUoMCwgaXNDb3B5LCBkYXRhLmF0dHJzKTsKICAgICAgLy8gdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gZGF0YS5hdHRyczsKICAgICAgLy8gdGhpcy4kc2V0KHRoaXMsICdtYW55Rm9ybVZhbGlkYXRlJywgZGF0YS5hdHRycyk7CiAgICAgIHRoaXMuc3BlY190eXBlID0gZGF0YS5zcGVjX3R5cGU7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSBkYXRhLmlzX3ZpcnR1YWw7CiAgICAgIGlmIChkYXRhLnNwZWNfdHlwZSA9PT0gMCkgewogICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IFtdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZSA9IFt7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICAgIGJyb2tlcmFnZTogMCwKICAgICAgICAgIGJyb2tlcmFnZV90d286IDAsCiAgICAgICAgICB2aXBfcHJpY2U6IDAsCiAgICAgICAgICB2aXJ0dWFsX2xpc3Q6IFtdLAogICAgICAgICAgY291cG9uX2lkOiAwCiAgICAgICAgfV07CiAgICAgIH0KICAgICAgdGhpcy53YXRjaEFjdGl2aXR5KCk7CiAgICB9LAogICAgLy/lhbPpl63mt5jlrp3lvLnnqpflubbnlJ/miJDmlbDmja7vvJsKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoZGF0YSkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICB0aGlzLmluZm9EYXRhKGRhdGEsIDEpOwogICAgfSwKICAgIGNoZWNrTW92ZTogZnVuY3Rpb24gY2hlY2tNb3ZlKGV2dCkgewogICAgICB0aGlzLm1vdmVJbmRleCA9IGV2dC5kcmFnZ2VkQ29udGV4dC5pbmRleDsKICAgIH0sCiAgICBlbmQ6IGZ1bmN0aW9uIGVuZCgpIHsKICAgICAgdGhpcy5tb3ZlSW5kZXggPSAnJzsKICAgICAgdGhpcy5nZW5lcmF0ZSgxKTsKICAgIH0sCiAgICAvLyDljZXni6zorr7nva7kvJrlkZjorr7nva4KICAgIGNoZWNrQWxsR3JvdXBDaGFuZ2U6IGZ1bmN0aW9uIGNoZWNrQWxsR3JvdXBDaGFuZ2UoZGF0YSkgewogICAgICB0aGlzLmNoZWNrQWxsR3JvdXAoZGF0YSk7CiAgICB9LAogICAgY2hlY2tBbGxHcm91cDogZnVuY3Rpb24gY2hlY2tBbGxHcm91cChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICBpZiAoZGF0YS5pbmRleE9mKDApID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmluZGV4T2YoMSkgPiAtMSkgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjaykuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGRhdGEuaW5kZXhPZigwKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5tZW1iZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbDIgPSB0aGlzLmNvbHVtbnNJbnN0YWxNLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLnJha2VCYWNrKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCk7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICBhZGRDb3Vwb246IGZ1bmN0aW9uIGFkZENvdXBvbigpIHsKICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLnRhYmxlTGlzdCgpOwogICAgfSwKICAgIC8vIOinhOagvOS4reS8mOaDoOWIuOafpeeciwogICAgc2VlOiBmdW5jdGlvbiBzZWUoZGF0YSwgbmFtZSwgaW5kZXgpIHsKICAgICAgdGhpcy50YWJOYW1lID0gbmFtZTsKICAgICAgdGhpcy50YWJJbmRleCA9IGluZGV4OwogICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID09PSAxKSB7CiAgICAgICAgaWYgKGRhdGEuZGlza19pbmZvICE9ICcnKSB7CiAgICAgICAgICB0aGlzLmRpc2tfdHlwZSA9IDE7CiAgICAgICAgICB0aGlzLmRpc2tfaW5mbyA9IGRhdGEuZGlza19pbmZvOwogICAgICAgICAgdGhpcy5zdG9jayA9IGRhdGEuc3RvY2s7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnZpcnR1YWxfbGlzdC5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuZGlza190eXBlID0gMjsKICAgICAgICAgIHRoaXMudmlydHVhbExpc3QgPSBkYXRhLnZpcnR1YWxfbGlzdDsKICAgICAgICB9CiAgICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuZ29vZHNDb3Vwb24uaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi50YWJsZUxpc3QoMyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDkvJjmg6DliLgKICAgIGFkZEdvb2RzQ291cG9uOiBmdW5jdGlvbiBhZGRHb29kc0NvdXBvbihpbmRleCwgbmFtZSkgewogICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMudGFiTmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNDb3Vwb24uaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNDb3Vwb24udGFibGVMaXN0KDMpOwogICAgfSwKICAgIGFkZFZpcnR1YWw6IGZ1bmN0aW9uIGFkZFZpcnR1YWwoaW5kZXgsIG5hbWUpIHsKICAgICAgdGhpcy50YWJJbmRleCA9IGluZGV4OwogICAgICB0aGlzLnRhYk5hbWUgPSBuYW1lOwogICAgICB0aGlzLmFkZFZpcnR1YWxNb2RlbCA9IHRydWU7CiAgICB9LAogICAgLy8g5o+Q5Lqk5Y2h5a+G5L+h5oGvCiAgICB1cFZpcnR1YWw6IGZ1bmN0aW9uIHVwVmlydHVhbCgpIHsKICAgICAgaWYgKHRoaXMuZGlza190eXBlID09IDIpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmlydHVhbExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy52aXJ0dWFsTGlzdFtpXTsKICAgICAgICAgIGlmICghZWxlbWVudC52YWx1ZSkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fovpPlhaXmiYDmnInljaHlr4YnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAndmlydHVhbF9saXN0JywgdGhpcy52aXJ0dWFsTGlzdCk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3N0b2NrJywgdGhpcy52aXJ0dWFsTGlzdC5sZW5ndGgpOwogICAgICAgIHRoaXMudmlydHVhbExpc3QgPSBbewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJwogICAgICAgIH1dOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdkaXNrX2luZm8nLCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLmRpc2tfaW5mby5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnljaHlr4bkv6Hmga8nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLnN0b2NrKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5bqT5a2Y5pWw6YePJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdzdG9jaycsIE51bWJlcih0aGlzLnN0b2NrKSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3N0b2NrJywgTnVtYmVyKHRoaXMuc3RvY2spKTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnZGlza19pbmZvJywgdGhpcy5kaXNrX2luZm8pOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICd2aXJ0dWFsX2xpc3QnLCBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSBmYWxzZTsKICAgICAgdGhpcy5jbG9zZVZpcnR1YWwoKTsKICAgIH0sCiAgICAvLyAg5Yid5aeL5YyW5Y2h5a+G5pWw5o2u5L+h5oGvCiAgICBjbG9zZVZpcnR1YWw6IGZ1bmN0aW9uIGNsb3NlVmlydHVhbCgpIHsKICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSBmYWxzZTsKICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IFt7CiAgICAgICAga2V5OiAnJywKICAgICAgICB2YWx1ZTogJycKICAgICAgfV07CiAgICAgIHRoaXMuZGlza19pbmZvID0gJyc7CiAgICAgIHRoaXMuc3RvY2sgPSAwOwogICAgfSwKICAgIC8v5a+56LGh5pWw57uE5Y676YeN77ybCiAgICB1bmlxdWU6IGZ1bmN0aW9uIHVuaXF1ZShhcnIpIHsKICAgICAgdmFyIHJlcyA9IG5ldyBNYXAoKTsKICAgICAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24gKGFycikgewogICAgICAgIHJldHVybiAhcmVzLmhhcyhhcnIuaWQpICYmIHJlcy5zZXQoYXJyLmlkLCAxKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5LyY5oOg5Yi4aWTmlbDmja4KICAgIG5hbWVJZDogZnVuY3Rpb24gbmFtZUlkKGlkLCBuYW1lcykgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWQ7CiAgICAgIHRoaXMuY291cG9uTmFtZSA9IHRoaXMudW5pcXVlKG5hbWVzKTsKICAgIH0sCiAgICAvLyDojrflj5bkvJjmg6DliLjkv6Hmga8KICAgIGdvb2RzQ291cG9uSWQ6IGZ1bmN0aW9uIGdvb2RzQ291cG9uSWQoZGF0YSkgewogICAgICAvLyB0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0uY291cG9uX2lkID0gZGF0YS5pZDsKICAgICAgLy8gdGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLmNvdXBvbl9uYW1lID0gZGF0YS50aXRsZTsKICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ2NvdXBvbl9pZCcsIGRhdGEuaWQpOwogICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnY291cG9uX25hbWUnLCBkYXRhLnRpdGxlKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKG5hbWUpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5jb3Vwb25OYW1lLmluZGV4T2YobmFtZSk7CiAgICAgIHRoaXMuY291cG9uTmFtZS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB2YXIgY291cG9uSWRzID0gdGhpcy5mb3JtVmFsaWRhdGUuY291cG9uX2lkczsKICAgICAgY291cG9uSWRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlSWRzID0gY291cG9uSWRzOwogICAgICB0aGlzLnVwZGF0ZU5hbWUgPSB0aGlzLmNvdXBvbk5hbWU7CiAgICB9LAogICAgLy8g6L+Q6LS55qih5p2/CiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB0aGlzLnByb2R1Y3RHZXRUZW1wbGF0ZSgpOwogICAgfSwKICAgIC8vIOa3u+WKoOi/kOi0ueaooeadvwogICAgYWRkVGVtcDogZnVuY3Rpb24gYWRkVGVtcCgpIHsKICAgICAgdGhpcy4kcmVmcy50ZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWU7CiAgICB9LAogICAgLy8g5Yig6Zmk6KeG6aKR77ybCiAgICBkZWxWaWRlbzogZnVuY3Rpb24gZGVsVmlkZW8oKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kc2V0KHRoYXQuZm9ybVZhbGlkYXRlLCAndmlkZW9fbGluaycsICcnKTsKICAgICAgdGhhdC4kc2V0KHRoYXQsICdwcm9ncmVzcycsIDApOwogICAgICB0aGF0LnZpZGVvSW5nID0gZmFsc2U7CiAgICAgIHRoYXQudXBsb2FkLnZpZGVvSW5nID0gZmFsc2U7CiAgICB9LAogICAgemhfdXBsb2FkRmlsZTogZnVuY3Rpb24gemhfdXBsb2FkRmlsZSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZXRWaWRlbyA9PSAxKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHRoaXMudmlkZW9MaW5rOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMucmVmaWQuY2xpY2soKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOinhumikQogICAgemhfdXBsb2FkRmlsZV9jaGFuZ2U6IGZ1bmN0aW9uIHpoX3VwbG9hZEZpbGVfY2hhbmdlKGV2ZmlsZSkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBzdWZmaXggPSBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLm5hbWUuc3Vic3RyKGV2ZmlsZS50YXJnZXQuZmlsZXNbMF0ubmFtZS5pbmRleE9mKCcuJykpOwogICAgICBpZiAoc3VmZml4LmluZGV4T2YoJy5tcDQnKSA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygTVA05paH5Lu2Jyk7CiAgICAgIH0KICAgICAgdmFyIHR5cGVzID0gewogICAgICAgIGtleTogZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLAogICAgICAgIGNvbnRlbnRUeXBlOiBldmZpbGUudGFyZ2V0LmZpbGVzWzBdLnR5cGUKICAgICAgfTsKICAgICAgcHJvZHVjdEdldFRlbXBLZXlzQXBpKHR5cGVzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB0aGF0LiR2aWRlb0Nsb3VkLnZpZGVvVXBsb2FkKHsKICAgICAgICAgIHR5cGU6IHJlcy5kYXRhLnR5cGUsCiAgICAgICAgICBldmZpbGU6IGV2ZmlsZSwKICAgICAgICAgIHJlczogcmVzLAogICAgICAgICAgdXBsb2FkaW5nOiBmdW5jdGlvbiB1cGxvYWRpbmcoc3RhdHVzLCBwcm9ncmVzcykgewogICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IHN0YXR1czsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhhdC5wcm9ncmVzcyA9IDEwMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHJlcy51cmw7CiAgICAgICAgICB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+inhumikeS4iuS8oOaIkOWKnycpOwogICAgICAgICAgdGhhdC51cGxvYWQudmlkZW9JbmcgPSBmYWxzZTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKHJlcyk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkuIrkuIDpobXvvJsKICAgIHVwVGFiOiBmdW5jdGlvbiB1cFRhYigpIHsKICAgICAgdGhpcy5jdXJyZW50VGFiID0gKE51bWJlcih0aGlzLmN1cnJlbnRUYWIpIC0gMSkudG9TdHJpbmcoKTsKICAgIH0sCiAgICAvLyDkuIvkuIDpobXvvJsKICAgIGRvd25UYWI6IGZ1bmN0aW9uIGRvd25UYWIoKSB7CiAgICAgIHRoaXMuY3VycmVudFRhYiA9IChOdW1iZXIodGhpcy5jdXJyZW50VGFiKSArIDEpLnRvU3RyaW5nKCk7CiAgICB9LAogICAgLy8g5bGe5oCn5by556qX5Zue6LCD5Ye95pWw77ybCiAgICB1c2VyU2VhcmNoczogZnVuY3Rpb24gdXNlclNlYXJjaHMoKSB7CiAgICAgIHRoaXMucHJvZHVjdEdldFJ1bGUoKTsKICAgIH0sCiAgICAvLyDmt7vliqDop4TliJnvvJsKICAgIGFkZFJ1bGU6IGZ1bmN0aW9uIGFkZFJ1bGUoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkYXR0ci5tb2RhbCA9IHRydWU7CiAgICB9LAogICAgLy8g5om56YeP6K6+572u5YiG5L2j77ybCiAgICBicm9rZXJhZ2VTZXRVcDogZnVuY3Rpb24gYnJva2VyYWdlU2V0VXAoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLmlzX3N1Yi5pbmRleE9mKDEpID4gLTEpIHsKICAgICAgICBpZiAodGhhdC5tYW55QnJva2VyYWdlIDw9IDAgfHwgdGhhdC5tYW55QnJva2VyYWdlVHdvIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnov5TkvaPph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhhdC5mb3JtVmFsaWRhdGUuaXNfc3ViLmluZGV4T2YoMCkgPiAtMSkgewogICAgICAgIGlmICh0aGF0Lm1hbnlWaXBQcmljZSA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lya5ZGY5Lu35ZCO6L+b6KGM5om56YeP5re75YqgJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIubGVuZ3RoID09PSAyKSB7CiAgICAgICAgaWYgKHRoYXQubWFueUJyb2tlcmFnZSA8PSAwIHx8IHRoYXQubWFueUJyb2tlcmFnZVR3byA8PSAwIHx8IHRoYXQubWFueVZpcFByaWNlIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlrozph5Hpop3lkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoYXQubWFueUZvcm1WYWxpZGF0ZSksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2YWwgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdicm9rZXJhZ2UnLCB0aGF0Lm1hbnlCcm9rZXJhZ2UpOwogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jyb2tlcmFnZV90d28nLCB0aGF0Lm1hbnlCcm9rZXJhZ2VUd28pOwogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3ZpcF9wcmljZScsIHRoYXQubWFueVZpcFByaWNlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOaJuemHj+iuvue9ruS8muWRmOS7twogICAgdmlwUHJpY2VTZXRVcDogZnVuY3Rpb24gdmlwUHJpY2VTZXRVcCgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5tYW55VmlwUHJpY2UgPD0gMCkgewogICAgICAgIHJldHVybiB0aGF0LiRtZXNzYWdlLmVycm9yKCfor7floavlhpnkvJrlkZjku7flnKjov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoYXQubWFueUZvcm1WYWxpZGF0ZSksCiAgICAgICAgICBfc3RlcDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciB2YWwgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICd2aXBfcHJpY2UnLCB0aGF0Lm1hbnlWaXBQcmljZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5Y2h5a+GCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy52aXJ0dWFsTGlzdC5wdXNoKHsKICAgICAgICBrZXk6ICcnLAogICAgICAgIHZhbHVlOiAnJwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbljaHlr4bkv6Hmga8KICAgIGluaXRWaXJ0dWFsRGF0YTogZnVuY3Rpb24gaW5pdFZpcnR1YWxEYXRhKHN0YXR1cykgewogICAgICB0aGlzLnZpcnR1YWxMaXN0ID0gW3sKICAgICAgICBrZXk6ICcnLAogICAgICAgIHZhbHVlOiAnJwogICAgICB9XTsKICAgIH0sCiAgICByZW1vdmVWaXJ0dWFsOiBmdW5jdGlvbiByZW1vdmVWaXJ0dWFsKGluZGV4KSB7CiAgICAgIHRoaXMudmlydHVhbExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmuIXnqbrmibnph4/op4TmoLzkv6Hmga8KICAgIGJhdGNoRGVsOiBmdW5jdGlvbiBiYXRjaERlbCgpIHsKICAgICAgdGhpcy5vbmVGb3JtQmF0Y2ggPSBbewogICAgICAgIHBpYzogJycsCiAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgY29zdDogMCwKICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICBzdG9jazogMCwKICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgIHZvbHVtZTogMCwKICAgICAgICB2aXJ0dWFsX2xpc3Q6IFtdCiAgICAgIH1dOwogICAgfSwKICAgIGNvbmZpcm06IGZ1bmN0aW9uIGNvbmZpcm0oKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5jcmVhdGVCbnQgPSB0cnVlOwogICAgICBpZiAodGhhdC5mb3JtVmFsaWRhdGUuc2VsZWN0UnVsZS50cmltKCkubGVuZ3RoIDw9IDApIHsKICAgICAgICByZXR1cm4gdGhhdC4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5bGe5oCnJyk7CiAgICAgIH0KICAgICAgdGhhdC5ydWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtLnJ1bGVfbmFtZSA9PT0gdGhhdC5mb3JtVmFsaWRhdGUuc2VsZWN0UnVsZSkgewogICAgICAgICAgdGhhdC5hdHRycyA9IGl0ZW0ucnVsZV92YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluWVhuWTgeWxnuaAp+aooeadv++8mwogICAgcHJvZHVjdEdldFJ1bGU6IGZ1bmN0aW9uIHByb2R1Y3RHZXRSdWxlKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgcHJvZHVjdEdldFJ1bGVBcGkoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczgucnVsZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6L+Q6LS55qih5p2/77ybCiAgICBwcm9kdWN0R2V0VGVtcGxhdGU6IGZ1bmN0aW9uIHByb2R1Y3RHZXRUZW1wbGF0ZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIHByb2R1Y3RHZXRUZW1wbGF0ZUFwaSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzOS50ZW1wbGF0ZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yig6Zmk6KGo5qC85Lit55qE5bGe5oCnCiAgICBkZWxBdHRyVGFibGU6IGZ1bmN0aW9uIGRlbEF0dHJUYWJsZShpbmRleCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczEwLm1hbnlGb3JtVmFsaWRhdGUuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIF90aGlzMTAuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczEwLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgLy8g5om56YeP5re75YqgCiAgICBiYXRjaEFkZDogZnVuY3Rpb24gYmF0Y2hBZGQoKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5tYW55Rm9ybVZhbGlkYXRlKSwKICAgICAgICBfc3RlcDM7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2YWwgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdwaWMnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnByaWNlID4gMCkgewogICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAncHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0uY29zdCA+IDApIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Nvc3QnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5jb3N0KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5vdF9wcmljZSA+IDApIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ290X3ByaWNlJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnN0b2NrID4gMCkgewogICAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnc3RvY2snLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5zdG9jayk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0uYmFyX2NvZGUgIT09ICcnKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdiYXJfY29kZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS53ZWlnaHQgPiAwKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh2YWwsICd3ZWlnaHQnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS53ZWlnaHQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnZvbHVtZSA+IDApIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3ZvbHVtZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLnZvbHVtZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOaMiemSrgogICAgYWRkQnRuOiBmdW5jdGlvbiBhZGRCdG4oKSB7CiAgICAgIHRoaXMuY2xlYXJBdHRyKCk7CiAgICAgIHRoaXMuY3JlYXRlQm50ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0lwdXQgPSB0cnVlOwogICAgfSwKICAgIC8vIOeri+WNs+eUn+aIkAogICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKHR5cGUsIGlzQ29weSwgYXJyKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKICAgICAgZ2VuZXJhdGVBdHRyQXBpKHsKICAgICAgICBhdHRyczogdGhpcy5hdHRycywKICAgICAgICBpc192aXJ0dWFsOiBbMSwgMl0uaW5jbHVkZXModGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlKSA/IDEgOiAwLAogICAgICAgIHZpcnR1YWxfdHlwZTogdGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlCiAgICAgIH0sIHRoaXMuZm9ybVZhbGlkYXRlLmlkLCB0eXBlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgaW5mbyA9IHJlcy5kYXRhLmluZm8sCiAgICAgICAgICBoZWFkZXIxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbmZvLmhlYWRlcikpOwogICAgICAgIGlmIChfdGhpczExLiRyb3V0ZS5wYXJhbXMuaWQgIT09ICcwJyAmJiAoX3RoaXMxMS4kcm91dGUucXVlcnkudHlwZSAhPSAtMSB8fCB0eXBlKSAmJiAhaXNDb3B5KSB7CiAgICAgICAgICBfdGhpczExLm1hbnlGb3JtVmFsaWRhdGUgPSBpbmZvLnZhbHVlOwogICAgICAgIH0KICAgICAgICBpZiAoaXNDb3B5KSB7CiAgICAgICAgICBfdGhpczExLm1hbnlGb3JtVmFsaWRhdGUgPSBhcnI7CiAgICAgICAgfQogICAgICAgIHZhciBoZWFkZXIgPSBpbmZvLmhlYWRlcjsKICAgICAgICBpZiAoWzEsIDJdLmluY2x1ZGVzKF90aGlzMTEuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSkpIHsKICAgICAgICAgIF90aGlzMTEuY29sdW1uc0luc3RhbE0gPSBoZWFkZXI7CiAgICAgICAgICBfdGhpczExLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBoZWFkZXI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMTEuZm9ybVZhbGlkYXRlLmhlYWRlciA9IGhlYWRlcjE7CiAgICAgICAgICBfdGhpczExLmNvbHVtbnNJbnN0YWxNID0gaW5mby5oZWFkZXI7CiAgICAgICAgfQogICAgICAgIF90aGlzMTEuY2hlY2tBbGxHcm91cChfdGhpczExLmZvcm1WYWxpZGF0ZS5pc19zdWIpOwogICAgICAgIGlmICghX3RoaXMxMS4kcm91dGUucGFyYW1zLmlkICYmIF90aGlzMTEuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSAmJiAhaXNDb3B5KSB7CiAgICAgICAgICBfdGhpczExLm1hbnlGb3JtVmFsaWRhdGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0ucGljID0gX3RoaXMxMS5mb3JtVmFsaWRhdGUuaW1hZ2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMTEub25lRm9ybUJhdGNoWzBdLnBpYyA9IF90aGlzMTEuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMxMS4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICBfdGhpczExLm1hbnlGb3JtVmFsaWRhdGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGlmICghaXRlbS5waWMpIHsKICAgICAgICAgICAgICBpdGVtLnBpYyA9IF90aGlzMTEuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMTEub25lRm9ybUJhdGNoWzBdLnBpYyA9IF90aGlzMTEuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMTEuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPlua2iAogICAgb2ZmQXR0ck5hbWU6IGZ1bmN0aW9uIG9mZkF0dHJOYW1lKCkgewogICAgICB0aGlzLnNob3dJcHV0ID0gZmFsc2U7CiAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgIH0sCiAgICBjbGVhckF0dHI6IGZ1bmN0aW9uIGNsZWFyQXR0cigpIHsKICAgICAgdGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUgPSAnJzsKICAgICAgdGhpcy5mb3JtRHluYW1pYy5hdHRyc1ZhbCA9ICcnOwogICAgfSwKICAgIC8vIOWIoOmZpOinhOagvAogICAgaGFuZGxlUmVtb3ZlUm9sZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlUm9sZShpbmRleCkgewogICAgICB0aGlzLmF0dHJzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOWIoOmZpOWxnuaApwogICAgaGFuZGxlUmVtb3ZlMjogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlMihpdGVtLCBpbmRleCkgewogICAgICBpdGVtLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5re75Yqg6KeE5YiZ5ZCN56ewCiAgICBjcmVhdGVBdHRyTmFtZTogZnVuY3Rpb24gY3JlYXRlQXR0ck5hbWUoKSB7CiAgICAgIGlmICh0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSAmJiB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB2YWx1ZTogdGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUsCiAgICAgICAgICBkZXRhaWw6IFt0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsXQogICAgICAgIH07CiAgICAgICAgdGhpcy5hdHRycy5wdXNoKGRhdGEpOwogICAgICAgIHZhciBoYXNoID0ge307CiAgICAgICAgdGhpcy5hdHRycyA9IHRoaXMuYXR0cnMucmVkdWNlKGZ1bmN0aW9uIChpdGVtLCBuZXh0KSB7CiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICAgICAgaGFzaFtuZXh0LnZhbHVlXSA/ICcnIDogaGFzaFtuZXh0LnZhbHVlXSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSwgW10pOwogICAgICAgIHRoaXMuY2xlYXJBdHRyKCk7CiAgICAgICAgdGhpcy5zaG93SXB1dCA9IGZhbHNlOwogICAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWujOaVtOeahOinhOagvO+8gScpOwogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5bGe5oCnCiAgICBjcmVhdGVBdHRyOiBmdW5jdGlvbiBjcmVhdGVBdHRyKG51bSwgaWR4KSB7CiAgICAgIGlmIChudW0pIHsKICAgICAgICB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnB1c2gobnVtKTsKICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgIHRoaXMuYXR0cnNbaWR4XS5kZXRhaWwgPSB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgICAgIGhhc2hbbmV4dF0gPyAnJyA6IGhhc2hbbmV4dF0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWxnuaApycpOwogICAgICB9CiAgICB9LAogICAgLy8g5ZWG5ZOB5YiG57G777ybCiAgICBnb29kc0NhdGVnb3J5OiBmdW5jdGlvbiBnb29kc0NhdGVnb3J5KCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CiAgICAgIGNhc2NhZGVyTGlzdEFwaSgxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczEyLnRyZWVTZWxlY3QgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMTIuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6KeG6KeG5LiK5Lyg57G75Z6LCiAgICBjaGFuZ2VWaWRlbzogZnVuY3Rpb24gY2hhbmdlVmlkZW8oZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aWRlb19saW5rID0gJyc7CiAgICAgIHRoaXMudmlkZW9MaW5rID0gJyc7CiAgICB9LAogICAgLy8g5pS55Y+Y6KeE5qC8CiAgICBjaGFuZ2VTcGVjOiBmdW5jdGlvbiBjaGFuZ2VTcGVjKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1YiA9IFtdOwogICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIGlmIChpZCkgewogICAgICAgIGNoZWNrQWN0aXZpdHlBcGkoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge30pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMTMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9IF90aGlzMTMuc3BlY190eXBlOwogICAgICAgICAgX3RoaXMxMy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOivpuaDhQogICAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbygpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuc3BpblNob3cgPSB0cnVlOwogICAgICBwcm9kdWN0SW5mb0FwaSh0aGF0LiRyb3V0ZS5wYXJhbXMuaWQpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSByZXMuZGF0YS5wcm9kdWN0SW5mbzsKICAgICAgICAgICAgICAgIF90aGlzMTQuaW5mb0RhdGEoZGF0YSk7CiAgICAgICAgICAgICAgICBfdGhpczE0LnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczE0LnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgX3RoaXMxNC4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoaSkgewogICAgICB0aGlzLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZVswXTsKICAgIH0sCiAgICAvLyDlhbPpl63lm77niYfkuIrkvKDmqKHmgIHmoYYKICAgIGNoYW5nZUNhbmNlbDogZnVuY3Rpb24gY2hhbmdlQ2FuY2VsKG1zZykgewogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcDogZnVuY3Rpb24gbW9kYWxQaWNUYXAodGl0LCBwaWNUaXQsIGluZGV4KSB7CiAgICAgIHRoaXMubW9kYWxQaWMgPSB0cnVlOwogICAgICB0aGlzLmlzQ2hvaWNlID0gdGl0ID09PSAnZGFuJyA/ICfljZXpgIknIDogJ+WkmumAiSc7CiAgICAgIHRoaXMucGljVGl0ID0gcGljVGl0OwogICAgICB0aGlzLnRhYmxlSW5kZXggPSBpbmRleDsKICAgIH0sCiAgICAvLyDojrflj5bljZXlvKDlm77niYfkv6Hmga8KICAgIGdldFBpYzogZnVuY3Rpb24gZ2V0UGljKHBjKSB7CiAgICAgIHN3aXRjaCAodGhpcy5waWNUaXQpIHsKICAgICAgICBjYXNlICdkYW5Gcm9tJzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGl0ZW0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFswXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkYW5UYWJsZSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkdW9waSc6CiAgICAgICAgICB0aGlzLm9uZUZvcm1CYXRjaFt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZWNvbW1lbmRfaW1hZ2UnOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2ltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGVbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICB9CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpY0Q6IGZ1bmN0aW9uIGdldFBpY0QocGMpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwogICAgICB0aGlzLmltYWdlcyA9IHBjOwogICAgICB0aGlzLmltYWdlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBfdGhpczE1LmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2UucHVzaChpdGVtLmF0dF9kaXIpOwogICAgICAgIF90aGlzMTUuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZSA9IF90aGlzMTUuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5zcGxpY2UoMCwgMTApOwogICAgICB9KTsKICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbMF0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlWzBdOwogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g5o+Q5LqkCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLnR5cGUgPSBfdGhpczE2LnR5cGU7CiAgICAgICAgICBpZiAoX3RoaXMxNi5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLmF0dHJzID0gX3RoaXMxNi5vbmVGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLmhlYWRlciA9IFtdOwogICAgICAgICAgICBfdGhpczE2LmZvcm1WYWxpZGF0ZS5pdGVtcyA9IFtdOwogICAgICAgICAgICBfdGhpczE2LmZvcm1WYWxpZGF0ZS5pc19jb3B5ID0gMDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLml0ZW1zID0gX3RoaXMxNi5hdHRyczsKICAgICAgICAgICAgX3RoaXMxNi5mb3JtVmFsaWRhdGUuYXR0cnMgPSBfdGhpczE2Lm1hbnlGb3JtVmFsaWRhdGU7CiAgICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLmlzX2NvcHkgPSAxOwogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMTYuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSAmJiBfdGhpczE2Lm1hbnlGb3JtVmFsaWRhdGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3or7fngrnlh7vnlJ/miJDlpJrop4TmoLwnKTsKICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+354K55Ye755Sf5oiQ6KeE5qC877yBJyk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgaXRlbSA9IF90aGlzMTYuZm9ybVZhbGlkYXRlLmF0dHJzOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpdGVtW2ldLnN0b2NrID4gMTAwMDAwMCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLmVycm9yKCfop4TmoLzlupPlrZgt5bqT5a2Y6LaF5Ye657O757uf6IyD5Zu0KDEwMDAwMDApJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpczE2LmZvcm1WYWxpZGF0ZS5pc19zdWJbMF0gPT09IDEpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGl0ZW0ubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1bX2ldLmJyb2tlcmFnZSA9PT0gbnVsbCB8fCBpdGVtW19pXS5icm9rZXJhZ2VfdHdvID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNi4kbWVzc2FnZS5lcnJvcign6JCl6ZSA6K6+572uLSDkuIDkuoznuqfov5TkvaPkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGl0ZW0ubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICAgIGlmIChpdGVtW19pMl0udmlwX3ByaWNlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNi4kbWVzc2FnZS5lcnJvcign6JCl6ZSA6K6+572uLeS8muWRmOS7t+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMTYuZm9ybVZhbGlkYXRlLmlzX3N1Yi5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgaXRlbS5sZW5ndGg7IF9pMysrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1bX2kzXS5icm9rZXJhZ2UgPT09IG51bGwgfHwgaXRlbVtfaTNdLmJyb2tlcmFnZV90d28gPT09IG51bGwgfHwgaXRlbVtfaTNdLnZpcF9wcmljZSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJG1lc3NhZ2UuZXJyb3IoJ+iQpemUgOiuvue9ri0g5LiA5LqM57qn6L+U5L2j5ZKM5Lya5ZGY5Lu35LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMxNi5mb3JtVmFsaWRhdGUuZnJlaWdodCA9PSAzICYmICFfdGhpczE2LmZvcm1WYWxpZGF0ZS50ZW1wX2lkKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3ov5DotLnmqKHmnb/kuI3og73kuLrnqbonKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBhY3RpdmVJZHMgPSBbXTsKICAgICAgICAgIF90aGlzMTYuZGF0YUxhYmVsLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgYWN0aXZlSWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMTYuZm9ybVZhbGlkYXRlLmxhYmVsX2lkID0gYWN0aXZlSWRzOwogICAgICAgICAgaWYgKF90aGlzMTYub3BlblN1YmltaXQpIHJldHVybjsKICAgICAgICAgIF90aGlzMTYub3BlblN1YmltaXQgPSB0cnVlOwogICAgICAgICAgX3RoaXMxNi5mb3JtVmFsaWRhdGUuZGVzY3JpcHRpb24gPSBfdGhpczE2LmZvcm1hdFJpY2hUZXh0KF90aGlzMTYuY29udGVudCk7CiAgICAgICAgICBwcm9kdWN0QWRkQXBpKF90aGlzMTYuZm9ybVZhbGlkYXRlKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlcykgewogICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfdGhpczE2Lm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcwJykgewogICAgICAgICAgICAgICAgICAgICAgY2FjaGVEZWxldGUoKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTYuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2Lm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE2LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IF90aGlzMTYuJHJvdXRlUHJvU3RyICsgJy9wcm9kdWN0L3Byb2R1Y3RfbGlzdCcKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgX3RoaXMxNi5vcGVuU3ViaW1pdCA9IGZhbHNlOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgX3RoaXMxNi4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIV90aGlzMTYuZm9ybVZhbGlkYXRlLnN0b3JlX25hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgeWQjeensOS4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghX3RoaXMxNi5mb3JtVmFsaWRhdGUuY2F0ZV9pZC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgeWIhuexu+S4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghX3RoaXMxNi5mb3JtVmFsaWRhdGUudW5pdF9uYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3llYblk4HljZXkvY3kuI3og73kuLrnqbonKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIV90aGlzMTYuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJG1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgei9ruaSreWbvuS4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghX3RoaXMxNi5mb3JtVmFsaWRhdGUubG9naXN0aWNzLmxlbmd0aCAmJiAhX3RoaXMxNi5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLndhcm5pbmcoJ+eJqea1geiuvue9ri3oh7PlsJHpgInmi6nkuIDnp43nianmtYHmlrnlvI8nKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIV90aGlzMTYuZm9ybVZhbGlkYXRlLnRlbXBfaWQgJiYgX3RoaXMxNi5mb3JtVmFsaWRhdGUuZnJlaWdodCA9PSAzKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3ov5DotLnmqKHmnb/kuI3og73kuLrnqbonKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZVRlbXBsYXRlOiBmdW5jdGlvbiBjaGFuZ2VUZW1wbGF0ZShtc2cpIHsKICAgICAgdGhpcy50ZW1wbGF0ZSA9IG1zZzsKICAgIH0sCiAgICAvLyDooajljZXpqozor4EKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+WKqAogICAgaGFuZGxlRHJhZ1N0YXJ0OiBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSwgaXRlbSkgewogICAgICB0aGlzLmRyYWdnaW5nID0gaXRlbTsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW5kOiBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IG51bGw7CiAgICB9LAogICAgaGFuZGxlRHJhZ092ZXI6IGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGUpIHsKICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW50ZXI6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbnRlcihlLCBpdGVtKSB7CiAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7CiAgICAgIGlmIChpdGVtID09PSB0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBuZXdJdGVtcyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2UpOwogICAgICB2YXIgc3JjID0gbmV3SXRlbXMuaW5kZXhPZih0aGlzLmRyYWdnaW5nKTsKICAgICAgdmFyIGRzdCA9IG5ld0l0ZW1zLmluZGV4T2YoaXRlbSk7CiAgICAgIG5ld0l0ZW1zLnNwbGljZS5hcHBseShuZXdJdGVtcywgW2RzdCwgMF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShuZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSkpKTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlID0gbmV3SXRlbXM7CiAgICB9LAogICAgLy8g6L+H5ruk6K+m5oOF5YaF5a65CiAgICBmb3JtYXRSaWNoVGV4dDogZnVuY3Rpb24gZm9ybWF0UmljaFRleHQoaHRtbCkgewogICAgICB2YXIgbmV3Q29udGVudCA9IGh0bWwucmVwbGFjZSgvPGltZ1tePl0qPi9naSwgZnVuY3Rpb24gKG1hdGNoLCBjYXB0dXJlKSB7CiAgICAgICAgbWF0Y2ggPSBtYXRjaC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvc3R5bGU9J1teJ10rJy9naSwgJycpOwogICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgvd2lkdGg9IlteIl0rIi9naSwgJycpLnJlcGxhY2UoL3dpZHRoPSdbXiddKycvZ2ksICcnKTsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL2hlaWdodD0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvaGVpZ2h0PSdbXiddKycvZ2ksICcnKTsKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCBmdW5jdGlvbiAobWF0Y2gsIGNhcHR1cmUpIHsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL3dpZHRoOlteO10rOy9naSwgJ21heC13aWR0aDoxMDAlOycpLnJlcGxhY2UoL21heC1tYXgtd2lkdGg6W147XSs7L2dpLCAnbWF4LXdpZHRoOjEwMCU7Jyk7CiAgICAgICAgcmV0dXJuIG1hdGNoOwogICAgICB9KTsKICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZSgvPGJyW14+XSpcLz4vZ2ksICcnKTsKICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZSgvXDxpbWcvZ2ksICc8aW1nIHN0eWxlPSJtYXgtd2lkdGg6MTAwJTtoZWlnaHQ6YXV0bztkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjA7IicpOwogICAgICByZXR1cm4gbmV3Q29udGVudDsKICAgIH0KICB9LCAidW5pcXVlIiwgZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgdmFyIHJlcyA9IG5ldyBNYXAoKTsKICAgIHJldHVybiBhcnIuZmlsdGVyKGZ1bmN0aW9uIChhcnIpIHsKICAgICAgcmV0dXJuICFyZXMuaGFzKGFyci5wcm9kdWN0X2lkKSAmJiByZXMuc2V0KGFyci5wcm9kdWN0X2lkLCAxKTsKICAgIH0pOwogIH0pLCAiZ2V0UHJvZHVjdElkIiwgZnVuY3Rpb24gZ2V0UHJvZHVjdElkKGRhdGEpIHsKICAgIHRoaXMuZ29vZHNfbW9kYWxzID0gZmFsc2U7CiAgICB0aGlzLmZvcm1WYWxpZGF0ZS5yZWNvbW1lbmRfbGlzdCA9IHRoaXMudW5pcXVlKHRoaXMuZm9ybVZhbGlkYXRlLnJlY29tbWVuZF9saXN0LmNvbmNhdChkYXRhKSk7CiAgfSksICJjaGFuZ2VHb29kcyIsIGZ1bmN0aW9uIGNoYW5nZUdvb2RzKCkgewogICAgdGhpcy5nb29kc19tb2RhbHMgPSB0cnVlOwogICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ2V0TGlzdCgpOwogICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ29vZHNDYXRlZ29yeSgpOwogIH0pLCAiYWN0aXZlRGF0YSIsIGZ1bmN0aW9uIGFjdGl2ZURhdGEoZGF0YUxhYmVsKSB7CiAgICB0aGlzLmxhYmVsU2hvdyA9IGZhbHNlOwogICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhTGFiZWw7CiAgfSksICJsYWJlbENsb3NlIiwgZnVuY3Rpb24gbGFiZWxDbG9zZSgpIHsKICAgIHRoaXMubGFiZWxTaG93ID0gZmFsc2U7CiAgfSksICJjbG9zZUxhYmVsIiwgZnVuY3Rpb24gY2xvc2VMYWJlbChsYWJlbCkgewogICAgdmFyIGluZGV4ID0gdGhpcy5kYXRhTGFiZWwuaW5kZXhPZih0aGlzLmRhdGFMYWJlbC5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQuaWQgPT0gbGFiZWwuaWQ7CiAgICB9KVswXSk7CiAgICB0aGlzLmRhdGFMYWJlbC5zcGxpY2UoaW5kZXgsIDEpOwogIH0pLCAib3BlbkxhYmVsIiwgZnVuY3Rpb24gb3BlbkxhYmVsKHJvdykgewogICAgdGhpcy5sYWJlbFNob3cgPSB0cnVlOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gdGhpcy4kcmVmcy51c2VyTGFiZWwudXNlckxhYmVsKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhTGFiZWwpKSk7CiAgICB9KTsKICB9KSwgInVuaXF1ZXMiLCBmdW5jdGlvbiB1bmlxdWVzKHNvbmdzKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICB2YXIgZmluYWxSZXN1bHQgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29uZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0W3NvbmdzW2ldLnByb2R1Y3RfaWRdID0gc29uZ3NbaV07CiAgICB9CiAgICBmb3IgKHZhciBpdGVtIGluIHJlc3VsdCkgewogICAgICBmaW5hbFJlc3VsdC5wdXNoKHJlc3VsdFtpdGVtXSk7CiAgICB9CiAgICByZXR1cm4gZmluYWxSZXN1bHQ7CiAgfSksICJoYW5kbGVSZW1vdmVSZWNvbW1lbmQiLCBmdW5jdGlvbiBoYW5kbGVSZW1vdmVSZWNvbW1lbmQoaSkgewogICAgdGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2xpc3Quc3BsaWNlKGksIDEpOwogIH0pLCAid2F0Y2hBY3Rpdml0eSIsIGZ1bmN0aW9uIHdhdGNoQWN0aXZpdHkoKSB7CiAgICB2YXIgbWFya2V0aW5nID0gW107CiAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hY3Rpdml0eS5tYXAoZnVuY3Rpb24gKGVsKSB7CiAgICAgIGlmIChlbCA9PSAn6buY6K6kJykgewogICAgICAgIG1hcmtldGluZy5wdXNoKGVsKTsKICAgICAgfQogICAgICBpZiAoZWwgPT0gJ+enkuadgCcgJiYgY2hlY2tBcnJheSgnc2Vja2lsbCcpKSB7CiAgICAgICAgbWFya2V0aW5nLnB1c2goZWwpOwogICAgICB9CiAgICAgIGlmIChlbCA9PSAn56CN5Lu3JyAmJiBjaGVja0FycmF5KCdiYXJnYWluJykpIHsKICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgIH0KICAgICAgaWYgKGVsID09ICfmi7zlm6InICYmIGNoZWNrQXJyYXkoJ2NvbWJpbmF0aW9uJykpIHsKICAgICAgICBtYXJrZXRpbmcucHVzaChlbCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5mb3JtVmFsaWRhdGUuYWN0aXZpdHkgPSBtYXJrZXRpbmc7CiAgfSkKfTs="},null]}