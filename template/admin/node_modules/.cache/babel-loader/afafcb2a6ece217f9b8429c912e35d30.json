{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/appChat/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/appChat/index.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js","mtime":1746465018446},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbmllcWlhbnFpYW4vRG93bmxvYWRzL3hpbnhpYW5nbXUvQ1JNRUIvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICdlbW9qaS1hd2Vzb21lL2Rpc3QvY3NzL2dvb2dsZS5taW4uY3NzJzsKaW1wb3J0IGVtb2ppTGlzdCBmcm9tICdAL3V0aWxzL2Vtb2ppJzsKaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmltcG9ydCBTZXR0aW5nIGZyb20gJ0Avc2V0dGluZyc7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCB7IGNoYXRMaXN0QXBpLCBzZXJ2aWNlTGlzdEFwaSwgZ2V0QWR2QXBpLCBzZXJ2aWNlTGlzdCwgZ2V0T3JkZXJBcGksIHByb2R1Y3RBcGkgfSBmcm9tICdAL2FwaS9rZWZ1JzsKaW1wb3J0IGZlZWRCYWNrIGZyb20gJy4vZmVlZGJhY2snOwppbXBvcnQgeyBpc1BpY1VwbG9hZCB9IGZyb20gJ0AvdXRpbHMnOwp2YXIgY2h1bmsgPSBmdW5jdGlvbiBjaHVuayhhcnIsIG51bSkgewogIG51bSA9IG51bSAqIDEgfHwgMTsKICB2YXIgcmV0ID0gW107CiAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIGlmIChpICUgbnVtID09PSAwKSB7CiAgICAgIHJldC5wdXNoKFtdKTsKICAgIH0KICAgIHJldFtyZXQubGVuZ3RoIC0gMV0ucHVzaChpdGVtKTsKICB9KTsKICByZXR1cm4gcmV0Owp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NoYXRSb29tJywKICBhdXRoOiBmYWxzZSwKICBjb21wb25lbnRzOiB7CiAgICBmZWVkQmFjazogZmVlZEJhY2sKICB9LAogIHByb3BzOiB7CiAgICBjaGF0T3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGRpcmVjdGl2ZXM6IHsKICAgIGRyYWc6IHsKICAgICAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsKSB7CiAgICAgICAgdmFyIHggPSAwOwogICAgICAgIHZhciB5ID0gMDsKICAgICAgICB2YXIgbCA9IDA7CiAgICAgICAgdmFyIHQgPSAwOwogICAgICAgIHZhciBpc0Rvd24gPSBmYWxzZTsKICAgICAgICBlbC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB4ID0gZS5jbGllbnRYOwogICAgICAgICAgeSA9IGUuY2xpZW50WTsKICAgICAgICAgIGwgPSBlbC5wYXJlbnROb2RlLm9mZnNldExlZnQ7CiAgICAgICAgICB0ID0gZWwucGFyZW50Tm9kZS5vZmZzZXRUb3A7CiAgICAgICAgICBpc0Rvd24gPSB0cnVlOwogICAgICAgICAgZWwuc3R5bGUuY3Vyc29yID0gJ21vdmUnOwogICAgICAgICAgd2luZG93Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGlzRG93biA9PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbnggPSBlLmNsaWVudFg7CiAgICAgICAgICAgIHZhciBueSA9IGUuY2xpZW50WTsKICAgICAgICAgICAgdmFyIG5sID0gbnggLSAoeCAtIGwpOwogICAgICAgICAgICB2YXIgbnQgPSBueSAtICh5IC0gdCk7CiAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuc3R5bGUubGVmdCA9IG5sICsgJ3B4JzsKICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5zdHlsZS50b3AgPSBudCArICdweCc7CiAgICAgICAgICB9OwogICAgICAgICAgd2luZG93Lm9ubW91c2V1cCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaXNEb3duID0gZmFsc2U7CiAgICAgICAgICAgIGVsLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JzsKICAgICAgICAgICAgd2luZG93Lm9ubW91c2Vtb3ZlID0gbnVsbDsKICAgICAgICAgICAgd2luZG93Lm9ubW91c2V1cCA9IG51bGw7CiAgICAgICAgICB9OwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2NhdGlvbnM6ICIiLmNvbmNhdChsb2NhdGlvbi5vcmlnaW4pLAogICAgICBjaGFuZ2U6IGZhbHNlLAogICAgICBlbW9qaUdyb3VwOiBjaHVuayhlbW9qaUxpc3QsIDIwKSwKICAgICAgLy8g6KGo5oOF5YiX6KGoCiAgICAgIGVtb2ppTGlzdDogZW1vamlMaXN0LAogICAgICBlbW9qaVNob3c6IGZhbHNlLAogICAgICByZWNvcmRMaXN0OiBbXSwKICAgICAgbGltaXQ6IDIwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBjaGF0Q29udDogJycsCiAgICAgIHNlcnZpY2U6IG51bGwsCiAgICAgIHNlcnZpY2VEYXRhOiB7fSwKICAgICAgdXBsb2FkQWN0aW9uOiAnJywKICAgICAgbm90aWNlOiAnJywKICAgICAgYXVkaW86IG51bGwsCiAgICAgIG11dGVkOiBmYWxzZSwKICAgICAgYXVkaW9TcmM6ICcnLAogICAgICB1cHBlcklkOiAwLAogICAgICB1cGxvYWREYXRhOiB7fSwKICAgICAgaXNfdG91cmlzdDogMSwKICAgICAgLy8gMOeZu+W9leeKtuaAge+8jDHmnKrnmbvlvZXnirbmgIHmuLjlrqIKICAgICAgdGV4dDogJycsCiAgICAgIGlzTG9hZDogZmFsc2UsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHRvdXJpc3RfYXZhdGFyOiAnJywKICAgICAgLy/muLjlrqLlpLTlg48KICAgICAgdG91cmlzdF91aWQ6ICcnLAogICAgICAvL+a4uOWuomlkCiAgICAgIHRvVWlkOiAnJywKICAgICAgLy/lrqLmnI1pZAogICAgICBrdWZ1VG9rZW46ICcnIC8vIHRva2VuCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIG11dGVkOiBmdW5jdGlvbiBtdXRlZCh2YWx1ZSkgewogICAgICB0aGlzLmF1ZGlvLm11dGVkID0gdmFsdWU7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcmVjb3JkczogZnVuY3Rpb24gcmVjb3JkcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMucmVjb3JkTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICBpZiAobmV3IERhdGUoaXRlbS5hZGRfdGltZSkgLSBuZXcgRGF0ZShfdGhpcy5yZWNvcmRMaXN0W2luZGV4IC0gMV0uYWRkX3RpbWUpID49IDMwMDAwMCkgewogICAgICAgICAgICBpdGVtLnNob3cgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXRlbS5zaG93ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uc2hvdyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKGxvY2F0aW9uLmhyZWYuaW5kZXhPZigna2VmdScpICE9IC0xKSB0aGlzLnVwbG9hZEFjdGlvbiA9IFNldHRpbmcuYXBpQmFzZVVSTC5yZXBsYWNlKC9hZG1pbmFwaS8sICdrZWZ1YXBpJykgKyAnL3RvdXJpc3QvdXBsb2FkJzsKICAgIHZhciB0b2tlbiA9IENvb2tpZXMuZ2V0KCdhdXRoLl90b2tlbi5sb2NhbDEnKTsKICAgIHRoaXMua3VmdVRva2VuID0gdG9rZW4gPyB0b2tlbi5zcGxpdCgnQmVhcmVyICcpWzFdIDogJyc7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQuZW1vamlTaG93ID0gZmFsc2U7CiAgICB9KTsKICAgIGlmICh0aGlzLiR3ZWNoYXQuX2lzTW9iaWxlKCkpIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcva2VmdS9tb2JpbGVfdXNlcl9jaGF0Jyk7CiAgICB0aGlzLmdldE5vdGljZSgpOwogICAgU29ja2V0LnRoZW4oZnVuY3Rpb24gKHdzKSB7CiAgICAgIGlmIChfdGhpczIua3VmdVRva2VuKSB7CiAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICB0eXBlOiAnbG9naW4nLAogICAgICAgICAgZGF0YTogX3RoaXMyLmt1ZnVUb2tlbgogICAgICAgIH0pOwogICAgICB9CiAgICAgIF90aGlzMi5nZXRTZXJ2aWNlKCk7CiAgICAgIHdzLiRvbihbJ3JlcGx5JywgJ2NoYXQnXSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAoZGF0YS5tc25fdHlwZSA9PSAxKSB7CiAgICAgICAgICBkYXRhLm1zbiA9IF90aGlzMi5yZXBsYWNlX2VtKGRhdGEubXNuKTsKICAgICAgICB9CiAgICAgICAgX3RoaXMyLnJlY29yZExpc3QucHVzaChkYXRhKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMi4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnJlY29yZC5zY3JvbGxUb3AgPSB0aGlzLiRyZWZzLnJlY29yZC5zY3JvbGxIZWlnaHQgLSB0aGlzLiRyZWZzLnJlY29yZC5jbGllbnRIZWlnaHQ7CiAgICAgICAgICB9KTsKICAgICAgICB9LCAzMDApOwogICAgICB9KTsKICAgICAgLy8g55uR5ZCs5a6i5pyN6L2s5o6lCiAgICAgIHdzLiRvbigndG9fdHJhbnNmZXInLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzMi50b1VpZCA9IGRhdGEudG9VaWQ7CiAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiBfdGhpczIudG9VaWQKICAgICAgICAgIH0sCiAgICAgICAgICB0eXBlOiAndG9fY2hhdCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHdzLiRvbignc29ja2V0X2Vycm9yJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcign6L+e5o6l5aSx6LSlJyk7CiAgICAgIH0pOwogICAgICB3cy4kb24oJ2Vycl90aXAnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgIH0pOwogICAgICB3cy4kb24oJ3N1Y2Nlc3MnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzMi5pc190b3VyaXN0ID0gMDsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMudGV4dCA9IHRoaXMucmVwbGFjZV9lbSgnW2VtLXNtaWxpbmdfaW1wXScpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkxvb2s6IGZ1bmN0aW9uIG9uTG9vayhpZCkgewogICAgICB3aW5kb3cub3BlbigiIi5jb25jYXQobG9jYXRpb24ub3JpZ2luLCAiL2hvbWUvZ29vZHNfZGV0YWlsLyIpLmNvbmNhdChpZCkpOwogICAgfSwKICAgIC8vIOWFs+mXrQogICAgY2xvc2VDaGFuZ2U6IGZ1bmN0aW9uIGNsb3NlQ2hhbmdlKG1zZykgewogICAgICB0aGlzLmNoYW5nZSA9IG1zZzsKICAgIH0sCiAgICAvLyDnu5/kuIDlj5HpgIHlpITnkIYKICAgIHNlbmRNc2c6IGZ1bmN0aW9uIHNlbmRNc2cobXNuLCB0eXBlKSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgdHlwZTogJ2NoYXQnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIG1zbjogbXNuLAogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIGlzX3RvdXJpc3Q6IHRoaXMuaXNfdG91cmlzdCwKICAgICAgICAgIHRvX3VpZDogdGhpcy50b1VpZCwKICAgICAgICAgIHRvdXJpc3RfdWlkOiB0aGlzLnRvdXJpc3RfdWlkLAogICAgICAgICAgdG91cmlzdF9hdmF0YXI6IHRoaXMudG91cmlzdF9hdmF0YXIsCiAgICAgICAgICBmb3JtX3R5cGU6IHRoaXMuJHdlY2hhdC5pc1dlaXhpbigpID8gMSA6IDMKICAgICAgICB9CiAgICAgIH07CiAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgIHdzLnNlbmQob2JqKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6ZqP5py65a6i5pyNCiAgICBnZXRTZXJ2aWNlOiBmdW5jdGlvbiBnZXRTZXJ2aWNlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgc2VydmljZUxpc3RBcGkoewogICAgICAgIHRva2VuOiB0aGlzLmt1ZnVUb2tlbiB8fCAnJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuc2VydmljZURhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczMudXBwZXJJZCA9IDA7CiAgICAgICAgX3RoaXMzLnRvVWlkID0gcmVzLmRhdGEudWlkOwogICAgICAgIF90aGlzMy50b3VyaXN0X3VpZCA9IHJlcy5kYXRhLnRvdXJpc3RfdWlkOwogICAgICAgIF90aGlzMy50b3VyaXN0X2F2YXRhciA9IHJlcy5kYXRhLnRvdXJpc3RfYXZhdGFyOwogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiByZXMuZGF0YS51aWQsCiAgICAgICAgICAgIHRvdXJpc3RfdWlkOiBfdGhpczMudG91cmlzdF91aWQKICAgICAgICAgIH0sCiAgICAgICAgICB0eXBlOiAndG9fY2hhdCcKICAgICAgICB9OwogICAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgICAgd3Muc2VuZChvYmopOwogICAgICAgIH0pOwogICAgICAgIGlmIChfdGhpczMua3VmdVRva2VuKSB7CiAgICAgICAgICBfdGhpczMuZ2V0UmVjb3JkTGlzdCgpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICBfdGhpczMuY2hhbmdlID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgcm9vbUNsaWNrOiBmdW5jdGlvbiByb29tQ2xpY2soZXZlbnQpIHsKICAgICAgLy8gaWYgKAogICAgICAvLyAgICAgIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImVtb2ppLXBhbmVsIikgJiYKICAgICAgLy8gICAgICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJlbW9qaS1idG4iKSAmJgogICAgICAvLyAgICAgIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImljb24tYmlhb3FpbmciKSAmJgogICAgICAvLyAgICAgdGhpcy5lbW9qaVNob3cKICAgICAgLy8gKSB7CiAgICAgIC8vICAgICB0aGlzLmVtb2ppU2hvdyA9IGZhbHNlOwogICAgICAvLyB9CiAgICB9LAogICAgLy8gZW50ZXIg5Y+R6YCBCiAgICBjdHJsRW50ZXI6IGZ1bmN0aW9uIGN0cmxFbnRlcihlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuY2hhdENvbnQudHJpbSgpKSB7CiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpOwogICAgICB9CiAgICB9LAogICAgLy8g5YWz6Zet6IGK5aSp56qX5Y+jCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYXQtY2xvc2UnKTsKICAgIH0sCiAgICAvLyDpgInmi6nooajmg4UKICAgIHNlbGVjdEVtb2ppOiBmdW5jdGlvbiBzZWxlY3RFbW9qaShkYXRhKSB7CiAgICAgIHZhciB2YWwgPSAiWyIuY29uY2F0KGRhdGEsICJdIik7CiAgICAgIHRoaXMuY2hhdENvbnQgKz0gdmFsOwogICAgICB0aGlzLmVtb2ppU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOiBiuWkqeihqOaDhei9rOaNogogICAgcmVwbGFjZV9lbTogZnVuY3Rpb24gcmVwbGFjZV9lbShzdHIpIHsKICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xbZW0tKFtcc1xTXSopXF0vZywgIjxzcGFuIGNsYXNzPSdlbSBlbS0kMScvPjwvc3Bhbj4iKTsKICAgICAgcmV0dXJuIHN0cjsKICAgIH0sCiAgICBvblNjcm9sbDogZnVuY3Rpb24gb25TY3JvbGwoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LnRhcmdldC5zY3JvbGxUb3AgPD0gMzApIHsKICAgICAgICBpZiAodGhpcy5rdWZ1VG9rZW4pIHsKICAgICAgICAgIHRoaXMuZ2V0UmVjb3JkTGlzdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOiBiuWkqeiusOW9lQogICAgZ2V0UmVjb3JkTGlzdDogZnVuY3Rpb24gZ2V0UmVjb3JkTGlzdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmluaXNoZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgY2hhdExpc3RBcGkoewogICAgICAgIHVpZDogdGhpcy5zZXJ2aWNlRGF0YS51aWQsCiAgICAgICAgbGltaXQ6IHRoaXMubGltaXQsCiAgICAgICAgdXBwZXJJZDogdGhpcy51cHBlcklkLAogICAgICAgIHRva2VuOiB0aGlzLmt1ZnVUb2tlbgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgaWYgKGVsLm1zbl90eXBlID09IDEpIHsKICAgICAgICAgICAgZWwubXNuID0gX3RoaXM0LnJlcGxhY2VfZW0oZWwubXNuKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgc2VsZWN0b3IgPSAnJzsKICAgICAgICBpZiAoX3RoaXM0LnVwcGVySWQgPT0gMCkgewogICAgICAgICAgc2VsZWN0b3IgPSAiY2hhdF8iLmNvbmNhdChyZXMuZGF0YVtyZXMuZGF0YS5sZW5ndGggLSAxXS5pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGVjdG9yID0gImNoYXRfIi5jb25jYXQoX3RoaXM0LnJlY29yZExpc3RbMF0uaWQpOwogICAgICAgIH0KICAgICAgICBfdGhpczQucmVjb3JkTGlzdCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEpLCBfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXM0LnJlY29yZExpc3QpKTsKICAgICAgICBfdGhpczQudXBwZXJJZCA9IHJlcy5kYXRhLmxlbmd0aCA+IDAgPyByZXMuZGF0YVswXS5pZCA6IDA7CiAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpczQuZmluaXNoZWQgPSByZXMuZGF0YS5sZW5ndGggPCBfdGhpczQubGltaXQ7CiAgICAgICAgX3RoaXM0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLnNldFBhZ2VTY3JvbGxUbyhzZWxlY3Rvcik7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6K6+572u6aG16Z2i5rua5Yqo5L2N572uCiAgICBzZXRQYWdlU2Nyb2xsVG86IGZ1bmN0aW9uIHNldFBhZ2VTY3JvbGxUbyhzZWxlY3RvcikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChzZWxlY3RvcikgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBudW0gPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yKS5vZmZzZXRUb3ApIC0gNjA7CiAgICAgICAgICAgIF90aGlzNS4kcmVmcy5yZWNvcmQuc2Nyb2xsVG9wID0gbnVtOwogICAgICAgICAgfSwgMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdF9zY3JvbGwnKTsKICAgICAgICAgIF90aGlzNS4kcmVmcy5yZWNvcmQuc2Nyb2xsVG9wID0gY29udGFpbmVyLm9mZnNldEhlaWdodDsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAoX3RoaXM1LiRyZWZzLnJlY29yZC5zY3JvbGxUb3AgIT0gX3RoaXM1LiRyZWZzLnNjcm9sbEJveC5vZmZzZXRIZWlnaHQpIHsKICAgICAgICAgICAgICBfdGhpczUuJHJlZnMucmVjb3JkLnNjcm9sbFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0X3Njcm9sbCcpLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMzAwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOihqOaDheWMheaYvuekuumakOiXjwogICAgZW1vamlTd2l0Y2g6IGZ1bmN0aW9uIGVtb2ppU3dpdGNoKCkgewogICAgICB0aGlzLmVtb2ppU2hvdyA9ICF0aGlzLmVtb2ppU2hvdzsKICAgIH0sCiAgICAvLyDlj5HpgIHmtojmga8KICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZSgpIHsKICAgICAgdGhpcy5zZW5kTXNnKHRoaXMuY2hhdENvbnQsIDEpOwogICAgICB0aGlzLmNoYXRDb250ID0gJyc7CiAgICB9LAogICAgY2hhdDogZnVuY3Rpb24gY2hhdChkYXRhKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICBpZiAoZGF0YS51aWQgIT0gdGhpcy4kYXV0aC51c2VyLnVpZCAmJiB0aGlzLmF1ZGlvKSB7CiAgICAgICAgdGhpcy5hdWRpby5wbGF5KCk7CiAgICAgIH0KICAgICAgdGhpcy5yZWNvcmRMaXN0LnB1c2goZGF0YSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJHJlZnMucmVjb3JkLnNjcm9sbFRvcCA9IF90aGlzNi4kcmVmcy5yZWNvcmQuc2Nyb2xsSGVpZ2h0IC0gX3RoaXM2LiRyZWZzLnJlY29yZC5jbGllbnRIZWlnaHQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRHb29kczogZnVuY3Rpb24gc2VuZEdvb2RzKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgaWYgKHRoaXMuY2hhdE9wdGlvbnMuZ29vZHNJZCkgewogICAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBtc246IF90aGlzNy5jaGF0T3B0aW9ucy5nb29kc0lkLAogICAgICAgICAgICAgIHR5cGU6IDUsCiAgICAgICAgICAgICAgdG9fdWlkOiBfdGhpczcudG9VaWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogJ3RvX2NoYXQnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlbmRPcmRlcjogZnVuY3Rpb24gc2VuZE9yZGVyKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgaWYgKHRoaXMuY2hhdE9wdGlvbnMub3JkZXJJZCkgewogICAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgICAgd3Muc2VuZCh7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBtc246IF90aGlzOC5jaGF0T3B0aW9ucy5vcmRlcklkLAogICAgICAgICAgICAgIHR5cGU6IDYsCiAgICAgICAgICAgICAgdG9fdWlkOiBfdGhpczgudG9VaWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogJ3RvX2NoYXQnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoYXRFbmQ6IGZ1bmN0aW9uIGNoYXRFbmQoKSB7CiAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA+IDApIHsKICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFIDYuMCcpID4gMCkgewogICAgICAgICAgd2luZG93Lm9wZW5lciA9IG51bGw7CiAgICAgICAgICB3aW5kb3cuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2luZG93Lm9wZW4oJycsICdfdG9wJyk7CiAgICAgICAgICB3aW5kb3cudG9wLmNsb3NlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gMCkgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2Fib3V0OmJsYW5rICc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93Lm9wZW5lciA9IG51bGw7CiAgICAgICAgd2luZG93Lm9wZW4oJycsICdfc2VsZicsICcnKTsKICAgICAgICB3aW5kb3cuY2xvc2UoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOW5v+WRigogICAgZ2V0Tm90aWNlOiBmdW5jdGlvbiBnZXROb3RpY2UoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICBnZXRBZHZBcGkoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczkubm90aWNlID0gcmVzLmRhdGEuY29udGVudDsKICAgICAgfSk7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIGlmIChpc1BpY1VwbG9hZChmaWxlKSkgewogICAgICAgIHRoaXMudXBsb2FkRGF0YSA9IHsKICAgICAgICAgIGZpbGVuYW1lOiBmaWxlLAogICAgICAgICAgdG9rZW46IHRoaXMua3VmdVRva2VuCiAgICAgICAgfTsKICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICBfdGhpczEwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUZvcm1hdEVycm9yOiBmdW5jdGlvbiBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+WPquiDveaYryBqcGfjgIFqcGfjgIFqcGVn44CBZ2lmIOagvOW8jyEnKTsKICAgIH0sCiAgICB1cGxvYWRTdWNjZXNzOiBmdW5jdGlvbiB1cGxvYWRTdWNjZXNzKHJlcykgewogICAgICB0aGlzLnNlbmRNc2cocmVzLmRhdGEudXJsLCAzKTsKICAgIH0sCiAgICB1cGxvYWRFcnJvcjogZnVuY3Rpb24gdXBsb2FkRXJyb3IoZXJyb3IpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvcik7CiAgICB9CiAgfQp9Ow=="},null]}