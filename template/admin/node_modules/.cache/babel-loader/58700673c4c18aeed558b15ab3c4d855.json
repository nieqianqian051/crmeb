{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/goods/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/kefu/mobile/goods/list.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmltcG9ydCB7IHByb2R1Y3RDYXJ0LCBwcm9kdWN0SG90LCBwcm9kdWN0VmlzaXQgfSBmcm9tICdAL2FwaS9rZWZ1LmpzJzsKaW1wb3J0IHsgc2VydmljZUluZm8gfSBmcm9tICdAL2FwaS9rZWZ1X21vYmlsZSc7CmltcG9ydCBlbXB0eSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2VtcHR5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9kdWN0X2luZm8nLAogIGNvbXBvbmVudHM6IHsKICAgIGVtcHR5OiBlbXB0eQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wczogewogICAgICAgIGJhcjogewogICAgICAgICAgYmFja2dyb3VuZDogJyMzOTMyMzInLAogICAgICAgICAgb3BhY2l0eTogJy41JywKICAgICAgICAgIHNpemU6ICcycHgnCiAgICAgICAgfQogICAgICB9LAogICAgICBzZWFyY2hUeHQ6ICcnLAogICAgICB0YWJDdXI6IDAsCiAgICAgIHRhYkxpc3Q6IFt7CiAgICAgICAga2V5OiAwLAogICAgICAgIHRpdGxlOiAn6LSt5LmwJywKICAgICAgICBhcGk6ICdwcm9kdWN0Q2FydCcKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICB0aXRsZTogJ+i2s+i/uScsCiAgICAgICAgYXBpOiAncHJvZHVjdEhvdCcKICAgICAgfSwgewogICAgICAgIGtleTogMiwKICAgICAgICB0aXRsZTogJ+eDremUgCcsCiAgICAgICAgYXBpOiAncHJvZHVjdFZpc2l0JwogICAgICB9XSwKICAgICAgdG9VaWQ6ICcnLAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB0YWJDdXI6IGZ1bmN0aW9uIHRhYkN1cihuVmFsLCBvVmFsKSB7CiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICBpZiAoblZhbCA9PSAwKSByZXR1cm4gdGhpcy5nZXRCdXlMaXN0KCk7CiAgICAgIGlmIChuVmFsID09IDEpIHJldHVybiB0aGlzLmdldFZpc2l0KCk7CiAgICAgIGlmIChuVmFsID09IDIpIHJldHVybiB0aGlzLmdldFByb2R1Y3RIb3QoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBzZXJ2aWNlSW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB3aW5kb3cuZG9jdW1lbnQudGl0bGUgPSAiIi5jb25jYXQocmVzLmRhdGEuc2l0ZV9uYW1lLCAiIC0gXHU1NTQ2XHU1NEMxXHU1MjE3XHU4ODY4Iik7CiAgICB9KTsKICAgIHRoaXMudG9VaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50b1VpZDsKICAgIHRoaXMuZ2V0QnV5TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6LSt5Lmw6K6w5b2VCiAgICBnZXRCdXlMaXN0OiBmdW5jdGlvbiBnZXRCdXlMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBwcm9kdWN0Q2FydCh0aGlzLnRvVWlkLCB7CiAgICAgICAgc3RvcmVfbmFtZTogdGhpcy5zZWFyY2hUeHQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDng63plIDllYblk4EKICAgIGdldFByb2R1Y3RIb3Q6IGZ1bmN0aW9uIGdldFByb2R1Y3RIb3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBwcm9kdWN0SG90KHRoaXMudG9VaWQsIHsKICAgICAgICBzdG9yZV9uYW1lOiB0aGlzLnNlYXJjaFR4dAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIubGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDotrPov7kKICAgIGdldFZpc2l0OiBmdW5jdGlvbiBnZXRWaXNpdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHByb2R1Y3RWaXNpdCh0aGlzLnRvVWlkLCB7CiAgICAgICAgc3RvcmVfbmFtZTogdGhpcy5zZWFyY2hUeHQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o6o6YCBCiAgICBiaW5nR29vZHM6IGZ1bmN0aW9uIGJpbmdHb29kcyhpdGVtKSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgdHlwZTogJ2NoYXQnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIG1zbjogaXRlbS5pZCwKICAgICAgICAgIHR5cGU6IDUsCiAgICAgICAgICB0b191aWQ6IHRoaXMudG9VaWQKICAgICAgICB9CiAgICAgIH07CiAgICAgIFNvY2tldC50aGVuKGZ1bmN0aW9uICh3cykgewogICAgICAgIHdzLnNlbmQob2JqKTsKICAgICAgfSk7CiAgICAgIC8vIHRoaXMuYnVzLiRlbWl0KCdzZWxlY3RHb29kcycsaXRlbSkKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICAvLyDpobbpg6jpgInpobnljaHliIfmjaIKICAgIGJpbmRUYWI6IGZ1bmN0aW9uIGJpbmRUYWIoaXRlbSkgewogICAgICB0aGlzLnRhYkN1ciA9IGl0ZW0ua2V5OwogICAgfSwKICAgIC8vIOaQnOe0ogogICAgYmluZFNlYXJjaDogZnVuY3Rpb24gYmluZFNlYXJjaCgpIHsKICAgICAgaWYgKHRoaXMudGFiQ3VyID09IDApIHJldHVybiB0aGlzLmdldEJ1eUxpc3QoKTsKICAgICAgaWYgKHRoaXMudGFiQ3VyID09IDEpIHJldHVybiB0aGlzLmdldFZpc2l0KCk7CiAgICAgIGlmICh0aGlzLnRhYkN1ciA9PSAyKSByZXR1cm4gdGhpcy5nZXRQcm9kdWN0SG90KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Socket","productCart","productHot","productVisit","serviceInfo","empty","name","components","data","ops","bar","background","opacity","size","searchTxt","tabCur","tabList","key","title","api","toUid","list","watch","nVal","oVal","getBuyList","getVisit","getProductHot","created","then","res","window","document","concat","site_name","$route","query","methods","_this","store_name","_this2","_this3","bingGoods","item","obj","type","msn","id","to_uid","ws","send","$router","go","bindTab","bindSearch"],"sources":["src/pages/kefu/mobile/goods/list.vue"],"sourcesContent":["<template>\n  <div class=\"product_info\">\n    <div class=\"head\">\n      <div class=\"tab-box\">\n        <div\n          class=\"tab-item\"\n          :class=\"{ on: index == tabCur }\"\n          v-for=\"(item, index) in tabList\"\n          :key=\"index\"\n          @click=\"bindTab(item)\"\n        >\n          {{ item.title }}\n        </div>\n      </div>\n      <div class=\"search-box\">\n        <el-input\n          type=\"text\"\n          placeholder=\"搜索商品名称/ID\"\n          v-model=\"searchTxt\"\n          style=\"border-radius: 0.39rem; background: #f5f6f9\"\n          :search=\"true\"\n          @on-search=\"bindSearch\"\n        />\n      </div>\n    </div>\n    <div class=\"scroll-box\" v-if=\"list.length > 0\">\n      <vue-scroll :ops=\"ops\">\n        <div class=\"goods-item\" v-for=\"(item, index) in list\" :key=\"index\">\n          <img :src=\"item.image\" mode=\"\" />\n          <div class=\"info\">\n            <div class=\"title line2 mb15\">{{ item.store_name }}</div>\n            <div class=\"num\">\n              <span class=\"mr15\">库存 {{ item.stock }}</span>\n              <span>销量 {{ item.sales }}</span>\n            </div>\n          </div>\n          <div class=\"right\">\n            <div class=\"price\">￥{{ item.price }}</div>\n            <div class=\"btn\" @click=\"bingGoods(item)\">推送</div>\n          </div>\n        </div>\n        <div class=\"slot-load\" slot=\"load-deactive\"></div>\n        <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n      </vue-scroll>\n    </div>\n    <empty v-else msg=\"暂无商品信息\"></empty>\n  </div>\n</template>\n\n<script>\nimport { Socket } from '@/libs/socket';\nimport { productCart, productHot, productVisit } from '@/api/kefu.js';\nimport { serviceInfo } from '@/api/kefu_mobile';\nimport empty from '../../components/empty';\nexport default {\n  name: 'product_info',\n  components: {\n    empty,\n  },\n  data() {\n    return {\n      ops: {\n        bar: {\n          background: '#393232',\n          opacity: '.5',\n          size: '2px',\n        },\n      },\n      searchTxt: '',\n      tabCur: 0,\n      tabList: [\n        {\n          key: 0,\n          title: '购买',\n          api: 'productCart',\n        },\n        {\n          key: 1,\n          title: '足迹',\n          api: 'productHot',\n        },\n        {\n          key: 2,\n          title: '热销',\n          api: 'productVisit',\n        },\n      ],\n      toUid: '',\n      list: [],\n    };\n  },\n  watch: {\n    tabCur(nVal, oVal) {\n      this.list = [];\n      if (nVal == 0) return this.getBuyList();\n      if (nVal == 1) return this.getVisit();\n      if (nVal == 2) return this.getProductHot();\n    },\n  },\n  created() {\n    serviceInfo().then((res) => {\n      window.document.title = `${res.data.site_name} - 商品列表`;\n    });\n    this.toUid = this.$route.query.toUid;\n    this.getBuyList();\n  },\n  methods: {\n    // 购买记录\n    getBuyList() {\n      productCart(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 热销商品\n    getProductHot() {\n      productHot(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 足迹\n    getVisit() {\n      productVisit(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 推送\n    bingGoods(item) {\n      let obj = {\n        type: 'chat',\n        data: {\n          msn: item.id,\n          type: 5,\n          to_uid: this.toUid,\n        },\n      };\n      Socket.then((ws) => {\n        ws.send(obj);\n      });\n      // this.bus.$emit('selectGoods',item)\n      this.$router.go(-1);\n    },\n    // 顶部选项卡切换\n    bindTab(item) {\n      this.tabCur = item.key;\n    },\n    // 搜索\n    bindSearch() {\n      if (this.tabCur == 0) return this.getBuyList();\n      if (this.tabCur == 1) return this.getVisit();\n      if (this.tabCur == 2) return this.getProductHot();\n    },\n  },\n};\n</script>\n<style>\npage {\n  height: 100%;\n}\n</style>\n<style lang=\"stylus\" scoped>\n.product_info{\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    .head{\n        background: #fff;\n        .tab-box{\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            height: .8rem;\n            padding: 0 1.46rem;\n            .tab-item{\n                height: .8rem;\n                line-height: .8rem;\n                padding: 0 .15rem;\n                font-size: .28rem;\n                color: #282828;\n                &.on{\n                    border-bottom: 1px solid #3875EA;\n                }\n            }\n        }\n        .search-box{\n            display: flex;\n            align-items: center;\n            height: 1.28rem;\n            padding: 0 .3rem;\n            input{\n                display: block;\n                width: 100%;\n                height: .68rem;\n                padding-left: .7rem;\n                background: #F5F6F9;\n                border-radius: .39rem;\n                box-sizing: border-box;\n                /*background-image: url(\"../static/search.png\");*/\n            }\n        }\n    }\n    .scroll-box{\n        flex: 1;\n        overflow: hidden;\n        .goods-item{\n            display: flex;\n            padding: .3rem;\n            margin-top: .15rem;\n            background-color: #fff;\n            img{\n                width: 1.7rem;\n                height: 1.7rem;\n                border-radius: 0.06rem;\n            }\n            .info{\n                width: 3.26rem;\n                margin-left: .22rem;\n                .title{\n                    font-size: .28rem;\n                    color: #282828;\n                }\n                .num{\n                    margin-top: .1rem;\n                    font-size: .24rem;\n                    color: #9F9F9F;\n                }\n            }\n            .right{\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n                margin-left: .36rem;\n                .price{\n                    color: #F74C31;\n                }\n                .btn{\n                    width: 100%;\n                    height: .6rem;\n                    line-height: .6rem;\n                    text-align: center;\n                    color: #fff;\n                    background: #3875EA;\n                    border-radius: 0.06rem;\n                }\n            }\n        }\n    }\n}\n</style>\n"],"mappings":"AAkDA,SAAAA,MAAA;AACA,SAAAC,WAAA,EAAAC,UAAA,EAAAC,YAAA;AACA,SAAAC,WAAA;AACA,OAAAC,KAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAF,KAAA,EAAAA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,GAAA;QACAC,GAAA;UACAC,UAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA;MACAC,SAAA;MACAC,MAAA;MACAC,OAAA,GACA;QACAC,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,GACA;QACAF,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,GACA;QACAF,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,EACA;MACAC,KAAA;MACAC,IAAA;IACA;EACA;EACAC,KAAA;IACAP,MAAA,WAAAA,OAAAQ,IAAA,EAAAC,IAAA;MACA,KAAAH,IAAA;MACA,IAAAE,IAAA,mBAAAE,UAAA;MACA,IAAAF,IAAA,mBAAAG,QAAA;MACA,IAAAH,IAAA,mBAAAI,aAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACAxB,WAAA,GAAAyB,IAAA,WAAAC,GAAA;MACAC,MAAA,CAAAC,QAAA,CAAAd,KAAA,MAAAe,MAAA,CAAAH,GAAA,CAAAtB,IAAA,CAAA0B,SAAA;IACA;IACA,KAAAd,KAAA,QAAAe,MAAA,CAAAC,KAAA,CAAAhB,KAAA;IACA,KAAAK,UAAA;EACA;EACAY,OAAA;IACA;IACAZ,UAAA,WAAAA,WAAA;MAAA,IAAAa,KAAA;MACArC,WAAA,MAAAmB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAQ,KAAA,CAAAjB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAmB,aAAA,WAAAA,cAAA;MAAA,IAAAa,MAAA;MACAtC,UAAA,MAAAkB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAU,MAAA,CAAAnB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAkB,QAAA,WAAAA,SAAA;MAAA,IAAAe,MAAA;MACAtC,YAAA,MAAAiB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAW,MAAA,CAAApB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAkC,SAAA,WAAAA,UAAAC,IAAA;MACA,IAAAC,GAAA;QACAC,IAAA;QACArC,IAAA;UACAsC,GAAA,EAAAH,IAAA,CAAAI,EAAA;UACAF,IAAA;UACAG,MAAA,OAAA5B;QACA;MACA;MACApB,MAAA,CAAA6B,IAAA,WAAAoB,EAAA;QACAA,EAAA,CAAAC,IAAA,CAAAN,GAAA;MACA;MACA;MACA,KAAAO,OAAA,CAAAC,EAAA;IACA;IACA;IACAC,OAAA,WAAAA,QAAAV,IAAA;MACA,KAAA5B,MAAA,GAAA4B,IAAA,CAAA1B,GAAA;IACA;IACA;IACAqC,UAAA,WAAAA,WAAA;MACA,SAAAvC,MAAA,mBAAAU,UAAA;MACA,SAAAV,MAAA,mBAAAW,QAAA;MACA,SAAAX,MAAA,mBAAAY,aAAA;IACA;EACA;AACA","ignoreList":[]}]}