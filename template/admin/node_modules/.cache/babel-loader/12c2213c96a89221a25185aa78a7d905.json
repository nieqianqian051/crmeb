{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/utils/dealImg.js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/utils/dealImg.js","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZGV0YWlsc1RleHQpIHsKICBkZXRhaWxzVGV4dCA9IGRldGFpbHNUZXh0ICYmIGRlYWxJbWcoZGV0YWlsc1RleHQsIDApLnJlcGxhY2UoLzxicj4vZ2ksICI8YnIvPiIpLnJlcGxhY2UoLyZuYnNwOy9naSwgIiAiKTsKICBpZiAoIWRldGFpbHNUZXh0LmluY2x1ZGVzKCc8ZGl2IGNsYXNzPSJxbC1lZGl0b3IiPicpKSBkZXRhaWxzVGV4dCA9ICc8ZGl2IGNsYXNzPSJxbC1lZGl0b3IiPicgKyBkZXRhaWxzVGV4dCArICc8L2Rpdj4nOwogIHJldHVybiBkZXRhaWxzVGV4dDsKfQpmdW5jdGlvbiBkZWFsSW1nKGRldGFpbHNUZXh0LCBpbmRleCkgewogIHZhciBpbWdJbmRleCA9IGRldGFpbHNUZXh0LmluZGV4T2YoIjxpbWciLCBpbmRleCk7CiAgY29uc29sZS5sb2coaW1nSW5kZXgpOwogIGlmIChpbWdJbmRleCA9PSAtMSkgcmV0dXJuIGRldGFpbHNUZXh0OwogIGlmIChkZXRhaWxzVGV4dC5pbmRleE9mKCIvPiIsIGltZ0luZGV4KSA+IDApIHJldHVybiBkZXRhaWxzVGV4dDsKICB2YXIgZW5kSW5kZXggPSBkZXRhaWxzVGV4dC5pbmRleE9mKCI+IiwgaW1nSW5kZXgpOwogIHZhciBuZXdEZXRhaWxzVGV4dCA9IGRldGFpbHNUZXh0LnNsaWNlKDAsIGVuZEluZGV4KS5jb25jYXQoIi8+IiwgZGV0YWlsc1RleHQuc2xpY2UoZW5kSW5kZXggKyAxKSk7CiAgcmV0dXJuIGRlYWxJbWcobmV3RGV0YWlsc1RleHQsIGVuZEluZGV4ICsgMik7Cn0="},{"version":3,"names":["detailsText","dealImg","replace","includes","index","imgIndex","indexOf","console","log","endIndex","newDetailsText","slice","concat"],"sources":["/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/utils/dealImg.js"],"sourcesContent":["export default function (detailsText) {\n  detailsText = detailsText && dealImg(detailsText, 0).replace(/<br>/gi, \"<br/>\").replace(/&nbsp;/gi, \" \")\n  if (! detailsText.includes('<div class=\"ql-editor\">')) detailsText = '<div class=\"ql-editor\">' + detailsText + '</div>'\n  return detailsText\n}\n\nfunction dealImg(detailsText, index) {\n    const imgIndex = detailsText.indexOf(\"<img\", index)\n\tconsole.log(imgIndex)\n    if (imgIndex == -1) return detailsText\n\tif(detailsText.indexOf(\"/>\", imgIndex) > 0) return detailsText\n    const endIndex = detailsText.indexOf(\">\", imgIndex)\n    const newDetailsText = detailsText.slice(0, endIndex).concat(\"/>\", detailsText.slice(endIndex + 1))\n    return dealImg(newDetailsText, endIndex + 2)\n}\n"],"mappings":";;;;;;AAAA,eAAe,UAAUA,WAAW,EAAE;EACpCA,WAAW,GAAGA,WAAW,IAAIC,OAAO,CAACD,WAAW,EAAE,CAAC,CAAC,CAACE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAACA,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC;EACxG,IAAI,CAAEF,WAAW,CAACG,QAAQ,CAAC,yBAAyB,CAAC,EAAEH,WAAW,GAAG,yBAAyB,GAAGA,WAAW,GAAG,QAAQ;EACvH,OAAOA,WAAW;AACpB;AAEA,SAASC,OAAOA,CAACD,WAAW,EAAEI,KAAK,EAAE;EACjC,IAAMC,QAAQ,GAAGL,WAAW,CAACM,OAAO,CAAC,MAAM,EAAEF,KAAK,CAAC;EACtDG,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;EAClB,IAAIA,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAOL,WAAW;EACzC,IAAGA,WAAW,CAACM,OAAO,CAAC,IAAI,EAAED,QAAQ,CAAC,GAAG,CAAC,EAAE,OAAOL,WAAW;EAC3D,IAAMS,QAAQ,GAAGT,WAAW,CAACM,OAAO,CAAC,GAAG,EAAED,QAAQ,CAAC;EACnD,IAAMK,cAAc,GAAGV,WAAW,CAACW,KAAK,CAAC,CAAC,EAAEF,QAAQ,CAAC,CAACG,MAAM,CAAC,IAAI,EAAEZ,WAAW,CAACW,KAAK,CAACF,QAAQ,GAAG,CAAC,CAAC,CAAC;EACnG,OAAOR,OAAO,CAACS,cAAc,EAAED,QAAQ,GAAG,CAAC,CAAC;AAChD","ignoreList":[]}]}