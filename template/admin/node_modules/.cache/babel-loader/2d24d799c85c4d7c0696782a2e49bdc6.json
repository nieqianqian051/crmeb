{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/codeGeneration/components/FoundationFor.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/pages/system/codeGeneration/components/FoundationFor.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgeyBjcnVkTWVudXMsIGNydWRDb2x1bW5UeXBlLCBjcnVkRmlsZVBhdGggfSBmcm9tICdAL2FwaS9zeXN0ZW1Db2RlR2VuZXJhdGlvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnJywKICBwcm9wczogewogICAgZm91bmRhdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvdW5kYXRpb25SdWxlczogewogICAgICAgIC8vIHBpZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zljZUnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgdGFibGVOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6KGo5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIG1vZGVsTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaooeWdl+WQjScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBtZW51c0xpc3Q6IFtdLAogICAgICBjb2x1bW5UeXBlTGlzdDogW10sCiAgICAgIGZyb21UeXBlTGlzdDogW3sKICAgICAgICB2YWx1ZTogJzAnLAogICAgICAgIGxhYmVsOiAn5LiN55Sf5oiQJwogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdpbnB1dCcsCiAgICAgICAgbGFiZWw6ICdpbnB1dCcKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAndGV4dGFyZWEnLAogICAgICAgIGxhYmVsOiAndGV4dGFyZWEnCiAgICAgIH0sCiAgICAgIC8vIHsKICAgICAgLy8gICB2YWx1ZTogJ3NlbGVjdCcsCiAgICAgIC8vICAgbGFiZWw6ICdzZWxlY3QnLAogICAgICAvLyB9LAogICAgICB7CiAgICAgICAgdmFsdWU6ICdyYWRpbycsCiAgICAgICAgbGFiZWw6ICdyYWRpbycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnbnVtYmVyJywKICAgICAgICBsYWJlbDogJ251bWJlcicKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnZnJhbWVJbWFnZU9uZScsCiAgICAgICAgbGFiZWw6ICdmcmFtZUltYWdlT25lJwogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdmcmFtZUltYWdlcycsCiAgICAgICAgbGFiZWw6ICdmcmFtZUltYWdlcycKICAgICAgfV0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0YWJsZUZpZWxkOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENydWRNZW51cygpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGRpc2FibGVkSW5wdXQ6IGZ1bmN0aW9uIGRpc2FibGVkSW5wdXQoaW5kZXgpIHsKICAgICAgdmFyIGZpZWxkSW5mbyA9IHRoaXMudGFibGVGaWVsZFtpbmRleF07CiAgICAgIHZhciByZXMgPSBbJ2FkZFRpbWVzdGFtcHMnLCAnYWRkU29mdERlbGV0ZSddLmluY2x1ZGVzKHRoaXMudGFibGVGaWVsZFtpbmRleF0uZmllbGRfdHlwZSk7CiAgICAgIGlmIChmaWVsZEluZm8ucHJpbWFyeUtleSkgewogICAgICAgIHJlcyA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKGZpZWxkSW5mby5maWVsZCA9PT0gJ2RlbGV0ZV90aW1lJyAmJiBmaWVsZEluZm8uZmllbGRfdHlwZSA9PT0gJ3RpbWVzdGFtcCcpIHsKICAgICAgICByZXMgPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgaW5pdGZpZWxkOiBmdW5jdGlvbiBpbml0ZmllbGQoKSB7CiAgICAgIHRoaXMudGFibGVGaWVsZCA9IFtdOwogICAgfSwKICAgIGNoYW5nZUl0ZW1GaWVsZDogZnVuY3Rpb24gY2hhbmdlSXRlbUZpZWxkKGUsIGkpIHsKICAgICAgaWYgKGUgPT09ICdhZGRTb2Z0RGVsZXRlJykgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnRhYmxlRmllbGRbaV0sICdjb21tZW50JywgJ+S8quWIoOmZpCcpOwogICAgICB9CiAgICAgIGlmIChlID09PSAnYWRkVGltZXN0YW1wcycpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy50YWJsZUZpZWxkW2ldLCAnY29tbWVudCcsICfmt7vliqDlkozkv67mlLnml7bpl7QnKTsKICAgICAgfQogICAgfSwKICAgIGdldENydWRNZW51czogZnVuY3Rpb24gZ2V0Q3J1ZE1lbnVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjcnVkTWVudXMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5tZW51c0xpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICAgIGNydWRDb2x1bW5UeXBlKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuY29sdW1uVHlwZUxpc3QgPSByZXMuZGF0YS50eXBlczsKICAgICAgfSk7CiAgICB9LAogICAgZGVsOiBmdW5jdGlvbiBkZWwoaW5kZXgpIHsKICAgICAgdGhpcy50YWJsZUZpZWxkLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["crudMenus","crudColumnType","crudFilePath","name","props","foundation","type","Object","default","data","foundationRules","tableName","required","message","trigger","modelName","menusList","columnTypeList","fromTypeList","value","label","loading","tableField","created","getCrudMenus","mounted","methods","disabledInput","index","fieldInfo","res","includes","field_type","primaryKey","field","initfield","changeItemField","e","i","$set","_this","then","types","del","splice"],"sources":["src/pages/system/codeGeneration/components/FoundationFor.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <el-alert class=\"mb20\" closable>\n      <template v-slot:title>crud生成说明</template>\n      <template> 不能生成系统自带的表；已经生成过的表还能继续生成 </template>\n    </el-alert>\n    <el-form ref=\"foundation\" :model=\"foundation\" :rules=\"foundationRules\" label-width=\"100px\">\n      <el-form-item label=\"菜单：\">\n        <el-cascader\n          class=\"form-width\"\n          v-model=\"foundation.pid\"\n          size=\"small\"\n          :options=\"menusList\"\n          :props=\"{ checkStrictly: true, multiple: false, emitPath: false }\"\n          clearable\n        ></el-cascader>\n        <div class=\"tip\">选项，选择的菜单成功后会自动写入到此菜单下</div>\n      </el-form-item>\n      <el-form-item label=\"菜单名称：\">\n        <el-input class=\"form-width\" v-model=\"foundation.menuName\" placeholder=\"请输入菜单名称\"></el-input>\n        <div class=\"tip\">\n          生成菜单为可选项，不填写默认生成的菜单名称将为表名；生成后会把自动生成的权限默认加入该菜单下\n        </div>\n      </el-form-item>\n      <el-form-item label=\"模块名：\" prop=\"modelName\">\n        <el-input class=\"form-width\" v-model=\"foundation.modelName\" placeholder=\"请输入模块名\"></el-input>\n        <div class=\"tip\">模块名称为中文或者英文，用在接口名称前缀、表单头部标题</div>\n      </el-form-item>\n      <el-form-item label=\"表名：\" prop=\"tableName\">\n        <el-input class=\"form-width\" v-model=\"foundation.tableName\" placeholder=\"请输入表名\"></el-input>\n        <div class=\"tip\">\n          用于生成CRUD指定的表名，不需要携带表前缀；对于生成过的表将不能在进行生成；或者可以删除对应的文件重新生成！对应系统中重要的数据表将不允许生成！\n        </div>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { crudMenus, crudColumnType, crudFilePath } from '@/api/systemCodeGeneration';\n\nexport default {\n  name: '',\n  props: {\n    foundation: {\n      type: Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      foundationRules: {\n        // pid: [{ required: true, message: '请输入菜单', trigger: 'blur' }],\n        tableName: [{ required: true, message: '请输入表名', trigger: 'blur' }],\n        modelName: [{ required: true, message: '请输入模块名', trigger: 'blur' }],\n      },\n      menusList: [],\n      columnTypeList: [],\n      fromTypeList: [\n        {\n          value: '0',\n          label: '不生成',\n        },\n        {\n          value: 'input',\n          label: 'input',\n        },\n        {\n          value: 'textarea',\n          label: 'textarea',\n        },\n        // {\n        //   value: 'select',\n        //   label: 'select',\n        // },\n        {\n          value: 'radio',\n          label: 'radio',\n        },\n        {\n          value: 'number',\n          label: 'number',\n        },\n        {\n          value: 'frameImageOne',\n          label: 'frameImageOne',\n        },\n        {\n          value: 'frameImages',\n          label: 'frameImages',\n        },\n      ],\n      loading: false,\n      tableField: [],\n    };\n  },\n  created() {\n    this.getCrudMenus();\n  },\n  mounted() {},\n  methods: {\n    disabledInput(index) {\n      let fieldInfo = this.tableField[index];\n      let res = ['addTimestamps', 'addSoftDelete'].includes(this.tableField[index].field_type);\n      if (fieldInfo.primaryKey) {\n        res = true;\n      }\n      if (fieldInfo.field === 'delete_time' && fieldInfo.field_type === 'timestamp') {\n        res = true;\n      }\n      return res;\n    },\n    initfield() {\n      this.tableField = [];\n    },\n    changeItemField(e, i) {\n      if (e === 'addSoftDelete') {\n        this.$set(this.tableField[i], 'comment', '伪删除');\n      }\n      if (e === 'addTimestamps') {\n        this.$set(this.tableField[i], 'comment', '添加和修改时间');\n      }\n    },\n    getCrudMenus() {\n      crudMenus().then((res) => {\n        this.menusList = res.data;\n      });\n      crudColumnType().then((res) => {\n        this.columnTypeList = res.data.types;\n      });\n    },\n    del(index) {\n      this.tableField.splice(index, 1);\n    },\n  },\n};\n</script>\n<style lang=\"stylus\" scoped>\n.form-width {\n  width: 500px;\n}\n.item{\n  display flex\n  margin-bottom 10px\n  .row{\n    width 140px\n    margin-right 10px\n  }\n}\n</style>\n"],"mappings":";;AAuCA,SAAAA,SAAA,EAAAC,cAAA,EAAAC,YAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,UAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAA,SAAA;QACA;MACA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,eAAA;QACA;QACAC,SAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAC,SAAA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAE,SAAA;MACAC,cAAA;MACAC,YAAA,GACA;QACAC,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA;MACA;MACA;MACA;MACA;MACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAC,OAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACAC,aAAA,WAAAA,cAAAC,KAAA;MACA,IAAAC,SAAA,QAAAP,UAAA,CAAAM,KAAA;MACA,IAAAE,GAAA,sCAAAC,QAAA,MAAAT,UAAA,CAAAM,KAAA,EAAAI,UAAA;MACA,IAAAH,SAAA,CAAAI,UAAA;QACAH,GAAA;MACA;MACA,IAAAD,SAAA,CAAAK,KAAA,sBAAAL,SAAA,CAAAG,UAAA;QACAF,GAAA;MACA;MACA,OAAAA,GAAA;IACA;IACAK,SAAA,WAAAA,UAAA;MACA,KAAAb,UAAA;IACA;IACAc,eAAA,WAAAA,gBAAAC,CAAA,EAAAC,CAAA;MACA,IAAAD,CAAA;QACA,KAAAE,IAAA,MAAAjB,UAAA,CAAAgB,CAAA;MACA;MACA,IAAAD,CAAA;QACA,KAAAE,IAAA,MAAAjB,UAAA,CAAAgB,CAAA;MACA;IACA;IACAd,YAAA,WAAAA,aAAA;MAAA,IAAAgB,KAAA;MACAxC,SAAA,GAAAyC,IAAA,WAAAX,GAAA;QACAU,KAAA,CAAAxB,SAAA,GAAAc,GAAA,CAAArB,IAAA;MACA;MACAR,cAAA,GAAAwC,IAAA,WAAAX,GAAA;QACAU,KAAA,CAAAvB,cAAA,GAAAa,GAAA,CAAArB,IAAA,CAAAiC,KAAA;MACA;IACA;IACAC,GAAA,WAAAA,IAAAf,KAAA;MACA,KAAAN,UAAA,CAAAsB,MAAA,CAAAhB,KAAA;IACA;EACA;AACA","ignoreList":[]}]}