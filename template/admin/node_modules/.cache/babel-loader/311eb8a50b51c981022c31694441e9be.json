{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/breadcrumb/search.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/layout/navBars/breadcrumb/search.vue","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/vue-loader/lib/index.js","mtime":1746465019530}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBtZW51c1NlYXJjaCB9IGZyb20gJ0AvYXBpL3NldHRpbmcnOwppbXBvcnQgeyBnZXRBbGxTaWRlck1lbnUgfSBmcm9tICdAL2xpYnMvc3lzdGVtJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsYXlvdXRCcmVhZGNydW1iU2VhcmNoJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTaG93U2VhcmNoOiBmYWxzZSwKICAgICAgbWVudVF1ZXJ5OiAnJywKICAgICAgdGFnc1ZpZXdMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOaQnOe0ouW8ueeql+aJk+W8gAogICAgb3BlblNlYXJjaDogZnVuY3Rpb24gb3BlblNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5tZW51UXVlcnkgPSAnJzsKICAgICAgdGhpcy5pc1Nob3dTZWFyY2ggPSB0cnVlOwogICAgICB0aGlzLmluaXRUYWdlVmlldygpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJHJlZnMubGF5b3V0TWVudUF1dG9jb21wbGV0ZVJlZi5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmkJzntKLlvLnnqpflhbPpl60KICAgIGNsb3NlU2VhcmNoOiBmdW5jdGlvbiBjbG9zZVNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5pc1Nob3dTZWFyY2ggPSBmYWxzZTsKICAgICAgfSwgMTUwKTsKICAgIH0sCiAgICAvLyDoj5zljZXmkJzntKLmlbDmja7ov4fmu6QKICAgIG1lbnVTZWFyY2g6IGZ1bmN0aW9uIG1lbnVTZWFyY2gocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIGlmICghcXVlcnlTdHJpbmcpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5U3RyaW5nID8gdGhpcy50YWdzVmlld0xpc3QuZmlsdGVyKHRoaXMuY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSkgOiB0aGlzLnRhZ3NWaWV3TGlzdDsKICAgICAgICBjYihyZXN1bHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcXVlcnlEYXRhID0gewogICAgICAgICAga2V5d29yZDogcXVlcnlTdHJpbmcKICAgICAgICB9OwogICAgICAgIG1lbnVzU2VhcmNoKHF1ZXJ5RGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjYihyZXMuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDoj5zljZXmkJzntKLov4fmu6QKICAgIGNyZWF0ZUZpbHRlcjogZnVuY3Rpb24gY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gZnVuY3Rpb24gKHJlc3RhdXJhbnQpIHsKICAgICAgICByZXR1cm4gcmVzdGF1cmFudC5wYXRoLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpKSA+IC0xIHx8IHJlc3RhdXJhbnQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID4gLTEgfHwgX3RoaXMzLiR0KHJlc3RhdXJhbnQudGl0bGUpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpKSA+IC0xOwogICAgICB9OwogICAgfSwKICAgIC8vIOWIneWni+WMluiPnOWNleaVsOaNrgogICAgaW5pdFRhZ2VWaWV3OiBmdW5jdGlvbiBpbml0VGFnZVZpZXcoKSB7CiAgICAgIGlmICh0aGlzLnRhZ3NWaWV3TGlzdC5sZW5ndGggPiAwKSByZXR1cm4gZmFsc2U7CiAgICAgIHRoaXMudGFnc1ZpZXdMaXN0ID0gZ2V0QWxsU2lkZXJNZW51KHRoaXMuJHN0b3JlLnN0YXRlLnJvdXRlc0xpc3Qucm91dGVzTGlzdCk7CiAgICAgIC8vIHRoaXMuJHN0b3JlLnN0YXRlLnRhZ3NWaWV3Um91dGVzLnRhZ3NWaWV3Um91dGVzLm1hcCgodikgPT4gewogICAgICAvLyAJaWYgKCF2LmlzSGlkZSkgdGhpcy50YWdzVmlld0xpc3QucHVzaCh7IC4uLnYgfSk7CiAgICAgIC8vIH0pOwogICAgfSwKICAgIC8vIOW9k+WJjeiPnOWNlemAieS4reaXtgogICAgb25IYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIG9uSGFuZGxlU2VsZWN0KGl0ZW0pIHsKICAgICAgdmFyIHBhdGggPSBpdGVtLnBhdGgsCiAgICAgICAgcmVkaXJlY3QgPSBpdGVtLnJlZGlyZWN0OwogICAgICBpZiAoaXRlbS5pc0xpbmsgJiYgIWl0ZW0uaXNJZnJhbWUpIHdpbmRvdy5vcGVuKGl0ZW0uaXNMaW5rKTtlbHNlIGlmIChyZWRpcmVjdCkgdGhpcy4kcm91dGVyLnB1c2gocmVkaXJlY3QpO2Vsc2UgdGhpcy4kcm91dGVyLnB1c2gocGF0aCk7CiAgICAgIHRoaXMuY2xvc2VTZWFyY2goKTsKICAgIH0sCiAgICAvLyBpbnB1dCDlpLHljrvnhKbngrnml7YKICAgIG9uU2VhcmNoQmx1cjogZnVuY3Rpb24gb25TZWFyY2hCbHVyKCkgewogICAgICB0aGlzLmNsb3NlU2VhcmNoKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["menusSearch","getAllSiderMenu","name","data","isShowSearch","menuQuery","tagsViewList","methods","openSearch","_this","initTageView","$nextTick","$refs","layoutMenuAutocompleteRef","focus","closeSearch","_this2","setTimeout","menuSearch","queryString","cb","results","filter","createFilter","queryData","keyword","then","res","_this3","restaurant","path","toLowerCase","indexOf","title","$t","length","$store","state","routesList","onHandleSelect","item","redirect","isLink","isIframe","window","open","$router","push","onSearchBlur"],"sources":["src/layout/navBars/breadcrumb/search.vue"],"sourcesContent":["<template>\n  <div class=\"layout-search-dialog\">\n    <el-dialog :visible.sync=\"isShowSearch\" width=\"540px\" destroy-on-close :modal=\"false\" fullscreen :show-close=\"true\">\n      <el-autocomplete\n        v-model=\"menuQuery\"\n        :fetch-suggestions=\"menuSearch\"\n        :placeholder=\"$t('message.user.searchPlaceholder')\"\n        prefix-icon=\"el-icon-search\"\n        ref=\"layoutMenuAutocompleteRef\"\n        @select=\"onHandleSelect\"\n        @blur=\"onSearchBlur\"\n      >\n        <template slot-scope=\"{ item }\">\n          <div><i :class=\"item.icon\" class=\"mr10\"></i>{{ $t(item.title) }}</div>\n        </template>\n      </el-autocomplete>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { menusSearch } from '@/api/setting';\nimport { getAllSiderMenu } from '@/libs/system';\n\nexport default {\n  name: 'layoutBreadcrumbSearch',\n  data() {\n    return {\n      isShowSearch: false,\n      menuQuery: '',\n      tagsViewList: [],\n    };\n  },\n  methods: {\n    // 搜索弹窗打开\n    openSearch() {\n      this.menuQuery = '';\n      this.isShowSearch = true;\n      this.initTageView();\n      this.$nextTick(() => {\n        this.$refs.layoutMenuAutocompleteRef.focus();\n      });\n    },\n    // 搜索弹窗关闭\n    closeSearch() {\n      setTimeout(() => {\n        this.isShowSearch = false;\n      }, 150);\n    },\n    // 菜单搜索数据过滤\n    menuSearch(queryString, cb) {\n      if (!queryString) {\n        let results = queryString ? this.tagsViewList.filter(this.createFilter(queryString)) : this.tagsViewList;\n        cb(results);\n      } else {\n        let queryData = {\n          keyword: queryString,\n        };\n        menusSearch(queryData).then((res) => {\n          cb(res.data);\n        });\n      }\n    },\n    // 菜单搜索过滤\n    createFilter(queryString) {\n      return (restaurant) => {\n        return (\n          restaurant.path.toLowerCase().indexOf(queryString.toLowerCase()) > -1 ||\n          restaurant.title.toLowerCase().indexOf(queryString.toLowerCase()) > -1 ||\n          this.$t(restaurant.title).toLowerCase().indexOf(queryString.toLowerCase()) > -1\n        );\n      };\n    },\n    // 初始化菜单数据\n    initTageView() {\n      if (this.tagsViewList.length > 0) return false;\n      this.tagsViewList = getAllSiderMenu(this.$store.state.routesList.routesList);\n      // this.$store.state.tagsViewRoutes.tagsViewRoutes.map((v) => {\n      // \tif (!v.isHide) this.tagsViewList.push({ ...v });\n      // });\n    },\n    // 当前菜单选中时\n    onHandleSelect(item) {\n      let { path, redirect } = item;\n      if (item.isLink && !item.isIframe) window.open(item.isLink);\n      else if (redirect) this.$router.push(redirect);\n      else this.$router.push(path);\n      this.closeSearch();\n    },\n    // input 失去焦点时\n    onSearchBlur() {\n      this.closeSearch();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.layout-search-dialog {\n  ::v-deep .el-dialog {\n    box-shadow: unset !important;\n    border-radius: 0 !important;\n    background: rgba(0, 0, 0, 0.5);\n  }\n  ::v-deep .el-autocomplete {\n    width: 560px;\n    position: absolute;\n    top: 100px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n}\n::v-deep .el-dialog__header {\n  border: none !important;\n}\n::v-deep .el-input--small .el-input__inner {\n  height: 36px;\n  line-height: 36px;\n}\n</style>\n"],"mappings":";;;AAqBA,SAAAA,WAAA;AACA,SAAAC,eAAA;AAEA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,YAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,KAAA;MACA,KAAAJ,SAAA;MACA,KAAAD,YAAA;MACA,KAAAM,YAAA;MACA,KAAAC,SAAA;QACAF,KAAA,CAAAG,KAAA,CAAAC,yBAAA,CAAAC,KAAA;MACA;IACA;IACA;IACAC,WAAA,WAAAA,YAAA;MAAA,IAAAC,MAAA;MACAC,UAAA;QACAD,MAAA,CAAAZ,YAAA;MACA;IACA;IACA;IACAc,UAAA,WAAAA,WAAAC,WAAA,EAAAC,EAAA;MACA,KAAAD,WAAA;QACA,IAAAE,OAAA,GAAAF,WAAA,QAAAb,YAAA,CAAAgB,MAAA,MAAAC,YAAA,CAAAJ,WAAA,UAAAb,YAAA;QACAc,EAAA,CAAAC,OAAA;MACA;QACA,IAAAG,SAAA;UACAC,OAAA,EAAAN;QACA;QACAnB,WAAA,CAAAwB,SAAA,EAAAE,IAAA,WAAAC,GAAA;UACAP,EAAA,CAAAO,GAAA,CAAAxB,IAAA;QACA;MACA;IACA;IACA;IACAoB,YAAA,WAAAA,aAAAJ,WAAA;MAAA,IAAAS,MAAA;MACA,iBAAAC,UAAA;QACA,OACAA,UAAA,CAAAC,IAAA,CAAAC,WAAA,GAAAC,OAAA,CAAAb,WAAA,CAAAY,WAAA,YACAF,UAAA,CAAAI,KAAA,CAAAF,WAAA,GAAAC,OAAA,CAAAb,WAAA,CAAAY,WAAA,YACAH,MAAA,CAAAM,EAAA,CAAAL,UAAA,CAAAI,KAAA,EAAAF,WAAA,GAAAC,OAAA,CAAAb,WAAA,CAAAY,WAAA;MAEA;IACA;IACA;IACArB,YAAA,WAAAA,aAAA;MACA,SAAAJ,YAAA,CAAA6B,MAAA;MACA,KAAA7B,YAAA,GAAAL,eAAA,MAAAmC,MAAA,CAAAC,KAAA,CAAAC,UAAA,CAAAA,UAAA;MACA;MACA;MACA;IACA;IACA;IACAC,cAAA,WAAAA,eAAAC,IAAA;MACA,IAAAV,IAAA,GAAAU,IAAA,CAAAV,IAAA;QAAAW,QAAA,GAAAD,IAAA,CAAAC,QAAA;MACA,IAAAD,IAAA,CAAAE,MAAA,KAAAF,IAAA,CAAAG,QAAA,EAAAC,MAAA,CAAAC,IAAA,CAAAL,IAAA,CAAAE,MAAA,OACA,IAAAD,QAAA,OAAAK,OAAA,CAAAC,IAAA,CAAAN,QAAA,OACA,KAAAK,OAAA,CAAAC,IAAA,CAAAjB,IAAA;MACA,KAAAf,WAAA;IACA;IACA;IACAiC,YAAA,WAAAA,aAAA;MACA,KAAAjC,WAAA;IACA;EACA;AACA","ignoreList":[]}]}