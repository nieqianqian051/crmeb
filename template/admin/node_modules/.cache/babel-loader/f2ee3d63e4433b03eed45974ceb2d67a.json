{"remainingRequest":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js!/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/libs/util.js","dependencies":[{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/src/libs/util.js","mtime":1719467759000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/babel.config.js","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/.babelrc","mtime":1679965410000},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":1746465018509},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/thread-loader/dist/cjs.js","mtime":1746465018446},{"path":"/Users/nieqianqian/Downloads/xinxiangmu/CRMEB/template/admin/node_modules/babel-loader/lib/index.js","mtime":1746465024347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbmllcWlhbnFpYW4vRG93bmxvYWRzL3hpbnhpYW5nbXUvQ1JNRUIvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL25pZXFpYW5xaWFuL0Rvd25sb2Fkcy94aW54aWFuZ211L0NSTUVCL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIHwgQ1JNRUIgWyBDUk1FQui1i+iDveW8gOWPkeiAhe+8jOWKqeWKm+S8geS4muWPkeWxlSBdCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gfCBDb3B5cmlnaHQgKGMpIDIwMTZ+MjAyMyBodHRwczovL3d3dy5jcm1lYi5jb20gQWxsIHJpZ2h0cyByZXNlcnZlZC4KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyB8IExpY2Vuc2VkIENSTUVC5bm25LiN5piv6Ieq55Sx6L2v5Lu277yM5pyq57uP6K645Y+v5LiN6IO95Y675o6JQ1JNRULnm7jlhbPniYjmnYMKLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyB8IEF1dGhvcjogQ1JNRUIgVGVhbSA8YWRtaW5AY3JtZWIuY29tPgovLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnOwovLyBjb29raWXkv53lrZjnmoTlpKnmlbAKaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCB7IGZvckVhY2gsIGhhc09uZU9mLCBvYmpFcXVhbCB9IGZyb20gJ0AvbGlicy90b29scyc7CmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7CnZhciB0aXRsZSA9IGNvbmZpZy50aXRsZSwKICB1c2VJMThuID0gY29uZmlnLnVzZUkxOG47CgovLyDorr7nva5zZXRDb29raWVz77ybCi8vIHNldFRva2VuCmV4cG9ydCB2YXIgc2V0Q29va2llcyA9IGZ1bmN0aW9uIHNldENvb2tpZXMoa2V5LCB2YWwsIGNvb2tpZUV4cGlyZXMpIHsKICBDb29raWVzLnNldChrZXksIHZhbCwgewogICAgZXhwaXJlczogY29va2llRXhwaXJlcyB8fCAxCiAgfSk7Cn07Ci8vIOiOt+WPlmdldENvb2tpZXPvvJsKLy8gZ2V0VG9rZW4KZXhwb3J0IHZhciBnZXRDb29raWVzID0gZnVuY3Rpb24gZ2V0Q29va2llcyhrZXkpIHsKICByZXR1cm4gQ29va2llcy5nZXQoa2V5KTsKfTsKZXhwb3J0IHZhciByZW1vdmVDb29raWVzID0gZnVuY3Rpb24gcmVtb3ZlQ29va2llcyhrZXkpIHsKICByZXR1cm4gQ29va2llcy5yZW1vdmUoa2V5KTsKfTsKZXhwb3J0IHZhciBoYXNDaGlsZCA9IGZ1bmN0aW9uIGhhc0NoaWxkKGl0ZW0pIHsKICByZXR1cm4gaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCAhPT0gMDsKfTsKdmFyIHNob3dUaGlzTWVudUVsZSA9IGZ1bmN0aW9uIHNob3dUaGlzTWVudUVsZShpdGVtLCBhY2Nlc3MpIHsKICBpZiAoaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5hY2Nlc3MgJiYgaXRlbS5tZXRhLmFjY2Vzcy5sZW5ndGgpIHsKICAgIGlmIChoYXNPbmVPZihpdGVtLm1ldGEuYWNjZXNzLCBhY2Nlc3MpKSByZXR1cm4gdHJ1ZTtlbHNlIHJldHVybiBmYWxzZTsKICB9IGVsc2UgcmV0dXJuIHRydWU7Cn07Ci8qKgogKiBAcGFyYW0ge0FycmF5fSBsaXN0IOmAmui/h+i3r+eUseWIl+ihqOW+l+WIsOiPnOWNleWIl+ihqAogKiBAcmV0dXJucyB7QXJyYXl9CiAqLwp2YXIgX2dldE1lbnVCeVJvdXRlciA9IGZ1bmN0aW9uIGdldE1lbnVCeVJvdXRlcihsaXN0LCBhY2Nlc3MpIHsKICB2YXIgcmVzID0gW107CiAgZm9yRWFjaChsaXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKCFpdGVtLm1ldGEgfHwgaXRlbS5tZXRhICYmICFpdGVtLm1ldGEuaGlkZUluTWVudSkgewogICAgICB2YXIgb2JqID0gewogICAgICAgIGljb246IGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEuaWNvbiB8fCAnJywKICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgbWV0YTogaXRlbS5tZXRhCiAgICAgIH07CiAgICAgIGlmICgoaGFzQ2hpbGQoaXRlbSkgfHwgaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5zaG93QWx3YXlzKSAmJiBzaG93VGhpc01lbnVFbGUoaXRlbSwgYWNjZXNzKSkgewogICAgICAgIG9iai5jaGlsZHJlbiA9IF9nZXRNZW51QnlSb3V0ZXIoaXRlbS5jaGlsZHJlbiwgYWNjZXNzKTsKICAgICAgfQogICAgICBpZiAoaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5ocmVmKSBvYmouaHJlZiA9IGl0ZW0ubWV0YS5ocmVmOwogICAgICBpZiAoc2hvd1RoaXNNZW51RWxlKGl0ZW0sIGFjY2VzcykpIHJlcy5wdXNoKG9iaik7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlczsKfTsKCi8qKgogKiBAcGFyYW0ge0FycmF5fSByb3V0ZU1ldGNoZWQg5b2T5YmN6Lev55SxbWV0Y2hlZAogKiBAcmV0dXJucyB7QXJyYXl9CiAqLwpleHBvcnQgeyBfZ2V0TWVudUJ5Um91dGVyIGFzIGdldE1lbnVCeVJvdXRlciB9OwpleHBvcnQgdmFyIGdldEJyZWFkQ3J1bWJMaXN0ID0gZnVuY3Rpb24gZ2V0QnJlYWRDcnVtYkxpc3Qocm91dGUsIGhvbWVSb3V0ZSkgewogIHZhciBfaG9tZVJvdXRlJG1ldGE7CiAgdmFyIGhvbWVJdGVtID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBob21lUm91dGUpLCB7fSwgewogICAgaWNvbjogKF9ob21lUm91dGUkbWV0YSA9IGhvbWVSb3V0ZS5tZXRhKSA9PT0gbnVsbCB8fCBfaG9tZVJvdXRlJG1ldGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ob21lUm91dGUkbWV0YS5pY29uCiAgfSk7CiAgdmFyIHJvdXRlTWV0Y2hlZCA9IHJvdXRlLm1hdGNoZWQ7CiAgaWYgKHJvdXRlTWV0Y2hlZC5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5uYW1lID09PSBob21lUm91dGUubmFtZTsKICB9KSkgcmV0dXJuIFtob21lSXRlbV07CiAgdmFyIHJlcyA9IHJvdXRlTWV0Y2hlZC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm1ldGEgPT09IHVuZGVmaW5lZCB8fCAhaXRlbS5tZXRhLmhpZGVJbkJyZWFkOwogIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgdmFyIG1ldGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBpdGVtLm1ldGEpOwogICAgaWYgKG1ldGEudGl0bGUgJiYgdHlwZW9mIG1ldGEudGl0bGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgbWV0YS5fX3RpdGxlSXNGdW5jdGlvbl9fID0gdHJ1ZTsKICAgICAgbWV0YS50aXRsZSA9IG1ldGEudGl0bGUocm91dGUpOwogICAgfQogICAgdmFyIG9iaiA9IHsKICAgICAgaWNvbjogaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS5pY29uIHx8ICcnLAogICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgIG1ldGE6IG1ldGEKICAgIH07CiAgICByZXR1cm4gb2JqOwogIH0pOwogIHJlcyA9IHJlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiAhaXRlbS5tZXRhLmhpZGVJbk1lbnU7CiAgfSk7CiAgcmV0dXJuIFtfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhvbWVJdGVtKSwge30sIHsKICAgIHRvOiBob21lUm91dGUucGF0aAogIH0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOwp9OwpleHBvcnQgdmFyIGdldFJvdXRlVGl0bGVIYW5kbGVkID0gZnVuY3Rpb24gZ2V0Um91dGVUaXRsZUhhbmRsZWQocm91dGUpIHsKICB2YXIgcm91dGVyID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUpOwogIHZhciBtZXRhID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUubWV0YSk7CiAgdmFyIHRpdGxlID0gJyc7CiAgaWYgKG1ldGEudGl0bGUpIHsKICAgIGlmICh0eXBlb2YgbWV0YS50aXRsZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBtZXRhLl9fdGl0bGVJc0Z1bmN0aW9uX18gPSB0cnVlOwogICAgICB0aXRsZSA9IG1ldGEudGl0bGUocm91dGVyKTsKICAgIH0gZWxzZSB0aXRsZSA9IG1ldGEudGl0bGU7CiAgfQogIG1ldGEudGl0bGUgPSB0aXRsZTsKICByb3V0ZXIubWV0YSA9IG1ldGE7CiAgcmV0dXJuIHJvdXRlcjsKfTsKZXhwb3J0IHZhciBzaG93VGl0bGUgPSBmdW5jdGlvbiBzaG93VGl0bGUoaXRlbSwgdm0pIHsKICB2YXIgX2l0ZW0kbWV0YSA9IGl0ZW0ubWV0YSwKICAgIHRpdGxlID0gX2l0ZW0kbWV0YS50aXRsZSwKICAgIF9fdGl0bGVJc0Z1bmN0aW9uX18gPSBfaXRlbSRtZXRhLl9fdGl0bGVJc0Z1bmN0aW9uX187CiAgaWYgKCF0aXRsZSkgcmV0dXJuOwogIGlmICh1c2VJMThuKSB7CiAgICBpZiAodGl0bGUuaW5jbHVkZXMoJ3t7JykgJiYgdGl0bGUuaW5jbHVkZXMoJ319JykgJiYgdXNlSTE4bikgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC8oe3tbXHNcU10rP319KS8sIGZ1bmN0aW9uIChtLCBzdHIpIHsKICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC97eyhbXHNcU10qKX19LywgZnVuY3Rpb24gKG0sIF8pIHsKICAgICAgICByZXR1cm4gdm0uJHQoXy50cmltKCkpOwogICAgICB9KTsKICAgIH0pO2Vsc2UgaWYgKF9fdGl0bGVJc0Z1bmN0aW9uX18pIHRpdGxlID0gaXRlbS5tZXRhLnRpdGxlO2Vsc2UgdGl0bGUgPSB2bS4kdChpdGVtLm5hbWUpOwogIH0gZWxzZSB0aXRsZSA9IGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEudGl0bGUgfHwgaXRlbS5uYW1lOwogIHJldHVybiB0aXRsZTsKfTsKCi8qKgogKiBAZGVzY3JpcHRpb24g5pys5Zyw5a2Y5YKo5ZKM6I635Y+W5qCH562+5a+86Iiq5YiX6KGoCiAqLwpleHBvcnQgdmFyIHNldFRhZ05hdkxpc3RJbkxvY2Fsc3RvcmFnZSA9IGZ1bmN0aW9uIHNldFRhZ05hdkxpc3RJbkxvY2Fsc3RvcmFnZShsaXN0KSB7CiAgbG9jYWxTdG9yYWdlLnRhZ05hdmVMaXN0ID0gSlNPTi5zdHJpbmdpZnkobGlzdCk7Cn07Ci8qKgogKiBAcmV0dXJucyB7QXJyYXl9IOWFtuS4reeahOavj+S4quWFg+e0oOWPquWMheWQq+i3r+eUseWOn+S/oeaBr+S4reeahG5hbWUsIHBhdGgsIG1ldGHkuInpobkKICovCmV4cG9ydCB2YXIgZ2V0VGFnTmF2TGlzdEZyb21Mb2NhbHN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRUYWdOYXZMaXN0RnJvbUxvY2Fsc3RvcmFnZSgpIHsKICB2YXIgbGlzdCA9IGxvY2FsU3RvcmFnZS50YWdOYXZlTGlzdDsKICByZXR1cm4gbGlzdCA/IEpTT04ucGFyc2UobGlzdCkgOiBbXTsKfTsKCi8qKgogKiBAcGFyYW0ge0FycmF5fSByb3V0ZXJzIOi3r+eUseWIl+ihqOaVsOe7hAogKiBAZGVzY3JpcHRpb24g55So5LqO5om+5Yiw6Lev55Sx5YiX6KGo5LitbmFtZeS4umhvbWXnmoTlr7nosaEKICovCnZhciBfZ2V0SG9tZVJvdXRlID0gZnVuY3Rpb24gZ2V0SG9tZVJvdXRlKHJvdXRlcnMpIHsKICB2YXIgaG9tZU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdob21lJzsKICB2YXIgaSA9IC0xOwogIHZhciBsZW4gPSByb3V0ZXJzLmxlbmd0aDsKICB2YXIgaG9tZVJvdXRlID0ge307CiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgdmFyIGl0ZW0gPSByb3V0ZXJzW2ldOwogICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgdmFyIHJlcyA9IF9nZXRIb21lUm91dGUoaXRlbS5jaGlsZHJlbiwgaG9tZU5hbWUpOwogICAgICBpZiAocmVzLm5hbWUpIHJldHVybiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAoaXRlbS5uYW1lID09PSBob21lTmFtZSkgaG9tZVJvdXRlID0gaXRlbTsKICAgIH0KICB9CiAgcmV0dXJuIGhvbWVSb3V0ZTsKfTsKCi8qKgogKiBAcGFyYW0geyp9IGxpc3Qg546w5pyJ5qCH562+5a+86Iiq5YiX6KGoCiAqIEBwYXJhbSB7Kn0gbmV3Um91dGUg5paw5re75Yqg55qE6Lev55Sx5Y6f5L+h5oGv5a+56LGhCiAqIEBkZXNjcmlwdGlvbiDlpoLmnpzor6VuZXdSb3V0ZeW3sue7j+WtmOWcqOWImeS4jeWGjea3u+WKoAogKi8KZXhwb3J0IHsgX2dldEhvbWVSb3V0ZSBhcyBnZXRIb21lUm91dGUgfTsKZXhwb3J0IHZhciBnZXROZXdUYWdMaXN0ID0gZnVuY3Rpb24gZ2V0TmV3VGFnTGlzdChsaXN0LCBuZXdSb3V0ZSkgewogIHZhciBuYW1lID0gbmV3Um91dGUubmFtZSwKICAgIHBhdGggPSBuZXdSb3V0ZS5wYXRoLAogICAgbWV0YSA9IG5ld1JvdXRlLm1ldGE7CiAgdmFyIG5ld0xpc3QgPSBfdG9Db25zdW1hYmxlQXJyYXkobGlzdCk7CiAgaWYgKG5ld0xpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5wYXRoID09PSBwYXRoOwogIH0pID49IDApIHJldHVybiBuZXdMaXN0O2Vsc2UgbmV3TGlzdC5wdXNoKHsKICAgIG5hbWU6IG5hbWUsCiAgICBwYXRoOiBwYXRoLAogICAgbWV0YTogbWV0YQogIH0pOwogIHJldHVybiBuZXdMaXN0Owp9OwoKLyoqCiAqIEBwYXJhbSB7Kn0gYWNjZXNzIOeUqOaIt+adg+mZkOaVsOe7hO+8jOWmgiBbJ3N1cGVyX2FkbWluJywgJ2FkbWluJ10KICogQHBhcmFtIHsqfSByb3V0ZSDot6/nlLHliJfooagKICovCnZhciBoYXNBY2Nlc3MgPSBmdW5jdGlvbiBoYXNBY2Nlc3MoYWNjZXNzLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEuYWNjZXNzKSByZXR1cm4gaGFzT25lT2YoYWNjZXNzLCByb3V0ZS5tZXRhLmFjY2Vzcyk7ZWxzZSByZXR1cm4gdHJ1ZTsKfTsKCi8qKgogKiDmnYPpibQKICogQHBhcmFtIHsqfSBuYW1lIOWNs+Wwhui3s+i9rOeahOi3r+eUsW5hbWUKICogQHBhcmFtIHsqfSBhY2Nlc3Mg55So5oi35p2D6ZmQ5pWw57uECiAqIEBwYXJhbSB7Kn0gcm91dGVzIOi3r+eUseWIl+ihqAogKiBAZGVzY3JpcHRpb24g55So5oi35piv5ZCm5Y+v6Lez6L2s5Yiw6K+l6aG1CiAqLwpleHBvcnQgdmFyIGNhblR1cm5UbyA9IGZ1bmN0aW9uIGNhblR1cm5UbyhuYW1lLCBhY2Nlc3MsIHJvdXRlcykgewogIHZhciBfcm91dGVQZXJtaXNzaW9uSnVkZ2UgPSBmdW5jdGlvbiByb3V0ZVBlcm1pc3Npb25KdWRnZShsaXN0KSB7CiAgICByZXR1cm4gbGlzdC5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF9yb3V0ZVBlcm1pc3Npb25KdWRnZShpdGVtLmNoaWxkcmVuKTsKICAgICAgfSBlbHNlIGlmIChpdGVtLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICByZXR1cm4gaGFzQWNjZXNzKGFjY2VzcywgaXRlbSk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgcmV0dXJuIF9yb3V0ZVBlcm1pc3Npb25KdWRnZShyb3V0ZXMpOwp9OwoKLyoqCiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwKICogQGRlc2NyaXB0aW9uIOS7jlVSTOS4reino+aekOWPguaVsAogKi8KZXhwb3J0IHZhciBnZXRQYXJhbXMgPSBmdW5jdGlvbiBnZXRQYXJhbXModXJsKSB7CiAgdmFyIGtleVZhbHVlQXJyID0gdXJsLnNwbGl0KCc/JylbMV0uc3BsaXQoJyYnKTsKICB2YXIgcGFyYW1PYmogPSB7fTsKICBrZXlWYWx1ZUFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICB2YXIga2V5VmFsdWUgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICBwYXJhbU9ialtrZXlWYWx1ZVswXV0gPSBrZXlWYWx1ZVsxXTsKICB9KTsKICByZXR1cm4gcGFyYW1PYmo7Cn07CgovKioKICogQHBhcmFtIHtBcnJheX0gbGlzdCDmoIfnrb7liJfooagKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUg5b2T5YmN5YWz6Zet55qE5qCH562+55qEbmFtZQogKi8KZXhwb3J0IHZhciBnZXROZXh0Um91dGUgPSBmdW5jdGlvbiBnZXROZXh0Um91dGUobGlzdCwgcm91dGUpIHsKICB2YXIgcmVzID0ge307CiAgaWYgKGxpc3QubGVuZ3RoID09PSAyKSB7CiAgICByZXMgPSBfZ2V0SG9tZVJvdXRlKGxpc3QpOwogIH0gZWxzZSB7CiAgICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gcm91dGVFcXVhbChpdGVtLCByb3V0ZSk7CiAgICB9KTsKICAgIGlmIChpbmRleCA9PT0gbGlzdC5sZW5ndGggLSAxKSByZXMgPSBsaXN0W2xpc3QubGVuZ3RoIC0gMl07ZWxzZSByZXMgPSBsaXN0W2luZGV4ICsgMV07CiAgfQogIHJldHVybiByZXM7Cn07CgovKioKICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzIOWbnuiwg+WHveaVsOmcgOimgeaJp+ihjOeahOasoeaVsAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDlm57osIPlh73mlbAKICovCmV4cG9ydCB2YXIgZG9DdXN0b21UaW1lcyA9IGZ1bmN0aW9uIGRvQ3VzdG9tVGltZXModGltZXMsIGNhbGxiYWNrKSB7CiAgdmFyIGkgPSAtMTsKICB3aGlsZSAoKytpIDwgdGltZXMpIHsKICAgIGNhbGxiYWNrKGkpOwogIH0KfTsKCi8qKgogKiBAcGFyYW0ge09iamVjdH0gZmlsZSDku47kuIrkvKDnu4Tku7blvpfliLDnmoTmlofku7blr7nosaEKICogQHJldHVybnMge1Byb21pc2V9IHJlc29sdmXlj4LmlbDmmK/op6PmnpDlkI7nmoTkuoznu7TmlbDnu4QKICogQGRlc2NyaXB0aW9uIOS7jkNzduaWh+S7tuS4reino+aekOWHuuihqOagvO+8jOino+aekOaIkOS6jOe7tOaVsOe7hAogKi8KZXhwb3J0IHZhciBnZXRBcnJheUZyb21GaWxlID0gZnVuY3Rpb24gZ2V0QXJyYXlGcm9tRmlsZShmaWxlKSB7CiAgdmFyIG5hbWVTcGxpdCA9IGZpbGUubmFtZS5zcGxpdCgnLicpOwogIHZhciBmb3JtYXQgPSBuYW1lU3BsaXRbbmFtZVNwbGl0Lmxlbmd0aCAtIDFdOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOyAvLyDku6XmlofmnKzmoLzlvI/or7vlj5YKICAgIHZhciBhcnIgPSBbXTsKICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIHZhciBkYXRhID0gZXZ0LnRhcmdldC5yZXN1bHQ7IC8vIOivu+WIsOeahOaVsOaNrgogICAgICB2YXIgcGFzdGVEYXRhID0gZGF0YS50cmltKCk7CiAgICAgIGFyciA9IHBhc3RlRGF0YS5zcGxpdCgvW1xuXHUwMDg1XHUyMDI4XHUyMDI5XXxcclxuPy9nKS5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgIHJldHVybiByb3cuc3BsaXQoJ1x0Jyk7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtWzBdLnNwbGl0KCcsJyk7CiAgICAgIH0pOwogICAgICBpZiAoZm9ybWF0ID09PSAnY3N2JykgcmVzb2x2ZShhcnIpO2Vsc2UgcmVqZWN0KG5ldyBFcnJvcignW0Zvcm1hdCBFcnJvcl065L2g5LiK5Lyg55qE5LiN5pivQ3N25paH5Lu2JykpOwogICAgfTsKICB9KTsKfTsKCi8qKgogKiBAcGFyYW0ge0FycmF5fSBhcnJheSDooajmoLzmlbDmja7kuoznu7TmlbDnu4QKICogQHJldHVybnMge09iamVjdH0geyBjb2x1bW5zLCB0YWJsZURhdGEgfQogKiBAZGVzY3JpcHRpb24g5LuO5LqM57u05pWw57uE5Lit6I635Y+W6KGo5aS05ZKM6KGo5qC85pWw5o2u77yM5bCG56ys5LiA6KGM5L2c5Li66KGo5aS077yM55So5LqO5Zyo6KGo5qC85Lit5bGV56S65pWw5o2uCiAqLwpleHBvcnQgdmFyIGdldFRhYmxlRGF0YUZyb21BcnJheSA9IGZ1bmN0aW9uIGdldFRhYmxlRGF0YUZyb21BcnJheShhcnJheSkgewogIHZhciBjb2x1bW5zID0gW107CiAgdmFyIHRhYmxlRGF0YSA9IFtdOwogIGlmIChhcnJheS5sZW5ndGggPiAxKSB7CiAgICB2YXIgdGl0bGVzID0gYXJyYXkuc2hpZnQoKTsKICAgIGNvbHVtbnMgPSB0aXRsZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGl0bGU6IGl0ZW0sCiAgICAgICAga2V5OiBpdGVtCiAgICAgIH07CiAgICB9KTsKICAgIHRhYmxlRGF0YSA9IGFycmF5Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgcmVzID0ge307CiAgICAgIGl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoY29sLCBpKSB7CiAgICAgICAgcmVzW3RpdGxlc1tpXV0gPSBjb2w7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzOwogICAgfSk7CiAgfQogIHJldHVybiB7CiAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgdGFibGVEYXRhOiB0YWJsZURhdGEKICB9Owp9Owp2YXIgX2ZpbmROb2RlVXBwZXIgPSBmdW5jdGlvbiBmaW5kTm9kZVVwcGVyKGVsZSwgdGFnKSB7CiAgaWYgKGVsZS5wYXJlbnROb2RlKSB7CiAgICBpZiAoZWxlLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gdGFnLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgcmV0dXJuIGVsZS5wYXJlbnROb2RlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIF9maW5kTm9kZVVwcGVyKGVsZS5wYXJlbnROb2RlLCB0YWcpOwogICAgfQogIH0KfTsKZXhwb3J0IHsgX2ZpbmROb2RlVXBwZXIgYXMgZmluZE5vZGVVcHBlciB9Owp2YXIgX2ZpbmROb2RlVXBwZXJCeUNsYXNzZXMgPSBmdW5jdGlvbiBmaW5kTm9kZVVwcGVyQnlDbGFzc2VzKGVsZSwgY2xhc3NlcykgewogIHZhciBwYXJlbnROb2RlID0gZWxlLnBhcmVudE5vZGU7CiAgaWYgKHBhcmVudE5vZGUpIHsKICAgIHZhciBjbGFzc0xpc3QgPSBwYXJlbnROb2RlLmNsYXNzTGlzdDsKICAgIGlmIChjbGFzc0xpc3QgJiYgY2xhc3Nlcy5ldmVyeShmdW5jdGlvbiAoY2xhc3NOYW1lKSB7CiAgICAgIHJldHVybiBjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTsKICAgIH0pKSB7CiAgICAgIHJldHVybiBwYXJlbnROb2RlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIF9maW5kTm9kZVVwcGVyQnlDbGFzc2VzKHBhcmVudE5vZGUsIGNsYXNzZXMpOwogICAgfQogIH0KfTsKZXhwb3J0IHsgX2ZpbmROb2RlVXBwZXJCeUNsYXNzZXMgYXMgZmluZE5vZGVVcHBlckJ5Q2xhc3NlcyB9Owp2YXIgX2ZpbmROb2RlRG93bndhcmQgPSBmdW5jdGlvbiBmaW5kTm9kZURvd253YXJkKGVsZSwgdGFnKSB7CiAgdmFyIHRhZ05hbWUgPSB0YWcudG9VcHBlckNhc2UoKTsKICBpZiAoZWxlLmNoaWxkTm9kZXMubGVuZ3RoKSB7CiAgICB2YXIgaSA9IC0xOwogICAgdmFyIGxlbiA9IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsKICAgIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgICAgdmFyIGNoaWxkID0gZWxlLmNoaWxkTm9kZXNbaV07CiAgICAgIGlmIChjaGlsZC50YWdOYW1lID09PSB0YWdOYW1lKSByZXR1cm4gY2hpbGQ7ZWxzZSByZXR1cm4gX2ZpbmROb2RlRG93bndhcmQoY2hpbGQsIHRhZyk7CiAgICB9CiAgfQp9OwpleHBvcnQgeyBfZmluZE5vZGVEb3dud2FyZCBhcyBmaW5kTm9kZURvd253YXJkIH07CmV4cG9ydCB2YXIgc2hvd0J5QWNjZXNzID0gZnVuY3Rpb24gc2hvd0J5QWNjZXNzKGFjY2VzcywgY2FuVmlld0FjY2VzcykgewogIHJldHVybiBoYXNPbmVPZihjYW5WaWV3QWNjZXNzLCBhY2Nlc3MpOwp9OwoKLyoqCiAqIEBkZXNjcmlwdGlvbiDmoLnmja5uYW1lL3BhcmFtcy9xdWVyeeWIpOaWreS4pOS4qui3r+eUseWvueixoeaYr+WQpuebuOetiQogKiBAcGFyYW0geyp9IHJvdXRlMSDot6/nlLHlr7nosaEKICogQHBhcmFtIHsqfSByb3V0ZTIg6Lev55Sx5a+56LGhCiAqLwpleHBvcnQgdmFyIHJvdXRlRXF1YWwgPSBmdW5jdGlvbiByb3V0ZUVxdWFsKHJvdXRlMSwgcm91dGUyKSB7CiAgdmFyIHBhcmFtczEgPSByb3V0ZTEucGFyYW1zIHx8IHt9OwogIHZhciBwYXJhbXMyID0gcm91dGUyLnBhcmFtcyB8fCB7fTsKICB2YXIgcXVlcnkxID0gcm91dGUxLnF1ZXJ5IHx8IHt9OwogIHZhciBxdWVyeTIgPSByb3V0ZTIucXVlcnkgfHwge307CiAgcmV0dXJuIHJvdXRlMS5uYW1lID09PSByb3V0ZTIubmFtZSAmJiBvYmpFcXVhbChwYXJhbXMxLCBwYXJhbXMyKSAmJiBvYmpFcXVhbChxdWVyeTEsIHF1ZXJ5Mik7Cn07CgovKioKICog5Yik5pat5omT5byA55qE5qCH562+5YiX6KGo6YeM5piv5ZCm5bey5a2Y5Zyo6L+Z5Liq5paw5re75Yqg55qE6Lev55Sx5a+56LGhCiAqLwpleHBvcnQgdmFyIHJvdXRlSGFzRXhpc3QgPSBmdW5jdGlvbiByb3V0ZUhhc0V4aXN0KHRhZ05hdkxpc3QsIHJvdXRlSXRlbSkgewogIHZhciBsZW4gPSB0YWdOYXZMaXN0Lmxlbmd0aDsKICB2YXIgcmVzID0gZmFsc2U7CiAgZG9DdXN0b21UaW1lcyhsZW4sIGZ1bmN0aW9uIChpbmRleCkgewogICAgaWYgKHJvdXRlRXF1YWwodGFnTmF2TGlzdFtpbmRleF0sIHJvdXRlSXRlbSkpIHJlcyA9IHRydWU7CiAgfSk7CiAgcmV0dXJuIHJlczsKfTsKZXhwb3J0IHZhciBsb2NhbFNhdmUgPSBmdW5jdGlvbiBsb2NhbFNhdmUoa2V5LCB2YWx1ZSkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpOwp9OwpleHBvcnQgdmFyIGxvY2FsUmVhZCA9IGZ1bmN0aW9uIGxvY2FsUmVhZChrZXkpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSB8fCAnJzsKfTsKCi8vIHNjcm9sbFRvcCBhbmltYXRpb24KZXhwb3J0IHZhciBzY3JvbGxUb3AgPSBmdW5jdGlvbiBzY3JvbGxUb3AoZWwpIHsKICB2YXIgZnJvbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICB2YXIgdG8gPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICB2YXIgZHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDUwMDsKICB2YXIgZW5kQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHsKICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7CiAgICB9OwogIH0KICB2YXIgZGlmZmVyZW5jZSA9IE1hdGguYWJzKGZyb20gLSB0byk7CiAgdmFyIHN0ZXAgPSBNYXRoLmNlaWwoZGlmZmVyZW5jZSAvIGR1cmF0aW9uICogNTApOwogIHZhciBfc2Nyb2xsID0gZnVuY3Rpb24gc2Nyb2xsKHN0YXJ0LCBlbmQsIHN0ZXApIHsKICAgIGlmIChzdGFydCA9PT0gZW5kKSB7CiAgICAgIGVuZENhbGxiYWNrICYmIGVuZENhbGxiYWNrKCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciBkID0gc3RhcnQgKyBzdGVwID4gZW5kID8gZW5kIDogc3RhcnQgKyBzdGVwOwogICAgaWYgKHN0YXJ0ID4gZW5kKSB7CiAgICAgIGQgPSBzdGFydCAtIHN0ZXAgPCBlbmQgPyBlbmQgOiBzdGFydCAtIHN0ZXA7CiAgICB9CiAgICBpZiAoZWwgPT09IHdpbmRvdykgewogICAgICB3aW5kb3cuc2Nyb2xsVG8oZCwgZCk7CiAgICB9IGVsc2UgewogICAgICBlbC5zY3JvbGxUb3AgPSBkOwogICAgfQogICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfc2Nyb2xsKGQsIGVuZCwgc3RlcCk7CiAgICB9KTsKICB9OwogIF9zY3JvbGwoZnJvbSwgdG8sIHN0ZXApOwp9OwoKLyoqCiAqIEBkZXNjcmlwdGlvbiDmoLnmja7lvZPliY3ot7PovaznmoTot6/nlLHorr7nva7mmL7npLrlnKjmtY/op4jlmajmoIfnrb7nmoR0aXRsZQogKiBAcGFyYW0ge09iamVjdH0gcm91dGVJdGVtIOi3r+eUseWvueixoQogKiBAcGFyYW0ge09iamVjdH0gdm0gVnVl5a6e5L6LCiAqLwpleHBvcnQgdmFyIHNldFRpdGxlID0gZnVuY3Rpb24gc2V0VGl0bGUocm91dGVJdGVtLCB2bSkgewogIHZhciB3aW5UaXRsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBRE1JTl9USVRMRScpIHx8IHRpdGxlOwogIHZhciBoYW5kbGVkUm91dGUgPSBnZXRSb3V0ZVRpdGxlSGFuZGxlZChyb3V0ZUl0ZW0pOwogIHZhciBwYWdlVGl0bGUgPSBzaG93VGl0bGUoaGFuZGxlZFJvdXRlLCB2bSk7CiAgdmFyIHJlc1RpdGxlID0gcGFnZVRpdGxlID8gIiIuY29uY2F0KHdpblRpdGxlLCAiIC0gIikuY29uY2F0KHBhZ2VUaXRsZSkgOiB3aW5UaXRsZTsKICB3aW5kb3cuZG9jdW1lbnQudGl0bGUgPSByZXNUaXRsZTsKfTsKdmFyIF9SID0gZnVuY3Rpb24gUihtZW51TGlzdCwgbmV3T3Blbk1lbnVzKSB7CiAgbWVudUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgdmFyIG5ld01lbnUgPSB7fTsKICAgIGZvciAodmFyIGkgaW4gaXRlbSkgewogICAgICBpZiAoaSAhPT0gJ2NoaWxkcmVuJykgbmV3TWVudVtpXSA9IGNsb25lRGVlcChpdGVtW2ldKTsKICAgIH0KICAgIG5ld09wZW5NZW51cy5wdXNoKG5ld01lbnUpOwogICAgaXRlbS5jaGlsZHJlbiAmJiBfUihpdGVtLmNoaWxkcmVuLCBuZXdPcGVuTWVudXMpOwogIH0pOwogIHJldHVybiBuZXdPcGVuTWVudXM7Cn07CmV4cG9ydCB7IF9SIGFzIFIgfTsKZXhwb3J0IGZ1bmN0aW9uIGdldE1lbnVvcGVuKHRvLCBtZW51TGlzdCkgewogIHZhciBhbGxNZW51cyA9IFtdOwogIG1lbnVMaXN0LmZvckVhY2goZnVuY3Rpb24gKG1lbnUpIHsKICAgIHZhciBtZW51cyA9IHRyYW5zTWVudShtZW51LCBbXSk7CiAgICBhbGxNZW51cy5wdXNoKHsKICAgICAgcGF0aDogbWVudS5wYXRoLAogICAgICBvcGVuTmFtZXM6IFtdCiAgICB9KTsKICAgIG1lbnVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGFsbE1lbnVzLnB1c2goaXRlbSk7CiAgICB9KTsKICB9KTsKICB2YXIgY3VycmVudE1lbnUgPSBhbGxNZW51cy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5wYXRoID09PSB0by5wYXRoOwogIH0pOwogIHJldHVybiBjdXJyZW50TWVudSA/IGN1cnJlbnRNZW51Lm9wZW5OYW1lcyA6IFtdOwp9CmZ1bmN0aW9uIHRyYW5zTWVudShtZW51LCBvcGVuTmFtZXMpIHsKICBpZiAobWVudS5jaGlsZHJlbiAmJiBtZW51LmNoaWxkcmVuLmxlbmd0aCkgewogICAgdmFyIGl0ZW1PcGVuTmFtZXMgPSBvcGVuTmFtZXMuY29uY2F0KFttZW51LnBhdGhdKTsKICAgIHJldHVybiBtZW51LmNoaWxkcmVuLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBpdGVtKSB7CiAgICAgIGFsbC5wdXNoKHsKICAgICAgICBwYXRoOiBpdGVtLnBhdGgsCiAgICAgICAgb3Blbk5hbWVzOiBpdGVtT3Blbk5hbWVzCiAgICAgIH0pOwogICAgICB2YXIgZm91bmRDaGlsZHJlbiA9IHRyYW5zTWVudShpdGVtLCBpdGVtT3Blbk5hbWVzKTsKICAgICAgcmV0dXJuIGFsbC5jb25jYXQoZm91bmRDaGlsZHJlbik7CiAgICB9LCBbXSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBbbWVudV0ubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGF0aDogaXRlbS5wYXRoLAogICAgICAgIG9wZW5OYW1lczogb3Blbk5hbWVzCiAgICAgIH07CiAgICB9KTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHdzcyh3c1NvY2tldFVybCkgewogIHZhciBpc2h0dHBzID0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPT0gJ2h0dHBzOic7CiAgaWYgKGlzaHR0cHMpIHsKICAgIHJldHVybiB3c1NvY2tldFVybC5yZXBsYWNlKCd3czonLCAnd3NzOicpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gd3NTb2NrZXRVcmwucmVwbGFjZSgnd3NzOicsICd3czonKTsKICB9Cn0="},null]}