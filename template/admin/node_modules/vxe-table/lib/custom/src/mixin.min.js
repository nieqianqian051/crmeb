"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default=exports.default={methods:{_openCustom:function(){var t=this,e=this.initStore,i=this.customStore,s=this.collectColumn,o={},n={},r={};return _xeUtils.default.eachTree(s,function(t){var e=t.getKey();t.renderFixed=t.fixed,t.renderVisible=t.visible,t.renderResizeWidth=t.renderWidth,o[e]=t.renderSortNumber,n[e]=t.fixed,r[e]=t.visible},{children:"children"}),i.oldSortMaps=o,i.oldFixedMaps=n,i.oldVisibleMaps=r,this.customColumnList=s.slice(0),i.visible=!0,e.custom=!0,this.checkCustomStatus(),this.calcMaxHeight(),this.$nextTick().then(function(){return t.calcMaxHeight()})},_closeCustom:function(){var t=this.customStore,e=this.customOpts;return t.visible&&(t.visible=!1,e.immediate||this.handleCustom()),this.$nextTick()},calcMaxHeight:function(){var t=this.$el,e=this.customStore,i=0;t&&(i=t.clientHeight-30),e.maxHeight=Math.max(4,i)},checkCustomStatus:function(){var t=this.customStore,e=this.collectColumn,i=this.customOpts.checkMethod;t.isAll=e.every(function(t){return!!i&&!i({column:t})||t.renderVisible}),t.isIndeterminate=!t.isAll&&e.some(function(t){return(!i||i({column:t}))&&(t.renderVisible||t.halfVisible)})},emitCustomEvent:function(t,e){(this.$xegrid||this).$emit("custom",{type:t,$table:this,$grid:this.$xegrid,$event:e})},triggerCustomEvent:function(t){var e=this.customStore;e.visible?(this.closeCustom(),this.emitCustomEvent("close",t)):(e.btnEl=t.target,this.openCustom(),this.emitCustomEvent("open",t))},customOpenEvent:function(t){var e=this.customStore;e.visible||(e.activeBtn=!0,e.btnEl=t.target,this.openCustom(),this.emitCustomEvent("open",t))},customColseEvent:function(t){var e=this.customStore;e.visible&&(e.activeBtn=!1,this.closeCustom(),this.emitCustomEvent("close",t))}}};