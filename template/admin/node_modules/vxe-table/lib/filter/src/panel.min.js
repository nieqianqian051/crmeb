"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=_interopRequireWildcard(require("../../tools/utils")),_vn=require("../../tools/vn");function _getRequireWildcardCache(e){var t,i;return"function"!=typeof WeakMap?null:(t=new WeakMap,i=new WeakMap,(_getRequireWildcardCache=function(e){return e?i:t})(e))}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var i,l,n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=r?Object.getOwnPropertyDescriptor(e,i):null)&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]);return n.default=e,t&&t.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default={name:"VxeTableFilterPanel",props:{filterStore:Object},computed:{hasCheckOption:function(){var e=this.filterStore;return e&&e.options.some(function(e){return e.checked})}},render:function(e){var t=this.$parent,i=this.filterStore,l=i.args,n=i.column,r=n?n.filterRender:null,o=(0,_utils.isEnableConf)(r)?_vXETable.default.renderer.get(r.name):null,a=o?o.tableFilterClassName||o.filterClassName:"";return e("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",o&&o.className?o.className:"",_utils.default.getClass(a,Object.assign({$panel:this,$table:t},l)),{"is--animat":t.animat,"is--multiple":i.multiple,"is--active":i.visible}],style:i.style},i.visible&&n?this.renderOptions(e,r,o).concat(this.renderFooter(e)):[])},methods:{renderOptions:function(i,e,t){var l=this,n=this.$parent,r=this.filterStore,o=r.args,a=r.column,c=r.multiple,s=r.maxHeight,a=a?a.slots:null,t=t?t.renderTableFilter||t.renderFilter:null;return a&&a.filter?[i("div",{class:"vxe-table--filter-template"},n.callSlot(a.filter,Object.assign({$panel:this,context:this},o),i))]:t?[i("div",{class:"vxe-table--filter-template"},(0,_vn.getSlotVNs)(t.call(n,i,e,Object.assign({$panel:this,context:this},o))))]:(a=c?r.isAllSelected:!r.options.some(function(e){return e._checked}),t=c&&r.isIndeterminate,[i("ul",{class:"vxe-table--filter-header"},[i("li",{class:["vxe-table--filter-option",{"is--checked":a,"is--indeterminate":t}],attrs:{title:_conf.default.i18n(c?"vxe.table.allTitle":"vxe.table.allFilter")},on:{click:function(e){l.changeAllOption(e,!r.isAllSelected)}}},(c?[i("span",{class:["vxe-checkbox--icon",t?_conf.default.icon.TABLE_CHECKBOX_INDETERMINATE:a?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([i("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]))]),i("ul",{class:"vxe-table--filter-body",style:s?{maxHeight:"".concat(s,"px")}:{}},r.options.map(function(t){var e=t._checked;return i("li",{class:["vxe-table--filter-option",{"is--checked":e}],attrs:{title:t.label},on:{click:function(e){l.changeOption(e,!t._checked,t)}}},(c?[i("span",{class:["vxe-checkbox--icon",e?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([i("span",{class:"vxe-checkbox--label"},_utils.default.formatText(t.label,1))]))}))])},renderFooter:function(e){var t=this.$parent,i=this.hasCheckOption,l=this.filterStore,t=t.filterOpts,n=l.column,r=l.multiple,n=n.filterRender,n=(0,_utils.isEnableConf)(n)?_vXETable.default.renderer.get(n.name):null,i=!i&&!l.isAllSelected&&!l.isIndeterminate;return r&&(!n||!1!==n.showTableFilterFooter&&!1!==n.showFilterFooter&&!1!==n.isFooter)?[e("div",{class:"vxe-table--filter-footer"},[e("button",{class:{"is--disabled":i},attrs:{disabled:i},on:{click:this.confirmFilter}},t.confirmButtonText||_conf.default.i18n("vxe.table.confirmFilter")),e("button",{on:{click:this.resetFilter}},t.resetButtonText||_conf.default.i18n("vxe.table.resetFilter"))])]:[]},filterCheckAllEvent:function(e,t){var i=this.filterStore;i.options.forEach(function(e){e._checked=t,e.checked=t}),i.isAllSelected=t,i.isIndeterminate=!1},changeRadioOption:function(e,t,i){var l=this.$parent;this.filterStore.options.forEach(function(e){e._checked=!1}),i._checked=t,l.checkFilterOptions(),this.confirmFilter(e)},changeMultipleOption:function(e,t,i){var l=this.$parent;i._checked=t,l.checkFilterOptions()},changeAllOption:function(e,t){this.filterStore.multiple?this.filterCheckAllEvent(e,t):this.resetFilter(e)},changeOption:function(e,t,i){this.filterStore.multiple?this.changeMultipleOption(e,t,i):this.changeRadioOption(e,t,i)},confirmFilter:function(e){var t=this.$parent;this.filterStore.options.forEach(function(e){e.checked=e._checked}),t.confirmFilterEvent(e)},resetFilter:function(e){this.$parent.resetFilterEvent(e)}}};