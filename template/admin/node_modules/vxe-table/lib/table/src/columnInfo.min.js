"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnInfo=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_formats=require("../../v-x-e-table/src/formats"),_util=require("./util"),_utils=require("../../tools/utils"),_log=require("../../tools/log");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,r){if("object"!=_typeof(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);t=t.call(e,r||"default");if("object"!=_typeof(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}var ColumnInfo=exports.ColumnInfo=function(){return _createClass(function e(r,t){var o,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=l.renderHeader,n=l.renderCell,d=l.renderFooter,l=l.renderData,s=(_classCallCheck(this,e),r.$xegrid),a=s?s.proxyOpts:null,f=t.formatter,u=!_xeUtils.default.isBoolean(t.visible)||t.visible;"development"===process.env.NODE_ENV&&(o=["seq","checkbox","radio","expand","html"],t.type&&-1===o.indexOf(t.type)&&(0,_log.warnLog)("vxe.error.errProp",["type=".concat(t.type),o.join(", ")]),(_xeUtils.default.isBoolean(t.cellRender)||t.cellRender&&!_xeUtils.default.isObject(t.cellRender))&&(0,_log.warnLog)("vxe.error.errProp",["column.cell-render=".concat(t.cellRender),"column.cell-render={}"]),(_xeUtils.default.isBoolean(t.editRender)||t.editRender&&!_xeUtils.default.isObject(t.editRender))&&(0,_log.warnLog)("vxe.error.errProp",["column.edit-render=".concat(t.editRender),"column.edit-render={}"]),t.cellRender&&t.editRender&&(0,_log.warnLog)("vxe.error.errConflicts",["column.cell-render","column.edit-render"]),"expand"===t.type&&r.treeConfig&&(r.treeOpts.showLine||r.treeOpts.line)&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.line","column.type=expand"]),t.remoteSort&&(0,_log.warnLog)("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),t.sortMethod&&(0,_log.warnLog)("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),f)&&(_xeUtils.default.isString(f)?(o=_formats.formats.get(f)||_xeUtils.default[f])&&_xeUtils.default.isFunction(o.cellFormatMethod)||(0,_log.errLog)("vxe.error.notFormats",[f]):!_xeUtils.default.isArray(f)||(r=_formats.formats.get(f[0])||_xeUtils.default[f[0]])&&_xeUtils.default.isFunction(r.cellFormatMethod)||(0,_log.errLog)("vxe.error.notFormats",[f[0]])),Object.assign(this,{type:t.type,property:t.field,field:t.field,title:t.title,width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,resizable:t.resizable,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,footerAlign:t.footerAlign,showOverflow:t.showOverflow,showHeaderOverflow:t.showHeaderOverflow,showFooterOverflow:t.showFooterOverflow,className:t.className,headerClassName:t.headerClassName,footerClassName:t.footerClassName,formatter:f,footerFormatter:t.footerFormatter,sortable:t.sortable,sortBy:t.sortBy,sortType:t.sortType,sortMethod:t.sortMethod,remoteSort:t.remoteSort,filters:(0,_util.toFilters)(t.filters),filterMultiple:!_xeUtils.default.isBoolean(t.filterMultiple)||t.filterMultiple,filterMethod:t.filterMethod,filterResetMethod:t.filterResetMethod,filterRecoverMethod:t.filterRecoverMethod,filterRender:t.filterRender,treeNode:t.treeNode,cellType:t.cellType,cellRender:t.cellRender,editRender:t.editRender,contentRender:t.contentRender,headerExportMethod:t.headerExportMethod,exportMethod:t.exportMethod,footerExportMethod:t.footerExportMethod,titleHelp:t.titleHelp,titlePrefix:t.titlePrefix,titleSuffix:t.titleSuffix,params:t.params,id:t.colId||_xeUtils.default.uniqueId("col_"),parentId:null,visible:u,halfVisible:!1,defaultVisible:u,defaultFixed:t.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:i||t.renderHeader,renderCell:n||t.renderCell,renderFooter:d||t.renderFooter,renderData:l,slots:t.slots}),a&&a.beforeColumn&&a.beforeColumn({$grid:s,column:this})},[{key:"getTitle",value:function(){return(0,_utils.getFuncText)(this.title||("seq"===this.type?_conf.default.i18n("vxe.table.seqTitle"):""))}},{key:"getKey",value:function(){var e=this.type;return this.field||(e?"type=".concat(e):null)}},{key:"update",value:function(e,r){"filters"!==e&&("field"===e&&(this.property=r),this[e]=r)}}])}();