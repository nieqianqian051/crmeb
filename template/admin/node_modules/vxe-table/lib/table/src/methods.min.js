"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_cell=_interopRequireDefault(require("./cell")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_util=require("./util"),_utils=_interopRequireWildcard(require("../../tools/utils")),_dom=_interopRequireWildcard(require("../../tools/dom")),_formats=require("../../v-x-e-table/src/formats"),_log=require("../../tools/log"),_vn=require("../../tools/vn");function _getRequireWildcardCache(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(_getRequireWildcardCache=function(e){return e?r:t})(e))}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var r,i,l={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((i=o?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(l,r,i):l[r]=e[r]);return l.default=e,t&&t.set(e,l),l}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ownKeys(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var setCellValue=_utils.default.setCellValue,hasChildrenList=_utils.default.hasChildrenList,getColumnList=_utils.default.getColumnList,calcHeight=_dom.default.calcHeight,hasClass=_dom.default.hasClass,addClass=_dom.default.addClass,removeClass=_dom.default.removeClass,getEventTargetNode=_dom.default.getEventTargetNode,isNodeElement=_dom.default.isNodeElement,isWebkit=_dom.browse["-webkit"]&&!_dom.browse.edge,debounceScrollYDuration=_dom.browse.msie?80:20,customStorageKey="VXE_CUSTOM_STORE";function getRowUniqueId(){return _xeUtils.default.uniqueId("row_")}function eqCellValue(e,t,r){e=_xeUtils.default.get(e,r),t=_xeUtils.default.get(t,r);return!(!(0,_utils.eqEmptyValue)(e)||!(0,_utils.eqEmptyValue)(t))||(_xeUtils.default.isString(e)||_xeUtils.default.isNumber(e)?""+e==""+t:_xeUtils.default.isEqual(e,t))}function getNextSortOrder(e,t){e=e.sortOpts.orders,t=t.order||null,t=e.indexOf(t)+1;return e[t<e.length?t:0]}var getCustomStorageMap=function(e){var t=_conf.default.version,r=_xeUtils.default.toStringJSON(localStorage.getItem(customStorageKey)||""),r=r&&r._v===t?r:{_v:t};return(e?r[e]:r)||{}},setCustomStorageMap=function(e,t){var r=_conf.default.version,i=getCustomStorageMap();i[e]=t||void 0,i._v=r,localStorage.setItem(customStorageKey,_xeUtils.default.toJSONString(i))},getRecoverRowMaps=function(e,t){var r=e.fullAllDataRowIdData,i={};return _xeUtils.default.each(t,function(e,t){r[t]&&(i[t]=e)}),i};function handleReserveRow(e,t){var r=e.fullDataRowIdData,i=[];return _xeUtils.default.each(t,function(e,t){r[t]&&-1===i.indexOf(r[t].row)&&i.push(r[t].row)}),i}function computeVirtualX(e){var t=e.$refs,r=e.visibleColumn,e=t.tableBody,t=e?e.$el:null;if(t){for(var i=t.scrollLeft,l=i+t.clientWidth,o=-1,n=0,a=0,s=0,u=r.length;s<u&&(n+=r[s].renderWidth,!(0<=(o=-1===o&&i<n?s:o)&&(a++,l<n)));s++);return{toVisibleIndex:Math.max(0,o),visibleSize:Math.max(8,a)}}return{toVisibleIndex:0,visibleSize:8}}function computeVirtualY(e){var t,r,i=e.$refs,l=e.vSize,e=e.rowHeightMaps,o=i.tableHeader,i=i.tableBody,i=i?i.$el:null;return i?(o=o?o.$el:null,r=0,{rowHeight:r=(r=(t=!(t=i.querySelector("tr"))&&o?o.querySelector("tr"):t)?t.clientHeight:r)||e[l||"default"],visibleSize:Math.max(8,Math.ceil(i.clientHeight/r)+2)}):{rowHeight:0,visibleSize:8}}function calculateMergerOffserIndex(e,t,r){for(var i=0,l=e.length;i<l;i++){var o=e[i],n=t.startIndex,a=t.endIndex,s=o[r],o=s+o[r+"span"];s<n&&n<o&&(t.startIndex=s),s<a&&a<o&&(t.endIndex=o),t.startIndex===n&&t.endIndex===a||(i=-1)}}function setMerges(e,t,n,a){var r,s;t&&(r=e.treeConfig,s=e.visibleColumn,_xeUtils.default.isArray(t)||(t=[t]),r&&t.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(function(e){var t,r,i=e.row,l=e.col,o=e.rowspan,e=e.colspan;a&&_xeUtils.default.isNumber(i)&&(i=a[i]),_xeUtils.default.isNumber(l)&&(l=s[l]),(a?i:_xeUtils.default.isNumber(i))&&l&&(o||e)&&(o=_xeUtils.default.toNumber(o)||1,e=_xeUtils.default.toNumber(e)||1,1<o||1<e)&&(t=_xeUtils.default.findIndexOf(n,function(e){return e._row===i&&e._col===l}),(t=n[t])?(t.rowspan=o,t.colspan=e,t._rowspan=o,t._colspan=e):(t=a?a.indexOf(i):i,r=s.indexOf(l),n.push({row:t,col:r,rowspan:o,colspan:e,_row:i,_col:l,_rowspan:o,_colspan:e})))}))}function removeMerges(e,t,i,l){var r,o,n=[];return t&&(r=e.treeConfig,o=e.visibleColumn,_xeUtils.default.isArray(t)||(t=[t]),r&&t.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(function(e){var t=e.row,r=e.col,e=(l&&_xeUtils.default.isNumber(t)&&(t=l[t]),_xeUtils.default.isNumber(r)&&(r=o[r]),_xeUtils.default.findIndexOf(i,function(e){return e._row===t&&e._col===r}));-1<e&&(e=i.splice(e,1),n.push(e[0]))})),n}function clearAllSort(e){e.tableFullColumn.forEach(function(e){e.order=null})}function getOrderField(t,r){var i=r.sortBy,l=r.sortType;return function(e){e=i?_xeUtils.default.isFunction(i)?i({row:e,column:r}):_xeUtils.default.get(e,i):t.getCellLabel(e,r);return l&&"auto"!==l?"number"===l?_xeUtils.default.toNumber(e):"string"===l?_xeUtils.default.toValueString(e):e:isNaN(e)?e:_xeUtils.default.toNumber(e)}}var Methods={callSlot:function(e,t,r,i){if(e){var l=this.$xegrid;if(l)return l.callSlot(e,t,r,i);if(_xeUtils.default.isFunction(e))return(0,_vn.getSlotVNs)(e.call(this,t,r,i))}return[]},getParentElem:function(){var e=this.$el,t=this.$xegrid;return(t?t.$el:e).parentNode},getParentHeight:function(){var e=this.$el,t=this.$xegrid,r=this.height,e=e.parentNode,r="auto"===r?(0,_dom.getPaddingTopBottomSize)(e):0;return Math.floor(t?t.getParentHeight():_xeUtils.default.toNumber(getComputedStyle(e).height)-r)},getExcludeHeight:function(){var e=this.$xegrid;return e?e.getExcludeHeight():0},clearAll:function(){return(0,_util.clearTableAllStatus)(this)},syncData:function(){var e=this;return(0,_log.warnLog)("vxe.error.delFunc",["syncData","getData"]),this.$nextTick().then(function(){return e.tableData=[],e.$nextTick().then(function(){return e.loadTableData(e.tableFullData)})})},updateData:function(){var e=this,t=this.scrollXLoad,r=this.scrollYLoad;return this.handleTableData(!0).then(function(){if(e.updateFooter(),e.checkSelectionStatus(),t||r)return t&&e.updateScrollXSpace(),r&&e.updateScrollYSpace(),e.refreshScroll()}).then(function(){return e.updateCellAreas(),e.recalculate(!0)}).then(function(){setTimeout(function(){return e.recalculate()},50)})},handleTableData:function(e){var r=this,t=this.scrollYLoad,i=this.scrollYStore,l=this.fullDataRowIdData,o=this.afterFullData,e=(e&&(this.updateAfterFullData(),o=this.handleVirtualTreeToList()),t?o.slice(i.startIndex,i.endIndex):o.slice(0));return e.forEach(function(e,t){e=(0,_util.getRowid)(r,e),e=l[e];e&&(e.$index=t)}),this.tableData=e,this.$nextTick()},updateScrollYStatus:function(e){var t=this.treeConfig,r=this.treeOpts,i=this.sYOpts,r=r.transform,e=e||this.tableFullData,r=(r||!t)&&!!i.enabled&&-1<i.gt&&(0===i.gt||i.gt<=e.length);return this.scrollYLoad=r},loadTableData:function(e){var i=this,t=this.keepSource,r=this.treeConfig,l=this.treeOpts,o=this.editStore,n=this.scrollYStore,a=this.scrollXStore,s=this.lastScrollLeft,u=this.lastScrollTop,c=this.scrollYLoad,d=this.sXOpts,h=this.sYOpts,f=l.children||l.childrenField,g=[],p=e?e.slice(0):[],x=(r&&(l.transform?("development"===process.env.NODE_ENV&&(l.rowField||(0,_log.errLog)("vxe.error.reqProp",["table.tree-config.rowField"]),l.parentField||(0,_log.errLog)("vxe.error.reqProp",["table.tree-config.parentField"]),f||(0,_log.errLog)("vxe.error.reqProp",["tree-config.childrenField"]),l.mapChildrenField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.mapChildrenField"]),f===l.mapChildrenField&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),p.forEach(function(e){e[f]&&e[f].length&&(0,_log.warnLog)("vxe.error.errConflicts",["tree-config.transform","row.".concat(f)])})),p=(g=_xeUtils.default.toArrayTree(p,{key:l.rowField,parentKey:l.parentField,children:f,mapChildren:l.mapChildrenField})).slice(0)):g=p.slice(0)),n.startIndex=0,n.endIndex=1,a.startIndex=0,a.endIndex=1,o.insertList=[],o.insertMaps={},o.removeList=[],o.removeMaps={},this.updateScrollYStatus(p));return this.scrollYLoad=x,this.tableFullData=p,this.tableFullTreeData=g,this.cacheRowMap(!0),this.tableSynchData=e,t&&this.cacheSourceMap(p),"development"===process.env.NODE_ENV&&x&&(this.height||this.maxHeight||(0,_log.errLog)("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),this.showOverflow||(0,_log.warnLog)("vxe.error.reqProp",["table.show-overflow"]),this.spanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["table.span-method"]),this.clearCellAreas&&this.mouseConfig&&(this.clearCellAreas(),this.clearCopyCellArea()),this.clearMergeCells(),this.clearMergeFooterItems(),this.handleTableData(!0),this.updateFooter(),this.$nextTick().then(function(){i.updateHeight(),i.updateStyle()}).then(function(){i.computeScrollLoad()}).then(function(){return x&&(n.endIndex=n.visibleSize),i.handleReserveStatus(),i.checkSelectionStatus(),new Promise(function(r){i.$nextTick().then(function(){return i.recalculate()}).then(function(){var e=s,t=u;d.scrollToLeftOnChange&&(e=0),h.scrollToTopOnChange&&(t=0),c===x?(0,_util.restoreScrollLocation)(i,e,t).then(r):setTimeout(function(){return(0,_util.restoreScrollLocation)(i,e,t).then(r)})})})})},loadData:function(e){var t=this,r=this.inited,i=this.initStatus;return this.loadTableData(e).then(function(){return t.inited=!0,t.initStatus=!0,i||t.handleLoadDefaults(),r||t.handleInitDefaults(),t.recalculate()})},reloadData:function(e){var t=this,r=this.inited;return this.clearAll().then(function(){return t.inited=!0,t.initStatus=!0,t.loadTableData(e)}).then(function(){return t.handleLoadDefaults(),r||t.handleInitDefaults(),t.recalculate()})},setRow:function(e,t){var r;return t&&(r=_xeUtils.default.isArray(r=e)?r:[e]).forEach(function(e){return Object.assign(e,t)}),this.$nextTick()},reloadRow:function(e,t,r){var i=this.keepSource,l=this.tableSourceData,o=this.tableData;return i?((i=l[this.getRowIndex(e)])&&e&&(r?(l=_xeUtils.default.get(t||e,r),_xeUtils.default.set(e,r,l),_xeUtils.default.set(i,r,l)):(r=_xeUtils.default.clone(_objectSpread({},t),!0),_xeUtils.default.destructuring(i,Object.assign(e,r)))),this.tableData=o.slice(0)):"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),this.$nextTick()},loadColumn:function(e){var t=this,e=_xeUtils.default.mapTree(e,function(e){return _cell.default.createColumn(t,e)},{children:"children"});return this.handleColumn(e)},reloadColumn:function(e){var t=this;return this.clearAll().then(function(){return t.loadColumn(e)})},initColumnSort:function(){this.collectColumn.forEach(function(e,t){t+=1;e.sortNumber=t,e.renderSortNumber=t})},handleColumn:function(e){var t=this,r=(this.collectColumn=e,getColumnList(e));return this.tableFullColumn=r,this._isLoading=!0,this.initColumnSort(),Promise.resolve(this.restoreCustomStorage()).then(function(){return t._isLoading=!1,t.cacheColumnMap(),t.parseColumns().then(function(){t.scrollXLoad&&t.loadScrollXData(!0)}),t.clearMergeCells(),t.clearMergeFooterItems(),t.handleTableData(!0),"development"===process.env.NODE_ENV&&(t.scrollXLoad||t.scrollYLoad)&&t.expandColumn&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),t.$nextTick().then(function(){return t.$toolbar&&t.$toolbar.syncUpdate({collectColumn:e,$table:t}),t.recalculate()})})},cacheRowMap:function(a){function e(e,t,r,i,l,o){var n=(0,_util.getRowid)(s,e),i=u&&i?(0,_util.toTreePathSeq)(i):t+1,o=o?o.length-1:0,i=((0,_utils.eqEmptyValue)(n)&&(n=getRowUniqueId(),_xeUtils.default.set(e,x,n)),m&&e[p]&&_xeUtils.default.isUndefined(e[g])&&(e[g]=null),{row:e,rowid:n,seq:i,index:u&&l?-1:t,_index:-1,$index:-1,items:r,parent:l,level:o});a&&(h[n]=i,c.set(e,i)),f[n]=i,d.set(e,i)}var s=this,u=this.treeConfig,t=this.treeOpts,r=this.tableFullData,c=this.fullDataRowMap,d=this.fullAllDataRowMap,i=this.tableFullTreeData,h=this.fullDataRowIdData,f=this.fullAllDataRowIdData,g=t.children||t.childrenField,p=t.hasChild||t.hasChildField,x=(0,_util.getRowkey)(this),m=u&&t.lazy;a&&(h=this.fullDataRowIdData={},c.clear()),f=this.fullAllDataRowIdData={},d.clear(),u?_xeUtils.default.eachTree(i,e,{children:g}):r.forEach(e)},cacheSourceMap:function(e){function t(e){var t=(0,_util.getRowid)(r,e);(0,_utils.eqEmptyValue)(t)&&(t=getRowUniqueId(),_xeUtils.default.set(e,n,t)),o[t]={row:e,rowid:t}}var r=this,i=this.treeConfig,l=this.treeOpts,o=this.sourceDataRowIdData,e=_xeUtils.default.clone(e,!0),n=(0,_util.getRowkey)(this),o=this.sourceDataRowIdData={};i?(i=l.children||l.childrenField,_xeUtils.default.eachTree(e,t,{children:l.transform?l.mapChildrenField:i})):e.forEach(t),this.tableSourceData=e},getParams:function(){return this.params},loadTreeChildren:function(a,e){var s=this,i=this.keepSource,l=this.tableSourceData,t=this.treeOpts,u=this.fullDataRowIdData,c=this.fullDataRowMap,d=this.fullAllDataRowMap,h=this.fullAllDataRowIdData,o=this.sourceDataRowIdData,n=t.transform,f=t.mapChildrenField,g=t.children||t.childrenField,t=h[(0,_util.getRowid)(this,a)],p=t?t.level:0;return this.createData(e).then(function(e){var t,r;return i&&(t=(0,_util.getRowid)(s,a),(r=_xeUtils.default.findTree(l,function(e){return t===(0,_util.getRowid)(s,e)},{children:g}))&&(r.item[g]=_xeUtils.default.clone(e,!0)),e.forEach(function(e){var t=(0,_util.getRowid)(s,e);o[t]=_xeUtils.default.clone(e,!0)})),_xeUtils.default.eachTree(e,function(e,t,r,i,l,o){var n=(0,_util.getRowid)(s,e),t={row:e,rowid:n,seq:-1,index:t,_index:-1,$index:-1,items:r,parent:l||a,level:p+o.length};u[n]=t,c.set(e,t),h[n]=t,d.set(e,t)},{children:g}),a[g]=e,n&&(a[f]=_xeUtils.default.clone(e,!1)),s.updateAfterDataIndex(),e})},cacheColumnMap:function(){function n(e,t,r,i,l){var o=e.id,n=e.field,a=e.fixed,s=e.type,u=e.treeNode,t={column:e,colid:o,index:t,items:r,parent:l};n&&("development"===process.env.NODE_ENV&&b[n]&&(0,_log.warnLog)("vxe.error.colRepet",["field",n]),b[n]=t),!p&&a&&(p=a),g||"html"!==s||(g=e),u?("development"===process.env.NODE_ENV&&d&&(0,_log.warnLog)("vxe.error.colRepet",["tree-node",u]),d=d||e):"expand"===s&&("development"===process.env.NODE_ENV&&c&&(0,_log.warnLog)("vxe.error.colRepet",["type",s]),c=c||e),"development"===process.env.NODE_ENV&&("checkbox"===s?(h&&(0,_log.warnLog)("vxe.error.colRepet",["type",s]),h=h||e):"radio"===s&&(f&&(0,_log.warnLog)("vxe.error.colRepet",["type",s]),f=f||e)),"development"===process.env.NODE_ENV&&(x.showOverflow&&!1===e.showOverflow&&(0,_log.warnLog)("vxe.error.errConflicts",["table.show-overflow=".concat(x.showOverflow),"column.show-overflow=".concat(e.showOverflow)]),x.showHeaderOverflow&&!1===e.showHeaderOverflow&&(0,_log.warnLog)("vxe.error.errConflicts",["table.show-header-overflow=".concat(x.showHeaderOverflow),"column.show-header-overflow=".concat(e.showHeaderOverflow)]),x.showFooterOverflow)&&!1===e.showFooterOverflow&&(0,_log.warnLog)("vxe.error.errConflicts",["table.show-footer-overflow=".concat(x.showFooterOverflow),"column.show-footer-overflow=".concat(e.showFooterOverflow)]),"development"===process.env.NODE_ENV&&g&&(v.useKey||(0,_log.errLog)("vxe.error.reqProp",["column-config.useKey","column.type=html"]),w.useKey||(0,_log.errLog)("vxe.error.reqProp",["row-config.useKey","column.type=html"])),_&&!1===e.showOverflow&&(_=!1),C[o]&&(0,_log.errLog)("vxe.error.colRepet",["colId",o]),C[o]=t,m.set(e,t)}var c,d,h,f,g,p,x=this,e=this.tableFullColumn,t=this.collectColumn,m=this.fullColumnMap,r=this.showOverflow,v=this.columnOpts,w=this.rowOpts,C=this.fullColumnIdData={},b=this.fullColumnFieldData={},i=t.some(hasChildrenList),_=!!r;m.clear(),i?_xeUtils.default.eachTree(t,function(e,t,r,i,l,o){e.level=o.length,n(e,t,r,0,l)}):e.forEach(n),"development"===process.env.NODE_ENV&&c&&this.mouseOpts.area&&(0,_log.errLog)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),this.isGroup=i,this.treeNodeColumn=d,this.expandColumn=c,this.isAllOverflow=_},getRowNode:function(e){if(e){e=this.fullAllDataRowIdData[e.getAttribute("rowid")];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}return null},getColumnNode:function(e){if(e){e=this.fullColumnIdData[e.getAttribute("colid")];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}return null},getRowSeq:function(e){var t=this.fullDataRowIdData;if(e){t=t[(0,_util.getRowid)(this,e)];if(t)return t.seq}return-1},getRowIndex:function(e){return this.fullDataRowMap.has(e)?this.fullDataRowMap.get(e).index:-1},getVTRowIndex:function(e){return this.afterFullData.indexOf(e)},_getRowIndex:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["_getRowIndex","getVTRowIndex"]),this.getVTRowIndex(e)},getVMRowIndex:function(e){return this.tableData.indexOf(e)},$getRowIndex:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["$getRowIndex","getVMRowIndex"]),this.getVMRowIndex(e)},getColumnIndex:function(e){return this.fullColumnMap.has(e)?this.fullColumnMap.get(e).index:-1},getVTColumnIndex:function(e){return this.visibleColumn.indexOf(e)},_getColumnIndex:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["_getColumnIndex","getVTColumnIndex"]),this.getVTColumnIndex(e)},getVMColumnIndex:function(e){return this.tableColumn.indexOf(e)},$getColumnIndex:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["$getColumnIndex","getVMColumnIndex"]),this.getVMColumnIndex(e)},isSeqColumn:function(e){return e&&"seq"===e.type},defineField:function(e){var t=this,r=this.radioOpts,i=this.checkboxOpts,o=this.treeConfig,n=this.treeOpts,a=this.expandOpts,s=n.children||n.childrenField,u=(0,_util.getRowkey)(this);return(e=_xeUtils.default.isArray(e)?e:[e||{}]).map(function(l){return t.tableFullColumn.forEach(function(e){var t,r=e.field,i=e.editRender;r&&!_xeUtils.default.has(l,r)&&(t=null,i&&(i=i.defaultValue,_xeUtils.default.isFunction(i)?t=i({column:e}):_xeUtils.default.isUndefined(i)||(t=i)),_xeUtils.default.set(l,r,t))}),[r.labelField,i.checkField,i.labelField,a.labelField].forEach(function(e){e&&(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,e))&&_xeUtils.default.set(l,e,null)}),o&&n.lazy&&_xeUtils.default.isUndefined(l[s])&&(l[s]=null),(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,u))&&_xeUtils.default.set(l,u,getRowUniqueId()),l})},createData:function(e){var t=this;return this.$nextTick().then(function(){return t.defineField(e)})},createRow:function(e){var t=_xeUtils.default.isArray(e);return this.createData(e=t?e:[e]).then(function(e){return t?e:e[0]})},revertData:function(e,r){var i=this,t=this.keepSource,l=this.tableSourceData,o=this.treeConfig;return t?((t=e)?_xeUtils.default.isArray(e)||(t=[e]):t=_xeUtils.default.toArray(this.getUpdateRecords()),t.length&&t.forEach(function(e){var t;i.isInsertByRow(e)||(t=i.getRowIndex(e),o&&-1===t&&(0,_log.errLog)("vxe.error.noTree",["revertData"]),(t=l[t])&&e&&(r?_xeUtils.default.set(e,r,_xeUtils.default.clone(_xeUtils.default.get(t,r),!0)):_xeUtils.default.destructuring(e,_xeUtils.default.clone(t,!0))))}),e?this.$nextTick():this.reloadData(l)):("development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),this.$nextTick())},clearData:function(e,t){var r=this.tableFullData,i=this.visibleColumn;return arguments.length?e&&!_xeUtils.default.isArray(e)&&(e=[e]):e=r,t?e.forEach(function(e){return _xeUtils.default.set(e,t,null)}):e.forEach(function(t){i.forEach(function(e){e.field&&setCellValue(t,e,null)})}),this.$nextTick()},getCellElement:function(e,t){var r,i,t=(0,_util.handleFieldOrColumn)(this,t);return t&&(r=this.$refs,e=(0,_util.getRowid)(this,e),i=null,i=t?r["".concat(t.fixed||"table","Body")]||r.tableBody:i)&&i.$el?i.$el.querySelector('.vxe-body--row[rowid="'.concat(e,'"] .').concat(t.id)):null},getCellLabel:function(e,t){t=(0,_util.handleFieldOrColumn)(this,t);if(!t)return null;var r=t.formatter,i=_utils.default.getCellValue(e,t),l=i;if(r){var o,n=this.fullAllDataRowMap,a=t.id,s=n.has(e);if(s&&(o=(o=(s=n.get(e)).formatData)||(n.get(e).formatData={}),s)&&o[a]&&o[a].value===i)return o[a].label;n={cellValue:i,row:e,rowIndex:this.getRowIndex(e),column:t,columnIndex:this.getColumnIndex(t)};l=_xeUtils.default.isString(r)?(s=_formats.formats.get(r))&&s.cellFormatMethod?s.cellFormatMethod(n):"":_xeUtils.default.isArray(r)?(e=_formats.formats.get(r[0]))&&e.cellFormatMethod?e.cellFormatMethod.apply(e,[n].concat(_toConsumableArray(r.slice(1)))):"":r(n),o&&(o[a]={value:i,label:l})}return l},isInsertByRow:function(e){var t=this.editStore,e=(0,_util.getRowid)(this,e);return t.insertList.length&&t.insertMaps[e]},removeInsertRow:function(){return this.remove(this.editStore.insertList)},isUpdateByRow:function(e,t){var r=this.tableFullColumn,i=this.keepSource,l=this.sourceDataRowIdData,o=this.fullDataRowIdData;if(i){i=(0,_util.getRowid)(this,e);if(!o[i])return!1;o=l[i];if(o){var n=o.row;if(1<arguments.length)return!eqCellValue(n,e,t);for(var a=0,s=r.length;a<s;a++){var u=r[a].field;if(u&&!eqCellValue(n,e,u))return!0}}}return!1},getColumns:function(e){var t=this.visibleColumn;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getColid:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e?e.id:null},getColumnById:function(e){var t=this.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=this.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:this.collectColumn.slice(0),fullColumn:this.tableFullColumn.slice(0),visibleColumn:this.visibleColumn.slice(0),tableColumn:this.tableColumn.slice(0)}},getData:function(e){var t=this.data||this.tableSynchData;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(r){var i,e=this.tableFullData,t=this.afterFullData,l=this.treeConfig,o=this.treeOpts,n=this.checkboxOpts,a=this.tableFullTreeData,s=this.afterTreeFullData,u=this.afterFullRowMaps,c=o.transform,d=o.mapChildrenField,h=n.checkField,n=o.children||o.childrenField,o=r?c?a:e:c?s:t,f=[];return h?f=l?_xeUtils.default.filterTree(o,function(e){return _xeUtils.default.get(e,h)},{children:c?d:n}):o.filter(function(e){return _xeUtils.default.get(e,h)}):(a=this.selectCheckboxMaps,i=this.fullDataRowIdData,_xeUtils.default.each(a,function(e,t){r?i[t]&&f.push(i[t].row):u[t]&&f.push(u[t])})),f},handleVirtualTreeToList:function(){var a,s,u=this,e=this.treeOpts,t=this.treeConfig,c=this.treeExpandedMaps,r=this.afterTreeFullData,i=this.afterFullData;return t&&e.transform?(a=[],s={},_xeUtils.default.eachTree(r,function(e,t,r,i,l){var o=(0,_util.getRowid)(u,e),n=(0,_util.getRowid)(u,l);(!l||s[n]&&c[n])&&(s[o]=1,a.push(e))},{children:e.mapChildrenField}),this.afterFullData=a,this.updateScrollYStatus(a),a):i},updateAfterFullData:function(){var e,c=this,t=this.tableFullColumn,r=this.tableFullData,i=this.filterOpts,l=this.sortOpts,o=this.treeConfig,n=this.treeOpts,a=this.tableFullTreeData,d=i.remote,h=i.filterMethod,s=l.remote,i=l.sortMethod,u=l.multiple,l=l.chronological,f=n.transform,g=[],p=[],x=[],m=[],v=(t.forEach(function(e){var t,r,i=e.field,l=e.sortable,o=e.order,n=e.filters;!d&&n&&n.length&&(t=[],r=[],n.forEach(function(e){e.checked&&(r.push(e),t.push(e.value))}),r.length)&&x.push({column:e,valueList:t,itemList:r}),!s&&l&&o&&m.push({column:e,field:i,property:i,order:o,sortTime:e.sortTime})}),u&&l&&1<m.length&&(m=_xeUtils.default.orderBy(m,"sortTime")),x.length?(t=function(u){return x.every(function(e){var t,r,i,l,o,n,a=e.column,s=e.valueList,e=e.itemList;return!(s.length&&!d)||(t=a.filterMethod,i=a.filterRender,r=a.field,i=(0,_utils.isEnableConf)(i)?_vXETable.default.renderer.get(i.name):null,l=i&&i.renderFilter?i.tableFilterMethod||i.filterMethod:null,o=i?i.defaultTableFilterMethod||i.defaultFilterMethod:null,n=_utils.default.getCellValue(u,a),t?e.some(function(e){return t({value:e.value,option:e,cellValue:n,row:u,column:a,$table:c})}):l?e.some(function(e){return l({value:e.value,option:e,cellValue:n,row:u,column:a,$table:c})}):h?h({options:e,values:s,cellValue:n,row:u,column:a}):o?e.some(function(e){return o({value:e.value,option:e,cellValue:n,row:u,column:a,$table:c})}):-1<s.indexOf(_xeUtils.default.get(u,r)))})},o&&f?g=p=_xeUtils.default.searchTree(a,t,_objectSpread(_objectSpread({},n),{},{original:!0})):p=g=(o?a:r).filter(t)):o&&f?g=p=_xeUtils.default.searchTree(a,function(){return!0},_objectSpread(_objectSpread({},n),{},{original:!0})):p=g=(o?a:r).slice(0),m[0]);!s&&v&&(o&&f?g=p=i?(l=i({data:p,sortList:m,$table:this}),_xeUtils.default.isArray(l)?l:p):_xeUtils.default.orderBy(p,m.map(function(e){var t=e.column,e=e.order;return[getOrderField(c,t),e]})):p=g=i?(t=i({data:g,column:v.column,property:v.field,field:v.field,order:v.order,sortList:m,$table:this}),_xeUtils.default.isArray(t)?t:g):u?_xeUtils.default.orderBy(g,m.map(function(e){var t=e.column,e=e.order;return[getOrderField(c,t),e]})):(_xeUtils.default.isArray(v.sortBy)&&(e=v.sortBy.map(function(e){return[e,v.order]})),_xeUtils.default.orderBy(g,e||[v].map(function(e){var t=e.column,e=e.order;return[getOrderField(c,t),e]})))),this.afterFullData=g,this.afterTreeFullData=p,this.updateAfterDataIndex()},updateAfterDataIndex:function(){var n=this,e=this.treeConfig,t=this.afterFullData,a=this.fullDataRowIdData,s=this.fullAllDataRowIdData,r=this.afterTreeFullData,i=this.treeOpts,l=i.children||i.childrenField,u={};e?_xeUtils.default.eachTree(r,function(e,t,r,i){var l=(0,_util.getRowid)(n,e),o=s[l],i=i.map(function(e,t){return t%2==0?Number(e)+1:"."}).join("");o?(o.seq=i,o._index=t):(s[l]=o={row:e,rowid:l,seq:i,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[l]=o),u[l]=e},{children:i.transform?i.mapChildrenField:l}):t.forEach(function(e,t){var r=(0,_util.getRowid)(n,e),i=s[r],l=t+1;i?(i.seq=l,i._index=t):(s[r]=i={row:e,rowid:r,seq:l,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[r]=i),u[r]=e}),this.afterFullRowMaps=u},getParentRow:function(e){var t=this.treeConfig,r=this.fullDataRowIdData;if(e&&t){t=_xeUtils.default.isString(e)?e:(0,_util.getRowid)(this,e);if(t)return(e=r[t])?e.parent:null}return null},getRowById:function(e){var t=this.fullDataRowIdData,e=_xeUtils.default.eqNull(e)?"":encodeURIComponent(e);return t[e]?t[e].row:null},getRowid:function(e){var t=this.fullAllDataRowMap;return t.has(e)?t.get(e).rowid:null},getTableData:function(){var e=this.treeConfig,t=this.tableFullData,r=this.afterFullData,i=this.tableData,l=this.footerTableData,o=this.tableFullTreeData;return{fullData:(e?o:t).slice(0),visibleData:r.slice(0),tableData:i.slice(0),footerData:l.slice(0)}},handleLoadDefaults:function(){var e=this;this.checkboxConfig&&this.handleDefaultSelectionChecked(),this.radioConfig&&this.handleDefaultRadioChecked(),this.expandConfig&&this.handleDefaultRowExpand(),this.treeConfig&&this.handleDefaultTreeExpand(),this.mergeCells&&this.handleDefaultMergeCells(),this.mergeFooterItems&&this.handleDefaultMergeFooterItems(),this.$nextTick(function(){return setTimeout(e.recalculate)})},handleInitDefaults:function(){this.sortConfig&&this.handleDefaultSort()},setColumnFixed:function(e,t){var r=this.isMaxFixedColumn,i=this.columnOpts,e=(0,_util.handleFieldOrColumn)(this,e),e=(0,_util.getRootColumn)(this,e);return e&&e.fixed!==t?!e.fixed&&r?(_vXETable.default.modal&&_vXETable.default.modal.message({status:"error",content:_conf.default.i18n("vxe.table.maxFixedCol",[i.maxFixedSize])}),this.$nextTick()):(_xeUtils.default.eachTree([e],function(e){e.fixed=t}),this.saveCustomStore("update:fixed"),this.refreshColumn()):this.$nextTick()},clearColumnFixed:function(e){e=(0,_util.handleFieldOrColumn)(this,e),e=(0,_util.getRootColumn)(this,e);return e&&e.fixed?(_xeUtils.default.eachTree([e],function(e){e.fixed=null}),this.saveCustomStore("update:fixed"),this.refreshColumn()):this.$nextTick()},hideColumn:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e&&e.visible?(e.visible=!1,this.handleCustom()):this.$nextTick()},showColumn:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e&&!e.visible?(e.visible=!0,this.handleCustom()):this.$nextTick()},setColumnWidth:function(e,t){var r,i,e=(0,_util.handleFieldOrColumn)(this,e);return e?(i=r=_xeUtils.default.toInteger(t),_dom.default.isScale(t)&&(t=(t=(t=this.$refs.tableBody)?t.$el:null)?t.clientWidth-1:0,i=Math.floor(r*t)),e.resizeWidth=i,this.refreshColumn()):this.$nextTick()},getColumnWidth:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e?e.renderWidth:0},resetColumn:function(e){var t=this.collectColumn,r=this.customOpts.checkMethod,i=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e,sort:!0===e},e);return _xeUtils.default.eachTree(t,function(e){i.resizable&&(e.resizeWidth=0),i.fixed&&(e.fixed=e.defaultFixed),i.sort&&(e.renderSortNumber=e.sortNumber),r&&!r({column:e})||(e.visible=e.defaultVisible),e.renderResizeWidth=e.renderWidth}),this.saveCustomStore("reset"),this.handleCustom()},handleCustom:function(){return this.mouseConfig&&(this.clearSelected&&this.clearSelected(),this.clearCellAreas)&&(this.clearCellAreas(),this.clearCopyCellArea()),this.analyColumnWidth(),this.refreshColumn(!0)},handleCustomRestore:function(e){var t=this.tableFullColumn,r=this.collectColumn,i=e.resizableData,l=e.sortData,o=e.visibleData,n=e.fixedData,a=!1;(i||l||o||n)&&(t.forEach(function(e){var t=e.getKey();parent||(n&&n[t]&&(e.fixed=n[t]),l&&_xeUtils.default.isNumber(l[t])&&(a=!0,e.renderSortNumber=l[t])),i&&_xeUtils.default.isNumber(i[t])&&(e.resizeWidth=i[t]),o&&_xeUtils.default.isBoolean(o[t])&&(e.visible=o[t])}),a)&&(r=_xeUtils.default.orderBy(r,"renderSortNumber"),this.collectColumn=r,this.tableFullColumn=getColumnList(r))},restoreCustomStorage:function(){var t=this,e=this.id,r=this.customConfig,i=this.customOpts,l=i.storage,i=i.restoreStore,o=!0===l,l=o?{}:Object.assign({},l||{}),n=o||l.resizable,a=o||l.visible,s=o||l.fixed,o=o||l.sort;if(r&&(n||a||s||o)){if(e)return l=getCustomStorageMap(e),i?Promise.resolve(i({id:e,type:"restore",storeData:l})).then(function(e){if(e)return t.handleCustomRestore(e)}).catch(function(e){return e}):this.handleCustomRestore(l);(0,_log.errLog)("vxe.error.reqProp",["id"])}},getCustomStoreData:function(){var o,n,a,s,e=this.id,t=this.customOpts,u=this.collectColumn,c=t.checkMethod,d={},h={},f={},g={},t={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};return e?(s=a=n=o=0,_xeUtils.default.eachTree(u,function(e,t,r,i,l){l||(u.forEach(function(e){var t=e.getKey();t&&(n=1,h[t]=e.renderSortNumber)}),e.fixed&&e.fixed!==e.defaultFixed&&(l=e.getKey())&&(a=1,g[l]=e.fixed)),e.resizeWidth&&(l=e.getKey())&&(o=1,d[l]=e.renderWidth),c&&!c({column:e})||(!e.visible&&e.defaultVisible?(l=e.getKey())&&(s=1,f[l]=!1):e.visible&&!e.defaultVisible&&(l=e.getKey())&&(s=1,f[l]=!0))}),o&&(t.resizableData=d),n&&(t.sortData=h),a&&(t.fixedData=g),s&&(t.visibleData=f)):(0,_log.errLog)("vxe.error.reqProp",["id"]),t},saveCustomStore:function(e){var t=this.id,r=this.customOpts,i=r.updateStore,r=r.storage,l=!0===r,r=l?{}:Object.assign({},r||{}),o=l||r.resizable,n=l||r.visible,a=l||r.fixed,l=l||r.sort;if(o||n||a||l){if(!t)return(0,_log.errLog)("vxe.error.reqProp",["id"]),this.$nextTick();r="reset"===e?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:this.getCustomStoreData();if(i)return i({id:t,type:e,storeData:r});setCustomStorageMap(t,"reset"===e?null:r)}return this.$nextTick()},handleUpdateDataQueue:function(){this.upDataFlag++},handleRefreshColumnQueue:function(){this.reColumnFlag++},refreshColumn:function(e){var t=this;return e&&(e=_xeUtils.default.orderBy(this.collectColumn,"renderSortNumber"),this.collectColumn=e,e=getColumnList(e),this.tableFullColumn=e,this.cacheColumnMap()),this.parseColumns().then(function(){return t.refreshScroll()}).then(function(){return t.recalculate()})},parseColumns:function(){var t,r,i,e=this,n=[],a=[],s=[],l=this.collectColumn,o=this.tableFullColumn,u=this.isGroup,c=this.columnStore,d=this.sXOpts,h=this.scrollXStore,f=(u?(t=[],r=[],i=[],_xeUtils.default.eachTree(l,function(e,t,r,i,l){var o=hasChildrenList(e);l&&l.fixed&&(e.fixed=l.fixed),l&&e.fixed!==l.fixed&&(0,_log.errLog)("vxe.error.groupFixed"),o?e.visible=!!_xeUtils.default.findTree(e.children,function(e){return hasChildrenList(e)?null:e.visible}):e.visible&&("left"===e.fixed?n:"right"===e.fixed?s:a).push(e)}),l.forEach(function(e){e.visible&&("left"===e.fixed?t:"right"===e.fixed?i:r).push(e)}),this.tableGroupColumn=t.concat(r).concat(i)):o.forEach(function(e){e.visible&&("left"===e.fixed?n:"right"===e.fixed?s:a).push(e)}),n.concat(a).concat(s)),u=d.enabled&&-1<d.gt&&(0===d.gt||d.gt<=o.length);return this.hasFixedColumn=0<n.length||0<s.length,Object.assign(c,{leftList:n,centerList:a,rightList:s}),u&&("development"===process.env.NODE_ENV&&(this.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["span-method"]),this.footerSpanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["footer-span-method"]),l=computeVirtualX(this).visibleSize,h.startIndex=0,h.endIndex=l,h.visibleSize=l),f.length===this.visibleColumn.length&&this.visibleColumn.every(function(e,t){return e===f[t]})||(this.clearMergeCells(),this.clearMergeFooterItems()),this.scrollXLoad=u,this.visibleColumn=f,this.handleTableColumn(),this.updateFooter().then(function(){return e.recalculate()}).then(function(){return e.updateCellAreas(),e.recalculate()})},analyColumnWidth:function(){var e=this.columnOpts,t=e.width,r=e.minWidth,i=[],l=[],o=[],n=[],a=[],s=[],u=[];this.tableFullColumn.forEach(function(e){t&&!e.width&&(e.width=t),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?i:"auto"===e.width?s:_dom.default.isPx(e.width)?l:_dom.default.isScale(e.width)?n:_dom.default.isPx(e.minWidth)?o:_dom.default.isScale(e.minWidth)?a:u).push(e)}),Object.assign(this.columnStore,{resizeList:i,pxList:l,pxMinList:o,scaleList:n,scaleMinList:a,autoList:s,remainList:u})},refreshScroll:function(){var t=this,r=this.lastScrollLeft,i=this.lastScrollTop,e=this.$refs,l=e.tableBody,o=e.leftBody,n=e.rightBody,e=e.tableFooter,a=l?l.$el:null,s=o?o.$el:null,u=n?n.$el:null,c=e?e.$el:null;return new Promise(function(e){if(r||i)return(0,_util.restoreScrollLocation)(t,r,i).then(function(){setTimeout(e,30)});(0,_dom.setScrollTop)(a,i),(0,_dom.setScrollTop)(s,i),(0,_dom.setScrollTop)(u,i),(0,_dom.setScrollLeft)(c,r),setTimeout(e,30)})},recalculate:function(e){var t=this,r=this.$refs,i=r.tableBody,l=r.tableHeader,r=r.tableFooter,o=i?i.$el:null,n=l?l.$el:null,a=r?r.$el:null;return o&&(this.calcCellWidth(),this.autoCellWidth(n,o,a),!0===e)?this.computeScrollLoad().then(function(){return t.autoCellWidth(n,o,a),t.computeScrollLoad()}):this.computeScrollLoad()},calcCellWidth:function(){var e=this,t=this.autoWidthColumnList;return this.tableData.length&&t.length?(this.isCalcColumn=!0,this.$nextTick().then(function(){var o=e.$el;o&&(t.forEach(function(e){var t=o.querySelectorAll(".vxe-header--column.".concat(e.id,">.vxe-cell,.vxe-body--column.").concat(e.id,">.vxe-cell,.vxe-footer--column.").concat(e.id,">.vxe-cell")),r=t[0],i=0,l=(r&&(r=getComputedStyle(r),i=Math.floor(_xeUtils.default.toNumber(r.paddingLeft)+_xeUtils.default.toNumber(r.paddingRight))+2),e.renderAutoWidth-i+2);_xeUtils.default.arrayEach(t,function(e){e=e.firstChild;e&&(l=Math.max(l,e.offsetWidth))}),e.renderAutoWidth=l+i}),e.analyColumnWidth()),e.isCalcColumn=!1})):(this.isCalcColumn=!1,this.$nextTick())},autoCellWidth:function(e,t,r){var i=0,l=t.clientWidth-1,o=l,n=o/100,a=this.fit,s=this.columnStore,u=s.resizeList,c=s.pxMinList,d=s.pxList,h=s.scaleList,f=s.scaleMinList,g=s.autoList,s=s.remainList;if(c.forEach(function(e){var t=parseInt(e.minWidth);i+=t,e.renderWidth=t}),f.forEach(function(e){var t=Math.floor(parseInt(e.minWidth)*n);i+=t,e.renderWidth=t}),h.forEach(function(e){var t=Math.floor(parseInt(e.width)*n);i+=t,e.renderWidth=t}),d.forEach(function(e){var t=parseInt(e.width);i+=t,e.renderWidth=t}),g.forEach(function(e){var t=Math.max(60,_xeUtils.default.toInteger(e.renderAutoWidth));i+=t,e.renderWidth=t}),u.forEach(function(e){var t=parseInt(e.resizeWidth);i+=t,e.renderWidth=t}),n=0<(o-=i)?Math.floor(o/(f.length+c.length+s.length)):0,a?0<o&&f.concat(c).forEach(function(e){i+=n,e.renderWidth+=n}):n=40,s.forEach(function(e){var t=Math.max(n,40);e.renderWidth=t,i+=t}),a){var p=h.concat(f).concat(c).concat(s),x=p.length-1;if(0<x){var m=l-i;if(0<m){for(;0<m&&0<=x;)m--,p[x--].renderWidth++;i=l}}}d=t.offsetHeight,g=t.scrollHeight>t.clientHeight,this.scrollbarWidth=g?t.offsetWidth-t.clientWidth:0,this.overflowY=g,this.tableWidth=i,this.tableHeight=d,e?(this.headerHeight=e.clientHeight,this.$nextTick(function(){e&&t&&e.scrollLeft!==t.scrollLeft&&(e.scrollLeft=t.scrollLeft)})):this.headerHeight=0,u=!1,o=0,a=0,a=r?(o=r.offsetHeight,u=i>r.clientWidth,Math.max(o-r.clientHeight,0)):(u=l<i,Math.max(d-t.clientHeight,0));this.footerHeight=o,this.overflowX=l<i,this.scrollbarHeight=a,this.updateHeight(),this.parentHeight=Math.max(this.headerHeight+this.footerHeight+20,this.getParentHeight()),u&&this.checkScrolling()},updateHeight:function(){this.customHeight=calcHeight(this,"height"),this.customMinHeight=calcHeight(this,"minHeight"),this.customMaxHeight=calcHeight(this,"maxHeight")},updateStyle:function(){var d=this,t=this.$refs,h=this.isGroup,f=this.fullColumnIdData,g=this.tableColumn,p=this.customHeight,x=this.customMinHeight,m=this.customMaxHeight,v=this.border,w=this.headerHeight,C=this.showFooter,b=this.showOverflow,_=this.showHeaderOverflow,R=this.showFooterOverflow,E=this.footerHeight,y=this.tableHeight,T=this.tableWidth,S=this.scrollbarHeight,k=this.scrollbarWidth,D=this.scrollXLoad,M=this.scrollYLoad,O=this.cellOffsetWidth,F=this.columnStore,I=this.elemStore,e=this.editStore,r=this.currentRow,i=this.mouseConfig,L=this.keyboardConfig,U=this.keyboardOpts,$=this.spanMethod,A=this.mergeList,N=this.mergeFooterList,V=this.footerSpanMethod,W=this.isAllOverflow,q=this.visibleColumn,l=t.emptyPlaceholder,o=I["main-body-wrapper"];return l&&(l.style.top="".concat(w,"px"),l.style.height=o?"".concat(o.offsetHeight-S,"px"):""),0<p&&C&&(p+=S),["main","left","right"].forEach(function(s,e){var a=0<e?s:"",u=F["".concat(a,"List")],c=t["".concat(a,"Container")];["header","body","footer"].forEach(function(l){var e,t,r,i=I["".concat(s,"-").concat(l,"-wrapper")],o=I["".concat(s,"-").concat(l,"-table")],n=("header"===l?(r=T,n=g,h?n=q:a&&(D||_)&&(n=u),r=n.reduce(function(e,t){return e+t.renderWidth},0),o&&(o.style.width=r?"".concat(r+k,"px"):"",_dom.browse.msie)&&_xeUtils.default.arrayEach(o.querySelectorAll(".vxe-resizable"),function(e){e.style.height="".concat(e.parentNode.offsetHeight,"px")}),(n=I["".concat(s,"-").concat(l,"-repair")])&&(n.style.width="".concat(T,"px")),r=I["".concat(s,"-").concat(l,"-list")],h&&r&&_xeUtils.default.arrayEach(r.querySelectorAll(".col--group"),function(e){var t,r,i,l=d.getColumnNode(e);l&&(l=(t=l.item).showHeaderOverflow,l=_xeUtils.default.isBoolean(l)?l:_,i=r=0,(l="title"===l||(!0===l||"tooltip"===l)||"ellipsis"===l)&&_xeUtils.default.eachTree(t.children,function(e){e.children&&t.children.length||i++,r+=e.renderWidth}),e.style.width=l?"".concat(r-i-(v?2:0),"px"):"")})):"body"===l?(n=I["".concat(s,"-").concat(l,"-emptyBlock")],isNodeElement(i)&&(r=0,e=x-w-E,m&&(r=m-w-E,a&&(r-=C?0:S),r=Math.max(e,r),i.style.maxHeight="".concat(r,"px")),p?(t=p-w-E,a&&(t-=C?0:S),r&&(t=Math.min(r,t)),i.style.height="".concat(Math.max(e,t),"px")):i.style.height="",i.style.minHeight="".concat(e,"px")),c&&(r="right"===a,t=F["".concat(a,"List")],isNodeElement(i)&&(i.style.top="".concat(w,"px")),c.style.height="".concat((0<p?p-w-E:y)+w+E-S*(C?2:1),"px"),c.style.width="".concat(t.reduce(function(e,t){return e+t.renderWidth},r?k:0),"px")),e=T,t=g,e=(t=a?d.expandColumn||!(D||M||b&&W)||A.length||$||L&&U.isMerge?q:u:t).reduce(function(e,t){return e+t.renderWidth},0),o&&(o.style.width=e?"".concat(e,"px"):"",o.style.paddingRight=k&&a&&(_dom.browse["-moz"]||_dom.browse.safari)?"".concat(k,"px"):""),n&&(n.style.width=e?"".concat(e,"px"):"")):"footer"===l&&(r=T,t=g,r=(t=a?d.expandColumn||!D&&!R||N.length&&V?q:u:t).reduce(function(e,t){return e+t.renderWidth},0),isNodeElement(i)&&(c&&(i.style.top="".concat(0<p?p-E:y+w,"px")),i.style.marginTop="".concat(-S,"px")),o)&&(o.style.width=r?"".concat(r+k,"px"):""),I["".concat(s,"-").concat(l,"-colgroup")]);n&&_xeUtils.default.arrayEach(n.children,function(e){var n,t,a,r,i=e.getAttribute("name");"col_gutter"===i&&(e.style.width="".concat(k,"px")),f[i]&&(i=(n=f[i].column).showHeaderOverflow,r=n.showFooterOverflow,t=n.showOverflow,e.style.width="".concat(n.renderWidth,"px"),i="ellipsis"===(e="header"===l?_xeUtils.default.isUndefined(i)||_xeUtils.default.isNull(i)?_:i:"footer"===l?_xeUtils.default.isUndefined(r)||_xeUtils.default.isNull(r)?R:r:_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?b:t),a="title"===e||(!0===e||"tooltip"===e)||i,r=I["".concat(s,"-").concat(l,"-list")],"header"===l||"footer"===l?D&&!a&&(a=!0):(D||M)&&(a=a||!0),r)&&_xeUtils.default.arrayEach(r.querySelectorAll(".".concat(n.id)),function(e){var t=parseInt(e.getAttribute("colspan")||1),e=e.querySelector(".vxe-cell"),r=n.renderWidth;if(e){if(1<t)for(var i=d.getColumnIndex(n),l=1;l<t;l++){var o=d.getColumns(i+l);o&&(r+=o.renderWidth)}e.style.width=a?"".concat(r-O*t,"px"):""}})})})}),r&&this.setCurrentRow(r),i&&i.selected&&e.selected.row&&e.selected.column&&this.addColSdCls(),this.$nextTick()},checkScrolling:function(){var e=this.$refs,t=e.tableBody,r=e.leftContainer,e=e.rightContainer,t=t?t.$el:null;t&&(r&&_dom.default[0<t.scrollLeft?"addClass":"removeClass"](r,"scrolling--middle"),e)&&_dom.default[t.clientWidth<t.scrollWidth-Math.ceil(t.scrollLeft)?"addClass":"removeClass"](e,"scrolling--middle")},preventEvent:function(t,e,r,i,l){var o,n=this,a=_vXETable.default.interceptor.get(e);return a.length||"event.clearEdit"!==e||(a=_vXETable.default.interceptor.get("event.clearActived"),"development"===process.env.NODE_ENV&&a.length&&(0,_log.warnLog)("vxe.error.delEvent",["event.clearActived","event.clearEdit"])),a.some(function(e){return!1===e(Object.assign({$grid:n.$xegrid,$table:n,$event:t},r))})||i&&(o=i()),l&&l(),o},handleGlobalMousedownEvent:function(r){var e,i=this,l=this.$el,t=this.$refs,o=this.$xegrid,n=this.$toolbar,a=this.mouseConfig,s=this.editStore,u=this.ctxMenuStore,c=this.editRules,d=this.editOpts,h=this.validOpts,f=this.areaOpts,g=this.filterStore,p=this.customStore,x=this.getRowNode,m=s.actived,s=t.ctxWrapper,v=t.filterWrapper,w=t.customWrapper,t=t.validTip,g=(!v||getEventTargetNode(r,l,"vxe-cell--filter").flag||getEventTargetNode(r,v.$el).flag||getEventTargetNode(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearFilter",g.args,this.closeFilter),!w||p.btnEl===r.target||getEventTargetNode(r,document.body,"vxe-toolbar-custom-target").flag||getEventTargetNode(r,w.$el).flag||getEventTargetNode(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearCustom",{},function(){return i.closeCustom()}),m.row?!1===d.autoClear||(v=m.args.cell)&&getEventTargetNode(r,v).flag||t&&getEventTargetNode(r,t.$el).flag||this.lastCallTime&&!(this.lastCallTime+50<Date.now())||getEventTargetNode(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearEdit",m.args,function(){var e,t;(e=(e=(e="row"===d.mode?!!(e=getEventTargetNode(r,l,"vxe-body--row")).flag&&x(e.targetElem).item!==m.args.row:!getEventTargetNode(r,l,"col--edit").flag)||getEventTargetNode(r,l,"vxe-header--row").flag)||getEventTargetNode(r,l,"vxe-footer--row").flag)||!i.height||i.overflowY||(t=r.target,hasClass(t,"vxe-table--body-wrapper")&&(e=r.offsetY<t.clientHeight)),!e&&getEventTargetNode(r,l).flag||setTimeout(function(){return i.clearEdit(r)})}):!a||getEventTargetNode(r,l).flag||o&&getEventTargetNode(r,o.$el).flag||s&&getEventTargetNode(r,s.$el).flag||n&&getEventTargetNode(r,n.$el).flag||(this.clearSelected&&this.clearSelected(),f.autoClear&&(e=this.getCellAreas()).length&&!getEventTargetNode(r,document.body,"vxe-table--ignore-areas-clear").flag&&this.preventEvent(r,"event.clearAreas",{},function(){i.clearCellAreas(),i.clearCopyCellArea(),i.emitEvent("clear-cell-area-selection",{cellAreas:e},r)})),u.visible&&s&&!getEventTargetNode(r,s.$el).flag&&this.closeMenu(),getEventTargetNode(r,(o||this).$el).flag);!g&&c&&h.autoClear&&(this.validErrorMaps={}),this.isActivated=g},handleGlobalBlurEvent:function(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent:function(){this.closeTooltip(),this.closeMenu()},keydownEvent:function(t){var r=this,i=this.filterStore,l=this.ctxMenuStore,e=this.editStore,o=this.keyboardConfig,n=this.mouseConfig,a=this.mouseOpts,s=this.keyboardOpts,u=e.actived;27===t.keyCode&&this.preventEvent(t,"event.keydown",null,function(){var e;r.emitEvent("keydown-start",{},t),o&&n&&a.area&&r.handleKeyboardEvent?r.handleKeyboardEvent(t):(u.row||i.visible||l.visible)&&(t.stopPropagation(),r.closeFilter(),r.closeMenu(),o)&&s.isEsc&&u.row&&(e=u.args,r.clearEdit(t),n)&&a.selected&&r.$nextTick(function(){return r.handleSelected(e,t)}),r.emitEvent("keydown",{},t),r.emitEvent("keydown-end",{},t)})},handleGlobalKeydownEvent:function(q){var W=this;this.isActivated&&this.preventEvent(q,"event.keydown",null,function(){var e,t,r,i,l=W.filterStore,o=W.isCtxMenu,n=W.ctxMenuStore,a=W.editStore,s=W.editOpts,u=W.editConfig,c=W.mouseConfig,d=W.mouseOpts,h=W.keyboardConfig,f=W.keyboardOpts,g=W.treeConfig,p=W.treeOpts,x=W.highlightCurrentRow,m=W.currentRow,v=W.bodyCtxMenu,w=W.rowOpts,C=a.selected,a=a.actived,b=q.keyCode,_=8===b,$=9===b,R=13===b,E=27===b,y=32===b,T=37===b,S=38===b,k=39===b,D=40===b,M=46===b,O=113===b,F=93===b,A=q.metaKey,I=q.ctrlKey,L=q.shiftKey,N=q.altKey,V=T||S||k||D,o=o&&n.visible&&(R||y||V),U=(0,_utils.isEnableConf)(u)&&a.column&&a.row,p=p.children||p.childrenField;l.visible?E&&W.closeFilter():(o?(q.preventDefault(),n.showChild&&hasChildrenList(n.selected)?W.moveCtxMenu(q,b,n,"selectChild",37,!1,n.selected.children):W.moveCtxMenu(q,b,n,"selected",39,!0,W.ctxMenuList)):h&&c&&d.area&&W.handleKeyboardEvent?W.handleKeyboardEvent(q):h&&y&&f.isChecked&&C.row&&C.column&&("checkbox"===C.column.type||"radio"===C.column.type)?(q.preventDefault(),"checkbox"===C.column.type?W.handleToggleCheckRowEvent(q,C.args):W.triggerRadioRowEvent(q,C.args)):O&&(0,_utils.isEnableConf)(u)?U||C.row&&C.column&&(q.stopPropagation(),q.preventDefault(),W.handleActived(C.args,q)):F?(W._keyCtx=C.row&&C.column&&v.length,clearTimeout(W.keyCtxTimeout),W.keyCtxTimeout=setTimeout(function(){W._keyCtx=!1},1e3)):R&&!N&&h&&f.isEnter&&(C.row||a.row||g&&(w.isCurrent||x)&&m)?I?a.row&&(t=a.args,W.clearEdit(q),c)&&d.selected&&W.$nextTick(function(){return W.handleSelected(t,q)}):C.row||a.row?(l=(C.row?C:a).args,L?f.enterToTab?W.moveTabSelected(l,L,q):W.moveSelected(l,T,!0,k,!1,q):f.enterToTab?W.moveTabSelected(l,L,q):W.moveSelected(l,T,!1,k,!0,q)):g&&(w.isCurrent||x)&&m&&(E=m[p])&&E.length&&(q.preventDefault(),e=E[0],t={$table:W,row:e},W.setTreeExpand(m,!0).then(function(){return W.scrollToRow(e)}).then(function(){return W.triggerCurrentRowEvent(q,t)})):V&&h&&f.isArrow?U||(C.row&&C.column?W.moveSelected(C.args,T,S,k,D,q):(S||D)&&(w.isCurrent||x)&&W.moveCurrentRow(S,D,q)):$&&h&&f.isTab?C.row||C.column?W.moveTabSelected(C.args,L,q):(a.row||a.column)&&W.moveTabSelected(a.args,L,q):h&&(g||(0,_utils.isEnableConf)(u))&&(M||(g&&(w.isCurrent||x)&&m?_&&f.isArrow:_))?U||(o=f.delMethod,n=f.backMethod,f.isDel&&(0,_utils.isEnableConf)(u)&&(C.row||C.column)?(O={row:C.row,rowIndex:W.getRowIndex(C.row),column:C.column,columnIndex:W.getColumnIndex(C.column),$table:W},o?o(O):setCellValue(C.row,C.column,null),_?n?n({row:C.row,rowIndex:W.getRowIndex(C.row),column:C.column,columnIndex:W.getColumnIndex(C.column),$table:W}):W.handleActived(C.args,q):M&&W.updateFooter(),W.emitEvent("cell-delete-value",O,q)):_&&f.isArrow&&g&&(w.isCurrent||x)&&m&&(r=_xeUtils.default.findTree(W.afterFullData,function(e){return e===m},{children:p}).parent)&&(q.preventDefault(),t={$table:W,row:r},W.setTreeExpand(r,!1).then(function(){return W.scrollToRow(r)}).then(function(){return W.triggerCurrentRowEvent(q,t)}))):h&&f.isEdit&&!I&&!A&&(y||48<=b&&b<=57||65<=b&&b<=90||96<=b&&b<=111||186<=b&&b<=192||219<=b&&b<=222)&&(F=f.editMethod,C.column)&&C.row&&(0,_utils.isEnableConf)(C.column.editRender)&&(!(v=s.beforeEditMethod||s.activeMethod)||v(_objectSpread(_objectSpread({},C.args),{},{$table:W,$grid:W.$xegrid})))&&(F?F({row:C.row,rowIndex:W.getRowIndex(C.row),column:C.column,columnIndex:W.getColumnIndex(C.column),$table:W,$grid:W.$xegrid}):(setCellValue(C.row,C.column,null),W.handleActived(C.args,q)),i=s.afterEditMethod)&&W.$nextTick(function(){i({row:C.row,rowIndex:W.getRowIndex(C.row),column:C.column,columnIndex:W.getColumnIndex(C.column),$table:W,$grid:W.$xegrid})}),W.emitEvent("keydown",{},q))})},handleGlobalPasteEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,i=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,n=this.editStore,a=this.filterStore,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&i.isClip&&l&&o.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(e),this.emitEvent("paste",{},e))},handleGlobalCopyEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,i=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,n=this.editStore,a=this.filterStore,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&i.isClip&&l&&o.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(e),this.emitEvent("copy",{},e))},handleGlobalCutEvent:function(e){var t=this.isActivated,r=this.keyboardConfig,i=this.keyboardOpts,l=this.mouseConfig,o=this.mouseOpts,n=this.editStore,a=this.filterStore,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&i.isClip&&l&&o.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(e),this.emitEvent("cut",{},e))},handleGlobalResizeEvent:function(){this.closeMenu(),this.updateCellAreas(),this.recalculate(!0)},handleTargetEnterEvent:function(e){var t=this.$refs.tooltip;clearTimeout(this.tooltipTimeout),e?this.closeTooltip():t&&t.setActived(!0)},handleTargetLeaveEvent:function(){var e=this,t=this.tooltipOpts,r=this.$refs.tooltip;r&&r.setActived(!1),t.enterable?this.tooltipTimeout=setTimeout(function(){(r=e.$refs.tooltip)&&!r.isActived()&&e.closeTooltip()},t.leaveDelay):this.closeTooltip()},triggerHeaderTitleEvent:function(t,e,r){var i,l,o,n=e.content||e.message;n&&(i=this.$refs,l=this.tooltipStore,r=r.column,o=(0,_utils.getFuncText)(n),this.handleTargetEnterEvent(!0),l.row=null,l.column=r,l.visible=!0,l.currOpts=e,this.$nextTick(function(){var e=i.tooltip;e&&e.open(t.currentTarget,o)}))},triggerHeaderTooltipEvent:function(e,t){var r=this.tooltipStore,i=t.column,l=e.currentTarget;this.handleTargetEnterEvent(r.column!==i||r.row),r.column===i&&r.visible||this.handleTooltip(e,l,l,null,t)},triggerBodyTooltipEvent:function(e,t){var r,i,l=this.editConfig,o=this.editOpts,n=this.editStore,a=this.tooltipStore,n=n.actived,s=t.row,u=t.column,c=e.currentTarget;if(this.handleTargetEnterEvent(a.column!==u||a.row!==s),u.editRender&&(0,_utils.isEnableConf)(l)){if("row"===o.mode&&n.row===s)return;if(n.row===s&&n.column===u)return}a.column===u&&a.row===s&&a.visible||(u.treeNode?(r=c.querySelector(".vxe-tree-cell"),"html"===u.type&&(i=c.querySelector(".vxe-cell--html"))):i=c.querySelector("html"===u.type?".vxe-cell--html":".vxe-cell--label"),this.handleTooltip(e,c,r||c.children[0],i,t))},triggerFooterTooltipEvent:function(e,t){var r=t.column,i=this.tooltipStore,l=e.currentTarget;this.handleTargetEnterEvent(!0),i.column===r&&i.visible||this.handleTooltip(e,l,l.querySelector(".vxe-cell--item")||l.children[0],null,t)},handleTooltip:function(e,t,r,i,l){l.cell=t;var o=this.$refs,t=this.tooltipOpts,n=this.tooltipStore,a=l.column,s=l.row,u=t.showAll,c=t.enabled,t=t.contentMethod,l=t?t(l):null,t=t&&!_xeUtils.default.eqNull(l),d=t?l:("html"===a.type?r.innerText:r.textContent).trim(),h=r.scrollWidth>r.clientWidth;return d&&(u||c||t||h)&&(Object.assign(n,{row:s,column:a,visible:!0,currOpts:{}}),this.$nextTick(function(){var e=o.tooltip;e&&e.open(!h&&i||r,_utils.default.formatText(d))})),this.$nextTick()},openTooltip:function(e,t){var r=this.$refs.commTip;return r?r.open(e,t):this.$nextTick()},closeTooltip:function(){var e=this.$refs,t=this.tooltipStore,r=e.tooltip,e=e.commTip;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:{}}),r)&&r.close(),e&&e.close(),this.$nextTick()},isAllCheckboxChecked:function(){return this.isAllSelected},isAllCheckboxIndeterminate:function(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate:function(){return(0,_log.warnLog)("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords:function(e){var r,i,t=this.treeConfig,l=this.treeIndeterminateMaps,o=this.fullDataRowIdData;return t?(r=[],i=[],_xeUtils.default.each(l,function(e,t){e&&(r.push(e),o[t])&&i.push(e)}),e?r:i):[]},handleDefaultSelectionChecked:function(){var t,r=this.fullDataRowIdData,e=this.checkboxOpts,i=e.checkAll,e=e.checkRowKeys;i?this.handleCheckedAllCheckboxRow(!0,!0):e&&(t=[],e.forEach(function(e){r[e]&&t.push(r[e].row)}),this.handleCheckedCheckboxRow(t,!0,!0))},handleCheckedCheckboxRow:function(e,t,r){var i=this;return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){return i.handleSelectRow({row:e},!!t,r)}),this.$nextTick()},setCheckboxRow:function(e,t){return this.handleCheckedCheckboxRow(e,t,!0)},isCheckedByCheckboxRow:function(e){var t=this.selectCheckboxMaps,r=this.checkboxOpts.checkField;return r?_xeUtils.default.get(e,r):!!t[(0,_util.getRowid)(this,e)]},isIndeterminateByCheckboxRow:function(e){return!!this.treeIndeterminateMaps[(0,_util.getRowid)(this,e)]&&!this.isCheckedByCheckboxRow(e)},handleSelectRow:function(e,r,i){var l=this,o=e.row,e=this.selectCheckboxMaps,t=this.afterFullData,n=this.treeConfig,a=this.treeOpts,s=this.treeIndeterminateMaps,u=this.checkboxOpts,c=u.checkField,d=u.checkStrictly,h=u.checkMethod,f=_objectSpread({},e),e=a.children||a.childrenField,g=u.indeterminateField||u.halfField,a=(0,_util.getRowid)(this,o);if(c)if(n&&!d){-1===r?(s[a]||(g&&_xeUtils.default.set(o,g,!0),s[a]=o),_xeUtils.default.set(o,c,!1)):_xeUtils.default.eachTree([o],function(e){(l.eqRow(e,o)||i||!h||h({row:e}))&&(_xeUtils.default.set(e,c,r),g&&_xeUtils.default.set(o,g,!1),delete s[(0,_util.getRowid)(l,e)],l.handleCheckboxReserveRow(o,r))},{children:e});var p,x,m,u=_xeUtils.default.findTree(t,function(e){return l.eqRow(e,o)},{children:e});if(u&&u.parent)return p=[],x={},!i&&h?u.items.forEach(function(e){var t;h({row:e})&&(t=(0,_util.getRowid)(l,e),p.push(x[t]=e))}):u.items.forEach(function(e){var t=(0,_util.getRowid)(l,e);p.push(x[t]=e)}),b=_xeUtils.default.find(u.items,function(e){return!!s[(0,_util.getRowid)(l,e)]})?-1:(m=[],u.items.forEach(function(e){_xeUtils.default.get(e,c)&&m.push(e)}),m.filter(function(e){return x[(0,_util.getRowid)(l,e)]}).length===p.length||!(!m.length&&-1!==r)&&-1),this.selectCheckboxMaps=f,this.handleSelectRow({row:u.parent},b,i)}else!i&&h&&!h({row:o})||(_xeUtils.default.set(o,c,r),this.handleCheckboxReserveRow(o,r));else if(n&&!d){-1===r?(s[a]||(g&&_xeUtils.default.set(o,g,!0),s[a]=o),f[a]&&delete f[a]):_xeUtils.default.eachTree([o],function(e){var t=(0,_util.getRowid)(l,e);(l.eqRow(e,o)||i||!h||h({row:e}))&&(r?f[t]=e:f[t]&&delete f[t],g&&_xeUtils.default.set(o,g,!1),delete s[(0,_util.getRowid)(l,e)],l.handleCheckboxReserveRow(o,r))},{children:e});var v,w,C,b,u=_xeUtils.default.findTree(t,function(e){return l.eqRow(e,o)},{children:e});if(u&&u.parent)return v=[],w={},!i&&h?u.items.forEach(function(e){var t;h({row:e})&&(t=(0,_util.getRowid)(l,e),v.push(w[t]=e))}):u.items.forEach(function(e){var t=(0,_util.getRowid)(l,e);v.push(w[t]=e)}),b=_xeUtils.default.find(u.items,function(e){return!!s[(0,_util.getRowid)(l,e)]})?-1:(C=[],u.items.forEach(function(e){var t=(0,_util.getRowid)(l,e);f[t]&&C.push(e)}),C.filter(function(e){return w[(0,_util.getRowid)(l,e)]}).length===v.length||!(!C.length&&-1!==r)&&-1),this.selectCheckboxMaps=f,this.handleSelectRow({row:u.parent},b,i)}else!i&&h&&!h({row:o})||(r?f[a]||(f[a]=o):f[a]&&delete f[a],this.handleCheckboxReserveRow(o,r));this.selectCheckboxMaps=f,this.checkSelectionStatus()},handleToggleCheckRowEvent:function(e,t){var r=this.selectCheckboxMaps,i=this.checkboxOpts,l=i.checkField,i=i.trigger,o=t.row;"manual"!==i&&(i=!1,i=l?!_xeUtils.default.get(o,l):!r[(0,_util.getRowid)(this,o)],e?this.triggerCheckRowEvent(e,t,i):this.handleSelectRow(t,i))},triggerCheckRowEvent:function(e,t,r){var i=this.checkboxOpts,l=this.afterFullData,o=i.checkMethod,n=i.trigger,a=t.row;if("manual"!==n){if(e.stopPropagation(),i.isShiftKey&&e.shiftKey&&!this.treeConfig){n=this.getCheckboxRecords();if(n.length){i=n[0],n=this.getVTRowIndex(a),i=this.getVTRowIndex(i);if(n!==i)return this.setAllCheckboxRow(!1),l=n<i?l.slice(n,i+1):l.slice(i,n+1),this.handleCheckedCheckboxRow(l,!0,!1),void this.emitEvent("checkbox-range-select",Object.assign({rangeRecords:l},t),e)}}o&&!o({row:a})||(this.handleSelectRow(t,r),this.emitEvent("checkbox-change",Object.assign({records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:r},t),e))}},toggleCheckboxRow:function(e){var t=this.selectCheckboxMaps,r=this.checkboxOpts.checkField,r=r?!_xeUtils.default.get(e,r):!t[(0,_util.getRowid)(this,e)];return this.handleSelectRow({row:e},r,!0),this.$nextTick()},handleCheckedAllCheckboxRow:function(t,r){var i=this,e=this.afterFullData,l=this.treeConfig,o=this.treeOpts,n=this.selectCheckboxMaps,a=this.checkboxReserveRowMap,s=this.checkboxOpts,u=this.afterFullRowMaps,c=s.checkField,d=s.reserve,h=s.checkStrictly,f=s.checkMethod,g=s.indeterminateField||s.halfField,s=o.children||o.childrenField,p={};return l||_xeUtils.default.each(n,function(e,t){u[t]||(p[t]=e)}),h?this.isAllSelected=t:(c?(o=function(e){!r&&f&&!f({row:e})||(t&&(p[(0,_util.getRowid)(i,e)]=e),_xeUtils.default.set(e,c,t)),l&&g&&_xeUtils.default.set(e,g,!1)},l?_xeUtils.default.eachTree(e,o,{children:s}):e.forEach(o)):l?t?_xeUtils.default.eachTree(e,function(e){!r&&f&&!f({row:e})||(p[(0,_util.getRowid)(i,e)]=e)},{children:s}):!r&&f&&_xeUtils.default.eachTree(e,function(e){var t=(0,_util.getRowid)(i,e);!f({row:e})&&n[t]&&(p[t]=e)},{children:s}):t?!r&&f?e.forEach(function(e){var t=(0,_util.getRowid)(i,e);(n[t]||f({row:e}))&&(p[t]=e)}):e.forEach(function(e){p[(0,_util.getRowid)(i,e)]=e}):!r&&f&&e.forEach(function(e){var t=(0,_util.getRowid)(i,e);!f({row:e})&&n[t]&&(p[t]=e)}),d&&(t?_xeUtils.default.each(p,function(e,t){a[t]=e}):e.forEach(function(e){return i.handleCheckboxReserveRow(e,!1)})),this.selectCheckboxMaps=c?{}:p),this.treeIndeterminateMaps={},this.treeIndeterminateRowMaps={},this.checkSelectionStatus(),this.$nextTick()},setAllCheckboxRow:function(e){return this.handleCheckedAllCheckboxRow(e,!0)},checkSelectionStatus:function(){var t,r,i=this,e=this.afterFullData,l=this.selectCheckboxMaps,o=this.treeIndeterminateMaps,n=this.checkboxOpts,a=this.treeConfig,s=n.checkField,u=n.checkStrictly,c=n.checkMethod,d=n.indeterminateField||n.halfField;u||(t=[],u=n=!(r=[]),u=s?(n=e.every(c?function(e){return c({row:e})?!!_xeUtils.default.get(e,s)&&(r.push(e),!0):(t.push(e),!0)}:function(e){return _xeUtils.default.get(e,s)})&&e.length!==t.length,a?d?!n&&e.some(function(e){return _xeUtils.default.get(e,s)||_xeUtils.default.get(e,d)||!!o[(0,_util.getRowid)(i,e)]}):!n&&e.some(function(e){return _xeUtils.default.get(e,s)||!!o[(0,_util.getRowid)(i,e)]}):d?!n&&e.some(function(e){return _xeUtils.default.get(e,s)||_xeUtils.default.get(e,d)}):!n&&e.some(function(e){return _xeUtils.default.get(e,s)})):(n=e.every(c?function(e){return c({row:e})?!!l[(0,_util.getRowid)(i,e)]&&(r.push(e),!0):(t.push(e),!0)}:function(e){return l[(0,_util.getRowid)(i,e)]})&&e.length!==t.length,a?!n&&e.some(function(e){e=(0,_util.getRowid)(i,e);return o[e]||l[e]}):!n&&e.some(function(e){return l[(0,_util.getRowid)(i,e)]})),this.isAllSelected=n,this.isIndeterminate=u)},handleReserveStatus:function(){var e=this.expandColumn,t=this.treeOpts,r=this.treeConfig,i=this.fullDataRowIdData,l=this.fullAllDataRowMap,o=this.currentRow,n=this.selectRadioRow,a=this.radioReserveRow,s=this.radioOpts,u=this.checkboxOpts,c=this.selectCheckboxMaps,d=this.rowExpandedMaps,h=this.treeExpandedMaps,f=this.expandOpts;n&&!l.has(n)&&(this.selectRadioRow=null),s.reserve&&a&&i[n=(0,_util.getRowid)(this,a)]&&this.handleCheckedRadioRow(i[n].row,!0),this.selectCheckboxMaps=getRecoverRowMaps(this,c),u.reserve&&this.handleCheckedCheckboxRow(handleReserveRow(this,this.checkboxReserveRowMap),!0,!0),o&&!l.has(o)&&(this.currentRow=null),this.rowExpandedMaps=e?getRecoverRowMaps(this,d):[],e&&f.reserve&&this.setRowExpand(handleReserveRow(this,this.rowExpandedReserveRowMap),!0),this.treeExpandedMaps=r?getRecoverRowMaps(this,h):[],r&&t.reserve&&this.setTreeExpand(handleReserveRow(this,this.treeExpandedReserveRowMap),!0)},getRadioReserveRecord:function(e){var t=this.fullDataRowIdData,r=this.radioReserveRow,i=this.radioOpts,l=this.afterFullData,o=this.treeConfig,n=this.treeOpts,n=n.children||n.childrenField;if(i.reserve&&r){var a=(0,_util.getRowid)(this,r);if(e){if(!t[a])return r}else{var s=(0,_util.getRowkey)(this);if(o){if(_xeUtils.default.findTree(l,function(e){return a===_xeUtils.default.get(e,s)},{children:n}))return r}else if(!l.some(function(e){return a===_xeUtils.default.get(e,s)}))return r}}return null},clearRadioReserve:function(){return this.radioReserveRow=null,this.$nextTick()},handleRadioReserveRow:function(e){this.radioOpts.reserve&&(this.radioReserveRow=e)},getCheckboxReserveRecords:function(r){var i,t=this,l=this.fullDataRowIdData,e=this.afterFullData,o=this.checkboxReserveRowMap,n=this.checkboxOpts,a=this.treeConfig,s=this.treeOpts,s=s.children||s.childrenField,u=[];return n.reserve&&(i={},a?_xeUtils.default.eachTree(e,function(e){i[(0,_util.getRowid)(t,e)]=1},{children:s}):e.forEach(function(e){i[(0,_util.getRowid)(t,e)]=1}),_xeUtils.default.each(o,function(e,t){e&&(r?l[t]||u.push(e):i[t]||u.push(e))})),u},clearCheckboxReserve:function(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow:function(e,t){var r,i=this.checkboxReserveRowMap;this.checkboxOpts.reserve&&(r=(0,_util.getRowid)(this,e),t?i[r]=e:i[r]&&delete i[r])},handleCheckAllEvent:function(e,t){this.handleCheckedAllCheckboxRow(t),e&&this.emitEvent("checkbox-all",{records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:t},e)},triggerCheckAllEvent:function(e,t){"manual"!==this.checkboxOpts.trigger&&(e&&e.stopPropagation(),this.handleCheckAllEvent(e,t))},toggleAllCheckboxRow:function(){return this.handleCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow:function(){var t=this,e=this.tableFullData,r=this.treeConfig,i=this.treeOpts,l=this.checkboxOpts,o=l.checkField,n=l.reserve,i=i.children||i.childrenField,a=l.indeterminateField||l.halfField;return o&&(l=function(e){r&&a&&_xeUtils.default.set(e,a,!1),_xeUtils.default.set(e,o,!1)},r?_xeUtils.default.eachTree(e,l,{children:i}):e.forEach(l)),n&&e.forEach(function(e){return t.handleCheckboxReserveRow(e,!1)}),this.isAllSelected=!1,this.isIndeterminate=!1,this.selectCheckboxMaps={},this.treeIndeterminateMaps={},this.$nextTick()},handleDefaultRadioChecked:function(){var e=this.radioOpts,t=this.fullDataRowIdData,r=e.checkRowKey,e=e.reserve;r&&(t[r]&&this.handleCheckedRadioRow(t[r].row,!0),e)&&(t=(0,_util.getRowkey)(this),this.radioReserveRow=_defineProperty({},t,r))},triggerRadioRowEvent:function(e,t){var r,i=this.selectRadioRow,l=this.radioOpts,o=t.row;"manual"!==l.trigger&&(e.stopPropagation(),(r=i!==(o=o))?this.handleCheckedRadioRow(o):l.strict||(r=i===o)&&(o=null,this.clearRadioRow()),r)&&this.emitEvent("radio-change",_objectSpread({oldValue:i,newValue:o},t),e)},triggerCurrentRowEvent:function(e,t){var r=this.currentRow,i=t.row,l=r!==i;this.setCurrentRow(i),l&&this.emitEvent("current-change",_objectSpread({oldValue:r,newValue:i},t),e)},setCurrentRow:function(e){var t=this.$el,r=this.rowOpts;return this.clearCurrentRow(),this.currentRow=e,(r.isCurrent||this.highlightCurrentRow)&&t&&_xeUtils.default.arrayEach(t.querySelectorAll('[rowid="'.concat((0,_util.getRowid)(this,e),'"]')),function(e){return addClass(e,"row--current")}),this.$nextTick()},isCheckedByRadioRow:function(e){return this.selectRadioRow===e},handleCheckedRadioRow:function(e,t){var r=this.radioOpts.checkMethod;return e&&(t||!r||r({row:e}))&&(this.selectRadioRow=e,this.handleRadioReserveRow(e)),this.$nextTick()},setRadioRow:function(e){return this.handleCheckedRadioRow(e,!0)},clearCurrentRow:function(){var e=this.$el;return this.currentRow=null,this.hoverRow=null,e&&_xeUtils.default.arrayEach(e.querySelectorAll(".row--current"),function(e){return removeClass(e,"row--current")}),this.$nextTick()},clearRadioRow:function(){return this.selectRadioRow=null,this.$nextTick()},getCurrentRecord:function(){return this.rowOpts.isCurrent||this.highlightCurrentRow?this.currentRow:null},getRadioRecord:function(e){var t=this.selectRadioRow,r=this.fullDataRowIdData,i=this.afterFullRowMaps;if(t){var l=(0,_util.getRowid)(this,t);if(e){if(r[l])return t}else if(i[l])return t}return null},triggerHoverEvent:function(e,t){t=t.row;this.setHoverRow(t)},setHoverRow:function(e){var t=this.$el,r=(0,_util.getRowid)(this,e);this.clearHoverRow(),t&&_xeUtils.default.arrayEach(t.querySelectorAll('[rowid="'.concat(r,'"]')),function(e){return addClass(e,"row--hover")}),this.hoverRow=e},clearHoverRow:function(){var e=this.$el;e&&_xeUtils.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),function(e){return removeClass(e,"row--hover")}),this.hoverRow=null},triggerHeaderCellClickEvent:function(e,t){var r=this._lastResizeTime,i=this.sortOpts,l=t.column,o=e.currentTarget,r=r&&r>Date.now()-300,n=getEventTargetNode(e,o,"vxe-cell--sort").flag,a=getEventTargetNode(e,o,"vxe-cell--filter").flag;return"cell"!==i.trigger||r||n||a||this.triggerSortEvent(e,l,getNextSortOrder(this,l)),this.emitEvent("header-cell-click",Object.assign({triggerResizable:r,triggerSort:n,triggerFilter:a,cell:o},t),e),this.columnOpts.isCurrent||this.highlightCurrentColumn?this.setCurrentColumn(l):this.$nextTick()},triggerHeaderCellDblclickEvent:function(e,t){this.emitEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},getCurrentColumn:function(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e&&(this.clearCurrentColumn(),this.currentColumn=e),this.$nextTick()},clearCurrentColumn:function(){return this.currentColumn=null,this.$nextTick()},checkValidate:function(e){return _vXETable.default._valid?this.triggerValidate(e):this.$nextTick()},handleChangeCell:function(e,t){var r=this;this.checkValidate("blur").catch(function(e){return e}).then(function(){r.handleActived(t,e).then(function(){return r.checkValidate("change")}).catch(function(e){return e})})},triggerCellClickEvent:function(e,t){var r=this.highlightCurrentRow,i=this.editStore,l=this.radioOpts,o=this.expandOpts,n=this.treeOpts,a=this.keyboardOpts,s=this.editConfig,u=this.editOpts,c=this.checkboxOpts,d=this.rowOpts,h=i.actived,i=i.focused,f=t,g=f.row,f=f.column,p=f.type,x=f.treeNode,m="radio"===p,v="checkbox"===p,p="expand"===p,w=e.currentTarget,C=m&&getEventTargetNode(e,w,"vxe-cell--radio").flag,b=v&&getEventTargetNode(e,w,"vxe-cell--checkbox").flag,_=x&&getEventTargetNode(e,w,"vxe-tree--btn-wrapper").flag,R=p&&getEventTargetNode(e,w,"vxe-table--expanded").flag;t=Object.assign({cell:w,triggerRadio:C,triggerCheckbox:b,triggerTreeNode:_,triggerExpandNode:R},t),!b&&!C&&(!R&&("row"===o.trigger||p&&"cell"===o.trigger)&&this.triggerRowExpandEvent(e,t),"row"===n.trigger||x&&"cell"===n.trigger)&&this.triggerTreeExpandEvent(e,t),_||(R||(!d.isCurrent&&!r||b||C||this.triggerCurrentRowEvent(e,t),!C&&("row"===l.trigger||m&&"cell"===l.trigger)&&this.triggerRadioRowEvent(e,t),!b&&("row"===c.trigger||v&&"cell"===c.trigger)&&this.handleToggleCheckRowEvent(e,t)),(0,_utils.isEnableConf)(s)&&(a.arrowCursorLock&&e&&"cell"===u.mode&&e.target&&/^input|textarea$/i.test(e.target.tagName)&&(i.column=f,i.row=g),"manual"===u.trigger?h.args&&h.row===g&&f!==h.column&&this.handleChangeCell(e,t):h.args&&g===h.row&&f===h.column||("click"===u.trigger||"dblclick"===u.trigger&&"row"===u.mode&&h.row===g)&&this.handleChangeCell(e,t))),this.emitEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var r=this,i=this.editStore,l=this.editConfig,o=this.editOpts,i=i.actived,n=e.currentTarget;t.cell=n,!(0,_utils.isEnableConf)(l)||"dblclick"!==o.trigger||i.args&&e.currentTarget===i.args.cell||("row"===o.mode?this.checkValidate("blur").catch(function(e){return e}).then(function(){r.handleActived(t,e).then(function(){return r.checkValidate("change")}).catch(function(e){return e})}):"cell"===o.mode&&this.handleActived(t,e).then(function(){return r.checkValidate("change")}).catch(function(e){return e})),this.emitEvent("cell-dblclick",t,e)},handleDefaultSort:function(){var i=this,e=this.sortConfig,t=this.sortOpts,r=t.defaultSort;r&&(r=_xeUtils.default.isArray(r)?r:[r]).length&&((e.multiple?r:r.slice(0,1)).forEach(function(e,t){var r=e.field,e=e.order;r&&e&&(r=i.getColumnByField(r))&&r.sortable&&(r.order=e,r.sortTime=Date.now()+t)}),t.remote||this.handleTableData(!0).then(this.updateStyle))},triggerSortEvent:function(e,t,r){var i=this.sortOpts,l=t.field,o=t.sortable,n=t.remoteSort;(o||n)&&(r&&t.order!==r?this.sort({field:l,order:r}):this.clearSort(i.multiple?t:null),o={$table:this,$event:e,column:t,field:l,property:l,order:t.order,sortList:this.getSortColumns(),sortTime:t.sortTime},this.mouseConfig&&this.mouseOpts.area&&this.handleSortEvent&&this.handleSortEvent(e,o),this.emitEvent("sort-change",o,e))},setPendingRow:function(e,t){var r=this,i=_objectSpread({},this.pendingRowMaps),l=_toConsumableArray(this.pendingRowList);return e&&!_xeUtils.default.isArray(e)&&(e=[e]),t?e.forEach(function(e){var t=(0,_util.getRowid)(r,e);t&&!i[t]&&(l.push(e),i[t]=e)}):e.forEach(function(e){var t=(0,_util.getRowid)(r,e);t&&i[t]&&(-1<(e=r.findRowIndexOf(l,e))&&l.splice(e,1),delete i[t])}),this.pendingRowMaps=i,this.pendingRowList=l,this.$nextTick()},togglePendingRow:function(e){var i=this,l=_objectSpread({},this.pendingRowMaps),o=_toConsumableArray(this.pendingRowList);return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){var t,r=(0,_util.getRowid)(i,e);r&&(l[r]?(-1<(t=i.findRowIndexOf(o,e))&&o.splice(t,1),delete l[r]):(o.push(e),l[r]=e))}),this.pendingRowMaps=l,this.pendingRowList=o,this.$nextTick()},getPendingRecords:function(){return this.pendingRowList.slice(0)},hasPendingByRow:function(e){return!!this.pendingRowMaps[(0,_util.getRowid)(this,e)]},clearPendingRow:function(){return this.pendingRowMaps={},this.pendingRowList=[],this.$nextTick()},sort:function(e,t){var l,o=this,r=this.sortOpts,i=r.multiple,n=r.remote,a=r.orders;return e&&_xeUtils.default.isString(e)&&(e=[{field:e,order:t}]),(e=_xeUtils.default.isArray(e)?e:[e]).length?(i||clearAllSort(this),(i?e:[e[0]]).forEach(function(e,t){var r=e.field,e=e.order,i=r;(i=_xeUtils.default.isString(r)?o.getColumnByField(r):i)&&(i.sortable||i.remoteSort)&&(l=l||i,-1===a.indexOf(e)&&(e=getNextSortOrder(o,i)),i.order!==e&&(i.order=e),i.sortTime=Date.now()+t)}),(!n||l&&l.remoteSort)&&this.handleTableData(!0),this.$nextTick().then(function(){return o.updateCellAreas(),o.updateStyle()})):this.$nextTick()},clearSort:function(e){var t=this.sortOpts;return e?(e=(0,_util.handleFieldOrColumn)(this,e))&&(e.order=null):clearAllSort(this),t.remote||this.handleTableData(!0),this.$nextTick().then(this.updateStyle)},getSortColumn:function(){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["getSortColumn","getSortColumns"]),_xeUtils.default.find(this.tableFullColumn,function(e){return(e.sortable||e.remoteSort)&&e.order})},isSort:function(e){return e?(e=(0,_util.handleFieldOrColumn)(this,e))&&e.sortable&&!!e.order:0<this.getSortColumns().length},getSortColumns:function(){var e=this.sortOpts,t=e.multiple,e=e.chronological,i=[];return this.tableFullColumn.forEach(function(e){var t=e.field,r=e.order;(e.sortable||e.remoteSort)&&r&&i.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})}),t&&e&&1<i.length?_xeUtils.default.orderBy(i,"sortTime"):i},closeFilter:function(){var e=this.filterStore,t=e.column,r=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),r&&this.emitEvent("filter-visible",{column:t,field:t.field,property:t.field,filterList:this.getCheckedFilters(),visible:!1},null),this.$nextTick()},isActiveFilterByColumn:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e?e.filters&&e.filters.some(function(e){return e.checked}):0<this.getCheckedFilters().length},isFilter:function(e){return this.isActiveFilterByColumn(e)},isRowExpandLoaded:function(e){e=this.fullAllDataRowMap.get(e);return e&&e.expandLoaded},clearRowExpandLoaded:function(e){var t=this.expandOpts,r=this.rowExpandLazyLoadedMaps,i=this.fullAllDataRowMap,t=t.lazy,l=(0,_util.getRowid)(this,e),i=i.get(e);return t&&i&&(i.expandLoaded=!1,(e=_objectSpread({},r))[l]&&delete e[l],this.rowExpandLazyLoadedMaps=e),this.$nextTick()},reloadRowExpand:function(e){var t=this,r=this.expandOpts,i=this.rowExpandLazyLoadedMaps,r=r.lazy,l=(0,_util.getRowid)(this,e);return r&&!i[l]&&this.clearRowExpandLoaded(e).then(function(){return t.handleAsyncRowExpand(e)}),this.$nextTick()},reloadExpandContent:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),this.reloadRowExpand(e)},triggerRowExpandEvent:function(e,t){var r=this.expandOpts,i=this.rowExpandLazyLoadedMaps,l=this.expandColumn,t=t.row,o=r.lazy;"manual"===r.trigger||(e.stopPropagation(),r=(0,_util.getRowid)(this,t),o&&i[r])||(o=!this.isRowExpandByRow(t),i=this.getColumnIndex(l),r=this.getVMColumnIndex(l),this.setRowExpand(t,o),this.emitEvent("toggle-row-expand",{expanded:o,column:l,columnIndex:i,$columnIndex:r,row:t,rowIndex:this.getRowIndex(t),$rowIndex:this.getVMRowIndex(t)},e))},toggleRowExpand:function(e){return this.setRowExpand(e,!this.isRowExpandByRow(e))},handleDefaultRowExpand:function(){var t,e=this.expandOpts,r=this.fullDataRowIdData,i=e.expandAll,e=e.expandRowKeys;i?this.setAllRowExpand(!0):e&&(t=[],e.forEach(function(e){r[e]&&t.push(r[e].row)}),this.setRowExpand(t,!0))},setAllRowExpand:function(e){var t=this.treeConfig,r=this.treeOpts,i=this.tableFullData,l=this.tableFullTreeData,r=r.children||r.childrenField,o=[];return t?_xeUtils.default.eachTree(l,function(e){o.push(e)},{children:r}):o=i,this.setRowExpand(o,e)},handleAsyncRowExpand:function(l){var o=this,e=this.fullAllDataRowMap,n=this.expandOpts,a=e.get(l);return new Promise(function(t){var e,r,i=n.loadMethod;i?((e=_objectSpread({},o.rowExpandLazyLoadedMaps))[r=(0,_util.getRowid)(o,l)]=l,o.rowExpandLazyLoadedMaps=e,i({$table:o,row:l,rowIndex:o.getRowIndex(l),$rowIndex:o.getVMRowIndex(l)}).then(function(){a.expandLoaded=!0;var e=_objectSpread({},o.rowExpandedMaps);e[r]=l,o.rowExpandedMaps=e}).catch(function(){a.expandLoaded=!1}).finally(function(){var e=_objectSpread({},o.rowExpandLazyLoadedMaps);e[r]&&delete e[r],o.rowExpandLazyLoadedMaps=e,t(o.$nextTick().then(o.recalculate))})):t()})},setRowExpand:function(e,t){var i=this,r=this.rowExpandedMaps,l=this.fullAllDataRowIdData,o=this.rowExpandLazyLoadedMaps,n=this.expandOpts,a=this.expandColumn,s=_objectSpread({},r),r=n.reserve,u=n.lazy,c=n.accordion,d=n.toggleMethod,h=[],f=this.getColumnIndex(a),g=this.getVMColumnIndex(a);return e&&(_xeUtils.default.isArray(e)||(e=[e]),c&&(s={},e=e.slice(e.length-1,e.length)),n=d?e.filter(function(e){return d({expanded:t,column:a,columnIndex:f,$columnIndex:g,row:e,rowIndex:i.getRowIndex(e),$rowIndex:i.getVMRowIndex(e)})}):e,t?n.forEach(function(e){var t,r=(0,_util.getRowid)(i,e);s[r]||(t=l[r],u&&!t.expandLoaded&&!o[r]?h.push(i.handleAsyncRowExpand(e)):s[r]=e)}):n.forEach(function(e){e=(0,_util.getRowid)(i,e);s[e]&&delete s[e]}),r)&&n.forEach(function(e){return i.handleRowExpandReserve(e,t)}),this.rowExpandedMaps=s,Promise.all(h).then(this.recalculate)},isRowExpandByRow:function(e){return!!this.rowExpandedMaps[(0,_util.getRowid)(this,e)]},isExpandByRow:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["isExpandByRow","isRowExpandByRow"]),this.isRowExpandByRow(e)},clearRowExpand:function(){var t=this,e=this.expandOpts,r=this.tableFullData,e=e.reserve,i=this.getRowExpandRecords();return this.rowExpandedMaps={},e&&r.forEach(function(e){return t.handleRowExpandReserve(e,!1)}),this.$nextTick().then(function(){i.length&&t.recalculate()})},clearRowExpandReserve:function(){return this.rowExpandedReserveRowMap={},this.$nextTick()},handleRowExpandReserve:function(e,t){var r,i=this.rowExpandedReserveRowMap;this.expandOpts.reserve&&(r=(0,_util.getRowid)(this,e),t?i[r]=e:i[r]&&delete i[r])},getRowExpandRecords:function(){var t=[];return _xeUtils.default.each(this.rowExpandedMaps,function(e){e&&t.push(e)}),t},getTreeExpandRecords:function(){var t=[];return _xeUtils.default.each(this.treeExpandedMaps,function(e){e&&t.push(e)}),t},getTreeStatus:function(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded:function(e){e=this.fullAllDataRowMap.get(e);return e&&e.treeLoaded},clearTreeExpandLoaded:function(e){var t=this.treeOpts,r=this.treeExpandedMaps,i=this.fullAllDataRowMap,l=t.transform,t=t.lazy,o=(0,_util.getRowid)(this,e),i=i.get(e);return t&&i&&(i.treeLoaded=!1,r[o])&&delete r[o],l?(this.handleVirtualTreeToList(),this.handleTableData()):this.$nextTick()},reloadTreeExpand:function(e){var t=this,r=this.treeOpts,i=this.treeExpandLazyLoadedMaps,l=r.transform,o=r.lazy,r=r.hasChild||r.hasChildField,n=(0,_util.getRowid)(this,e);return o&&e[r]&&!i[n]&&this.clearTreeExpandLoaded(e).then(function(){return t.handleAsyncTreeExpandChilds(e)}).then(function(){if(l)return t.handleVirtualTreeToList(),t.handleTableData()}).then(function(){return t.recalculate()}),this.$nextTick()},reloadTreeChilds:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),this.reloadTreeExpand(e)},triggerTreeExpandEvent:function(e,t){var r=this.treeOpts,i=this.treeExpandLazyLoadedMaps,l=t.row,t=t.column,o=r.lazy;"manual"===r.trigger||(e.stopPropagation(),r=(0,_util.getRowid)(this,l),o&&i[r])||(o=!this.isTreeExpandByRow(l),i=this.getColumnIndex(t),r=this.getVMColumnIndex(t),this.setTreeExpand(l,o),this.emitEvent("toggle-tree-expand",{expanded:o,column:t,columnIndex:i,$columnIndex:r,row:l},e))},toggleTreeExpand:function(e){return this.setTreeExpand(e,!this.isTreeExpandByRow(e))},handleDefaultTreeExpand:function(){var e,r,i,l,t=this.treeConfig,o=this.treeOpts,n=this.tableFullData;t&&(t=o.expandAll,e=o.expandRowKeys,r=o.children||o.childrenField,t?this.setAllTreeExpand(!0):e&&(i=[],l=(0,_util.getRowkey)(this),e.forEach(function(t){var e=_xeUtils.default.findTree(n,function(e){return t===_xeUtils.default.get(e,l)},{children:r});e&&i.push(e.item)}),this.setTreeExpand(i,!0)))},handleAsyncTreeExpandChilds:function(o){var n=this,e=this.treeOpts,t=this.checkboxOpts,a=e.transform,s=e.loadMethod,u=t.checkStrictly;return new Promise(function(e){var t,r,i,l;s?(t=n.fullAllDataRowMap,r=n.treeExpandLazyLoadedMaps,i=(0,_util.getRowid)(n,o),l=t.get(o),r[i]=o,s({$table:n,row:o}).then(function(e){if(l.treeLoaded=!0,r[i]&&(r[i]=null),e=_xeUtils.default.isArray(e)?e:[])return n.loadTreeChildren(o,e).then(function(e){var t=_objectSpread({},n.treeExpandedMaps);return e.length&&!t[i]&&(t[i]=o,n.treeExpandedMaps=t),!u&&n.isCheckedByCheckboxRow(o)&&n.handleCheckedCheckboxRow(e,!0,!0),n.$nextTick().then(function(){if(a)return n.handleTableData()})})}).catch(function(){l.treeLoaded=!1;var e=n.treeExpandLazyLoadedMaps;e[i]&&(e[i]=null)}).finally(function(){n.$nextTick().then(function(){return n.recalculate()}).then(function(){return e()})})):e()})},setAllTreeExpand:function(e){var t=this.tableFullData,r=this.treeOpts,i=r.lazy,l=r.children||r.childrenField,o=[];return _xeUtils.default.eachTree(t,function(e){var t=e[l];(i||t&&t.length)&&o.push(e)},{children:l}),this.setTreeExpand(o,e)},handleBaseTreeExpand:function(e,t){var i=this,l=this.fullAllDataRowMap,r=this.tableFullData,o=this.treeExpandedMaps,n=this.treeOpts,a=this.treeExpandLazyLoadedMaps,s=this.treeNodeColumn,u=n.reserve,c=n.lazy,d=n.accordion,h=n.toggleMethod,f=_objectSpread({},o),g=n.children||n.childrenField,p=n.hasChild||n.hasChildField,x=[],m=this.getColumnIndex(s),v=this.getVMColumnIndex(s),w=h?e.filter(function(e){return h({expanded:t,column:s,columnIndex:m,$columnIndex:v,row:e})}):e;return d&&(w=w.length?[w[w.length-1]]:[],o=_xeUtils.default.findTree(r,function(e){return e===w[0]},{children:g}))&&o.items.forEach(function(e){e=(0,_util.getRowid)(i,e);f[e]&&delete f[e]}),t?w.forEach(function(e){var t,r=(0,_util.getRowid)(i,e);f[r]||(t=l.get(e),c&&e[p]&&!t.treeLoaded&&!a[r]?x.push(i.handleAsyncTreeExpandChilds(e)):e[g]&&e[g].length&&(f[r]=e))}):w.forEach(function(e){e=(0,_util.getRowid)(i,e);f[e]&&delete f[e]}),u&&w.forEach(function(e){return i.handleTreeExpandReserve(e,t)}),this.treeExpandedMaps=f,Promise.all(x).then(this.recalculate)},handleVirtualTreeExpand:function(e,t){var r=this;return this.handleBaseTreeExpand(e,t).then(function(){return r.handleVirtualTreeToList(),r.handleTableData()}).then(function(){return r.recalculate()})},setTreeExpand:function(e,t){var r=this.treeOpts.transform;return e&&(e=_xeUtils.default.isArray(e)?e:[e]).length?r?this.handleVirtualTreeExpand(e,t):this.handleBaseTreeExpand(e,t):this.$nextTick()},isTreeExpandByRow:function(e){return!!this.treeExpandedMaps[(0,_util.getRowid)(this,e)]},clearTreeExpand:function(){var t=this,e=this.treeOpts,r=this.tableFullData,i=e.transform,l=e.reserve,e=e.children||e.childrenField,o=this.getTreeExpandRecords();return this.treeExpandedMaps={},l&&_xeUtils.default.eachTree(r,function(e){return t.handleTreeExpandReserve(e,!1)},{children:e}),this.handleTableData().then(function(){if(i)return t.handleVirtualTreeToList(),t.handleTableData()}).then(function(){o.length&&t.recalculate()})},clearTreeExpandReserve:function(){return this.treeExpandedReserveRowMap={},this.$nextTick()},handleTreeExpandReserve:function(e,t){var r,i=this.treeExpandedReserveRowMap;this.treeOpts.reserve&&(r=(0,_util.getRowid)(this,e),t?i[r]=e:i[r]&&delete i[r])},getScroll:function(){var e=this.$refs,t=this.scrollXLoad,r=this.scrollYLoad,e=e.tableBody.$el;return{virtualX:t,virtualY:r,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}},triggerScrollXEvent:function(){this.loadScrollXData()},loadScrollXData:function(){var e=this.mergeList,t=this.mergeFooterList,r=this.scrollXStore,i=r.startIndex,l=r.endIndex,o=r.offsetSize,n=computeVirtualX(this),a=n.toVisibleIndex,n=n.visibleSize,o={startIndex:Math.max(0,a-1-o),endIndex:a+n+o},e=(calculateMergerOffserIndex(e.concat(t),o,"col"),o.startIndex),t=o.endIndex;!(a<=i||l-n-1<=a)||i===e&&l===t||(r.startIndex=e,r.endIndex=t,this.updateScrollXData()),this.closeTooltip()},triggerScrollYEvent:function(e){var t=this.scrollYStore,r=t.adaptive,i=t.offsetSize,t=t.visibleSize;isWebkit&&r&&2*i+t<=40?this.loadScrollYData(e):this.debounceScrollY(e)},debounceScrollY:_xeUtils.default.debounce(function(e){this.loadScrollYData(e)},debounceScrollYDuration,{leading:!1,trailing:!0}),loadScrollYData:function(e){var t=this.mergeList,r=this.scrollYStore,i=r.startIndex,l=r.endIndex,o=r.visibleSize,n=r.offsetSize,a=r.rowHeight,e=(e.currentTarget||e.target).scrollTop,e=Math.floor(e/a),a={startIndex:Math.max(0,e-1-n),endIndex:e+o+n},n=(calculateMergerOffserIndex(t,a,"row"),a.startIndex),t=a.endIndex;!(e<=i||l-o-1<=e)||i===n&&l===t||(r.startIndex=n,r.endIndex=t,this.updateScrollYData())},computeScrollLoad:function(){var n=this;return this.$nextTick().then(function(){var e=n.sYOpts,t=n.sXOpts,r=n.scrollXLoad,i=n.scrollYLoad,l=n.scrollXStore,o=n.scrollYStore,r=(r?(r=computeVirtualX(n).visibleSize,t=t.oSize?_xeUtils.default.toNumber(t.oSize):_dom.browse.msie?10:_dom.browse.edge?5:0,l.offsetSize=t,l.visibleSize=r,l.endIndex=Math.max(l.startIndex+l.visibleSize+t,l.endIndex),n.updateScrollXData()):n.updateScrollXSpace(),computeVirtualY(n)),t=r.rowHeight,l=r.visibleSize;o.rowHeight=t,i?(r=e.oSize?_xeUtils.default.toNumber(e.oSize):_dom.browse.msie?20:_dom.browse.edge?10:0,o.offsetSize=r,o.visibleSize=l,o.endIndex=Math.max(o.startIndex+l+r,o.endIndex),n.updateScrollYData()):n.updateScrollYSpace(),n.rowHeight=t,n.$nextTick(n.updateStyle)})},handleTableColumn:function(){var e=this.scrollXLoad,t=this.visibleColumn,r=this.scrollXStore;this.tableColumn=e?t.slice(r.startIndex,r.endIndex):t.slice(0)},updateScrollXData:function(){var e=this;this.$nextTick(function(){e.handleTableColumn(),e.updateScrollXSpace()})},updateScrollXSpace:function(){var e=this.$refs,t=this.isGroup,i=this.elemStore,r=this.visibleColumn,l=this.scrollXStore,o=this.scrollXLoad,n=this.tableWidth,a=this.scrollbarWidth,s=e.tableHeader,u=e.tableBody,e=e.tableFooter,u=u?u.$el:null;u&&(s=s?s.$el:null,e=e?e.$el:null,s=s?s.querySelector(".vxe-table--header"):null,u=u.querySelector(".vxe-table--body"),e=e?e.querySelector(".vxe-table--footer"):null,r=r.slice(0,l.startIndex).reduce(function(e,t){return e+t.renderWidth},0),l="",o&&(l="".concat(r,"px")),s&&(s.style.marginLeft=t?"":l),u.style.marginLeft=l,e&&(e.style.marginLeft=l),["main"].forEach(function(r){["header","body","footer"].forEach(function(e){var t=i["".concat(r,"-").concat(e,"-xSpace")];t&&(t.style.width=o?"".concat(n+("header"===e?a:0),"px"):"")})}),this.$nextTick(this.updateStyle))},updateScrollYData:function(){var e=this;this.$nextTick(function(){e.handleTableData(),e.updateScrollYSpace()})},updateScrollYSpace:function(){var r=this.elemStore,e=this.scrollYStore,t=this.scrollYLoad,i=this.afterFullData,l=e.startIndex,e=e.rowHeight,i=i.length*e,l=Math.max(0,l*e),o="",n="";t&&(o="".concat(l,"px"),n="".concat(i,"px")),["main","left","right"].forEach(function(t){var e=r["".concat(t,"-body-table")];e&&(e.style.marginTop=o),["header","body","footer"].forEach(function(e){e=r["".concat(t,"-").concat(e,"-ySpace")];e&&(e.style.height=n)})}),this.$nextTick(this.updateStyle)},scrollTo:function(e,t){var r=this,i=this.$refs,l=i.tableBody,o=i.rightBody,i=i.tableFooter,l=l?l.$el:null,o=o?o.$el:null,i=i?i.$el:null;return _xeUtils.default.isNumber(e)&&(0,_dom.setScrollLeft)(i||l,e),_xeUtils.default.isNumber(t)&&(0,_dom.setScrollTop)(o||l,t),this.scrollXLoad||this.scrollYLoad?new Promise(function(e){return setTimeout(function(){return e(r.$nextTick())},50)}):this.$nextTick()},scrollToRow:function(e,t){var r=[];return e&&(this.treeConfig?r.push(this.scrollToTreeRow(e)):r.push((0,_util.rowToVisible)(this,e))),t&&r.push(this.scrollToColumn(t)),Promise.all(r)},scrollToColumn:function(e){e=(0,_util.handleFieldOrColumn)(this,e);return e&&this.fullColumnMap.has(e)?(0,_util.colToVisible)(this,e):this.$nextTick()},scrollToTreeRow:function(t){var r,i=this,e=this.tableFullData,l=this.treeConfig,o=this.treeOpts,o=o.children||o.childrenField,n=[];return l&&(l=_xeUtils.default.findTree(e,function(e){return e===t},{children:o}))&&(r=l.nodes).forEach(function(e,t){t<r.length-1&&!i.isTreeExpandByRow(e)&&n.push(i.setTreeExpand(e,!0))}),Promise.all(n).then(function(){return(0,_util.rowToVisible)(i,t)})},clearScroll:function(){var e=this.$refs,t=this.scrollXStore,r=this.scrollYStore,i=e.tableBody,l=e.rightBody,e=e.tableFooter,i=i?i.$el:null,l=l?l.$el:null,e=e?e.$el:null;return l&&((0,_util.restoreScrollListener)(l),l.scrollTop=0),e&&(e.scrollLeft=0),i&&((0,_util.restoreScrollListener)(i),i.scrollTop=0,i.scrollLeft=0),t.startIndex=0,t.endIndex=t.visibleSize,r.startIndex=0,r.endIndex=r.visibleSize,this.$nextTick()},updateFooter:function(){var e=this.showFooter,t=this.visibleColumn,r=this.footerData,i=this.footerMethod,l=[];return e&&r&&r.length?l=r.slice(0):e&&i&&(l=t.length?i({columns:t,data:this.afterFullData,$table:this,$grid:this.$xegrid}):[]),this.footerTableData=l,this.$nextTick()},updateStatus:function(n,a){var s=this,u=!_xeUtils.default.isUndefined(a);return this.$nextTick().then(function(){var e=s.$refs,t=s.editRules,r=s.validStore,e=e.tableBody;if(n&&e&&t){var i=n.row,l=n.column;if(s.hasCellRules&&s.hasCellRules("change",i,l)){var o=s.getCellElement(i,l);if(o)return s.validCellRules("change",i,l,a).then(function(){u&&r.visible&&setCellValue(i,l,a),s.clearValidate(i,l)}).catch(function(e){e=e.rule;u&&setCellValue(i,l,a),s.showValidTooltip({rule:e,row:i,column:l,cell:o})})}}})},handleDefaultMergeCells:function(){this.setMergeCells(this.mergeCells)},setMergeCells:function(e){var t=this;return this.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),setMerges(this,e,this.mergeList,this.afterFullData),this.$nextTick().then(function(){return t.updateCellAreas(),t.updateStyle()})},removeMergeCells:function(e){var t=this,r=(this.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),removeMerges(this,e,this.mergeList,this.afterFullData));return this.$nextTick().then(function(){return t.updateCellAreas(),t.updateStyle(),r})},getMergeCells:function(){return this.mergeList.slice(0)},clearMergeCells:function(){var e=this;return this.mergeList=[],this.$nextTick().then(function(){return e.updateStyle()})},handleDefaultMergeFooterItems:function(){this.setMergeFooterItems(this.mergeFooterItems)},setMergeFooterItems:function(e){var t=this;return this.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),setMerges(this,e,this.mergeFooterList,null),this.$nextTick().then(function(){return t.updateCellAreas(),t.updateStyle()})},removeMergeFooterItems:function(e){var t=this,r=(this.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),removeMerges(this,e,this.mergeFooterList,null));return this.$nextTick().then(function(){return t.updateCellAreas(),t.updateStyle(),r})},getMergeFooterItems:function(){return this.mergeFooterList.slice(0)},clearMergeFooterItems:function(){var e=this;return this.mergeFooterList=[],this.$nextTick().then(function(){return e.updateStyle()})},updateZindex:function(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<_utils.default.getLastZIndex()&&(this.tZindex=_utils.default.nextZIndex())},updateCellAreas:function(){return this.mouseConfig&&this.mouseOpts.area&&this.handleUpdateCellAreas?this.handleUpdateCellAreas():this.$nextTick()},emitEvent:function(e,t,r){this.$emit(e,Object.assign({$table:this,$grid:this.$xegrid,$event:r},t))},focus:function(){return this.isActivated=!0,this.$nextTick()},blur:function(){return this.isActivated=!1,this.$nextTick()},connect:function(e){return e&&e.syncUpdate?(e.syncUpdate({collectColumn:this.collectColumn,$table:this}),this.$toolbar=e):(0,_log.errLog)("vxe.error.barUnableLink"),this.$nextTick()},getCell:function(e,t){return this.getCellElement(e,t)},findRowIndexOf:function(e,t){var r=this;return t?_xeUtils.default.findIndexOf(e,function(e){return r.eqRow(e,t)}):-1},eqRow:function(e,t){return!(!e||!t||e!==t&&(0,_util.getRowid)(this,e)!==(0,_util.getRowid)(this,t))},getSetupOptions:function(){return _conf.default}},funcs="setFilter,openFilter,clearFilter,getCheckedFilters,updateFilterOptionStatus,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFNR,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,openExport,openPrint,getPrintHtml,exportData,openImport,importData,saveFile,readFile,importByFile,print,openCustom,closeCustom".split(","),_default=(funcs.forEach(function(e){Methods[e]=function(){return"development"!==process.env.NODE_ENV||this["_".concat(e)]||("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").includes(e)?(0,_log.errLog)("vxe.error.reqModule",["VxeTableExportModule"]):"fullValidate,validate".split(",").includes(e)?(0,_log.errLog)("vxe.error.reqModule",["VxeTableValidatorModule"]):"setFilter,openFilter,clearFilter,getCheckedFilters".split(",").includes(e)?(0,_log.errLog)("vxe.error.reqModule",["VxeTableFilterModule"]):"insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell".split(",").includes(e)?(0,_log.errLog)("vxe.error.reqModule",["VxeTableEditModule"]):"openCustom".split(",").includes(e)&&(0,_log.errLog)("vxe.error.reqModule",["VxeTableCustomModule"])),this["_".concat(e)]?this["_".concat(e)].apply(this,arguments):null}}),exports.default=Methods);