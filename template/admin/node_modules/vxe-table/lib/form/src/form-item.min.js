"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=require("../../tools/utils"),_util=require("./util"),_render=require("./render"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var props={title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:{type:String,default:null},titleWidth:{type:[String,Number],default:null},titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},showTitle:{type:Boolean,default:!0},vertical:{type:Boolean,default:null},className:[String,Function],contentClassName:[String,Function],contentStyle:[Object,Function],titleClassName:[String,Function],titleStyle:[Object,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visible:{type:Boolean,default:null},visibleMethod:Function,folding:Boolean,collapseNode:Boolean,itemRender:Object,rules:Array},watch={},renderItem=(Object.keys(props).forEach(function(t){watch[t]=function(e){this.itemConfig.update(t,e)}}),function(e,t,l,i){var n,s=t._e,o=t.rules,r=t.data,a=t.disabled,u=t.readonly,d=t.collapseAll,B=t.validOpts,f=t.titleAlign,c=t.titleWidth,m=t.titleColon,E=t.titleAsterisk,x=t.titleOverflow,_=t.vertical,v=l.title,k=l.folding,g=l.visible,p=l.field,D=l.collapseNode,h=l.itemRender,M=l.showError,y=l.errRule,N=l.className,C=l.titleOverflow,S=l.vertical,W=l.showTitle,F=l.contentClassName,U=l.contentStyle,b=l.titleClassName,I=l.titleStyle,q=(0,_utils.isEnableConf)(h)?_vXETable.default.renderer.get(h.name):null,O=q?q.formItemClassName||q.itemClassName:"",T=q?q.formItemStyle||q.itemStyle:null,w=q?q.formItemContentClassName||q.itemContentClassName:"",A=q?q.formItemContentStyle||q.itemContentStyle:null,j=q?q.formItemTitleClassName||q.itemTitleClassName:"",R=q?q.formItemTitleStyle||q.itemTitleStyle:null,L=l.span||t.span,V=l.align||t.align,f=_xeUtils.default.eqNull(l.titleAlign)?f:l.titleAlign,c=_xeUtils.default.eqNull(l.titleWidth)?c:l.titleWidth,m=_xeUtils.default.eqNull(l.titleColon)?m:l.titleColon,E=_xeUtils.default.eqNull(l.titleAsterisk)?E:l.titleAsterisk,x=_xeUtils.default.isUndefined(C)||_xeUtils.default.isNull(C)?x:C,C=_xeUtils.default.isUndefined(S)||_xeUtils.default.isNull(S)?_:S,_="title"===x,S=!0===x||"tooltip"===x,x=_||S||"ellipsis"===x,$={data:r,disabled:a,readonly:u,field:p,property:p,item:l,$form:t,$grid:t.xegrid};if(!1===g)return s();!u&&o&&(a=o[p])&&(n=a.some(function(e){return e.required}));g=[],s=q?q.renderFormItemContent||q.renderItemContent:null,i&&i.default?g=t.callSlot(i.default,$,e):s?g=(0,_vn.getSlotVNs)(s.call(t,e,h,$)):q&&q.renderItem?g=(0,_vn.getSlotVNs)(q.renderItem.call(t,e,h,$)):p&&(g=["".concat(_xeUtils.default.get(r,p))]),u=S?{mouseenter:function(e){t.triggerTitleTipEvent(e,$)},mouseleave:t.handleTitleTipLeaveEvent}:{};return e("div",{class:["vxe-form--item",l.id,L?"vxe-col--".concat(L," is--span"):"",N?_xeUtils.default.isFunction(N)?N($):N:"",O?_xeUtils.default.isFunction(O)?O($):O:"",{"is--title":v,"is--colon":m,"is--vertical":C,"is--asterisk":E,"is--required":n,"is--hidden":k&&d,"is--active":(0,_util.isActivetem)(t,l),"is--error":M}],style:_xeUtils.default.isFunction(T)?T($):T},[e("div",{class:"vxe-form--item-inner"},[!1!==W&&(v||i&&i.title)?e("div",{class:["vxe-form--item-title",f?"align--".concat(f):"",x?"is--ellipsis":"",j?_xeUtils.default.isFunction(j)?j($):j:"",b?_xeUtils.default.isFunction(b)?b($):b:""],style:Object.assign({},_xeUtils.default.isFunction(R)?R($):R,_xeUtils.default.isFunction(I)?I($):I,c?{width:isNaN(c)?c:"".concat(c,"px")}:null),attrs:{title:_?(0,_utils.getFuncText)(v):null},on:u},(0,_render.renderTitle)(e,t,l)):null,e("div",{class:["vxe-form--item-content",V?"align--".concat(V):"",w?_xeUtils.default.isFunction(w)?w($):w:"",F?_xeUtils.default.isFunction(F)?F($):F:""],style:Object.assign({},_xeUtils.default.isFunction(A)?A($):A,_xeUtils.default.isFunction(U)?U($):U)},g.concat([D?e("div",{class:"vxe-form--item-trigger-node",on:{click:t.toggleCollapseEvent}},[e("span",{class:"vxe-form--item-trigger-text"},d?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),e("i",{class:["vxe-form--item-trigger-icon",d?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})]):null,y&&B.showMessage?e("div",{class:"vxe-form--item-valid",style:y.maxWidth?{width:"".concat(y.maxWidth,"px")}:null},y.message):null]))])])}),_default=exports.default={name:"VxeFormItem",props:props,inject:{$xeform:{default:null},$xeformgather:{default:null}},provide:function(){return{$xeformitem:this,$xeformiteminfo:this}},data:function(){return{itemConfig:null}},watch:watch,mounted:function(){(0,_util.assemItem)(this)},created:function(){this.itemConfig=(0,_util.createItem)(this.$xeform,this)},destroyed:function(){(0,_util.destroyItem)(this)},render:function(e){var t=this.$xeform;return t&&t.customLayout?renderItem(e,t,this.itemConfig,this.$scopedSlots):e("div")}};