"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=require("../../tools/utils"),_render=require("./render"),_util=require("./util"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var VxeFormConfigItem={name:"VxeFormConfigItem",props:{itemConfig:Object},inject:{$xeform:{default:null}},provide:function(){return{$xeformgather:null,$xeformiteminfo:this}},render:function(l){var e,t=this._e,i=this.$xeform,n=this.itemConfig,s=i.rules,r=i.data,o=i.disabled,k=i.readonly,a=i.collapseAll,D=i.validOpts,u=i.titleAlign,d=i.titleWidth,$=i.titleColon,j=i.titleAsterisk,f=i.titleOverflow,m=i.vertical,c=n.slots,x=n.title,M=n.folding,_=n.visible,v=n.field,W=n.collapseNode,g=n.itemRender,L=n.showError,p=n.errRule,C=n.className,U=n.titleOverflow,N=n.vertical,h=n.children,G=n.showTitle,F=n.contentClassName,q=n.contentStyle,y=n.titleClassName,I=n.titleStyle,T=(0,_utils.isEnableConf)(g)?_vXETable.default.renderer.get(g.name):null,b=T?T.formItemClassName||T.itemClassName:"",S=T?T.formItemStyle||T.itemStyle:null,O=T?T.formItemContentClassName||T.itemContentClassName:"",w=T?T.formItemContentStyle||T.itemContentStyle:null,A=T?T.formItemTitleClassName||T.itemTitleClassName:"",R=T?T.formItemTitleStyle||T.itemTitleStyle:null,E=n.span||i.span,X=n.align||i.align,u=_xeUtils.default.eqNull(n.titleAlign)?u:n.titleAlign,d=_xeUtils.default.eqNull(n.titleWidth)?d:n.titleWidth,$=_xeUtils.default.eqNull(n.titleColon)?$:n.titleColon,j=_xeUtils.default.eqNull(n.titleAsterisk)?j:n.titleAsterisk,f=_xeUtils.default.isUndefined(U)||_xeUtils.default.isNull(U)?f:U,U=_xeUtils.default.isUndefined(N)||_xeUtils.default.isNull(N)?m:N,m="title"===f,N=!0===f||"tooltip"===f,f=m||N||"ellipsis"===f,V={data:r,disabled:o,readonly:k,field:v,property:v,item:n,$form:i,$grid:i.xegrid};if(!1===_)return t();if(h&&0<h.length)return(o=n.children.map(function(e,t){return l(VxeFormConfigItem,{key:t,props:{itemConfig:e}})})).length?l("div",{class:["vxe-form--gather vxe-form--item-row",n.id,E?"vxe-form--item-col_".concat(E," is--span"):"",C?_xeUtils.default.isFunction(C)?C(V):C:""]},o):t();!k&&s&&(_=s[v])&&(e=_.some(function(e){return e.required}));h=[],o=T?T.renderFormItemContent||T.renderItemContent:null,c&&c.default?h=i.callSlot(c.default,V,l):o?h=(0,_vn.getSlotVNs)(o.call(i,l,g,V)):T&&T.renderItem?h=(0,_vn.getSlotVNs)(T.renderItem.call(i,l,g,V)):v&&(h=[_xeUtils.default.toValueString(_xeUtils.default.get(r,v))]),t=N?{mouseenter:function(e){i.triggerTitleTipEvent(e,V)},mouseleave:i.handleTitleTipLeaveEvent}:{};return l("div",{class:["vxe-form--item",n.id,E?"vxe-form--item-col_".concat(E," is--span"):null,C?_xeUtils.default.isFunction(C)?C(V):C:"",b?_xeUtils.default.isFunction(b)?b(V):b:"",{"is--title":x,"is--colon":$,"is--vertical":U,"is--asterisk":j,"is--required":e,"is--hidden":M&&a,"is--active":(0,_util.isActivetem)(i,n),"is--error":L}],style:_xeUtils.default.isFunction(S)?S(V):S},[l("div",{class:"vxe-form--item-inner"},[!1!==G&&(x||c&&c.title)?l("div",{class:["vxe-form--item-title",u?"align--".concat(u):"",f?"is--ellipsis":"",A?_xeUtils.default.isFunction(A)?A(V):A:"",y?_xeUtils.default.isFunction(y)?y(V):y:""],style:Object.assign({},_xeUtils.default.isFunction(R)?R(V):R,_xeUtils.default.isFunction(I)?I(V):I,d?{width:isNaN(d)?d:"".concat(d,"px")}:null),attrs:{title:m?(0,_utils.getFuncText)(x):null},on:t},(0,_render.renderTitle)(l,i,n)):null,l("div",{class:["vxe-form--item-content",X?"align--".concat(X):"",O?_xeUtils.default.isFunction(O)?O(V):O:"",F?_xeUtils.default.isFunction(F)?F(V):F:""],style:Object.assign({},_xeUtils.default.isFunction(w)?w(V):w,_xeUtils.default.isFunction(q)?q(V):q)},h.concat([W?l("div",{class:"vxe-form--item-trigger-node",on:{click:i.toggleCollapseEvent}},[l("span",{class:"vxe-form--item-trigger-text"},a?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),l("i",{class:["vxe-form--item-trigger-icon",a?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})]):null,p&&D.showMessage?l("div",{class:"vxe-form--item-valid",style:p.maxWidth?{width:"".concat(p.maxWidth,"px")}:null},p.content):null]))])])}},_default=exports.default=VxeFormConfigItem;