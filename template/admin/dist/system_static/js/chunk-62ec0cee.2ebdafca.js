(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62ec0cee"],{"44da":function(e,t,r){r("75ea")},"61f7":function(e,t,r){r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return d}));var s=r("ade3"),a=r("5530");function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var r,s,a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(r in a)new RegExp("(".concat(r,")")).test(t)&&(s=a[r]+"",t=t.replace(RegExp.$1,1===RegExp.$1.length?s:("00"+s).substr(s.length)));return t}r("99af"),r("13d5"),r("b64b"),r("d3b7"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("00b4"),r("25f0"),r("5319"),r("498a");var i={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};function o(e,t){e.message=function(e){return t.replace("%s",e||"")}}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)({required:!0,message:e,type:"string"},t)}function d(e){return l.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}o(c,"请输入%s"),o(d,"%s格式不正确");var l=Object.keys(i).reduce((function(e,t){return e[t]=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i="range"===t?{min:e[0],max:e[1]}:Object(s.a)({},t,e);return Object(a.a)(Object(a.a)({message:r.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},i),n)},o(e[t],i[t]),e}),{})},"75ea":function(e,t,r){},"8c8a":function(e,t,r){var s=r("c7eb"),a=r("1da1"),n=(r("a9e3"),r("61f7")),i=r("69ae"),o=r("42e3"),c={name:"PriceChange",components:{},props:{change:Boolean,orderInfo:{type:Object,default:null},status:{type:Number,default:0}},data:function(){return{focus:!1,price:0,refund_price:0,remark:""}},watch:{orderInfo:function(){this.price=this.orderInfo.pay_price,this.refund_price=this.orderInfo.pay_price,this.remark=this.orderInfo.remark}},methods:{priceChange:function(){this.focus=!0},close:function(){this.price=this.orderInfo.pay_price,this.$emit("closeChange",!1)},save:function(){this.savePrice({price:this.price,refund_price:this.refund_price,type:1,remark:this.remark,id:this.orderInfo.id,order_id:this.orderInfo.order_id})},savePrice:function(e){var t=this;return Object(a.a)(Object(s.a)().mark((function r(){var a,c,d,l,u,f;return Object(s.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t,c={},d=e.price,l=e.refund_price,u=a.orderInfo.refund_status,f=e.remark,0==a.status&&0===u)return r.prev=2,r.next=5,t.$validator({price:[Object(n.c)(n.c.message("金额")),Object(n.b)(n.b.message("金额"))]}).validate({price:d});r.next=19;break;case 5:r.next=10;break;case 7:return r.prev=7,r.t0=r.catch(2),r.abrupt("return",Object(i.b)(r.t0));case 10:c.total_price=t.orderInfo.total_price,c.total_postage=t.orderInfo.total_price,c.pay_postage=t.orderInfo.pay_postage,c.gain_integral=t.orderInfo.gain_integral,c.pay_price=e.price,c.order_id=e.order_id,Object(o.f)(e.id,c).then((function(){t.$emit("closechange",!1),a.$dialog.success("改价成功")})).catch((function(e){a.$dialog.error(e.msg)})),r.next=45;break;case 19:if(0==a.status&&1===u)return r.prev=20,r.next=23,t.$validator({refund_price:[Object(n.c)(n.c.message("金额")),Object(n.b)(n.b.message("金额"))]}).validate({refund_price:l});r.next=34;break;case 23:r.next=28;break;case 25:return r.prev=25,r.t1=r.catch(20),r.abrupt("return",Object(i.b)(r.t1));case 28:c.price=e.refund_price,c.type=e.type,c.order_id=e.order_id,Object(o.w)(c).then((function(e){t.$emit("closechange",!1),a.$dialog.success("操作成功")}),(function(e){t.$emit("closechange",!1),a.$dialog.error(e.msg)})),r.next=45;break;case 34:return r.prev=34,r.next=37,t.$validator({remark:[Object(n.c)(n.c.message("备注"))]}).validate({remark:f});case 37:r.next=42;break;case 39:return r.prev=39,r.t2=r.catch(34),r.abrupt("return",Object(i.b)(r.t2));case 42:c.remark=f,c.order_id=e.order_id,Object(o.x)(c).then((function(e){t.$emit("closechange",!1),a.$dialog.success("提交成功")}),(function(e){t.$emit("closechange",!1),a.$dialog.error(e.msg)}));case 45:case"end":return r.stop()}}),r,null,[[2,7],[20,25],[34,39]])})))()},refuse:function(){this.savePrice({price:this.price,refund_price:this.refund_price,type:2,remark:this.remark,id:this.orderInfo.id,order_id:this.orderInfo.order_id})}}};r("44da"),r=r("2877"),r=Object(r.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"priceChange",class:!0===e.change?"on":""},[t("div",{staticClass:"priceTitle"},[e._v("\n      "+e._s(0===e.status?1===e.orderInfo.refund_status?"立即退款":"一键改价":"订单备注")+"\n      "),t("span",{staticClass:"iconfontYI icon-guanbi",on:{click:e.close}})]),0===e.status?t("div",{staticClass:"listChange"},[0===e.orderInfo.refund_status?t("div",{staticClass:"item acea-row row-between-wrapper"},[t("div",[e._v("商品总价(¥)")]),t("div",{staticClass:"money"},[e._v(e._s(e.orderInfo.total_price)),t("span",{staticClass:"iconfontYI icon-suozi"})])]):e._e(),0===e.orderInfo.refund_status?t("div",{staticClass:"item acea-row row-between-wrapper"},[t("div",[e._v("原始邮费(¥)")]),t("div",{staticClass:"money"},[e._v(e._s(e.orderInfo.pay_postage)),t("span",{staticClass:"iconfontYI icon-suozi"})])]):e._e(),0===e.orderInfo.refund_status?t("div",{staticClass:"item acea-row row-between-wrapper"},[t("div",[e._v("实际支付(¥)")]),t("div",{staticClass:"money"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],class:!0===e.focus?"on":"",attrs:{type:"text"},domProps:{value:e.price},on:{focus:e.priceChange,input:function(t){t.target.composing||(e.price=t.target.value)}}})])]):e._e(),1===e.orderInfo.refund_status?t("div",{staticClass:"item acea-row row-between-wrapper"},[t("div",[e._v("实际支付(¥)")]),t("div",{staticClass:"money"},[e._v(e._s(e.orderInfo.pay_price)),t("span",{staticClass:"iconfontYI icon-suozi"})])]):e._e(),1===e.orderInfo.refund_status?t("div",{staticClass:"item acea-row row-between-wrapper"},[t("div",[e._v("退款金额(¥)")]),t("div",{staticClass:"money"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.refund_price,expression:"refund_price"}],class:!0===e.focus?"on":"",attrs:{type:"text"},domProps:{value:e.refund_price},on:{focus:e.priceChange,input:function(t){t.target.composing||(e.refund_price=t.target.value)}}})])]):e._e()]):t("div",{staticClass:"listChange"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],attrs:{placeholder:e.orderInfo.remark||"请填写备注信息...",maxlength:"100"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}})]),t("div",{staticClass:"modify",on:{click:e.save}},[e._v("\n      "+e._s(0===e.orderInfo.refund_status||1===e.status?"立即修改":"确认退款")+"\n    ")]),1===e.orderInfo.refund_status&&0===e.status?t("div",{staticClass:"modify1",on:{click:e.refuse}},[e._v("拒绝退款")]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.change,expression:"change === true"}],staticClass:"maskModel",on:{touchmove:function(e){e.preventDefault()}}})])}),[],!1,null,"72963ce8",null);t.a=r.exports},afa3:function(e,t,r){e.exports=r.p+"system_static/img/line.05bf1c84.jpg"},c2da:function(e,t,r){},ed84:function(e,t,r){r("c2da")},f23d:function(e,t,r){r.r(t);var s=[function(){var e=this._self._c;return e("div",{staticClass:"line"},[e("img",{attrs:{src:r("afa3")}})])}],a=r("8c8a"),n=r("42e3"),i=(a=(r("61f7"),r("69ae"),{name:"AdminOrder",components:{PriceChange:a.a},props:{},data:function(){return{order:!1,change:!1,orderId:"",orderInfo:{},status:0,title:"",payType:"",types:""}},watch:{"$route.params.id":function(e){null!=e&&(this.orderId=e,this.getIndex())}},mounted:function(){this.getIndex()},methods:{more:function(){this.order=!this.order},modify:function(e){this.change=!0,this.status=e},changeclose:function(e){this.change=e,this.getIndex()},closeChange:function(e){this.change=e},copyText:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("复制成功")})).catch((function(e){t.$message.error("复制失败")}))},getIndex:function(){var e=this;Object(n.u)(this.$route.params.id).then((function(t){e.orderInfo=t.data.orderInfo,e.types=t.data.orderInfo._status._type,e.title=t.data.orderInfo._status._title}),(function(t){e.$dialog.error(t.msg)}))},offlinePay:function(){var e=this;setOfflinePay({orderId:this.orderInfo.orderId}).then((function(t){e.$dialog.success(t.msg),e.getIndex()}),(function(t){e.$dialog.error(t.msg)}))}}}),r("ed84"),r("2877"));i=Object(i.a)(a,(function(){var e=this,t=e._self._c;return e.orderInfo?t("div",{staticClass:"order-details pos-order-details"},[t("div",{staticClass:"header acea-row row-middle"},[t("div",{staticClass:"state"},[e._v(e._s(e.title))]),t("div",{staticClass:"data"},[t("div",{staticClass:"order-num"},[e._v("订单："+e._s(e.orderInfo.order_id))]),t("div",[t("span",{staticClass:"time"},[e._v(e._s(e.orderInfo._add_time))])])])]),"looks"!=e.$route.params.goname?t("div",{staticClass:"remarks acea-row"},[t("span",{staticClass:"iconfontYI icon-zhinengkefu- mr10"}),t("span",{staticClass:"line1",staticStyle:{"text-align":"left"},domProps:{textContent:e._s(e.orderInfo.remark||"订单未备注，点击添加备注信息")},on:{click:function(t){return e.modify(1)}}})]):e._e(),t("div",{staticClass:"orderingUser acea-row row-middle"},[t("span",{staticClass:"iconfontYI icon-yonghu2"}),e._v(e._s(e.orderInfo.real_name)+"\n  ")]),t("div",{staticClass:"address"},[t("div",{staticClass:"name"},[e._v("\n      "+e._s(e.orderInfo.real_name)),t("span",{staticClass:"phone"},[e._v(e._s(e.orderInfo.user_phone))])]),t("div",[e._v(e._s(e.orderInfo.user_address))])]),e._m(0),t("div",{staticClass:"pos-order-goods"},e._l(e.orderInfo.cartInfo,(function(r,s){return t("div",{key:s,staticClass:"goods acea-row row-between-wrapper"},[t("div",{staticClass:"picTxt acea-row row-between-wrapper"},[t("div",{staticClass:"pictrue"},[t("img",{attrs:{src:r.productInfo.image}})]),t("div",{staticClass:"text"},[t("div",{staticClass:"info line2"},[e._v("\n            "+e._s(r.productInfo.store_name)+"\n          ")]),t("div",{staticClass:"attr"},[e._v(e._s(r.productInfo.attrInfo.suk))])])]),t("div",{staticClass:"money"},[t("div",{staticClass:"x-money"},[e._v("￥"+e._s(r.productInfo.attrInfo.price))]),t("div",{staticClass:"num"},[e._v("x"+e._s(r.cart_num))]),t("div",{staticClass:"y-money"},[e._v("￥"+e._s(r.productInfo.ot_price))])])])})),0),t("div",{staticClass:"public-total"},[e._v("\n    共"+e._s(e.orderInfo.cart_num)+"件商品，应支付 "),t("span",{staticClass:"money"},[e._v("￥"+e._s(e.orderInfo.pay_price))]),e._v(" ( 邮费 ¥"+e._s(e.orderInfo.pay_postage)+"\n    )\n  ")]),t("div",{staticClass:"wrapper"},[t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("订单编号：")]),t("div",{staticClass:"conter acea-row row-middle row-right"},[e._v("\n        "+e._s(e.orderInfo.order_id)+"\n        "),t("span",{staticClass:"copy copy-data",on:{click:function(t){return e.copyText(e.orderInfo.order_id)}}},[e._v("复制")])])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("支付时间：")]),t("div",{staticClass:"conter"},[e._v(e._s(e.orderInfo._pay_time))])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("支付状态：")]),t("div",{staticClass:"conter"},[e._v("\n        "+e._s(e.title)+"\n      ")])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("支付方式：")]),t("div",{staticClass:"conter"},[e._v("\n        "+e._s(e.orderInfo._status?e.orderInfo._status._payType:"")+"\n      ")])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("买家留言：")]),t("div",{staticClass:"conter"},[e._v(e._s(e.orderInfo.mark))])])]),t("div",{staticClass:"wrapper"},[t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("支付金额：")]),t("div",{staticClass:"conter"},[e._v("￥"+e._s(e.orderInfo.total_price))])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("优惠券抵扣：")]),t("div",{staticClass:"conter"},[e._v("-￥"+e._s(e.orderInfo.coupon_price))])]),t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("运费：")]),t("div",{staticClass:"conter"},[e._v("￥"+e._s(e.orderInfo.total_postage))])]),t("div",{staticClass:"actualPay acea-row row-right"},[e._v("\n      实付款："),t("span",{staticClass:"money font-color-red"},[e._v("￥"+e._s(e.orderInfo.pay_price))])])]),"express"===e.orderInfo.deliveryType?t("div",{staticClass:"wrapper"},[t("div",{staticClass:"item acea-row row-between"},[t("div",[e._v("配送方式：")]),"express"===e.orderInfo.delivery_type?t("div",{staticClass:"conter"},[e._v("快递")]):e._e(),"send"===e.orderInfo.delivery_type?t("div",{staticClass:"conter"},[e._v("送货")]):e._e()]),t("div",{staticClass:"item acea-row row-between"},["express"===e.orderInfo.delivery_type?t("div",[e._v("快递公司：")]):e._e(),"send"===e.orderInfo.delivery_type?t("div",[e._v("送货人：")]):e._e(),t("div",{staticClass:"conter"},[e._v(e._s(e.orderInfo.deliveryName))])]),t("div",{staticClass:"item acea-row row-between"},["express"===e.orderInfo.delivery_type?t("div",[e._v("快递单号：")]):e._e(),"send"===e.orderInfo.delivery_type?t("div",[e._v("送货人电话：")]):e._e(),t("div",{staticClass:"conter"},[e._v("\n        "+e._s(e.orderInfo.delivery_id)),t("span",{staticClass:"copy copy-data",on:{click:function(t){return e.copyText(e.orderInfo.delivery_id)}}},[e._v("复制")])])])]):e._e(),t("div",{staticStyle:{height:"1.2rem"}}),"looks"!=e.$route.params.goname?t("div",{staticClass:"footer acea-row row-right row-middle"},[t("div",{staticClass:"more"}),0===e.types?t("div",{staticClass:"bnt cancel",on:{click:function(t){return e.modify(0)}}},[e._v("一键改价")]):e._e(),-1===e.types?t("div",{staticClass:"bnt cancel",on:{click:function(t){return e.modify(0)}}},[e._v("立即退款")]):e._e(),t("div",{staticClass:"bnt cancel",on:{click:function(t){return e.modify(1)}}},[e._v("订单备注")]),"offline"===e.orderInfo.pay_type&&0===e.orderInfo.paid?t("div",{staticClass:"bnt cancel",on:{click:e.offlinePay}},[e._v("\n      确认付款\n    ")]):e._e(),1===e.types&&2!==e.orderInfo.shipping_type?t("router-link",{staticClass:"bnt delivery",attrs:{to:"/kefu/orderDelivery/"+e.orderInfo.id+"/"+e.orderInfo.order_id}},[e._v("去发货\n    ")]):e._e()],1):e._e(),t("PriceChange",{attrs:{change:e.change,orderInfo:e.orderInfo,status:e.status},on:{closechange:function(t){return e.changeclose(t)},closeChange:function(t){return e.closeChange(t)}}})],1):e._e()}),s,!1,null,"1e2ff13d",null);t.default=i.exports}}]);