{"version":3,"sources":["webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?26b0","webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?b37c","webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?5492","webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?d69d","uni-app:///uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue","webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?09de","webpack:///C:/Users/46708/Desktop/uni-app/uni-app/uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue?94f4"],"names":["touch","name","mixins","options","virtualHost","props","option","type","default","width","height","exportBase64","data","canvasId","ctx","webviewReady","webviewChart","webviewCallback","computed","wrapStyle","addUnit","addStyle","watch","methods","getCanvasAttr2d","query","select","fields","node","size","exec","echarts","resolve","canvas","canvasWidth","canvasHeight","canvasDpr","getCanvasAttr","in","initChart","canvasAttr","chartList","devicePixelRatio","toImageFile","opt","self","toImageFileHandle","uni","fail","complete","rest","success","tempFilePath","base64Str","errMsg","base64","touchStart","handler","zrX","zrY","touchMove","touchEnd","clearChart","beforeDestroy","mounted","series"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AAC4K;AAC5K,gBAAgB,qLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuoB,CAAgB,4pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACqB3pB;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;EACA;IACA;IACAA;IACAA;EACA;EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA,gBAUA;EACAC;EACAC;EAEA;EACAC;IACAC;EACA;EAEAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;IACA;IACAG;MACAJ;MACAC;IACA;EACA;EACAI;IACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;QAAAT;MACA;QAAAU;QAAAC;MACA;QAAAZ;QAAAC;MAAA;IACA;EACA;EACAY;IACAhB;MACA;QACA;MACA;IACA;EAMA;EACAiB;IACAC;MAAA;MACA;QACA;QACAC,MACAC,6BACAC;UACAC;UACAC;QACA,GACAC;UACA;UACA;UACA;UACA;UACA;UACA;UAEA;UACAC;YACA;UACA;UACAC;YACAC;YACAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACAN;UACA;QACA;QACA;QACA,sCAEAO;QAEAb;UACA;UACA;UACAO;YACAC;YACAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IAeA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAMA;cAAA;gBAAAC;gBAMAP,SAIAO,WAJAP,QACAC,cAGAM,WAHAN,aACAC,eAEAK,WAFAL,cACAC,YACAI,WADAJ;gBAEAK;kBACAhC;kBACAC;kBACAgC;gBACA;;gBACAT;gBACAQ;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAE;MACA;MAMA,sCAEAL;MAEAb;QAAAG;QAAAC;MAAA;QACA;QACAe;QACAC;QACA;MACA;IAWA;IACAC;MACA;QACAC;MACA;QACA;UAAAC;UAAAC;UAAAC;QACAH,yDACAG;UACAC;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBACAC;sBAAA;sBAAA,OACAL;oBAAA;sBAAAM;sBACAF;wBAAAG;wBAAAF;wBAAAG;sBAAA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CACA;YAAA;cAAA;YAAA;YAAA;UAAA;UACAP;YACAA;UACA;UACAC;YACAA;UACA;QAAA,GACA;MACA;IACA;IAEAO;MACA;QACA;QACA;QACAC;UACAC;UACAC;QACA;QACAF;UACAC;UACAC;QACA;QACAF;MACA;IACA;IACAG;MACA;QACA;QACA;QACAH;UACAC;UACAC;QACA;QACAF;MACA;IACA;IACAI;MACA;QACA;QACA;QACAJ;UACAC;UACAC;QACA;QACAF;UACAC;UACAC;QACA;QACAF;MACA;IACA;IAkCAK;MAKA;QACArB;MACA;IACA;EACA;EACAsB;IACA;EACA;EACAC;IACA;IACA;IACAjC;MACA;QACA;UACAzB;YACA2D;UACA;QACA;UACA3D;QACA;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;AClWA;AAAA;AAAA;AAAA;AAAsuC,CAAgB,msCAAG,EAAC,C;;;;;;;;;;;ACA1vC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/ui-echarts/components/ui-echarts/ui-echarts.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./ui-echarts.vue?vue&type=template&id=cd8c07a2&scoped=true&\"\nvar renderjs\nimport script from \"./ui-echarts.vue?vue&type=script&lang=js&\"\nexport * from \"./ui-echarts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ui-echarts.vue?vue&type=style&index=0&id=cd8c07a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd8c07a2\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/ui-echarts/components/ui-echarts/ui-echarts.vue\"\nexport default component.exports","export * from \"-!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ui-echarts.vue?vue&type=template&id=cd8c07a2&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ui-echarts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ui-echarts.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"ui-echarts\" :class=\"[customClass]\" :style=\"wrapStyle\">\r\n\t<!-- #ifndef APP-NVUE -->\r\n\t\t<!-- #ifdef MP-WEIXIN || MP-TOUTIAO -->\r\n\t\t<canvas class=\"ui-echarts_canvas\" :style=\"wrapStyle\" :canvas-id=\"canvasId\" :id=\"canvasId\" @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\" type=\"2d\" />\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifndef MP-WEIXIN || MP-TOUTIAO -->\r\n\t\t<canvas class=\"ui-echarts_canvas\" :style=\"wrapStyle\" :canvas-id=\"canvasId\" :id=\"canvasId\" @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\" />\r\n\t\t<!-- #endif -->\r\n\t<!-- #endif -->\r\n\t<!-- #ifdef APP-NVUE -->\r\n\t\t<web-view ref=\"webview\" class=\"ui-echarts_webview\"\r\n\t\t\tsrc=\"/uni_modules/ui-echarts/static/index.html\"\r\n\t\t\t:style=\"wrapStyle\" \r\n\t\t\t:id=\"canvasId\"\r\n\t\t\t@onPostMessage=\"onPostMessage\">\r\n\t\t</web-view>\r\n\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport * as echarts from '../../static/echarts.min.js';\r\n\timport * as ecStat from '../../static/ecStat.min.js';\r\n\timport WxCanvas from '../../static/wxcanvas.js';\r\n\t\r\n\tlet chartList = {};\r\n\t\r\n\tfunction wrapTouch(event) {\r\n\t\tfor (let i = 0; i < event.touches.length; ++i) {\r\n\t\t\tconst touch = event.touches[i];\r\n\t\t\ttouch.offsetX = touch.x;\r\n\t\t\ttouch.offsetY = touch.y;\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n\t/**\r\n\t * Echart 图表工具\r\n\t * @description 通过折叠面板收纳内容区域（搭配ui-collapse使用）\r\n\t * @tutorial https://echarts.apache.org/zh/api.html#echarts\r\n\t * @property {String}\t\t\toption \t\t\t\t\t\t图表配置\r\n\t * @property {String | Number}\twidth\t\t\t\t\t\t宽度，默认100%\r\n\t * @property {String | Number}\theight\t\t\t\t\t\t高度，默认300px\r\n\t * @property {Boolean}\t\t\texportBase64=[base64] \t\t输出类型, 默认false\r\n\t * @example\r\n\t */\r\n\texport default {\r\n\t\tname: 'ui-echarts',\r\n\t\tmixins: [uni.$ui.mixin],\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\t// 将自定义节点设置成虚拟的，更加接近Vue组件的表现，能更好的使用flex属性\r\n\t\toptions: {\r\n\t\t    virtualHost: true\r\n\t\t},\r\n\t\t// #endif\r\n\t\tprops: {\r\n\t\t\toption: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twidth: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: '100%',\r\n\t\t\t},\r\n\t\t\theight: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: '600rpx'\r\n\t\t\t},\r\n\t\t\t// 输出类型, base64输出base64, H5无效。\r\n\t\t\texportBase64: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanvasId: `canvas_${uni.$ui.guid(10)}`,\r\n\t\t\t\tctx: null,\r\n\t\t\t\t// 网页初始化就绪。用于NVUE\r\n\t\t\t\twebviewReady: false,\r\n\t\t\t\t// 图表初始化就绪。用于NVUE\r\n\t\t\t\twebviewChart: false,\r\n\t\t\t\t// 图表导出图片临时文件\r\n\t\t\t\twebviewCallback: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\twrapStyle () {\r\n\t\t\t\tconst { width, height } = this;\r\n\t\t\t\tconst { addUnit, addStyle } = uni.$ui;\r\n\t\t\t\treturn addStyle({width: addUnit(width), height: addUnit(height)}, 'string')\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\toption(newValue, oldValue) {\r\n\t\t\t\tif(newValue.series){\r\n\t\t\t\t\tthis.initChart(newValue)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\twebviewReady(state) {\r\n\t\t\t\tthis.initChart(this.option);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetCanvasAttr2d() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst query = uni.createSelectorQuery().in(this)\r\n\t\t\t\t\tquery\r\n\t\t\t\t\t\t.select('#' + this.canvasId)\r\n\t\t\t\t\t\t.fields({\r\n\t\t\t\t\t\t\tnode: true,\r\n\t\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\t\tconst canvasNode = res[0].node\r\n\t\t\t\t\t\t\tthis.canvasNode = canvasNode\r\n\t\t\t\t\t\t\tconst canvasDpr = uni.getSystemInfoSync().pixelRatio\r\n\t\t\t\t\t\t\tconst canvasWidth = res[0].width\r\n\t\t\t\t\t\t\tconst canvasHeight = res[0].height\r\n\t\t\t\t\t\t\tthis.ctx = canvasNode.getContext('2d')\r\n\t\t\t\r\n\t\t\t\t\t\t\tconst canvas = new WxCanvas(this.ctx, this.canvasId, true, canvasNode)\r\n\t\t\t\t\t\t\techarts.setCanvasCreator(() => {\r\n\t\t\t\t\t\t\t\treturn canvas\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\t\tcanvas,\r\n\t\t\t\t\t\t\t\tcanvasWidth,\r\n\t\t\t\t\t\t\t\tcanvasHeight,\r\n\t\t\t\t\t\t\t\tcanvasDpr\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetCanvasAttr() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.ctx = uni.createCanvasContext(this.canvasId, this);\r\n\t\t\t\t\tvar canvas = new WxCanvas(this.ctx, this.canvasId, false);\r\n\t\t\t\t\techarts.setCanvasCreator(() => {\r\n\t\t\t\t\t\treturn canvas;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst canvasDpr = 1\r\n\t\t\t\t\tvar query = uni.createSelectorQuery()\r\n\t\t\t\t\t\t// #ifndef MP-ALIPAY\r\n\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tquery.select('#' + this.canvasId).boundingClientRect(res => {\r\n\t\t\t\t\t\tconst canvasWidth = res.width\r\n\t\t\t\t\t\tconst canvasHeight = res.height\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tcanvas,\r\n\t\t\t\t\t\t\tcanvasWidth,\r\n\t\t\t\t\t\t\tcanvasHeight,\r\n\t\t\t\t\t\t\tcanvasDpr\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #ifdef H5\r\n\t\t\t//H5绘制图表\r\n\t\t\tinitChart(option) {\r\n\t\t\t\tthis.ctx = uni.createCanvasContext(this.canvasId, this);\r\n\t\t\t\tchartList[this.canvasId] = echarts.init(document.getElementById(this.canvasId));\r\n\t\t\t\tchartList[this.canvasId].setOption(option?option:this.option);\r\n\t\t\t},\r\n\t\t\t//H5生成图片\r\n\t\t\ttoImageFile(opt) {\r\n\t\t\t\tconst base64 = chartList[this.canvasId].getDataURL()\r\n\t\t\t\topt.success && opt.success({tempFilePath: base64, base64 })\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t// #ifndef H5\r\n\t\t\t//绘制图表\r\n\t\t\tasync initChart(option) {\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.chartInitOption(option);\r\n\t\t\t\treturn;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO \r\n\t\t\t\tconst canvasAttr = await this.getCanvasAttr2d();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef MP-WEIXIN || MP-TOUTIAO\r\n\t\t\t\tconst canvasAttr = await this.getCanvasAttr();\r\n\t\t\t\t// #endif\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcanvas,\r\n\t\t\t\t\tcanvasWidth,\r\n\t\t\t\t\tcanvasHeight,\r\n\t\t\t\t\tcanvasDpr\r\n\t\t\t\t} = canvasAttr\r\n\t\t\t\tchartList[this.canvasId] = echarts.init(canvas, null, {\r\n\t\t\t\t\twidth: canvasWidth,\r\n\t\t\t\t\theight: canvasHeight,\r\n\t\t\t\t\tdevicePixelRatio: canvasDpr // new\r\n\t\t\t\t});\r\n\t\t\t\tcanvas.setChart(chartList[this.canvasId]);\r\n\t\t\t\tchartList[this.canvasId].setOption(option?option:this.option);\r\n\t\t\t},\r\n\t\t\t//生成图片\r\n\t\t\ttoImageFile(opt) {\r\n\t\t\t\tconst self = this;\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.chartToImage(opt);\r\n\t\t\t\treturn;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO\r\n\t\t\t\tvar query = uni.createSelectorQuery()\r\n\t\t\t\t\t// #ifndef MP-ALIPAY\r\n\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t// #endif\r\n\t\t\t\tquery.select('#' + this.canvasId).fields({ node: true, size: true }).exec(res => {\r\n\t\t\t\t\tconst canvasNode = res[0].node\r\n\t\t\t\t\topt.canvas = canvasNode\r\n\t\t\t\t\tself.toImageFileHandle(opt)\r\n\t\t\t\t\t// uni.canvasToTempFilePath(opt, this)\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef MP-WEIXIN || MP-TOUTIAO\r\n\t\t\t\tif (!opt.canvasId) {\r\n\t\t\t\t\topt.canvasId = this.canvasId;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.draw(true, () => {\r\n\t\t\t\t\tself.toImageFileHandle(opt)\r\n\t\t\t\t\t// uni.canvasToTempFilePath(opt, this);\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\ttoImageFileHandle (opt) {\r\n\t\t\t\tif (!this.exportBase64) {\r\n\t\t\t\t\tuni.canvasToTempFilePath(opt, this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst { success, fail, complete, ...rest } = opt;\r\n\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t...rest,\r\n\t\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t\tconst tempFilePath = res.tempFilePath;\r\n\t\t\t\t\t\t\tconst base64Str = await uni.$ui.base64.pathToBase64(tempFilePath);\r\n\t\t\t\t\t\t\tsuccess && success({ errMsg: res.errMsg, tempFilePath, base64: base64Str })\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\tfail && fail(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t\tcomplete && complete(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\ttouchStart(e) {\r\n\t\t\t\tif (chartList[this.canvasId] && e.touches.length > 0) {\r\n\t\t\t\t\tvar touch = e.touches[0];\r\n\t\t\t\t\tvar handler = chartList[this.canvasId].getZr().handler;\r\n\t\t\t\t\thandler.dispatch('mousedown', {\r\n\t\t\t\t\t\tzrX: touch.x,\r\n\t\t\t\t\t\tzrY: touch.y\r\n\t\t\t\t\t});\r\n\t\t\t\t\thandler.dispatch('mousemove', {\r\n\t\t\t\t\t\tzrX: touch.x,\r\n\t\t\t\t\t\tzrY: touch.y\r\n\t\t\t\t\t});\r\n\t\t\t\t\thandler.processGesture(wrapTouch(e), 'start');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchMove(e) {\r\n\t\t\t\tif (chartList[this.canvasId] && e.touches.length > 0) {\r\n\t\t\t\t\tvar touch = e.touches[0];\r\n\t\t\t\t\tvar handler = chartList[this.canvasId].getZr().handler;\r\n\t\t\t\t\thandler.dispatch('mousemove', {\r\n\t\t\t\t\t\tzrX: touch.x,\r\n\t\t\t\t\t\tzrY: touch.y\r\n\t\t\t\t\t});\r\n\t\t\t\t\thandler.processGesture(wrapTouch(e), 'change');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t\tif (chartList[this.canvasId]) {\r\n\t\t\t\t\tconst touch = e.changedTouches ? e.changedTouches[0] : {};\r\n\t\t\t\t\tvar handler = chartList[this.canvasId].getZr().handler;\r\n\t\t\t\t\thandler.dispatch('mouseup', {\r\n\t\t\t\t\t\tzrX: touch.x,\r\n\t\t\t\t\t\tzrY: touch.y\r\n\t\t\t\t\t});\r\n\t\t\t\t\thandler.dispatch('click', {\r\n\t\t\t\t\t\tzrX: touch.x,\r\n\t\t\t\t\t\tzrY: touch.y\r\n\t\t\t\t\t});\r\n\t\t\t\t\thandler.processGesture(wrapTouch(e), 'end');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tchartInitOption (option) {\r\n\t\t\t\tthis.webviewReady && this.$refs.webview.evalJs(`setOption(${JSON.stringify(option)})`);\r\n\t\t\t},\r\n\t\t\tchartToImage (opt) {\r\n\t\t\t\tthis.webviewCallback = opt;\r\n\t\t\t\tthis.webviewReady && this.webviewChart && this.$refs.webview.evalJs(`toImage()`);\r\n\t\t\t},\r\n\t\t\tchartClear () {\r\n\t\t\t\tthis.webviewReady && this.webviewChart && this.$refs.webview.evalJs(`clearChart()`);\r\n\t\t\t},\r\n\t\t\tasync onPostMessage (evt) {\r\n\t\t\t\t/**\r\n\t\t\t\t * 1: 准备就绪（webview）\r\n\t\t\t\t * 2: 初始化echarts\r\n\t\t\t\t * 3: 设置echarts option\r\n\t\t\t\t * 4: 导出图片\r\n\t\t\t\t * 5: 销毁echarts实例\r\n\t\t\t\t * */\r\n\t\t\t\tconst res = evt?.detail?.data[0] || { state: 0 };\r\n\t\t\t\tif (res.state === 1) {\r\n\t\t\t\t\tthis.webviewReady = true;\r\n\t\t\t\t} else if (res.state === 2) {\r\n\t\t\t\t\tthis.webviewChart = true;\r\n\t\t\t\t} else if (res.state === 3) {\r\n\t\t\t\t\t// option 更新成功\r\n\t\t\t\t} else if (res.state === 4) {\r\n\t\t\t\t\tconst opt = { ...this.webviewCallback };\r\n\t\t\t\t\tconst filePath = await uni.$ui.base64.base64ToPath(res.base64);\r\n\t\t\t\t\topt.success && opt.success({ errMsg: 'ok', tempFilePath: filePath, base64: res.base64 });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tclearChart () {\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.chartClear();\r\n\t\t\t\treturn;\r\n\t\t\t\t// #endif\r\n\t\t\t\tif (chartList[this.canvasId]) {\r\n\t\t\t\t\tchartList[this.canvasId].clear()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tthis.clearChart();\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// Disable prograssive because drawImage doesn't support DOM as parameter\r\n\t\t\t// See https://developers.weixin.qq.com/miniprogram/dev/api/canvas/CanvasContext.drawImage.html\r\n\t\t\techarts.registerPreprocessor(option => {\r\n\t\t\t\tif (option && option.series) {\r\n\t\t\t\t\tif (option.series.length > 0) {\r\n\t\t\t\t\t\toption.series.forEach(series => {\r\n\t\t\t\t\t\t\tseries.progressive = 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (typeof option.series === 'object') {\r\n\t\t\t\t\t\toption.series.progressive = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.ui-echarts {\r\n\t\tflex: 1;\r\n\t\t\r\n\t\t&_canvas {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ui-echarts.vue?vue&type=style&index=0&id=cd8c07a2&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ui-echarts.vue?vue&type=style&index=0&id=cd8c07a2&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1724566765348\n      var cssReload = require(\"D:/tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}